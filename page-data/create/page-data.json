{"componentChunkName":"component---src-templates-post-jsx","path":"/create/","result":{"data":{"site":{"siteMetadata":{"title":"ì†Œì‰ë°ì´"}},"markdownRemark":{"id":"4afa5d86-ed15-50b5-93d9-a68aad9c6661","excerpt":"íŒ©í† ë¦¬ íŒ¨í„´ êµ¬ìƒ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶€ë¶„ì„ ìº¡ìŠí™”í•˜ê¸° í”¼ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” êµ¬ìƒ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ë¶€ë¶„ì´ ìƒí™©ì´ ë³€í•˜ë©´ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤. ê°ì²´ ìƒì„± ë¶€ë¶„ ìº¡ìŠí™” í•˜ê¸° í”¼ì ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶€ë¶„ì„ SimplePizzaFactoryë¡œ ë„˜ê²¼ì„ ë•Œì˜ ì¥ì ì€? íŒ©í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í”¼ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì´ ë§ì•„ ìƒì„±í•˜ëŠ” ì‘ì—…ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ â€¦","html":"<h2 id=\"íŒ©í† ë¦¬-íŒ¨í„´\" style=\"position:relative;\">íŒ©í† ë¦¬ íŒ¨í„´<a href=\"#%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4\" aria-label=\"íŒ©í† ë¦¬ íŒ¨í„´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"êµ¬ìƒ-í´ë˜ìŠ¤ì˜-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±-ë¶€ë¶„ì„-ìº¡ìŠí™”í•˜ê¸°\" style=\"position:relative;\">êµ¬ìƒ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶€ë¶„ì„ ìº¡ìŠí™”í•˜ê¸°<a href=\"#%EA%B5%AC%EC%83%81-%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B6%80%EB%B6%84%EC%9D%84-%EC%BA%A1%EC%8A%90%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"êµ¬ìƒ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶€ë¶„ì„ ìº¡ìŠí™”í•˜ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Pizza</span> <span class=\"token function\">orderPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Pizza</span> pizz<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheese\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CheesePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"greek\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GreekPizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"veggie\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VeggiePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> pizza<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>í”¼ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” êµ¬ìƒ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ë¶€ë¶„ì´ ìƒí™©ì´ ë³€í•˜ë©´ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.</li>\n</ul>\n<!-- more -->\n<h3 id=\"ê°ì²´-ìƒì„±-ë¶€ë¶„-ìº¡ìŠí™”-í•˜ê¸°\" style=\"position:relative;\">ê°ì²´ ìƒì„± ë¶€ë¶„ ìº¡ìŠí™” í•˜ê¸°<a href=\"#%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1-%EB%B6%80%EB%B6%84-%EC%BA%A1%EC%8A%90%ED%99%94-%ED%95%98%EA%B8%B0\" aria-label=\"ê°ì²´ ìƒì„± ë¶€ë¶„ ìº¡ìŠí™” í•˜ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimplePizzaFactory</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Pizza</span> <span class=\"token function\">createPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheese\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CheesePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"greek\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GreekPizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"veggie\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VeggiePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\n\t\t<span class=\"token keyword\">return</span> pizza<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>í”¼ì ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶€ë¶„ì„ SimplePizzaFactoryë¡œ ë„˜ê²¼ì„ ë•Œì˜ ì¥ì ì€?</p>\n<ul>\n<li>íŒ©í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í”¼ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì´ ë§ì•„ ìƒì„±í•˜ëŠ” ì‘ì—…ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ìƒì„±í•˜ëŠ” ëª¨ë“  ë¶€ë¶„ì„ ê³ ì³ì¤˜ì•¼ í•œë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"í´ë¼ì´ì–¸íŠ¸-ì½”ë“œ-ìˆ˜ì •\" style=\"position:relative;\">í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ìˆ˜ì •<a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%88%98%EC%A0%95\" aria-label=\"í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ìˆ˜ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PizzaStore</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">SimplePizzaFactory</span> factory<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// ìƒì„±ì</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Pizza</span> <span class=\"token function\">orderPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">Pizza</span> pizza<span class=\"token punctuation\">;</span>\n\n\t\tpizza <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">createPizza</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">bake</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">cut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> pizza<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"íŒ©í† ë¦¬-ë©”ì„œë“œ-íŒ¨í„´\" style=\"position:relative;\">íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´<a href=\"#%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8C%A8%ED%84%B4\" aria-label=\"íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>ìš”êµ¬ì‚¬í•­ì´ ë°”ë€Œì–´ í”¼ìë¥¼ ê° ì§€ì ë§ˆë‹¤ ê·¸ ì§€ì—­ì˜ íŠ¹ì„±ê³¼ ì…ë§›ì„ ë°˜ì˜í•œ ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ì˜ í”¼ìë¥¼ ë§Œë“¤ì–´ì•¼ ëœë‹¤ë©´?</li>\n<li>PizzaStore í´ë˜ìŠ¤ë¥¼ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë³€ê²½</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PizzaStore</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Pizza</span> <span class=\"token function\">orderPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">Pizza</span> pizza<span class=\"token punctuation\">;</span>\n\n\t\tpizza <span class=\"token operator\">=</span> <span class=\"token function\">createPizza</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">bake</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">cut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpizza<span class=\"token punctuation\">.</span><span class=\"token function\">box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> pizza<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Pizza</span> <span class=\"token function\">createPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ê° ì§€ì ì— ë§ëŠ” ì„œë¸Œí´ë˜ìŠ¤ë¥¼ ìƒì„±(<code class=\"language-text\">NYPizzaStore</code>, <code class=\"language-text\">ChicagoPizzastore</code>, <code class=\"language-text\">CaliforniaPizzaStore</code>)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NYPizzaSotre</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PizzaStore</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Pizza</span> <span class=\"token function\">createPizza</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cheese\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NYStyleCheesePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"greek\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NYStyleGreekPizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span><span class=\"token function\">equlas</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"veggie\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tpizza <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NYStyleVeggiePizza</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\n\t\t<span class=\"token keyword\">return</span> pizza<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"íŒ©í† ë¦¬-ë©”ì„œë“œ-íŒ¨í„´ì˜-ì •ì˜\" style=\"position:relative;\">íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì˜ ì •ì˜<a href=\"#%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-label=\"íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì˜ ì •ì˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì—ì„œëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.</li>\n<li>ì–´ë–¤ í´ë˜ìŠ¤ì˜ ì¸ì„œí„´ìŠ¤ë¥¼ ë§Œë“¤ì§€ëŠ” ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ê²°ì •í•œë‹¤.</li>\n<li>íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“œëŠ” ì¼ì„ ì„œë¸Œ í´ë˜ìŠ¤ì—ê²Œ ë§¡ê¸°ê²Œ ëœë‹¤.</li>\n</ul>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/76e137c9-a893-4709-9681-52da226edbc0/Untitled.png\" alt=\"Untitled\"></p>\n<ul>\n<li><strong>Product - ìƒì„±ë  ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤</strong></li>\n<li><strong>ConcreteProduct - Product ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬ìƒ í´ë˜ìŠ¤.</strong></li>\n<li><strong>Creator - ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤</strong></li>\n<li><strong>ConcreteCreator - Creator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬ìƒ í´ë˜ìŠ¤.</strong></li>\n</ul>\n<h3 id=\"ì˜ì¡´ì„±-ì—­ì „-ì›ì¹™\" style=\"position:relative;\">ì˜ì¡´ì„± ì—­ì „ ì›ì¹™<a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99\" aria-label=\"ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<aside>\nğŸ’¡ ì¶”ìƒí™”ëœ ê²ƒì— ì˜ì¡´í•˜ê²Œ ë§Œë“¤ê³  êµ¬ìƒ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê²Œ ë§Œë“ ë‹¤.\n</aside>\n<ul>\n<li>\n<p>ê³ ìˆ˜ì¤€ êµ¬ì„± ìš”ì†Œê°€ ì €ìˆ˜ì¤€ êµ¬ì„± ìš”ì†Œì— ì˜ì¡´í•˜ë©´ ì•ˆë˜ë©°, í•­ìƒ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</p>\n<ul>\n<li>ë³€ìˆ˜ì— êµ¬ìƒ í´ë˜ìŠ¤ì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>new ì—°ì‚°ìëŠ” êµ¬ìƒ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë¯€ë¡œ íŒ©í† ë¦¬ë¥¼ ì¨ì„œ ë°©ì§€</li>\n<li>êµ¬ìƒ í´ë˜ìŠ¤ì—ì„œ ìœ ë„ëœ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì§€ ë§™ì‹œë‹¤.</li>\n<li>ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤ì²˜ëŸ¼ ì¶”ìƒí™”ëœ ê²ƒìœ¼ë¡œë¶€í„° í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ ëœë‹¤.</li>\n<li>ë² ì´ìŠ¤ í´ë˜ìŠ¤ì— ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆëŠ” ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆëŠ” ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•œë‹¤ë©´ ë² ì´ìŠ¤ í´ë˜ìŠ¤ê°€ ì œëŒ€ë¡œ ì¶”ìƒí™”ë˜ì§€ ì•Šì•˜ë‹¤.</li>\n<li>ë² ì´ìŠ¤ í´ë˜ìŠ¤ì—ì„œ ë©”ì„œë“œë¥¼ ì •ì˜í•  ë•ŒëŠ” ëª¨ë“  ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê²ƒë§Œ ì •ì˜í•´ì•¼í•œë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ì¶”ìƒ-íŒ©í† ë¦¬-íŒ¨í„´ì˜-ì •ì˜\" style=\"position:relative;\">ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì •ì˜<a href=\"#%EC%B6%94%EC%83%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-label=\"ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì •ì˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì€ êµ¬ìƒ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê³ ë„ ì„œë¡œ ì—°ê´€ë˜ê±°ë‚˜ ì˜ì¡´ì ì¸ ê°ì²´ë¡œ ì´ë£¨ì–´ì§„ ì œí’ˆêµ°ì„ ìƒì‚°í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. êµ¬ìƒ í´ë˜ìŠ¤ëŠ” ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ë§Œë“­ë‹ˆë‹¤.</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de39a91d2147771b4badfb54d79d5092/973af/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.88235294117648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACe0lEQVR42p1Ty27TQBTN37FhB+qnwJJFV3SFQKpgxapkhxBUbEC0KmpTlDRPx0naxImbeBLbiR+J49oeO4e5owZU6INi6VqWxz5zXpPDNVeSJJhMJuh0OigWi+j3+7BtG/9y5a57maYpBoMB2u02er0eFosFlsslVqvV/wFyztHtdlGpVNBqqRiNhphNbQGY/Zp7ARKT+XyO6XQK3/fh+gHCC34/yQQSBIEEsSxbeGZJMJ5mCKwmptoBLO0QVu8A3qiMLMtuB6QPKIh6vY5yuSy9c10H8yCCebSJ+s5DVPMb0D8+glt4iiiO1lRuBjRNE81mE2dnZ5Ip5wmCZYzJ4TO08g+gfdiA//UxopMniKI7AEnybDaDpmlydF0X0i3ESQqmvMfp/hbOj7dhHL+A2cjL4O4MhUDjOJY9DMNQ1oWYRzGXwPS8EIx5tro9lHW/CIS6R0VOhEck2XVdOSQtFu+q1QpOO23wJL6bIZV3OBzCMBhSwYKI0Ca+78myk0xaZ2NLpn8joOM4MgxVDE9FfVyGzvfXqH17g8CfSuCuCKrRqCMII1iDEpQvW/AmnUursquA1DfDMGCK2hBgODcxruWhFd/Bc0z5oS0CYozBny9h6lUY1R14Vldu9hfgn8GQXyRR0xkaSlNa8Xs9k15GPEVP60NVVRnk+t8c3Si99awDomSp6EwwpxO07iqtk380jI1hjEZILiskAa8yE8HM+pi0djFsfEJy4craklQ6ilwoC5whtB9v5Vz4BhZBKE8VWUah5cg/Gs9zRcciaMoeSrubOPn8HOPzNhzXR6lURKFwhLFpg+kK1L2XUPdfgQ0UkbiJWq0GRVHk6foJpjENiJTi3HUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/de39a91d2147771b4badfb54d79d5092/ca1dc/img_2.png\"\n        srcset=\"/static/de39a91d2147771b4badfb54d79d5092/e7570/img_2.png 170w,\n/static/de39a91d2147771b4badfb54d79d5092/f46e7/img_2.png 340w,\n/static/de39a91d2147771b4badfb54d79d5092/ca1dc/img_2.png 680w,\n/static/de39a91d2147771b4badfb54d79d5092/02d09/img_2.png 1020w,\n/static/de39a91d2147771b4badfb54d79d5092/9d567/img_2.png 1360w,\n/static/de39a91d2147771b4badfb54d79d5092/973af/img_2.png 1956w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Untitled</figcaption>\n  </figure></p>\n<h3 id=\"íŒ©í† ë¦¬-ë©”ì„œë“œ-íŒ¨í„´ê³¼-ì¶”ìƒ-íŒ©í† ë¦¬-íŒ¨í„´ì˜-ì°¨ì´\" style=\"position:relative;\">íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ê³¼ ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì°¨ì´<a href=\"#%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8C%A8%ED%84%B4%EA%B3%BC-%EC%B6%94%EC%83%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%B0%A8%EC%9D%B4\" aria-label=\"íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ê³¼ ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì°¨ì´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>íŒ©í„°ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì€ í•˜ë‚˜ì˜ ë©”ì„œë“œê°€ ì—¬ëŸ¬ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤</li>\n<li>ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì€ íŒ©í„°ë¦¬ ìì²´ê°€ ì¸í„°í˜ì´ê³  ì„œë¸Œ í´ë˜ìŠ¤ê°€ ì—¬ëŸ¬ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>íŒ©í„°ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì€ í´ë¼ì´ì–¸íŠ¸ì™€ êµ¬ìƒ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬ì‹œì¼œì•¼í•  ë•Œ ì‚¬ìš©í•œë‹¤.</li>\n<li>\n<p>ì¶”ìƒ íŒ©í„°ë¦¬ íŒ¨í„´ì€ í•˜ë‚˜ì˜ ì œí’ˆêµ°ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œë‹¤.</p>\n<ul>\n<li>ë‰´ìš•ì§€ì ì˜ ì œí’ˆêµ°(Dough, Sauce, Cheese, Vaggies ë“±)</li>\n<li>ì œí’ˆêµ°ì„ í•©ì¹˜ëŠ” ë¶€ë¶„ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ì±…ì„</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ì‹±ê¸€í†¤-íŒ¨í„´\" style=\"position:relative;\">ì‹±ê¸€í†¤ íŒ¨í„´<a href=\"#%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4\" aria-label=\"ì‹±ê¸€í†¤ íŒ¨í„´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>ì‹±ê¸€í„´ íŒ¨í„´ì€ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ë§Œë“¤ê³ , ê·¸ ì¸ìŠ¤í„´ìŠ¤ë¡œì˜ ì „ì—­ ì ‘ê·¼ì„ ì œê³µ</li>\n</ul>\n<h3 id=\"ê³ ì „ì ì¸-êµ¬í˜„-ë°©ì‹\" style=\"position:relative;\">ê³ ì „ì ì¸ êµ¬í˜„ ë°©ì‹<a href=\"#%EA%B3%A0%EC%A0%84%EC%A0%81%EC%9D%B8-%EA%B5%AC%ED%98%84-%EB%B0%A9%EC%8B%9D\" aria-label=\"ê³ ì „ì ì¸ êµ¬í˜„ ë°©ì‹ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\t\t\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë‘ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— getInstanceë¥¼ í˜¸ì¶œí•  ë•Œ ì¸ìŠ¤í„´ìŠ¤ê°€ 2ê°œ ë§Œë“¤ì–´ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆë‹¤.</li>\n</ul>\n<h3 id=\"ë™ê¸°í™”ë¥¼-ì´ìš©í•œ-êµ¬í˜„\" style=\"position:relative;\">ë™ê¸°í™”ë¥¼ ì´ìš©í•œ êµ¬í˜„<a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B5%AC%ED%98%84\" aria-label=\"ë™ê¸°í™”ë¥¼ ì´ìš©í•œ êµ¬í˜„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">synchronized</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\t\t\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>synchronized í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•˜ë©´ í•œ ìŠ¤ë ˆë“œê°€ ë©”ì†Œë“œ ì‚¬ìš©ì„ ëë‚´ê¸° ì „ê¹Œì§€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œëŠ” ê¸°ë‹¤ë¦¬ê²Œ ëœë‹¤.</li>\n<li>í•˜ì§€ë§Œ synchronized í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì„±ëŠ¥ì´ ì €í•˜ë˜ê³ , ê°ì²´ê°€ ìƒì„±í•  ì‹œì ì—ë§Œ ë™ê¸°í™”ê°€ í•„ìš”í•œë° ìì›ì„ ë‚­ë¹„í•˜ê²Œ ëœë‹¤.</li>\n</ul>\n<h3 id=\"static-initializer-ë¥¼-ì´ìš©í•œ-êµ¬í˜„\" style=\"position:relative;\">static initializer ë¥¼ ì´ìš©í•œ êµ¬í˜„<a href=\"#static-initializer-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B5%AC%ED%98%84\" aria-label=\"static initializer ë¥¼ ì´ìš©í•œ êµ¬í˜„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>í´ë˜ìŠ¤ê°€ ë¡œë”©ë  ë•Œ JVMì—ì„œ Singletonì´ í•˜ë‚˜ë¿ì¸ ì¸ì„œí„´ìŠ¤ë¥¼ ìƒì„±í•´ì¤€ë‹¤.</li>\n<li>í•˜ì§€ë§Œ ìƒì„±ì‹œì ì„ JVMì—ì„œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— lazy loading ì²˜ëŸ¼ ìƒì„±ì‹œì ì„ ì»¨íŠ¸ë¡¤í•  ìˆ˜ê°€ ì—†ë‹¤.</li>\n</ul>\n<h3 id=\"DCLì„-ì´ìš©í•œ-êµ¬í˜„\" style=\"position:relative;\">DCLì„ ì´ìš©í•œ êµ¬í˜„<a href=\"#DCL%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B5%AC%ED%98%84\" aria-label=\"DCLì„ ì´ìš©í•œ êµ¬í˜„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>DCL(Double-Checked Locking)ì„ ì‚¬ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ í•œ ë‹¤ìŒ ìƒì„±ë˜ì–´ ìˆì§€ ì•Šì„ ë•Œë§Œ ë™ê¸°í™”í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">private</span> volaile <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"enum-ì„-ì‚¬ìš©í•œ-êµ¬í˜„\" style=\"position:relative;\">enum ì„ ì‚¬ìš©í•œ êµ¬í˜„<a href=\"#enum-%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EA%B5%AC%ED%98%84\" aria-label=\"enum ì„ ì‚¬ìš©í•œ êµ¬í˜„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token constant\">UNIQUE_INSTACE</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SinlegonClient</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">Singleton</span> singleton <span class=\"token operator\">=</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UNIQUE</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INSTANCE</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"ë””ìì¸ íŒ¨í„´ - ìƒì„± íŒ¨í„´","date":"April 10, 2022","update":"April 10, 2022","tags":["ë””ìì¸ íŒ¨í„´"],"series":null,"thumbnail":null},"fields":{"slug":"/create/","thumbnail":null,"readingTime":{"minutes":7.885}}},"seriesList":{"edges":[{"node":{"id":"171aa4a2-ded5-5c2c-b54a-e64ea3f1bb1e","fields":{"slug":"/ch1/"},"frontmatter":{"title":"1ì¥ - ì‹ ë¢°í•  ìˆ˜ ìˆê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ì• í”Œë¦¬ì¼€ì´ì…˜"}}},{"node":{"id":"3b2605c1-fec1-5296-80ea-ebd9aa6e3d73","fields":{"slug":"/ch2/"},"frontmatter":{"title":"2ì¥ - ë°ì´í„° ëª¨ë¸ê³¼ ì§ˆì˜ ì–¸ì–´"}}},{"node":{"id":"7bdf2f61-fe87-5308-83ce-0dc069dcc67b","fields":{"slug":"/ch3/"},"frontmatter":{"title":"3ì¥ - ì €ì¥ì†Œì™€ ê²€ìƒ‰"}}},{"node":{"id":"2e30191b-8ece-5039-bbca-a94005966f5f","fields":{"slug":"/ch4/"},"frontmatter":{"title":"4ì¥ - ë¶€í˜¸í™”ì™€ ë°œì „"}}},{"node":{"id":"3a0d1c7f-1792-5981-b09e-0d3d5914a4d0","fields":{"slug":"/ch5/"},"frontmatter":{"title":"5ì¥ - ë³µì œ"}}},{"node":{"id":"e4d42902-d086-5517-bbe4-8db2798f7a4e","fields":{"slug":"/ch6/"},"frontmatter":{"title":"6ì¥ - íŒŒí‹°ì…”ë‹"}}},{"node":{"id":"01c7677e-28a2-5fd0-b8a3-7edbbb6ea219","fields":{"slug":"/ch7/"},"frontmatter":{"title":"7ì¥ - íŠ¸ëœì­ì…˜"}}},{"node":{"id":"4d8ece67-04eb-5a79-b8c5-1fa3975550ac","fields":{"slug":"/ch8/"},"frontmatter":{"title":"8ì¥ - ë¶„ì‚° ì‹œìŠ¤í…œì˜ ê³¨ì¹«ê±°ë¦¬"}}},{"node":{"id":"592c1aba-d9fa-5c61-a4e2-9ec5a19ec99e","fields":{"slug":"/ch1/"},"frontmatter":{"title":"1ë¶€ - ì„±ëŠ¥ ê¸°ì´ˆ"}}},{"node":{"id":"9c62ca73-8311-53a9-9ea2-2248b98bcaab","fields":{"slug":"/ch2/"},"frontmatter":{"title":"2ë¶€ - ì„±ëŠ¥ ê°œì„ "}}},{"node":{"id":"f3df7171-f177-58d9-9aa1-cde629229b00","fields":{"slug":"/ch3/"},"frontmatter":{"title":"3ë¶€ - í™”ë©´ ì‘ë‹µì‹œê°„ ë¶„ì„"}}},{"node":{"id":"dbef7d03-a3db-5d08-be18-e3457e0fafbb","fields":{"slug":"/ch4/"},"frontmatter":{"title":"4ë¶€ - í”„ë¡œì„¸ìŠ¤ ì´í•´í•˜ê¸°"}}},{"node":{"id":"341143b3-bdb9-5711-a601-3b08c4a34340","fields":{"slug":"/ch5/"},"frontmatter":{"title":"5ë¶€ - ì†ŒìŠ¤ì½”ë“œ ìµœì í™”"}}},{"node":{"id":"b490e7a2-0baa-5c5d-a397-f276ff17cf37","fields":{"slug":"/ch6/"},"frontmatter":{"title":"6ë¶€ - SQL ìµœì í™”"}}},{"node":{"id":"845a24cb-583f-5c11-81d6-a9cb5b3deb3c","fields":{"slug":"/ch7/"},"frontmatter":{"title":"7ë¶€ - ì• í”Œë¦¬ì¼€ì´ì…˜ ì…ì¥ì—ì„œì˜ SQL íŠœë‹"}}},{"node":{"id":"e398111b-8093-502a-a9b1-9d72062a3b82","fields":{"slug":"/spring-autoconfigure/"},"frontmatter":{"title":"SpringBoot AutoConfiguration ì‹œì‘í•˜ê¸°"}}},{"node":{"id":"8ebbbedb-e6ae-500f-9c50-c852869253e3","fields":{"slug":"/behavior/"},"frontmatter":{"title":"ë””ìì¸ íŒ¨í„´ - í–‰ë™ íŒ¨í„´"}}},{"node":{"id":"5915669d-aefc-5d66-bb50-8fece02e6f6b","fields":{"slug":"/struct/"},"frontmatter":{"title":"ë””ìì¸ íŒ¨í„´ - êµ¬ì¡° íŒ¨í„´"}}},{"node":{"id":"4afa5d86-ed15-50b5-93d9-a68aad9c6661","fields":{"slug":"/create/"},"frontmatter":{"title":"ë””ìì¸ íŒ¨í„´ - ìƒì„± íŒ¨í„´"}}},{"node":{"id":"562d0f59-66f1-562f-af93-d4b36fd53d1b","fields":{"slug":"/Exactly_Once_Semantics/"},"frontmatter":{"title":"ì¹´í”„ì¹´ëŠ” ì–´ë–»ê²Œ Exactly-Once Semantics ë³´ì¥í•˜ë‚˜?"}}},{"node":{"id":"cd67c5f9-d4a3-5e56-900d-4a6cf095fb12","fields":{"slug":"/trasaction_in_kafka/"},"frontmatter":{"title":"ì¹´í”„ì¹´ì—ì„œì˜ Transactions"}}},{"node":{"id":"9716c259-8678-553f-8ac8-763719c61715","fields":{"slug":"/enabling_exactly_once_kafka_streams/"},"frontmatter":{"title":"ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆì˜ ì •í™•íˆ í•œ ë²ˆ"}}},{"node":{"id":"8002e4d8-b23e-514c-8690-40b0653e000c","fields":{"slug":"/Amazon SQS Deep Dive/"},"frontmatter":{"title":"Amazon SQS ë”¥ë‹¤ì´ë¸Œ"}}},{"node":{"id":"722ae01c-f64d-5c1d-b0db-81511fdffc65","fields":{"slug":"/Spring Cloud AWS Messaging Module Best Practice/"},"frontmatter":{"title":"Spring Cloud AWS Messaging ëª¨ë“ˆ ë¬¸ì œì  ë° íŠœë‹"}}},{"node":{"id":"a38c9fb2-5a48-5f2c-b5d4-09b52c64870c","fields":{"slug":"/java-collection-wrapper/"},"frontmatter":{"title":"Collection Wrapper í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ Service ê³„ì¸µ ë¦¬íŒ©í† ë§ "}}},{"node":{"id":"c4729eb0-0698-5aa4-bbf6-361c15caac7d","fields":{"slug":"/spring-cache-hierarchy/"},"frontmatter":{"title":"Spring Cache ë¡œ ìºì‹œ ê³„ì¸µ êµ¬ì¡° ì‚¬ìš©í•˜ê¸°"}}},{"node":{"id":"5ae46656-7d71-5b46-a454-516a563e6324","fields":{"slug":"/redis-event-notifications/"},"frontmatter":{"title":"Redis Keyspace Notificationsì— ëŒ€í•´ ì•Œì•„ë³´ì"}}},{"node":{"id":"363e058f-b457-5794-afb5-05cb05480255","fields":{"slug":"/jpa-slow-cause/"},"frontmatter":{"title":"JPAê°€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ëŠ” ì›ì´ˆì ì¸ ì´ìœ "}}},{"node":{"id":"0c1fde6e-04b9-55b9-9496-1b8635b58e46","fields":{"slug":"/ehcache3/"},"frontmatter":{"title":"Ehcache3 ìºì‹œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì†Œê°œ (with Spring Boot)"}}},{"node":{"id":"6f729c84-2239-5a02-8561-deca0f9b05c5","fields":{"slug":"/mysql-primary-key-design/"},"frontmatter":{"title":"ê³ ì„±ëŠ¥ì„ ìœ„í•œ MySQL Primary Key ì„¤ê³„ ì „ëµ"}}},{"node":{"id":"f7217e81-51a3-58d9-9498-e84defa6368e","fields":{"slug":"/tomcat/"},"frontmatter":{"title":"Apache Tomcat ì´í•´í•˜ê¸°(NIO Connector ì¤‘ì‹¬)"}}},{"node":{"id":"4ac73c64-d597-5ac3-9c91-6214595d54be","fields":{"slug":"/socket_option/"},"frontmatter":{"title":"Javaì˜ Socket Option ì •ë¦¬"}}},{"node":{"id":"c2d0081b-ae3d-5801-ace1-d61452e19444","fields":{"slug":"/tomcat-connection/"},"frontmatter":{"title":"Tomcatì€ ì–´ë–»ê²Œ Connectionì„ ê´€ë¦¬í• ê¹Œ?"}}},{"node":{"id":"8d197033-5a60-5434-bc31-0481d7d6e8c4","fields":{"slug":"/spring-core-container/"},"frontmatter":{"title":"ìŠ¤í”„ë§ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” IoC ì»¨í…Œì´ë„ˆì˜ ì›ë¦¬ì™€ ì´í•´"}}},{"node":{"id":"f3cc757b-893a-536b-a5a9-fd7daa864ee1","fields":{"slug":"/socket_internal/"},"frontmatter":{"title":"ìš”ì²­ì´ ê¸‰ì¦í•˜ëŠ” ìƒí™©ì˜ Connection reset by peer íŠ¸ëŸ¬ë¸” ìŠˆíŒ…"}}},{"node":{"id":"88220c80-fe55-5358-b042-35d46e8a3829","fields":{"slug":"/mysql-transaction-lock/"},"frontmatter":{"title":"MySQL ì ê¸ˆê³¼ íŠ¸ëœì­ì…˜ Deep Dive"}}},{"node":{"id":"96615645-93b2-57cd-8082-bff0befc8e71","fields":{"slug":"/java-synchronized/"},"frontmatter":{"title":"ìë°”ì˜ synchronizedì™€ volatile"}}}]},"relatedPosts":{"nodes":[]},"recentPosts":{"nodes":[{"id":"96615645-93b2-57cd-8082-bff0befc8e71","html":"<h2 id=\"ë©”ëª¨ë¦¬-ì•„í‚¤í…ì²˜\" style=\"position:relative;\">ë©”ëª¨ë¦¬ ì•„í‚¤í…ì²˜<a href=\"#%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"ë©”ëª¨ë¦¬ ì•„í‚¤í…ì²˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìµœì‹  í•˜ë“œì›¨ì–´ì—ì„œì˜ ë™ì‹œ í”„ë¡œê·¸ë˜ë°ì€ ë™ì¼í•œ ë¬¼ë¦¬ì  ìˆœê°„ì— ì„œë¡œ ë‹¤ë¥¸ ì½”ì–´ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œë¥¼ ë™ì‹œí•´ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.\nì•„ë˜ [ê·¸ë¦¼2]ì—ì„œ ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 553px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b637c4d3ea573bb279d1579a5fbf417/d35da/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjklEQVR42qVT2W7aUBT0/39L/iCtoiY0SqWWPYGQ2EDByHgD7wvY0zPXmFLaqg+90nDuMmfOhrW6cFDHL6iTmeD1ChMc0w1qNKtOl8Kd/IEnvvEzjsUeWp0aqP2PqHcdwT0qQb17UGfs7lDsn1GdFOuwq+74Vl1xa+8WRWyKYCZR9w9A9ITSvcd8dINke6fOCDooAsngJFhFo4Ybf0G4+QBjeCPnz0D4pJIpEqsRPPodZP4IsdNDYHUROX11PniPKEXwnGE0ROk/IfGGiOyGm7gD4Q6F+wmlEkx15E4Hruui1/+GwbCH8XgE23ERWY84hJclf0XqDbBem+j2vmIw6GL2NoPvbpFatyil39oxcxC7Y7ibV9jrF6yMPmxzAsecIrRHyCPzPJQyXiCwG661GmMtXGczlfNUqpPsMw5F2FUF1adafqIoarJp7/FzVac7ruPxiDiOm3t5aO81ioRhgP1+j91uB9M0lQ2CQNrgIM/zs+DhcBBe8+b7HjbCpR/BljGIVol0GIZYLBfQDQOGoWM6ncp+DsuylHO76OB5nrzpmC8WeJP+TYS7Wq8VN01TaCTyMJ8bWAjJMBq7XC7F4U0Fu8xw9X0lYnPFmRuNJXRdR1EUjWBZlsiyTIHltnuiaptzWmwBkSSJKpX7LM2UmOohy2Dk1ra9aMFglyCHQSjk+74aZOvLe411syxOjGBUWk77r4gby/62fjxTR2PqPNASDEDLclkGMynK4rxXJcrbJZegKAOoDC8F+ZDnmRrK9HWGd5nk82QiAzDwrr/J19THerNBLqLk/lOwjczh2LYNT3q63W7lU7Theq66Y1sus/tFsN1c9+kyepr87nzNZ/8YSPWQk+XE/gf8w1P4B88kV9LXMnU4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"[ê·¸ë¦¼2] ë©”ëª¨ë¦¬ ì•„í‚¤í…ì²˜\"\n        title=\"\"\n        src=\"/static/1b637c4d3ea573bb279d1579a5fbf417/d35da/img_1.png\"\n        srcset=\"/static/1b637c4d3ea573bb279d1579a5fbf417/e7570/img_1.png 170w,\n/static/1b637c4d3ea573bb279d1579a5fbf417/f46e7/img_1.png 340w,\n/static/1b637c4d3ea573bb279d1579a5fbf417/d35da/img_1.png 553w\"\n        sizes=\"(max-width: 553px) 100vw, 553px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">[ê·¸ë¦¼2] ë©”ëª¨ë¦¬ ì•„í‚¤í…ì²˜</figcaption>\n  </figure></p>\n<p>ê° CPUëŠ” ìì²´ ë ˆì§€ìŠ¤í„°ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ë°, ì´ëŠ” CPU ë‚´ë¶€ì˜ ë©”ëª¨ë¦¬ë¡œ ê°„ì£¼ëœë‹¤. ë ˆì§€ìŠ¤í„°ì— ì ‘ê·¼í•˜ê³  ì—¬ê¸°ì— ìˆëŠ” ë³€ìˆ˜ë“¤ì— ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë¹ ë¥´ë‹¤.\nCPUëŠ” ìºì‹œ ë©”ëª¨ë¦¬ ê³„ì¸µì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì´ ìºì‹œ ë©”ëª¨ë¦¬ì— ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ìºì‹œ ë©”ëª¨ë¦¬ì˜ ì ‘ê·¼ ì†ë„ëŠ” ë ˆì§€ìŠ¤í„°ë§Œí¼ ë¹ ë¥´ì§€ëŠ” ì•Šë‹¤.</p>\n<p>ëª¨ë“  CPUëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ë©”ì¸ ë©”ëª¨ë¦¬ëŠ” CPUì˜ ìºì‹œ ë©”ëª¨ë¦¬ë³´ë‹¤ í›¨ì”¬ í¬ë‹¤.\nCPUê°€ ë©”ëª¨ë¦¬ì—ì„œ ë¬´ì–¸ê°€ë¥¼ ì½ì„ í•„ìš”ê°€ ìˆì„ ë•Œ, ê·¸ê²ƒì„ CPUì˜ ìºì‹œ ë©”ëª¨ë¦¬ë¡œ ì½ì–´ë“¤ì´ê³  ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.\nCPUëŠ” ë ˆì§€ìŠ¤í„°ë¡œë„ ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì¼ ìˆ˜ ìˆë‹¤. CPUê°€ ë©”ëª¨ë¦¬ì— ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì“¸ í•„ìš”ê°€ ìˆì„ ë•Œ, ë ˆì§€ìŠ¤í„°ë¥¼ ìºì‹œ ë©”ëª¨ë¦¬ë¡œ í”ŒëŸ¬ì‹œí•˜ê³  ê²°êµ­ ì´ ìºì‹œ ë©”ëª¨ë¦¬ëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ë¡œ í”ŒëŸ¬ì‹œëœë‹¤.</p>\n<p>ì¼ë°˜ì ìœ¼ë¡œ í”ŒëŸ¬ì‹œëŠ” CPUê°€ ë‹¤ë¥¸ ì •ë³´ë¥¼ ìœ„í•œ ê³µê°„ì„ ë§Œë“¤ í•„ìš”ê°€ ìˆì„ ë•Œ ìˆ˜í–‰ëœë‹¤. ë”°ë¼ì„œ ì´ í”ŒëŸ¬ì‹œê°€ ì–¸ì œ ì¼ì–´ë‚ ì§€ì— ëŒ€í•´ì„œëŠ” ì–´ë– í•œ ê°€ì •ë„ í•  ìˆ˜ ì—†ë‹¤.</p>\n<h2 id=\"Memory-Visiblity\" style=\"position:relative;\">Memory Visiblity<a href=\"#Memory-Visiblity\" aria-label=\"Memory Visiblity permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë©”ëª¨ë¦¬ ê°€ì‹œì„±(Memory Visiblity)ì´ë€, í•œ ìŠ¤ë ˆë“œì—ì„œ ë³€ê²½í•œ ë©”ëª¨ë¦¬ ê°’ì´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œë„ ë™ì¼í•œ ê°’ì„ ì½ì„ ìˆ˜ ìˆëŠ”ì§€ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\nì•„ë˜ ì½”ë“œëŠ” ê°€ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì œ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Volatile</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">boolean</span> stopRequested<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span> backgroundThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stopRequested<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        backgroundThread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        stopRequested <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ ì½”ë“œë¥¼ ë©”ì¸ ìŠ¤ë ˆë“œì™€ backgroundThreadê°€ ê°ê° ë‹¤ë¥¸ CPU ì½”ì–´ì— í• ë‹¹ë˜ì–´ ì‹¤í–‰ë˜ëŠ” ê²½ìš°, í”„ë¡œê·¸ë¨ì´ ì˜ì›íˆ ì¢…ë£Œë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ë©”ëª¨ë¦¬ ì•„í‚¤í…ì²˜ì˜ íŠ¹ì„±ìƒ, ë©”ì¸ ìŠ¤ë ˆë“œê°€ stopRequested í”Œë˜ê·¸ë¥¼ trueë¡œ ì„¤ì •í•˜ë”ë¼ë„ ì´ ë³€ê²½ì€ ë©”ì¸ ìŠ¤ë ˆë“œê°€ í• ë‹¹ëœ ì½”ì–´ì˜ ìºì‹œ ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥ë  ìˆ˜ ìˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, backgroundThreadëŠ” ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì´ë£¨ì–´ì§„ ì´ ë³€ê²½ì„ ê°ì§€í•˜ì§€ ëª»í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ í˜„ìƒì„ ê°€ì‹œì„± ë¬¸ì œë¼ê³  ë¶€ë¥¸ë‹¤.</p>\n<h2 id=\"synchronized-ì˜ë¯¸\" style=\"position:relative;\">synchronized ì˜ë¯¸<a href=\"#synchronized-%EC%9D%98%EB%AF%B8\" aria-label=\"synchronized ì˜ë¯¸ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>synchronized í‚¤ì›Œë“œëŠ” íŠ¹ì • ì½”ë“œ ë¸”ë¡ì´ë‚˜ ë©”ì„œë“œì— ì ìš©í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • ì½”ë“œ ë¸”ë¡ì´ë‚˜ ë©”ì„œë“œì— ë“¤ì–´ê°€ì§€ ì „ì— ìŠ¤ë ˆë“œê°€ ì ì ˆí•œ ì ê¸ˆì„ íšë“í•´ì•¼í•œ ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í•œë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ synchronized ë¸”ë¡ì„ ì§„í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ìŠ¤ë ˆë“œëŠ” ì ê¸ˆì„ íšë“í•  ë•Œ ê¹Œì§€ ì§„ì…í•˜ì§€ ëª»í•œë‹¤.</p>\n<p>ë©”ì„œë“œì— ë¶™ì¸ synchronized í‚¤ì›Œë“œëŠ” ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì— ì†í•œ ì ê¸ˆì„ íšë“í•´ì•¼ í•œë‹¤. ë§Œì•½ ë©”ì„œë“œê°€ ì •ì  ë©”ì„œë“œë¼ë©´ í´ë˜ìŠ¤ ê°ì²´ì— ì†í•œ ì ê¸ˆì„ íšë“í•´ì•¼ í•œë‹¤. ì½”ë“œ ë¸”ë¡ì— synchronized í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ê¸ˆì„ íšë“í• ì§€ ëª…ì‹œí•´ì•¼ í•œë‹¤.</p>\n<p>ì ê¸ˆì„ íšë“í•œ í›„, synchronized ë¸”ë¡ì— ì§„ì…í•˜ë©´, ë¸”ë¡ ë‚´ì—ì„œ ì´ë£¨ì–´ì§„ ëª¨ë“  ë³€ê²½ì‚¬í•­ì€ ë©”ì¸ ë©”ëª¨ë¦¬ë¡œ í”ŒëŸ¬ì‰¬ëœë‹¤.\në‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì´í›„ì— ê°™ì€ ê°ì²´ì˜ synchronized ë¸”ë¡ì— ì§„ì…í•˜ë©´, ë©”ì¸ ë©”ëª¨ë¦¬ì—ì„œ ê°ì²´ì˜ ìµœì‹  ìƒíƒœë¥¼ ì½ëŠ”ë‹¤.</p>\n<p>ë”°ë¼ì„œ, synchronized ëŠ” ì ê¸ˆë¿ë§Œ ì•„ë‹ˆë¼ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ”ë°, ë™ê¸°í™”ì˜ ì˜ë¯¸ëŠ” íŠ¹ì • ê°ì²´ì— ëŒ€í•œ ë©”ëª¨ë¦¬ í‘œí˜„ì´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œ ê°„ì— ì¼ê´€ë˜ê²Œ ìœ ì§€ëœë‹¤ëŠ” ê²ƒìœ¼ë¡œ í•´ì„í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"synchronized-íŠ¹ì§•\" style=\"position:relative;\">synchronized íŠ¹ì§•<a href=\"#synchronized-%ED%8A%B9%EC%A7%95\" aria-label=\"synchronized íŠ¹ì§• permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì•„ë˜ëŠ” synchronized í‚¤ì›Œë“œì˜ ê·¸ ì™¸ ëŒ€í‘œì ì¸ íŠ¹ì§•ë“¤ì´ë‹¤.</p>\n<ul>\n<li>ê°ì²´ë§Œ ì ê¸ˆ ê°€ëŠ¥: ìë°”ì—ì„œëŠ” ê¸°ë³¸ ë°ì´í„° íƒ€ì…(primitives)ì´ ì•„ë‹Œ ê°ì²´(Object)ë§Œ ì ê¸ˆì´ ê°€ëŠ¥í•˜ë‹¤.</li>\n<li>ê°ì²´ ë°°ì—´ì˜ ì ê¸ˆ: ê°ì²´ì˜ ë°°ì—´ì„ ì ê·¸ëŠ” ê²ƒì€ ë°°ì—´ ë‚´ì˜ ê°œë³„ ê°ì²´ë“¤ì„ ì ê·¸ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.</li>\n<li>ë™ê¸°í™”ëœ ë©”ì†Œë“œ: synchronized ë©”ì†Œë“œëŠ” ì „ì²´ ë©”ì†Œë“œë¥¼ í¬í•¨í•˜ëŠ” synchronized (this){...} ë¸”ë¡ê³¼ ë™ë“±í•˜ë‹¤.(ë°”ì´íŠ¸ ì½”ë“œ ë ˆë²¨ì—ì„œëŠ” ë‹¤ë¥´ê²Œ ë‚˜íƒ€ë‚œë‹¤.)</li>\n<li>ì •ì  synchronized ë©”ì†Œë“œ: static synchronized ë©”ì†Œë“œëŠ” í´ë˜ìŠ¤ ê°ì²´(Class object)ë¥¼ ì ê·¼ë‹¤.</li>\n<li>í´ë˜ìŠ¤ ê°ì²´ì˜ ì ê¸ˆ: í´ë˜ìŠ¤ ê°ì²´ë¥¼ ì ê·¸ëŠ” ê²½ìš°, getClass()ëŠ” ëŸ°íƒ€ì„ í´ë˜ìŠ¤ì— ëŒ€í•œ ì ê¸ˆ, MyClass.classì— ëŒ€í•œ ì ê¸ˆì€ ì»´íŒŒì¼ ì‹œì ì— ê²°ì •ëœë‹¤.</li>\n<li>Inner í´ë˜ìŠ¤ì˜ ë™ê¸°í™”: Inner í´ë˜ìŠ¤ì—ì„œì˜ ë™ê¸°í™”ëŠ” outer í´ë˜ìŠ¤ì™€ ë…ë¦½ì ì´ë‹¤.</li>\n<li>ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì†Œë“œ ì„ ì–¸ê³¼ synchronized: synchronizedëŠ” ë©”ì†Œë“œ ì‹œê·¸ë‹ˆì²˜ê°€ ì•„ë‹ˆë¯€ë¡œ ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸í•  ìˆ˜ ì—†ë‹¤.</li>\n<li>ë¹„ë™ê¸°í™” ë©”ì†Œë“œ: ë¹„ë™ê¸°í™” ë©”ì†Œë“œëŠ” ì ê¸ˆì˜ ìƒíƒœë¥¼ ê³ ë ¤í•˜ì§€ ì•Šìœ¼ë©°, ë™ê¸°í™” ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆì—ë„ ì§„í–‰ë  ìˆ˜ ìˆë‹¤.</li>\n<li>ì¬ì§„ì… ê°€ëŠ¥í•œ ì ê¸ˆ: ì´ë¯¸ ì ê¸ˆì„ ë³´ìœ í•˜ê³  ìˆëŠ” ìŠ¤ë ˆë“œê°€ ë™ì¼í•œ ì ê¸ˆì— ëŒ€í•œ synchronized ì ê¸ˆì„ ë§Œë‚˜ë©´ ê³„ì†í•´ì„œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<h2 id=\"volatile\" style=\"position:relative;\">volatile<a href=\"#volatile\" aria-label=\"volatile permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>volatile í•„ë“œì— ëŒ€í•œ ê°’ì€ ìŠ¤ë ˆë“œì— ì˜í•´ ì‚¬ìš©ë˜ê¸° ì „ì— í•­ìƒ ë©”ì¸ ë©”ëª¨ë¦¬ì—ì„œ ì½ëŠ”ë‹¤. ê·¸ë¦¬ê³ , ìŠ¤ë ˆë“œê°€ ì‘ì„±í•œ ê°’ì€ í•­ìƒ ë©”ì¸ ë©”ëª¨ë¦¬ë¡œ í”ŒëŸ¬ì‹œëœë‹¤.\nvolatileê³¼ synchronizedì˜ ì°¨ì´ëŠ” synchronizedëŠ” ë°°íƒ€ì ì¸ ì ê¸ˆì„ ì‚¬ìš©í•˜ì—¬ í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ synchronized ë¸”ë¡ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ëŠ” ë°˜ë©´ì—, volatileëŠ” ì ê¸ˆì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>volatile ë³€ìˆ˜ëŠ” ìƒíƒœ ì˜ì¡´ì ì¸ ì‘ì—…ì— ì í•©í•˜ì§€ ì•Šë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code class=\"language-text\">x = x + 1</code> ê°™ì€ ì—°ì‚°ì€ xì˜ í˜„ì¬ ê°’ì„ ì½ê³ , ê·¸ ê°’ì„ ìˆ˜ì •í•˜ì—¬ ë‹¤ì‹œ xì— ì €ì¥í•˜ëŠ” non-atomic ì—°ì‚°ì´ë‹¤.\nì´ëŠ” xì˜ ê°’ì„ ì½ëŠ” ì‚¬ì´ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ xë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” race conditionì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ì§€ ì•Šë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Volatile</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">boolean</span> stopRequested<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span> backgroundThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stopRequested<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        backgroundThread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        stopRequested <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>volatileë¡œ ì„ ì–¸ëœ stopRequested í”Œë˜ê·¸ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ê°’ì„ trueë¡œ ë³€ê²½í•˜ê²Œ ë˜ë©´ ì´í›„ì— ë°œìƒí•˜ëŠ” ëª¨ë“  í•´ë‹¹ ë³€ìˆ˜ì— ëŒ€í•œ í›„ì† ì½ê¸°ëŠ” í•­ìƒ ìµœì‹ ì˜ ê°’ì„ ì½ëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤. </p>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"https://dev.to/rnowif/what-is-a-volatile-variable-in-java-35ef\">https://dev.to/rnowif/what-is-a-volatile-variable-in-java-35ef</a></li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\">https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html</a></li>\n</ul>","fields":{"slug":"/java-synchronized/"},"frontmatter":{"title":"ìë°”ì˜ synchronizedì™€ volatile","date":"December 02, 2023"}},{"id":"88220c80-fe55-5358-b042-35d46e8a3829","html":"<h2 id=\"ì ê¸ˆ-ì—‘ì„¸ìŠ¤-ë ˆë²¨\" style=\"position:relative;\">ì ê¸ˆ ì—‘ì„¸ìŠ¤ ë ˆë²¨<a href=\"#%EC%9E%A0%EA%B8%88-%EC%97%91%EC%84%B8%EC%8A%A4-%EB%A0%88%EB%B2%A8\" aria-label=\"ì ê¸ˆ ì—‘ì„¸ìŠ¤ ë ˆë²¨ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"ê³µìœ -ì ê¸ˆShared-Locks\" style=\"position:relative;\">ê³µìœ  ì ê¸ˆ(Shared Locks)<a href=\"#%EA%B3%B5%EC%9C%A0-%EC%9E%A0%EA%B8%88Shared-Locks\" aria-label=\"ê³µìœ  ì ê¸ˆShared Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ê³µìœ  ì ê¸ˆì€ ë‹¤ìˆ˜ì˜ ì¿¼ë¦¬ê°€ ë™ì‹œì— ì§„í–‰ë  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì§€ë§Œ ë°°íƒ€ì  ì ê¸ˆì„ ì–»ìœ¼ë ¤ëŠ” ì‹œë„ë¥¼ ì°¨ë‹¨í•œë‹¤. ì¦‰, ì–´ë–¤ íŠ¸ëœì­ì…˜ì´ ê³µìœ  ì ê¸ˆì„ ì ìš©í•˜ê³  ìˆë‹¤ë©´, í•´ë‹¹ ë°ì´í„°ì— ëŒ€í•œ ì“°ê¸° ì‘ì—…ì„ ì‹œë„í•˜ëŠ” ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì€ ì ê¸ˆì´ í•´ì œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.</p>\n<p>MySQLì—ì„œëŠ” <code class=\"language-text\">FOR SHARE</code>ë‚˜ <code class=\"language-text\">LOCK IN SHARE MODE</code> ê°™ì€ locking read clausesë¥¼ ì‚¬ìš©í•´ì„œ ì¿¼ë¦¬ê°€ ì°¸ì¡°í•˜ëŠ” í–‰ë“¤ì— ì ê¸ˆì„ ê±¸ ìˆ˜ ìˆë‹¤. ì´ëŸ° ì ˆì´ ì¿¼ë¦¬ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©´, í•´ë‹¹ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ ì„ íƒëœ í–‰ë“¤ì€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ì½ì„ ìˆœ\nìˆì§€ë§Œ ë³€ê²½í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ëŠ” ì—†ë‹¤.</p>\n<p>ì´ ì ê¸ˆì€ ê¸°ë³¸ì ìœ¼ë¡œ ë°”ê¹¥ìª½(outer) ì¿¼ë¦¬ì—ë§Œ ì ìš©ë˜ê³  ë‚´ë¶€(subquery) ì¿¼ë¦¬ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë‚´ë¶€ ì¿¼ë¦¬ì— ë³„ë„ë¡œ ì ê¸ˆ ì ˆì„ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ ë‚´ë¶€ ì¿¼ë¦¬ê°€ ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ í–‰ì€ ì ê¸ˆë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">WHERE</span> c1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> c1 <span class=\"token keyword\">FROM</span> t2<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token keyword\">SHARE</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ t1 í…Œì´ë¸”ì˜ í–‰ë“¤ì€ FOR SHAREë¡œ ì¸í•´ ì ê¸ˆì´ ê±¸ë¦¬ì§€ë§Œ, ì„œë¸Œì¿¼ë¦¬ì—ì„œ ì°¸ì¡°í•˜ëŠ” t2 í…Œì´ë¸”ì˜ í–‰ë“¤ì€ ì ê¸ˆì´ ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">WHERE</span> c1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> c1 <span class=\"token keyword\">FROM</span> t2 <span class=\"token keyword\">FOR</span> <span class=\"token keyword\">SHARE</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FOR</span> <span class=\"token keyword\">SHARE</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë‘ë²ˆì§¸ ì˜ˆì‹œì—ì„œëŠ” t1 í…Œì´ë¸” ë¿ë§Œ ì•„ë‹ˆë¼ ì„œë¸Œì¿¼ë¦¬ ì•ˆì—ë„ FOR UPDATEê°€ ëª…ì‹œë˜ì–´ ìˆì–´ì„œ t2 í…Œì´ë¸”ì˜ í–‰ë“¤ë„ ì ê¸ˆì´ ê±¸ë¦°ë‹¤. ì´ ê²½ìš°, t1ê³¼ t2 í…Œì´ë¸”ì—ì„œ ì°¸ì¡°í•˜ëŠ” ëª¨ë“  í–‰ë“¤ì´ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì— ì˜í•´ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.</p>\n<h3 id=\"ë°°íƒ€ì -ì ê¸ˆExclusive-Locks\" style=\"position:relative;\">ë°°íƒ€ì  ì ê¸ˆ(Exclusive Locks)<a href=\"#%EB%B0%B0%ED%83%80%EC%A0%81-%EC%9E%A0%EA%B8%88Exclusive-Locks\" aria-label=\"ë°°íƒ€ì  ì ê¸ˆExclusive Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë°°íƒ€ì  ì ê¸ˆì€ í•´ë‹¹ ìì›ì— ëŒ€í•œ ì ‘ê·¼ì„ íšë“í•œ ìŠ¤ë ˆë“œ í˜¹ì€ íŠ¸ëœì­ì…˜ë§Œì´ ìì›ì„ ì½ê±°ë‚˜ ì“¸ ìˆ˜ ìˆê²Œ í•˜ë©°, ë‹¤ë¥¸ ìŠ¤ë ˆë“œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.</p>\n<p>MySQLì—ì„œëŠ” <code class=\"language-text\">FOR UPDATE</code> ë¥¼ ì‚¬ìš©í•´ì„œ ë°°íƒ€ì  ì ê¸ˆì„ ê±¸ ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"ì˜ë„-ì ê¸ˆIntention-Locks\" style=\"position:relative;\">ì˜ë„ ì ê¸ˆ(Intention Locks)<a href=\"#%EC%9D%98%EB%8F%84-%EC%9E%A0%EA%B8%88Intention-Locks\" aria-label=\"ì˜ë„ ì ê¸ˆIntention Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>InnoDB ì—”ì§„ì—ì„œ êµ¬í˜„ëœ ë‹¤ì¤‘ ì„¸ë¶„ì„± ì ê¸ˆ(multiple granularity locking) ë©”ì»¤ë‹ˆì¦˜ì€ í–‰ ë ˆë²¨ ì ê¸ˆê³¼ í…Œì´ë¸” ë ˆë²¨ ì ê¸ˆì„ ìš©ì´í•˜ê²Œ í•œë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì€ <code class=\"language-text\">LOCK TABLES ... WRITE</code>ì™€ ê°™ì€ êµ¬ë¬¸ì„ í†µí•´ ì§€ì •ëœ í…Œì´ë¸”ì— ëŒ€í•œ ë°°íƒ€ì  ì ê¸ˆ(X lock)\nì„\nì„¤ì •í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ë‹¤ì¤‘ ì„¸ë¶„ì„± ì ê¸ˆì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ InnoDBëŠ” ì˜ë„ ì ê¸ˆì´ë¼ëŠ” í…Œì´ë¸” ë ˆë²¨ ì ê¸ˆì„ ì‚¬ìš©í•œë‹¤. ì˜ë„ ì ê¸ˆì€ íŠ¸ëœì­ì…˜ì´ í›„ì— í…Œì´ë¸”ì˜ í–‰ì— ëŒ€í•´ ìš”êµ¬í•  ì ê¸ˆ ìœ í˜•(ê³µìœ  ë˜ëŠ” ë°°íƒ€ì )ì„ ë‚˜íƒ€ë‚´ëŠ” ë° ì‚¬ìš©ëœë‹¤. ì˜ë„ ì ê¸ˆì—ëŠ” ì˜ë„ ê³µìœ  ì ê¸ˆ(IS)ê³¼ ì˜ë„ ë°°íƒ€ì  ì ê¸ˆ(\nIX) ë‘ ê°€ì§€\nìœ í˜•ì´ ìˆë‹¤.</p>\n<p>IS ì ê¸ˆì€ íŠ¸ëœì­ì…˜ì´ í…Œì´ë¸”ì˜ ê°œë³„ í–‰ì— ê³µìœ  ì ê¸ˆì„ ì„¤ì •í•  ì˜ë„ê°€ ìˆìŒì„ í‘œì‹œí•˜ë©°, IX ì ê¸ˆì€ ë°°íƒ€ì  ì ê¸ˆì„ ì„¤ì •í•  ì˜ë„ê°€ ìˆìŒì„ í‘œì‹œí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code class=\"language-text\">SELECT ... FOR SHARE</code>ëŠ” IS ì ê¸ˆì„, <code class=\"language-text\">SELECT ... FOR UPDATE</code>ëŠ” IX ì ê¸ˆì„ ì„¤ì •í•œë‹¤.</p>\n<p>ì˜ë„ ì ê¸ˆ í”„ë¡œí† ì½œì— ë”°ë¥´ë©´, íŠ¸ëœì­ì…˜ì´ í…Œì´ë¸”ì˜ í–‰ì— ê³µìœ  ì ê¸ˆì„ íšë“í•˜ê¸° ì „ì— ë°˜ë“œì‹œ í•´ë‹¹ í…Œì´ë¸”ì— ëŒ€í•´ IS ì ê¸ˆ ë˜ëŠ” ê·¸ë³´ë‹¤ ê°•ë ¥í•œ ì ê¸ˆì„ ë¨¼ì € íšë“í•´ì•¼ í•œë‹¤. ë˜í•œ íŠ¸ëœì­ì…˜ì´ í…Œì´ë¸”ì˜ í–‰ì— ë°°íƒ€ì  ì ê¸ˆì„ íšë“í•˜ê¸° ì „ì—ëŠ” IX ì ê¸ˆì„ ë¨¼ì € íšë“í•´ì•¼ í•œë‹¤.</p>\n<h3 id=\"ì ê¸ˆ-í˜¸í™˜ì„±\" style=\"position:relative;\">ì ê¸ˆ í˜¸í™˜ì„±<a href=\"#%EC%9E%A0%EA%B8%88-%ED%98%B8%ED%99%98%EC%84%B1\" aria-label=\"ì ê¸ˆ í˜¸í™˜ì„± permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë°ì´í„°ë² ì´ìŠ¤ ì ê¸ˆì€ ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ë°ì´í„°ì— ì ‘ê·¼í•  ë•Œ ì¼ê´€ì„±ê³¼ ì •í•©ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ì ê¸ˆ í˜¸í™˜ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:</p>\n<ul>\n<li>ì˜ë„ ê³µìœ  ì ê¸ˆ(IS)ì€ ë‹¤ë¥¸ ì˜ë„ ê³µìœ  ì ê¸ˆ(IS)ê³¼ í˜¸í™˜ëœë‹¤.</li>\n<li>ì˜ë„ ë°°íƒ€ ì ê¸ˆ(IX)ì€ ë‹¤ë¥¸ ì˜ë„ ì ê¸ˆ(IS ë˜ëŠ” IX)ê³¼ í˜¸í™˜ëœë‹¤.</li>\n<li>ì‹¤ì œ ê³µìœ  ì ê¸ˆ(S)ì€ ë‹¤ë¥¸ ê³µìœ  ì ê¸ˆ(S)ê³¼ í˜¸í™˜ëœë‹¤.</li>\n<li>ì‹¤ì œ ë°°íƒ€ ì ê¸ˆ(X)ì€ ë‹¤ë¥¸ ì–´ë–¤ ì ê¸ˆê³¼ë„ í˜¸í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n</ul>\n<p>í•œ íŠ¸ëœì­ì…˜ì´ ì˜ë„ ë°°íƒ€ ì ê¸ˆ(IX)ì„ ê°€ì§€ê³  ìˆë‹¤ë©´, ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì˜ë„ ì ê¸ˆì„ íšë“í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ì§€ ì•Šì§€ë§Œ, ì‹¤ì œ ì ê¸ˆìœ¼ë¡œì˜ ì „í™˜ì€ ì œí•œí•  ìˆ˜ ìˆë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align=\"center\">Exclusive (X)</th>\n<th align=\"center\">Intention Exclusive (IX)</th>\n<th align=\"center\">Shared (S)</th>\n<th align=\"center\">Intention Shared (IS)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Exclusive (X)</td>\n<td align=\"center\">X</td>\n<td align=\"center\">X</td>\n<td align=\"center\">X</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td>Intention Exclusive (IX)</td>\n<td align=\"center\">X</td>\n<td align=\"center\">âœ“</td>\n<td align=\"center\">X</td>\n<td align=\"center\">âœ“</td>\n</tr>\n<tr>\n<td>Shared (S)</td>\n<td align=\"center\">X</td>\n<td align=\"center\">X</td>\n<td align=\"center\">âœ“</td>\n<td align=\"center\">âœ“</td>\n</tr>\n<tr>\n<td>Intention Shared (IS)</td>\n<td align=\"center\">X</td>\n<td align=\"center\">âœ“</td>\n<td align=\"center\">âœ“</td>\n<td align=\"center\">âœ“</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"InnoDBì˜-ì ê¸ˆ\" style=\"position:relative;\">InnoDBì˜ ì ê¸ˆ<a href=\"#InnoDB%EC%9D%98-%EC%9E%A0%EA%B8%88\" aria-label=\"InnoDBì˜ ì ê¸ˆ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"Record-Locks\" style=\"position:relative;\">Record Locks<a href=\"#Record-Locks\" aria-label=\"Record Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë ˆì½”ë“œ ë½ì€ ì¸ë±ìŠ¤ ë ˆì½”ë“œë¥¼ ì ê·¸ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. <code class=\"language-text\">performance_schema.data_locks</code> í…Œì´ë¸”ì˜ LOCK<em>MODE ì—ì„œëŠ” `X,REC</em>NOT_GAP` ë¡œ ì¶œë ¥ë˜ëŠ” ì ê¸ˆì´ ë ˆì½”ë“œ ë½ì„ ì˜ë¯¸í•œë‹¤. ë”°ë¡œ ìƒì„±í•œ ì¸ë±ìŠ¤ê°€ ì—†ëŠ” í…Œì´ë¸”ì€ InnoDBê°€ ìì²´ì ìœ¼ë¡œ ìƒì„±í•œ í´ëŸ¬ìŠ¤í„° ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ ë½ì„ ê±´ë‹¤.</p>\n<h3 id=\"Gap-Locks\" style=\"position:relative;\">Gap Locks<a href=\"#Gap-Locks\" aria-label=\"Gap Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ê°­ ì ê¸ˆ(Gap Lock)ì€ InnoDB ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì—ì„œ ë‘ ë ˆì½”ë“œ ì‚¬ì´ì˜ ê°­ì„ ì ê·¸ëŠ” ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ, í´ëŸ¬ìŠ¤í„° ì¸ë±ìŠ¤ ë˜ëŠ” ë³´ì¡° ì¸ë±ìŠ¤ì—ì„œ ë ˆì½”ë“œ ê°„ì˜ ê³µê°„ì„ ì ê·¸ëŠ” ë° ì‚¬ìš©ëœë‹¤.</p>\n<p>ê°­ ì ê¸ˆì€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ í•´ë‹¹ ê°­ì— ìƒˆë¡œìš´ ë ˆì½”ë“œë¥¼ ì‚½ì…í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ì—¬ ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ê¸°ì—¬í•œë‹¤. ì´ëŠ” íŠ¹íˆ ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ìˆ˜í–‰ë  ë•Œ ì¤‘ìš”í•˜ë‹¤.</p>\n<p>ê°­ ì ê¸ˆì˜ ì£¼ìš” ëª©ì ì€ íŠ¹ì • ë²”ìœ„ì— ëŒ€í•œ ìƒˆë¡œìš´ ì‚½ì…ì„ ë°©ì§€í•˜ì—¬ ë†’ì€ ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” 'íŒ¬í…€ ë¦¬ë“œ'ë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<h3 id=\"Next-Key-Locks\" style=\"position:relative;\">Next Key Locks<a href=\"#Next-Key-Locks\" aria-label=\"Next Key Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë„¥ìŠ¤íŠ¸ í‚¤ ì ê¸ˆì€ ì¸ë±ìŠ¤ ë ˆì½”ë“œì— ëŒ€í•œ ë ˆì½”ë“œ ì ê¸ˆê³¼ ê·¸ ì¸ë±ìŠ¤ ë ˆì½”ë“œ ì´ì „ì˜ ê°„ê²©ì— ëŒ€í•œ ê°„ê²© ì ê¸ˆì„ ê²°í•©í•œ ê²ƒì´ë‹¤.</p>\n<p>'Busan' ì— ì‚¬ëŠ” ë©¤ë²„ë¥¼ ê°±ì‹ í•˜ëŠ” UPDATE ì¿¼ë¦¬ ì‹¤í–‰ ìƒí™©ì„ ê³ ë ¤í•´ ë³´ì. í•´ë‹¹ ì¿¼ë¦¬ê°€ ì§„í–‰ ì¤‘ì¼ ë•Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ í•´ë‹¹ ê°­ì— ìƒˆë¡œìš´ ë„ì‹œë¥¼ ì‚½ì…í•˜ë©´, UPDATE ì¿¼ë¦¬ê°€ ì²˜ë¦¬í•´ì•¼ í•  ëŒ€ìƒì´ ëˆ„ì ê¸ˆë  ìœ„í—˜ì´ ìˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ìƒí™©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ê°­ ì ê¸ˆì´ ì‚¬ìš©ë  ë•Œ, ìƒˆë¡œìš´ ë ˆì½”ë“œì˜ ì‚½ì…ì€ í—ˆìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” UPDATE ì¿¼ë¦¬ê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œ í•´ë‹¹ ê°­ì— ìˆëŠ” ë°ì´í„°ì˜ ì¼ê´€ì„±ì´ ìœ ì§€ë¨ì„ ë³´ì¥í•œë‹¤. ì¦‰, ê°­ ì ê¸ˆì€ í•´ë‹¹ UPDATE ì¿¼ë¦¬ê°€ ì»¤ë°‹ë˜ê¸° ì „ê¹Œì§€ëŠ” ìƒˆë¡œìš´ ë ˆì½”ë“œì˜ ì‚½ì…ì„ ë°©ì§€í•œë‹¤.</p>\n<p>ê²°ê³¼ì ìœ¼ë¡œ, ê°­ ì ê¸ˆì´ ì„¤ì •ë˜ë©´, ê°­ì— í•´ë‹¹í•˜ëŠ” ìƒˆ ë°ì´í„°ì˜ ì‚½ì…ì´ë‚˜ ìˆ˜ì •ì´ ì¼ì‹œì ìœ¼ë¡œ ì œí•œë˜ì–´, íŠ¸ëœì­ì…˜ì˜ ì¼ê´€ì„±ê³¼ ê²©ë¦¬ ìˆ˜ì¤€ì´ ìœ ì§€ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">## Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">begin</span> <span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span> <span class=\"token keyword\">for</span> <span class=\"token keyword\">share</span> <span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">## Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span> LOCK_DATA <span class=\"token keyword\">from</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+------------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME      <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_DATA  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+------------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>            <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> <span class=\"token operator\">IS</span>            <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> <span class=\"token number\">4</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> <span class=\"token number\">5</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> <span class=\"token number\">6</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>GAP         <span class=\"token operator\">|</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+------------+</span>\n<span class=\"token number\">8</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>1í–‰ : 'member' í…Œì´ë¸” ìì²´ì— ëŒ€í•œ Intent Shared(IS) ì ê¸ˆì´ ê±¸ë ¤ ìˆìŒì„ ë‚˜íƒ€ë‚¸ë‹¤. ì´ê²ƒì€ Connection 1ì´ í•´ë‹¹ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê³µìœ  ëª¨ë“œë¡œ ì½ê¸° ìœ„í•´ ì˜ë„í•˜ê³  ìˆìŒì„ ì˜ë¯¸í•œë‹¤.</li>\n<li>2~4í–‰ : <code class=\"language-text\">MEMBER_CITY_IDX</code> ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 'busan'ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œë“¤ì— ëŒ€í•´ì„œëŠ” Shared(S) ì ê¸ˆì´ ê±¸ë ¤ ìˆë‹¤. ë„¥ìŠ¤íŠ¸ í‚¤ ì ê¸ˆì„ ì˜ë¯¸í•˜ë©°, ì´ì „ ë ˆì½”ë“œì™€ í˜„ì¬ ë ˆì½”ë“œë¥¼ í¬í•¨í•´ì„œ ì ê¸ˆì´ ê±¸ë¦¬ê²Œ ëœë‹¤.</li>\n<li>5~7í–‰ : PRIMARY ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œëŠ” <code class=\"language-text\">S,REC_NOT_GAP</code> ì ê¸ˆì´ ê±¸ë ¤ ìˆë‹¤. <code class=\"language-text\">REC_NOT_GAP</code>ëŠ” Record Not Gaplockì˜ ì•½ìë¡œ ê°­ë½ì´ ê±¸ë¦¬ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰ í–‰ ìˆ˜ì¤€ ì ê¸ˆì„ ì˜ë¯¸í•œë‹¤.</li>\n<li>8í–‰ : 'Seoul'ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œì— ëŒ€í•œ 'S,GAP' ì ê¸ˆì´ ê±¸ë ¤ ìˆëŠ”ë°, ('busan',6) ~ ('Seoul', 1) ê¹Œì§€ì˜ ê°­ ì ê¸ˆì„ ì˜ë¯¸í•œë‹¤.</li>\n</ul>\n<h3 id=\"Insert-Intention-Locks\" style=\"position:relative;\">Insert Intention Locks<a href=\"#Insert-Intention-Locks\" aria-label=\"Insert Intention Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì‚½ì… ì˜ë„ ì ê¸ˆì€ INSERT ëª…ë ¹ì„ ì‚¬ìš©í•  ë•Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ìƒˆ ë ˆì½”ë“œë¥¼ ì¶”ê°€í•  ì˜ë„ë¥¼ ì•Œë¦¬ëŠ” ë° ì‚¬ìš©ëœë‹¤. ì´ ì ê¸ˆì€ ì‹¤ì œ ë ˆì½”ë“œì— ëŒ€í•´ì„œëŠ” ì•„ë‹ˆë¼ ì•„ì§ ìƒì„±ë˜ì§€ ì•Šì€ ë ˆì½”ë“œ(ê°­)ì— ëŒ€í•´ ì„¤ì •ëœë‹¤.</p>\n<h3 id=\"Auto-Increament-Locks\" style=\"position:relative;\">Auto Increament Locks<a href=\"#Auto-Increament-Locks\" aria-label=\"Auto Increament Locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ìë™ ì¦ê°€ ì ê¸ˆì€ ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì´ ë°ì´í„°ë¥¼ ì‚½ì…í•  ë•Œ ê°ê° ê³ ìœ í•œ ê°’ì„ í• ë‹¹ë°›ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. MySQLì—ì„œëŠ” ìë™ ì¦ê°€ ê°’ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì„¸ ê°€ì§€ ì ê¸ˆ ëª¨ë“œë¥¼ ì§€ì›í•˜ë©°, ì´ëŠ” <code class=\"language-text\">innodb_autoinc_lock_mode</code> ì˜µì…˜ì„ í†µí•´ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.</p>\n<ul>\n<li>0 (traditional lock mode): MySQL 5.0 ì´ì „ì˜ ë™ì‘ì„ ëª¨ë°©í•˜ëŠ” ëª¨ë“œë‹¤. ì´ ëª¨ë“œì—ì„œëŠ” ìë™ ì¦ê°€ ì ê¸ˆì´ ë¬¸ì¥ì˜ ë§ˆì§€ë§‰ê¹Œì§€ ìœ ì§€ë˜ë©°, ê°’ì€ ë°˜ë³µ ê°€ëŠ¥í•˜ê³  ì—°ì†ì ì¸ ìˆœì„œëŒ€ë¡œ í• ë‹¹ëœë‹¤. ë°ì´í„°ì˜ ì¼ê´€ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•˜ë‹¤.</li>\n<li>1 (consecutive lock mode): INSERT ë¬¸ì´ ì‹¤í–‰ë  ë•Œ ì‚½ì ê¸ˆì…ë  í–‰ì˜ ìˆ˜ë¥¼ ì•Œê³  ìˆë‹¤ë©´ í•„ìš”í•œ ìë™ ì¦ê°€ ê°’ì„ ê°€ë²¼ìš´ ë®¤í…ìŠ¤ ì•„ë˜ì—ì„œ í• ë‹¹í•˜ê³  ìë™ ì¦ê°€ ì ê¸ˆì„ íšŒí”¼í•  ìˆ˜ ìˆë‹¤. ì‚½ì…ë  í–‰ì˜ ìˆ˜ë¥¼ ëª¨ë¥´ëŠ” ê²½ìš°ì—ëŠ” ìë™ ì¦ê°€ ì ê¸ˆì´ ê±¸ë¦¬ê³  ë¬¸ì¥ì˜ ëê¹Œì§€\nìœ ì§€ëœë‹¤. ì´\nëª¨ë“œëŠ” MySQL 5.7 ë° ê·¸ ì´ì „ ë²„ì „ì—ì„œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆë‹¤.</li>\n<li>2 (interleaved lock mode): ìë™ ì¦ê°€ ì ê¸ˆì„ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, ë™ì‹œì— ë°œìƒí•˜ëŠ” ì‚½ì… ì‘ì—…ìœ¼ë¡œ ì¸í•´ ìë™ ì¦ê°€ ê°’ì´ ì„ì¼ ìˆ˜ ìˆë‹¤. ì´ ëª¨ë“œëŠ” ë°”ì´ë„ˆë¦¬ ë¡œê¹…ì´ ë¹„í™œì„±í™”ë˜ì—ˆê±°ë‚˜ binlog_formatì´ ROWë¡œ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ ì•ˆì „í•˜ë‹¤. MySQL 8ì—ì„œëŠ”\nì´\nëª¨ë“œê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤.</li>\n</ul>\n<h2 id=\"íŠ¸ëœì­ì…˜ê³¼-ì ê¸ˆ\" style=\"position:relative;\">íŠ¸ëœì­ì…˜ê³¼ ì ê¸ˆ<a href=\"#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EA%B3%BC-%EC%9E%A0%EA%B8%88\" aria-label=\"íŠ¸ëœì­ì…˜ê³¼ ì ê¸ˆ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì—¬ê¸°ì„œëŠ” ê° íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ë³„ë¡œ ì ê¸ˆì— ì–´ë– í•œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ì˜ˆì œë¥¼ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ìŠ¤í‚¤ë§ˆì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> SYSTEM_SCHM<span class=\"token punctuation\">.</span>MEMBER\n<span class=\"token punctuation\">(</span>\n    id   <span class=\"token keyword\">bigint</span>      <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n    city <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n    name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n    age  <span class=\"token keyword\">int</span>         <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">index</span> MEMBER_CITY_IDX\n    <span class=\"token keyword\">on</span> MEMBER <span class=\"token punctuation\">(</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> SYSTEM_SCHM<span class=\"token punctuation\">.</span>MEMBER<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Yun'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">29</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Merry'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Kim'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Merry'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"Serializable\" style=\"position:relative;\">Serializable<a href=\"#Serializable\" aria-label=\"Serializable permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Serializable ê²©ë¦¬ ìˆ˜ì¤€ì€ ì‚¬ìš© ê°€ëŠ¥í•œ ê²©ë¦¬ ìˆ˜ì¤€ ì¤‘ ê°€ì¥ ì—„ê²©í•˜ë‹¤.\nSELECT ë¬¸ì„ í¬í•¨í•œ ëª¨ë“  Statementì€ ì ê¸ˆì„ í­ë“í•œë‹¤. ë‹¨, autocommitì´ í™œì„±í™”ëœ ìƒíƒœì—ì„œ ì‹¤í–‰ë˜ëŠ” SELECT ë¬¸ì´ë‚˜ ëª…ì‹œì ì¸ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ë˜ì§€ ì•Šì€ ê²½ìš°ëŠ” ì œì™¸ëœë‹¤.</p>\n<p>SELECT ë¬¸ì— ëŒ€í•´ì„œëŠ” FOR SHAREë¥¼ ì¶”ê°€í•œ ê²ƒê³¼ ë™ë“±í•œ íš¨ê³¼ë¥¼ ë‚¸ë‹¤. ì¦‰, SERIALIZABLE ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” SELECT ë¬¸ë„ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì— ì˜í•´ ìˆ˜ì •ë˜ì§€ ì•Šë„ë¡ ì ê¸ˆì„ íšë“í•œë‹¤.\nSERIALIZABLE ê²©ë¦¬ ìˆ˜ì¤€ì€ ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìµœëŒ€í•œ ë³´ì¥í•˜ê¸° ìœ„í•´ ë§ì€ ì ê¸ˆì„ ì‚¬ìš©í•˜ë©°, ì´ëŠ” ë™ì‹œì„± ì²˜ë¦¬ì— ìˆì–´ì„œ ì„±ëŠ¥ ì €í•˜ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n<p>ì•„ë˜ëŠ” Serializable ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ ì ê¸ˆì´ ì–´ë–»ê²Œ ë™ì‘ë˜ëŠ”ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'SERIALIZABLE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA\n<span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+---------------------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME      <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA           <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+---------------------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>            <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> <span class=\"token operator\">IS</span>            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>                <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">4</span>                   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">5</span>                   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">6</span>                   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>GAP         <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+---------------------+</span></code></pre></div>\n<p><code class=\"language-text\">MEMBER_CITY_IDX</code> ë¡œ ì½ëŠ” ëª¨ë“  ì¸ë±ìŠ¤ ë ˆì½”ë“œì— ë„¥ìŠ¤íŠ¸ í‚¤ ì ê¸ˆì´ ê±¸ë¦¬ê³  ê¸°ë³¸í‚¤ì—ëŠ” í–‰ ìˆ˜ì¤€ ì ê¸ˆì„ ê±¸ê²Œëœë‹¤. 'Busan'ì— ëŒ€í•œ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ ë’¤ì¸ (Seoul, 'John', 1) ë ˆì½”ë“œì— ê°­ì ê¸ˆì´ ê±¸ë¦¬ëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nSerializable ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” ë„¥ìŠ¤íŠ¸ í‚¤ ì ê¸ˆê³¼ ê°­ ì ê¸ˆì— ê³µìœ  ì ê¸ˆì´ ê±¸ë ¤ Phantom Readë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ëŠ” MEMBER í…Œì´ë¸”ì˜ Primary Keyë¡œ ìœ ë‹ˆí¬í•œ ë ˆì½”ë“œë¥¼ SELECT í•  ë•Œ íšë“ë˜ëŠ” ì ê¸ˆì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'SERIALIZABLE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2 </span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> <span class=\"token operator\">IS</span>            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>    <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> S<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">1</span>         <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Primary KeyëŠ” WHERE ì¡°ê±´ì— ë§ëŠ” ë ˆì½”ë“œê°€ 1ê±´ì¸ ê²ƒì„ ë³´ì¥í•˜ë¯€ë¡œ Primary Recordì— í–‰ ìˆ˜ì¤€ ì ê¸ˆ<code class=\"language-text\">(S,REC_NOT_GAP)</code>ì„ íšë“í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ëŠ” <code class=\"language-text\">MEMBER_CITY_IDX</code> ì¸ë±ìŠ¤ì˜ í•˜ìœ„ ì§‘í•©ì„ UPDATE í•  ë•Œ ë°œìƒí•˜ëŠ” ì ê¸ˆì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'SERIALIZABLE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span> city<span class=\"token operator\">=</span><span class=\"token string\">'Busan'</span> <span class=\"token operator\">and</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME      <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>            <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> IX            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">4</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">5</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">6</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>GAP         <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token number\">8</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">MEMBER_CITY_IDX</code> ì¸ë±ìŠ¤ì— nameì— ëŒ€í•œ ì¸ë±ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— city='Busan' ì˜ì—­ì— ë„¥ìŠ¤íŠ¸ í‚¤ë½ê³¼ ê°­ë½ì´ ê±¸ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"Repeatable-Read\" style=\"position:relative;\">Repeatable Read<a href=\"#Repeatable-Read\" aria-label=\"Repeatable Read permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ì€ InnoDBì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœ ê²©ë¦¬ ìˆ˜ì¤€ì´ë‹¤.\nì´ ìˆ˜ì¤€ì—ì„œ SELECT ì¿¼ë¦¬ëŠ” íŠ¹ì • ì‹œì ì˜ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë¥¼ ë°˜ì˜í•˜ëŠ” ìŠ¤ëƒ…ìƒ·ì„ í†µí•´ êµ¬í˜„ëœë‹¤.\nì´ ìŠ¤ëƒ…ìƒ·ì€ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ë  ë•Œ ë˜ëŠ” íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì²« ë²ˆì§¸ SQL ë¬¸ì¥ì´ ì‹¤í–‰ë  ë•Œ ìƒì„±ëœë‹¤.\nInnoDBëŠ” Multi-Version Concurrency Control(MVCC)ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤ëƒ…ìƒ·ì„ ì œê³µí•˜í•œë‹¤.</p>\n<p>ì•„ë˜ ì˜ˆì‹œëŠ” Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ ìŠ¤ëƒ…ìƒ· ì½ê¸°ë¥¼ ì‚¬ìš©í•œ ì½ê´€ëœ ì½ê¸°ê³¼ ì ê¸ˆì„ ë³´ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'REPEATABLE-READ'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">29</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">26</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">22</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA\n  <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\nEmpty <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 3</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> SYSTEM_SCHM<span class=\"token punctuation\">.</span>MEMBER<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'July'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">29</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">26</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">22</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ ì¼€ì´ìŠ¤ì—ì„œ SELECT ì‹œ, ê³µìœ ì ê¸ˆì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë° ì´ê²ƒì´ Serializableê³¼ Repeatable Readì˜ ê°€ì¥ ì¤‘ìš”í•œ ì°¨ì´ì´ë‹¤.\nConnection3ì—ì„œ MEMBER í…Œì´ë¸”ì— ìƒˆë¡œìš´ ë ˆì½”ë“œë¥¼ Insertë¥¼ í•˜ë”ë¼ë„, Connection1 ì—ì„œ ë‹¤ì‹œ SELECTë¥¼ í•´ë„ ìƒˆë¡œ ì¶”ê°€ëœ ë ˆì½”ë“œê°€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nì´ëŠ” ìŠ¤ëƒ…ìƒ· ì½ê¸°ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¸ëœì­ì…˜ì´ ë°ì´í„°ë¥¼ ì½ëŠ” ë™ì•ˆ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ í•´ë‹¹ í…Œì´ë¸”ì„ ìˆ˜ì •í•´ë„, ìµœì´ˆ íŠ¸ëœì­ì…˜ì€ ì›ë˜ì˜ ë°ì´í„° ìƒíƒœë¥¼ ê³„ì† ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>MySQLì˜ Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ì˜ ì˜ëª» ì•Œë ¤ì§„ ì‚¬ì‹¤ì€, MySQLì˜ Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” MVCCë¥¼ í†µí•´ Phantom Read í˜„ìƒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒ ì´ë‹¤.\nMVCCëŠ” ìŠ¤ëƒ…ìƒ· ì½ê¸°ë¥¼ í†µí•´ ì½ê¸° ì‘ì—…ì˜ ë™ì‹œì„±ì„ ë†’íˆê¸° ìœ„í•œ ê²ƒìœ¼ë¡œ, UPDATEë‚˜ DELETE ë¬¸ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.\nì¦‰, ìµœì´ˆ íŠ¸ëœì­ì…˜ì—ì„œ ìŠ¤ëƒ…ìƒ·ì—ì„œ ë°ì´í„°ë¥¼ ì½ì€ í›„, ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ì²«ë²ˆì§¸ íŠ¸ëœì­ì…˜ì—ì„œ ì‚¬ìš©ëœ í•„í„°ì™€ ì¼ì¹˜í•˜ëŠ” í–‰ì˜ ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•˜ë©´ ì²« ë²ˆì§¸ íŠ¸ëœì­ì…˜ì—ì„œ ì´ í–‰ì„ ìˆ˜ì •í•  ìˆ˜ ìˆê³ , ì´í›„ì—ëŠ” ìŠ¤ëƒ…ìƒ·ì— í¬í•¨ë  ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ëŠ” Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” Phantom Readì˜ ì˜ˆë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'REPEATABLE-READ'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">29</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">26</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">22</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> SYSTEM_SCHM<span class=\"token punctuation\">.</span>MEMBER<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'July'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span>  city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">Rows</span> <span class=\"token keyword\">matched</span>: <span class=\"token number\">4</span>  Changed: <span class=\"token number\">4</span>  <span class=\"token keyword\">Warnings</span>: <span class=\"token number\">0</span>\n\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">30</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">8</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> July  <span class=\"token operator\">|</span>  <span class=\"token number\">23</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">27</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">23</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">4</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Connection1 ì—ì„œëŠ” ë„ì‹œê°€ ë¶€ì‚°ì¸ ëª¨ë“  ë©¤ë²„(city='Busan')ë¥¼ ì¿¼ë¦¬í•œë‹¤. ê·¸ëŸ° ë‹¤ìŒ Connection2ëŠ” 'Busan'ì— ìƒˆë¡œìš´ ë©¤ë²„ë¥¼ ì¶”ê°€ í›„ ì»¤ë°‹í•œë‹¤.\nì—¬ê¸°ê¹Œì§€ëŠ” Connection1ì´ SELECT ë¬¸ì„ ë°˜ë³µí•´ë„ ë˜‘ê°™ì€ ë©¤ë²„ê°€ ë°˜í™˜ëœë‹¤. ê·¸ëŸ¬ë‚˜ Connection1ì—ì„œ Busanì˜ ëª¨ë“  ë©¤ë²„ì— ëŒ€í•´ UPDATEí•˜ë©´\n4ê°œ í–‰ì´ ì—…ë°ì´íŠ¸ë˜ê³  ì¶”ê°€ SELECTì—ì„œë„ 4ê°œí–‰ì˜ ë°˜í™˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<p>Phantom readë¥¼ ë§‰ê¸° ìœ„í•´ì„œëŠ” Connection1ì—ì„œ FOR SHARE ì ˆì„ ì‚¬ìš©í•˜ì—¬ ê³µìœ ì ê¸ˆì„ ìš”ì²­í•˜ê±°ë‚˜ Serializable ê²©ë¦¬ ìˆ˜ì¤€ìœ¼ë¡œ ë³€ê²½í•´ì•¼í•œë‹¤.</p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ì•„ë˜ëŠ” REPEATABLE-READ ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ <code class=\"language-text\">MEMBER_CITY_IDX</code> ì¸ë±ë±ì˜ í•˜ìœ„ ì§‘í•©ì„ UPDATE í•  ë•Œ ë°œìƒí•˜ëŠ” ì ê¸ˆì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'REPEATABLE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span> city<span class=\"token operator\">=</span><span class=\"token string\">'Busan'</span> <span class=\"token operator\">and</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME      <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>            <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> IX            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X             <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">4</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">5</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">6</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>GAP         <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Seoul'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token number\">8</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Serializable ê²©ë¦¬ ìˆ˜ì¤€ê³¼ ë™ì¼í•œ ìˆ˜ì¤€ì˜ 8ê°œì˜ ì ê¸ˆì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"Read-Committed\" style=\"position:relative;\">Read Committed<a href=\"#Read-Committed\" aria-label=\"Read Committed permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Read Committedì™€ Repeatable Readì˜ ì£¼ìš” ì°¨ì´ì ì€ ì¼ê´€ëœ ì½ê¸°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì´ë‹¤.\nì´ëŠ” ìŠ¤ëƒ…ìƒ· ì‚¬ìš©ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì˜¤ë˜ëœ undo ë¡œê·¸ë¥¼ ë” ë¹¨ë¦¬ ì •ë¦¬í•  ìˆ˜ ìˆê²Œ í•˜ëŠ”ë°, íŠ¹íˆ ì˜¤ëœì‹œê°„ ë™ì•ˆ ì‹¤í–‰ë˜ëŠ” Long íŠ¸ëœì­ì…˜ì—ì„œ ì¤‘ìš”í•˜ë‹¤.</p>\n<p>ë˜í•œ, Read Committedì—ì„œëŠ” ì™¸ë˜ í‚¤ì™€ ê³ ìœ  í‚¤ ì œì•½ ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ê²½ìš°, ê·¸ë¦¬ê³  í˜ì´ì§€ ë¶„í• ì´ ë°œìƒí•˜ëŠ” ê²½ìš°ì—ë§Œ ê°­ ì ê¸ˆì„ ì‚¬ìš©í•œë‹¤.\ní˜ì´ì§€ ë¶„í• ì€ InnoDB í˜ì´ì§€ê°€ ê±°ì˜ ê°€ë“ ì°¼ì„ ë•Œ ì¤‘ê°„ì— ë ˆì½”ë“œë¥¼ ì‚½ì…í•˜ê±°ë‚˜ ê¸°ì¡´ ë ˆì½”ë“œê°€ ì»¤ì ¸ì„œ í˜ì´ì§€ì— ë” ì´ìƒ ê³µê°„ì´ ì—†ì„ ë•Œ ë°œìƒí•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” Read Committedì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” non-Repeatable Read ë¬¸ì œë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'READ-COMMITTED'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">28</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">25</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">21</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> age <span class=\"token operator\">=</span> <span class=\"token number\">30</span> <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">COMMIT</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> MEMBER <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> city  <span class=\"token operator\">|</span> name  <span class=\"token operator\">|</span> age <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Hong  <span class=\"token operator\">|</span>  <span class=\"token number\">30</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Kim   <span class=\"token operator\">|</span>  <span class=\"token number\">30</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Busan <span class=\"token operator\">|</span> Merry <span class=\"token operator\">|</span>  <span class=\"token number\">30</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------+-------+-----+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Connection2ì—ì„œ city=Busanì— í•´ë‹¹ í•˜ëŠ” ëª¨ë“  ë©¤ë²„ì˜ ë‚˜ì´ë¥¼ 30ìœ¼ë¡œ UPDATEë¥¼ í•˜ê³  ì»¤ë°‹í•œ ë’¤, Connection1ì—ì„œ SELECT í•˜ë©´ ë§ˆì§€ë§‰ ì»¤ë°‹ì˜ ë ˆì½”ë“œë¥¼ ì½ì–´ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” non-Repeatable Read ë¬¸ì œì™€ Phantom Read í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ë˜, ë‹¤ë¥¸ íŠ¹ì§•ìœ¼ë¡œëŠ” WHERE ì ˆì— ë”°ë¼ ì–´ë–¤ ë ˆì½”ë“œê°€ í•´ë‹¹ ì¿¼ë¦¬ì— ì˜í–¥ì„ ë°›ëŠ”ì§€ ê²°ì •í•  ë•Œ, ì´ ë ˆì½”ë“œë“¤ì— ì ê¸ˆì´ ê±¸ë¦¬ê²Œ ëœë‹¤.\nê·¸ëŸ¬ë‚˜ Read Committed ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” ì ê¸ˆì´ ê±¸ë¦° ë ˆì½”ë“œ ì¤‘ì—ì„œ ì‹¤ì œë¡œ ìˆ˜ì •ë˜ì§€ ì•ŠëŠ” ë ˆì½”ë“œë“¤ì— ëŒ€í•œ ì ê¸ˆì€ WHERE ì ˆì˜ í‰ê°€ê°€ ëë‚˜ëŠ” ì¦‰ì‹œ í•´ì¬ëœë‹¤.</p>\n<p>ì•„ë˜ëŠ” Read Committed ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œ <code class=\"language-text\">MEMBER_CITY_IDX</code> ì¸ë±ë±ì˜ í•˜ìœ„ ì§‘í•©ì„ UPDATE í•  ë•Œ ë°œìƒí•˜ëŠ” ì ê¸ˆì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'READ-COMMITTED'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span> city<span class=\"token operator\">=</span><span class=\"token string\">'Busan'</span> <span class=\"token operator\">and</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME      <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>            <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> IX            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> MEMBER_CITY_IDX <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token string\">'Busan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>         <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">4</span>          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+-----------------+-----------+---------------+-------------+------------+</span>\n<span class=\"token number\">3</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Read Committed ê²©ë¦¬ ìˆ˜ì¤€ì—ì„œëŠ” <code class=\"language-text\">city='Busan' and name = 'Hong'</code> ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë ˆì½”ë“œ 2ê±´(ì¸ë±ìŠ¤ì™€ PK)ì— ëŒ€í•´ì„œë§Œ í–‰ ìˆ˜ì¤€ ì ê¸ˆì´ ê±¸ë ¤ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì‹¤ì œë¡œëŠ” Repeatable Read ê²©ë¦¬ ìˆ˜ì¤€ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ city='Busan'ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œ ëª¨ë‘ì— ëŒ€í•´ì„œ ì ê¸ˆì„ ê±¸ì§€ë§Œ, WHERE ì¡°ê±´ì— í‰ê°€ê°€ ëë‚˜ëŠ” ì¦‰ì‹œ ì ê¸ˆì„ íšŒìˆ˜í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ì ê¸ˆì€ ê´€ì¸¡í•˜ê¸°ê°€ ì–´ë µë‹¤.</p>\n<p>Read Committed ê²©ë¦¬ ìˆ˜ì¤€ì˜ ë˜ ë‹¤ë¥¸ íŠ¹ì§•ì€ semi-consistent readë‹¤.\nsemi-consistent readëŠ” ì¸ë±ìŠ¤ê°€ ì—†ëŠ” ì—´ì—ì„œ ë™ì‘í•˜ë©° ì–´ë–¤ Statementê°€ ì‹¤í–‰ë  ë•Œ í–‰ì˜ ë§ˆì§€ë§‰ ì»¤ë°‹ëœ ê°’ê³¼ WHERE ì ˆì„ ë¹„êµí•˜ì—¬\ní•´ë‹¹ Statementê°€ íŠ¹ì • í–‰ì„ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šì„ ê²ƒìœ¼ë¡œ íŒë‹¨ë˜ë©´, ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ í•´ë‹¹ í–‰ì— ì ê¸ˆì„ ê±¸ê³  ìˆì–´ë„ ì ê¸ˆ ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ì•„ë˜ëŠ” semi-consistent read ì˜ˆë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'READ-COMMITTED'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span>  name <span class=\"token operator\">=</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 2</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> transaction_isolation <span class=\"token operator\">=</span> <span class=\"token string\">'READ-COMMITTED'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> MEMBER <span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> AGE <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span>  name <span class=\"token operator\">=</span> <span class=\"token string\">'Kim'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 3</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> OBJECT_SCHEMA<span class=\"token punctuation\">,</span> OBJECT_NAME<span class=\"token punctuation\">,</span> INDEX_NAME<span class=\"token punctuation\">,</span> LOCK_TYPE<span class=\"token punctuation\">,</span> LOCK_MODE<span class=\"token punctuation\">,</span>LOCK_STATUS<span class=\"token punctuation\">,</span>LOCK_DATA <span class=\"token keyword\">FROM</span> performance_schema<span class=\"token punctuation\">.</span>data_locks<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token operator\">|</span> OBJECT_SCHEMA <span class=\"token operator\">|</span> OBJECT_NAME <span class=\"token operator\">|</span> INDEX_NAME <span class=\"token operator\">|</span> LOCK_TYPE <span class=\"token operator\">|</span> LOCK_MODE     <span class=\"token operator\">|</span> LOCK_STATUS <span class=\"token operator\">|</span> LOCK_DATA <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> IX            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>    <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">5</span>         <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span> <span class=\"token keyword\">TABLE</span>     <span class=\"token operator\">|</span> IX            <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> system_schm   <span class=\"token operator\">|</span> member      <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>    <span class=\"token operator\">|</span> RECORD    <span class=\"token operator\">|</span> X<span class=\"token punctuation\">,</span>REC_NOT_GAP <span class=\"token operator\">|</span> GRANTED     <span class=\"token operator\">|</span> <span class=\"token number\">4</span>         <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-------------+------------+-----------+---------------+-------------+-----------+</span>\n<span class=\"token number\">4</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ë‘ íŠ¸ëœì ¹ì„  ëª¨ë‘ WHEREì ˆì—ì„œ nameì„ ë¹„êµí•˜ì§€ë§Œ Hong, Kim ì„œë¡œ ë‹¤ë¥¸ ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.\nnameì€ ì¸ë±ì‹±ë˜ì–´ ìˆì§€ ì•Šì•„ semi-consistent readë¡œ ì ê¸ˆ ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h3 id=\"Read-Uncommitted\" style=\"position:relative;\">Read Uncommitted<a href=\"#Read-Uncommitted\" aria-label=\"Read Uncommitted permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Read Uncommitted ê²©ë¦¬ ìˆ˜ì¤€ì„ ì‚¬ìš©í•˜ëŠ” íŠ¸ëœì­ì…˜ì€ ì•„ì§ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ë”í‹° ë¦¬ë“œ(dirty read)ë¼ê³  í•œë‹¤.\në”í‹° ë¦¬ë“œë¥¼ ì œì™¸í•˜ê³ ëŠ” ë™ì‘ì€ READ COMMITTEDì™€ ë™ì¼í•˜ë‹¤. ì£¼ìš” ìš©ë„ëŠ” ëŒ€ëµì ì¸ ê°’ë§Œ í•„ìš”í•œ ê²½ìš°ì´ë‹¤.</p>\n<h2 id=\"Deadlock\" style=\"position:relative;\">Deadlock<a href=\"#Deadlock\" aria-label=\"Deadlock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë°ë“œë½(Deadlock)ì´ë€, ë‘ ê°œ ì´ìƒì˜ ì‘ì—…ì´ ì„œë¡œ ìƒëŒ€ë°©ì˜ ì‘ì—…ì´ ëë‚˜ê¸° ë§Œì„ ê¸°ë‹¤ë¦¬ê³  ìˆê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì™„ë£Œë˜ì§€ ëª»í•˜ëŠ” ìƒíƒœì´ë‹¤.\nì•„ë˜ ì˜ˆì œëŠ” ë°ë“œë½ì˜ ì˜ˆì´ë‹¤.</p>\n<h4>ì‚¬ë¡€1</h4>\n<table>\n<thead>\n<tr>\n<th align=\"center\">trx-1</th>\n<th align=\"center\">trx-2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">UPDATE member SET age = age + 1 WHERE id = 1;</td>\n<td align=\"center\">UPDATE member SET age = age + 1 WHERE id = 2;</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">UPDATE member SET age = age + 1 WHERE id = 1;</td>\n</tr>\n<tr>\n<td align=\"center\">UPDATE member SET age = age + 1 WHERE id = 2;</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">deadlock</td>\n<td align=\"center\"></td>\n</tr>\n</tbody>\n</table>\n<p>trx-1ì€ id=1ì— ë°°íƒ€ì  ì ê¸ˆì„ ì„¤ì •í•œì±„ë¡œ id=2ì˜ ë°°íƒ€ì  ì ê¸ˆì„ ì›í•˜ê³ , trx-2ëŠ” id=2ì— ë°°íƒ€ì  ì ê¸ˆì„ ì„¤ì •í•œì±„ë¡œ id=1ì˜ ë°°íƒ€ì  ì ê¸ˆì„ ì›í•˜ê¸° ë•Œë¬¸ì—\në‘ íŠ¸ëœì­ì…˜ì€ ì˜ì›íˆ ì™„ë£Œí•  ìˆ˜ ì—†ë‹¤.</p>\n<h4>ì‚¬ë¡€2</h4>\n<table>\n<thead>\n<tr>\n<th align=\"center\">trx-1</th>\n<th align=\"center\">trx-2</th>\n<th align=\"center\">trx-3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">DELETE FROM member WHERE id = 1;</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">INSERT INTO member VALUES(1, ...);</td>\n<td align=\"center\">INSERT INTO member VALUES(1, ...);</td>\n</tr>\n<tr>\n<td align=\"center\">commit;</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">deadlock</td>\n<td align=\"center\"></td>\n</tr>\n</tbody>\n</table>\n<p>trx-1ì€ id=1 í–‰ì— ëŒ€í•´ ë°°íƒ€ì  ì ê¸ˆì„ íšë“í•œë‹¤.\ntrx-2ì™€ trx-3ì€ ë™ì¼í•œ í–‰ì— ëŒ€í•´ INSERTí•˜ì—¬ Duplicate key errorê°€ ë°œìƒí•˜ê³ , í•´ë‹¹ í–‰ì— ëŒ€í•´ ê³µìœ  ì ê¸ˆ(Shared Lock)ì„ ìš”ì²­í•œë‹¤.</p>\n<blockquote>\n<p>InnoDBì—ì„œì˜ INSERTëŠ” Duplicate key error ë°œìƒí•˜ë©´ í•´ë‹¹ ë ˆì½”ë“œì— ê³µìœ  ì ê¸ˆì„ ë¨¼ì € ì„¤ì •í•˜ê³  ë°°íƒ€ì  ì ê¸ˆì„ íšë“í•˜ê¸° ë•Œë¬¸ì´ë‹¤.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p>\n</blockquote>\n<p>trx-1ì´ ì»¤ë°‹í•˜ë©´ í–‰ì— ëŒ€í•œ ë°°íƒ€ì  ì ê¸ˆì„ í•´ì œí•˜ê³ , trx-2ì™€ trx-3ì€ í–‰ì— ëŒ€í•œ ê³µìœ  ì ê¸ˆì„ íšë“í•˜ê²Œ ëœë‹¤.\nì´ ì‹œì ì—ì„œ, trx-2ì™€ trx-3ëŠ” ë°ë“œë½ì´ ë°œìƒí•œë‹¤. ë‘ ì„¸ì…˜ ëª¨ë‘ ë‹¤ë¥¸ ì„¸ì…˜ì— ì˜í•´ ë³´ìœ ëœ ê³µìœ  ì ê¸ˆ ë•Œë¬¸ì— í•´ë‹¹ í–‰ì— ëŒ€í•œ ë°°íƒ€ì  ì ê¸ˆì„ íšë“í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<h3 id=\"RollBack\" style=\"position:relative;\">RollBack<a href=\"#RollBack\" aria-label=\"RollBack permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë°ë“œë½ì´ ë°œìƒí•˜ë©´, InnoDBëŠ” ê°€ì¥ ì ì€ ì‘ì—…ì„ ìˆ˜í–‰í•œ íŠ¸ëœì­ì…˜ì„ ë¡¤ë°±í•œë‹¤. ê°€ì¥ ì ì€ ì‘ì—…ì´ë€ <code class=\"language-text\">information_schema.INNODB_TRX</code> ë·°ì—ì„œ <code class=\"language-text\">trx_weight</code>ê°’ì´ ì ì€ íŠ¸ëœì­ì…˜ì„ ì˜ë¯¸í•œë‹¤.\nì´ë¥¼ íŠ¸ëœì­ì…˜ ê°€ì¤‘ì¹˜ë¼ê³  í•˜ëŠ”ë° íŠ¸ëœì­ì…˜ì˜ ê°€ì¤‘ì¹˜ëŠ” ë³€ê²½ëœ í–‰ì˜ ìˆ˜ì™€ íŠ¸ëœì­ì…˜ì— ì˜í•´ ì ê¸´ í–‰ì˜ ìˆ˜ë¥¼ ë°˜ì˜í•œë‹¤.<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Connection 1</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">begin</span> <span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">></span> <span class=\"token keyword\">UPDATE</span> member <span class=\"token keyword\">SET</span> age <span class=\"token operator\">=</span> age <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">WHERE</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">Rows</span> <span class=\"token keyword\">matched</span>: <span class=\"token number\">1</span>  Changed: <span class=\"token number\">1</span>  <span class=\"token keyword\">Warnings</span>: <span class=\"token number\">0</span>\n\n<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> trx_id<span class=\"token punctuation\">,</span> trx_weight <span class=\"token keyword\">FROM</span> information_schema<span class=\"token punctuation\">.</span>INNODB_TRX<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+------------+</span>\n<span class=\"token operator\">|</span> trx_id <span class=\"token operator\">|</span> trx_weight <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+------------+</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">280342</span> <span class=\"token operator\">|</span>          <span class=\"token number\">3</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+------------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"ì„œë¹„ìŠ¤-í™˜ê²½ì—ì„œì˜-ë°ë“œë½\" style=\"position:relative;\">ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œì˜ ë°ë“œë½<a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%8D%B0%EB%93%9C%EB%9D%BD\" aria-label=\"ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œì˜ ë°ë“œë½ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œì˜ ë°ë“œë½ì€ ì˜ˆì œì™€ ê°™ì´ ë‹¨ìˆœí•œ ì¼€ì´ìŠ¤ê°€ ì•„ë‹Œ ì•”ì‹œì ì¸ ì ê¸ˆìœ¼ë¡œ ë°ë“œë½ì˜ ì›ì¸ íŒŒì•…ì— ì–´ë ¤ì›€ì´ ìˆëŠ” ê²½ìš°ê°€ ë§ë‹¤.\nëŒ€í‘œì ìœ¼ë¡œ UPSERTë¥¼ ì²˜ë¦¬í•˜ëŠ” <code class=\"language-text\">INSERT INTO T SELECT ... FROM ... ON DUPLICATE KEY</code> ì™€ ê°™ì€ êµ¬ë¬¸ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> MEMBER <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">SELECT</span> id<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age\n<span class=\"token keyword\">FROM</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n      <span class=\"token keyword\">FROM</span> MEMBER\n      <span class=\"token keyword\">WHERE</span> city <span class=\"token operator\">=</span> <span class=\"token string\">'Busan'</span>\n        <span class=\"token operator\">AND</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Hong'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> T\n<span class=\"token keyword\">ON</span> <span class=\"token keyword\">DUPLICATE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">UPDATE</span> age <span class=\"token operator\">=</span> T<span class=\"token punctuation\">.</span>age <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ SQLì€ MEMBER í…Œì´ë¸”ì— city='Busan' ì´ë©´ì„œ name='Hong'ì¸ ë©¤ë²„ë¥¼ SELECT í•˜ì—¬ ë‹¤ì‹œ MEMBERì— INSERT í•œë‹¤.\në§Œì•½, ì¤‘ë³µëœ ê°’ì´ ìˆë‹¤ë©´ ageë¥¼ 1ì¦ê°€ì‹œí‚¨ë‹¤.</p>\n<p>ì´ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì ê¸ˆì„ í•„ìš”ë¡œ í•œë‹¤.</p>\n<ul>\n<li>FROMì ˆ ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰ì„ ìœ„í•œ ê³µìœ  ì ê¸ˆ</li>\n<li>ì„œë¸Œì¿¼ë¦¬ì˜ SELECT ê²°ê³¼ë¥¼ INSERT í•  ë•Œ, ì¤‘ë³µí‚¤ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ í‚¤ì— ëŒ€í•œ ê³µìœ  ì ê¸ˆ</li>\n<li>UPDATEë¥¼ ìœ„í•œ ë°°íƒ€ì  ì ê¸ˆ</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">trx-1</th>\n<th align=\"center\">trx-2</th>\n<th align=\"center\">trx-3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">BEGIN;</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">SELECT * FROM MEMBER WHERE city='Busan' FOR UPDATE ;</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">BEGIN;</td>\n<td align=\"center\">BEGIN;</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">INSERT INTO ... ON DUPLICATE KEY UPDATE ;</td>\n<td align=\"center\">INSERT INTO ... ON DUPLICATE KEY UPDATE ;</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">wants MEMBER_IDX S Lock</td>\n<td align=\"center\">wants MEMBER_IDX S Lock</td>\n</tr>\n<tr>\n<td align=\"center\">rollback;</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">grant MEMBER_IDX S Lock</td>\n<td align=\"center\">grant MEMBER_IDX S Lock</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">wants id=4 X Lock</td>\n<td align=\"center\">wants id=5 X Lock</td>\n</tr>\n</tbody>\n</table>\n<p>ê°™ì€ ì›ë¦¬ë¡œ UPDATE êµ¬ë¬¸ì—ì„œ SELF JOIN í•˜ëŠ” ê²½ìš° ë°ë“œë½ì˜ ë°œìƒ ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§„ë‹¤.\nUPDATE êµ¬ë¬¸ì˜ JOINì´ ê±¸ë¦° í…Œì´ë¸”ì—ëŠ” ê³µìœ  ì ê¸ˆì„ ì„¤ì •í•˜ê³  ìˆ˜ì •ì— ì˜í–¥ì„ ë°›ëŠ” ë ˆì½”ë“œì— ëŒ€í•œ ë°°íƒ€ì  ì ê¸ˆì„ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> MEMBER\n    <span class=\"token keyword\">JOIN</span> MEMBER\n    <span class=\"token keyword\">ON</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">as</span> CHILD\n<span class=\"token keyword\">SET</span> AGE <span class=\"token operator\">=</span> CHILD<span class=\"token punctuation\">.</span>AGE<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ëŸ¬í•œ ìì‹ ì˜ í…Œì´ë¸”ì„ JOINí•˜ì—¬ UPDATE í•˜ëŠ” êµ¬ë¬¸ ì—­ì‹œ ê³µìœ  ì ê¸ˆì„ íšë“ í›„ UPDATEë¥¼ ìœ„í•´ ë°°íƒ€ì  ì ê¸ˆìœ¼ë¡œ ì ê¸ˆì„ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ì„œ ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-locks-set.html\">https://dev.mysql.com/doc/refman/8.0/en/innodb-locks-set.html</a></p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-2\">\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/information-schema-innodb-trx-table.html\">https://dev.mysql.com/doc/refman/8.0/en/information-schema-innodb-trx-table.html</a></p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">â†©</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/mysql-transaction-lock/"},"frontmatter":{"title":"MySQL ì ê¸ˆê³¼ íŠ¸ëœì­ì…˜ Deep Dive","date":"November 16, 2023"}},{"id":"f3cc757b-893a-536b-a5a9-fd7daa864ee1","html":"<h2 id=\"ë¬¸ì œ-ìƒí™©\" style=\"position:relative;\">ë¬¸ì œ ìƒí™©<a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"ë¬¸ì œ ìƒí™© permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì†Œì¼“ì„ í™œìš©í•˜ì—¬ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ í†µì‹ ì„ ì§„í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ, í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ìš”ì²­ì´ ì¼ì‹œì ìœ¼ë¡œ ê¸‰ì¦í•˜ëŠ” ìƒí™©ì„ í…ŒìŠ¤íŠ¸í•˜ë˜ ì¤‘,\ní´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ <code class=\"language-text\">Connection reset by peer</code> ë¼ëŠ” ì˜ˆì™¸ê°€ ê°„í—ì ìœ¼ë¡œ ë°œìƒí•˜ì˜€ë‹¤. ì•„ë˜ëŠ” í•´ë‹¹ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ê¸°ë¡ëœ ë¡œê·¸ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Hello, world!\nHello, world!\nHello, world!\norg.springframework.web.client.ResourceAccessException: I/O error: Connection reset by peer; nested exception is java.net.SocketException: Connection reset by peer\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:453)\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:199)\n\tat com.example.ehcache.EhcacheApplication2.lambda$main$0(EhcacheApplication2.java:35)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n\tat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.net.SocketException: Connection reset by peer\n\tat java.base/sun.nio.ch.Net.connect0(Native Method)\n\tat java.base/sun.nio.ch.Net.connect(Net.java:579)\n\tat java.base/sun.nio.ch.Net.connect(Net.java:568)</code></pre></div>\n<p><code class=\"language-text\">Hello, world!</code>ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œë¶€í„° ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ ë°›ì•„ ì¶œë ¥í•œ ë©”ì‹œì§€ì´ë‹¤.\nê·¸ ì•„ë˜ì— ë‚˜íƒ€ë‚˜ëŠ” <code class=\"language-text\">java.net.SocketException: Connection reset by peer</code> ì˜ˆì™¸ëŠ” RestTemplateì„ í†µí•œ ì†Œì¼“ í†µì‹  ì¤‘ ë°œìƒí–ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<p>í•´ë‹¹ ë¬¸ì œê°€ ë°œìƒí•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\nì—¬ê¸°ì„œ ì„œë²„ëŠ” ìŠ¤ë ˆë“œí’€ ê¸°ë°˜ì˜ ê°„ë‹¨í•œ HTTP ì„œë²„ë¥¼ êµ¬í˜„í•˜ì˜€ê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ ì„œë²„ì— ìŠ¤ë ˆë“œ 1000ê°œë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì‹œì— ìš”ì²­ì„ ë³´ë‚´ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.</p>\n<h4>Server</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServerExampleApplication</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8100</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">NUM_THREADS</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">ExecutorService</span> executorService <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NUM_THREADS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerSocket</span> serverSocket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerSocket</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">Socket</span> socket <span class=\"token operator\">=</span> serverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\texecutorService<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ClientHandler</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ClientHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Socket</span> socket<span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ClientHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Socket</span> socket<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>socket <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token annotation punctuation\">@Override</span>\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">BufferedReader</span> input <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedReader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InputStreamReader</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tinput<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token class-name\">PrintWriter</span> writer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrintWriter</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span><span class=\"token function\">getOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HTTP/1.1 200 OK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type: text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\twriter<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tinput<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Client</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> <span class=\"token constant\">URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"http://localhost:8100\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">NUM_THREADS</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">ExecutorService</span> es <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NUM_THREADS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">RestTemplate</span> restTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token constant\">NUM_THREADS</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">var</span> response <span class=\"token operator\">=</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">awaitTermination</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SECONDS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ì‹œìŠ¤í…œ í™˜ê²½ì— ë”°ë¼ ì˜ˆì™¸ ì¬í˜„ì´ ì•ˆë  ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<p>ìš”ì²­ëŸ‰ì´ ë§ì•„ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ê°€ ë¶€ì¡±í•´ì ¸ ìš”ì²­ì„ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ ì´í•´ëŠ” ê°€ì§€ë§Œ, ì‹œìŠ¤í…œì´ ìš”ì²­ì„ ì²˜ë¦¬í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê¸°ì¤€ì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•´ ê¶ê¸ˆì¦ì´ ìƒê²¼ë‹¤.</p>\n<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” ìš”ì²­ì´ í­ì¦í•˜ëŠ” ìƒí™©ì—ì„œ ë°œìƒí•˜ëŠ” <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ì˜ ì›ì¸ì„ ê¹Šì´ ìˆê²Œ ë¶„ì„í•œë‹¤.</p>\n<h2 id=\"ì›ì¸-ë¶„ì„-ê³¼ì •\" style=\"position:relative;\">ì›ì¸ ë¶„ì„ ê³¼ì •<a href=\"#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D-%EA%B3%BC%EC%A0%95\" aria-label=\"ì›ì¸ ë¶„ì„ ê³¼ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"íŒ¨í‚·-ë¶„ì„\" style=\"position:relative;\">íŒ¨í‚· ë¶„ì„<a href=\"#%ED%8C%A8%ED%82%B7-%EB%B6%84%EC%84%9D\" aria-label=\"íŒ¨í‚· ë¶„ì„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ê°€ ë°œìƒí–ˆì§€ë§Œ, ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ì—ì„œëŠ” ì–´ë–¤ ì˜ˆì™¸ë„ ì¡ì•„ë‚¼ ìˆ˜ ì—†ì—ˆë‹¤.\nìƒí™©ì„ ë” ìì„¸íˆ íŒŒì•…í•˜ê¸° ìœ„í•´ Wiresharkë¥¼ ì‚¬ìš©í•´ íŒ¨í‚·ì„ ë¶„ì„í•˜ì˜€ë‹¤.\nì•„ë˜ <strong>ê·¸ë¦¼ 1</strong>ì€ ë¬¸ì œê°€ ë°œìƒí•œ ì‹œì ì˜ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ í†µì‹  íŒ¨í‚· ìº¡ì³ í™”ë©´ì´ë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/caebe6ce8ad4511e6b3105eb35dbb515/f8d80/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.470588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAS0lEQVR42i3KOQ6AIBQAUe/foQWfTQ1WIgJxOd9ojMU0L9NVM5LFUyRwhUg1E+212y8UHcjaUezI/n+pNyQlX6vSbIOlycxhI6eLPBkEOZ/PcIT8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"[ê·¸ë¦¼1]ë¬¸ì œê°€ ë°œìƒí•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ í†µì‹ \"\n        title=\"\"\n        src=\"/static/caebe6ce8ad4511e6b3105eb35dbb515/ca1dc/img.png\"\n        srcset=\"/static/caebe6ce8ad4511e6b3105eb35dbb515/e7570/img.png 170w,\n/static/caebe6ce8ad4511e6b3105eb35dbb515/f46e7/img.png 340w,\n/static/caebe6ce8ad4511e6b3105eb35dbb515/ca1dc/img.png 680w,\n/static/caebe6ce8ad4511e6b3105eb35dbb515/02d09/img.png 1020w,\n/static/caebe6ce8ad4511e6b3105eb35dbb515/9d567/img.png 1360w,\n/static/caebe6ce8ad4511e6b3105eb35dbb515/f8d80/img.png 1516w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">[ê·¸ë¦¼1]ë¬¸ì œê°€ ë°œìƒí•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ í†µì‹ </figcaption>\n  </figure></p>\n<ul>\n<li>3842ë²ˆ íŒ¨í‚· : í´ë¼ì´ì–¸íŠ¸ -> ì„œë²„ë¡œ <code class=\"language-text\">SYN</code> íŒ¨í‚·ì„ ì „ì†¡í•˜ì˜€ë‹¤.</li>\n<li>3843ë²ˆ íŒ¨í‚· : ì„œë²„ -> í´ë¼ì´ì–¸íŠ¸ë¡œ <code class=\"language-text\">SYN,ACK</code> ìœ¼ë¡œ ì‘ë‹µí•˜ì˜€ë‹¤.</li>\n<li>3845ë²ˆ íŒ¨í‚· : í´ë¼ì´ì–¸íŠ¸ -> ì„œë²„ë¡œ <code class=\"language-text\">ACK</code>ë¡œ ì‘ë‹µ í›„, 3-way Handshakeê°€ ì™„ë£Œë˜ì—ˆë‹¤.</li>\n<li>3848ë²ˆ íŒ¨í‚· : ì„œë²„ -> í´ë¼ì´ì–¸íŠ¸ë¡œ <code class=\"language-text\">RST</code> íŒ¨í‚·ì„ ì „ì†¡í•œë‹¤.</li>\n</ul>\n<p>ìº¡ì³ëœ íŒ¨í‚·ì„ ì‚´í´ë³´ë©´ ì •ìƒì ì¸ TCP 3-way Handshakeê°€ ì§„í–‰ëœ í›„, ì„œë²„ì—ì„œ RST íŒ¨í‚·ì„ ì „ì†¡í•˜ì—¬ ì—°ê²°ì„ ê°•ì œë¡œ ì¢…ë£Œí•˜ì˜€ë‹¤.\nRST íŒ¨í‚·ì€ ì—°ê²°ì˜ ë¬¸ì œë‚˜ ì˜ˆì™¸ì ì¸ ìƒí™©ì—ì„œ ì „ì†¡ë˜ë¯€ë¡œ í•´ë‹¹ ì—°ê²°ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<p>ë¬¸ì œ ìƒí™©ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì¶œë ¥í•œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, socket.connect() ë¥¼ ìˆ˜í–‰ ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì¦‰, í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì´ connect()ë¥¼ í˜¸ì¶œí•´ ìˆ˜í–‰í•˜ë˜ ì¤‘ 3-way Handshakeë¥¼ ì™„ë£Œí•œ í›„ì— ì„œë²„ë¡œë¶€í„° RST íŒ¨í‚·ì„ ë°›ì•„ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ê°€ ë°œìƒëœ ê²ƒìœ¼ë¡œ í™•ì¸ëœë‹¤.</p>\n<h3 id=\"í…ŒìŠ¤íŠ¸-í™˜ê²½-ì „í™˜\" style=\"position:relative;\">í…ŒìŠ¤íŠ¸ í™˜ê²½ ì „í™˜<a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%99%98%EA%B2%BD-%EC%A0%84%ED%99%98\" aria-label=\"í…ŒìŠ¤íŠ¸ í™˜ê²½ ì „í™˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ì™€ íŒ¨í‚· ë¶„ì„ ê²°ê³¼, ì˜ˆì™¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ë³´ë‹¤ëŠ” OSë‚˜ TCP/IP í”„ë¡œí† ì½œ ë ˆë²¨ì—ì„œ ë°œìƒí•œ ê²ƒ ì¶”ì¸¡ë˜ì—ˆë‹¤.\níŒ¨í‚· ë¶„ì„ì—ì„œ ì„œë²„ê°€ RST íŒ¨í‚·ì„ ì „ì†¡í•œ ê±¸ í™•ì¸í–ˆëŠ”ë°, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” <code class=\"language-text\">RST</code> íŒ¨í‚·ì„ ì „ì†¡í•˜ëŠ” ë¡œì§ì´ë‚˜ íŒ¨í‚·ì„ ë³´ë‚¼ ì¡°ê±´ì„ ê²°ì •í•˜ëŠ” ë¡œì§ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì›ì¸ì„ ë³´ë‹¤ êµ¬ì²´ì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ìœ„í•´ MacOS í™˜ê²½ ëŒ€ì‹  ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ ë™ì¼í•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ê¸°ë¡œ ê²°ì •í–ˆë‹¤.\nDockerë¥¼ ì‚¬ìš©í•´ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì„ êµ¬ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆë‹¤. ì—¬ê¸°ì„œëŠ” ubuntu ë¦¬ëˆ…ìŠ¤ë¥¼ ì„ íƒí–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-it</span> <span class=\"token parameter variable\">-v</span> ~/docker/linux:/home ubuntu</code></pre></div>\n<p>ë™ì¼í•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸ í–ˆì„ ë•Œ, ê°™ì€ ìŠ¤ë ˆë“œì™€ ë¶€í•˜ì—ë„ ë¶ˆêµ¬í•˜ê³  ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œëŠ” <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ê°€ í•œ ë²ˆë„ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.\nì—¬ëŸ¬ë²ˆ í…ŒìŠ¤íŠ¸í•´ë„ ê²°ê³¼ëŠ” ê°™ì•˜ê³  ì‹¬ì§€ì–´ í´ë¼ì´ì–¸íŠ¸ ë¶€í•˜ë¥¼ ì¦ê°€ì‹œì¼œë„ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.\nì´ ê²°ê³¼ë¡œ ë³¼ ë•Œ, ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ <code class=\"language-text\">RST</code> íŒ¨í‚·ì„ ì „ì†¡í•˜ëŠ” ê²°ì • ë° ê³¼ì •ì´ OSë‚˜ TCP/IP í”„ë¡œí† ì½œ ë ˆë²¨ì—ì„œ ì´ë£¨ì–´ì§€ê³  ìˆì„ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ì•„ì¡Œë‹¤.</p>\n<h3 id=\"ì†Œì¼“-ë‚´ë¶€-ë¡œì§-ë¶„ì„\" style=\"position:relative;\">ì†Œì¼“ ë‚´ë¶€ ë¡œì§ ë¶„ì„<a href=\"#%EC%86%8C%EC%BC%93-%EB%82%B4%EB%B6%80-%EB%A1%9C%EC%A7%81-%EB%B6%84%EC%84%9D\" aria-label=\"ì†Œì¼“ ë‚´ë¶€ ë¡œì§ ë¶„ì„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ ì˜ˆì™¸ê°€ ì¬í˜„ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸ í›„, Socket í´ë˜ìŠ¤ ë‚´ë¶€ ë™ì‘ì„ ì‚´í´ë³´ì•˜ë‹¤.\nSocket í´ë˜ìŠ¤ì˜ ì—°ì‚°ì€ ê²°êµ­ PlainSocketImpl í´ë˜ìŠ¤ì˜ native ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.\nì´ëŸ¬í•œ ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œëŠ” OSì˜ ì‹œìŠ¤í…œ í˜¸ì¶œì„ í†µí•´ ì†Œì¼“ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤. ë”°ë¼ì„œ, ì‹œìŠ¤í…œ ë ˆë²¨ì—ì„œ ì†Œì¼“ì´ ì–´ë–»ê²Œ ë™ì‘ë˜ëŠ”ì§€ í™•ì¸ì´ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PlainSocketImpl</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractPlainSocketImpl</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// [...]</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketCreate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> stream<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> isServer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketConnect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InetAddress</span> address<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> port<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> timeout<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketBind</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InetAddress</span> address<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> port<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketListen</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> count<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketAccept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketImpl</span> s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">int</span> <span class=\"token function\">socketAvailable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketClose0</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> useDeferredClose<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketShutdown</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> howto<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initProto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketSetOption0</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> cmd<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">int</span> <span class=\"token function\">socketGetOption</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> opt<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> iaContainerObj<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">socketSendUrgentData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> data<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ì†Œì¼“-í†µì‹ -ë‚´ë¶€-êµ¬ì¡°\" style=\"position:relative;\">ì†Œì¼“ í†µì‹  ë‚´ë¶€ êµ¬ì¡°<a href=\"#%EC%86%8C%EC%BC%93-%ED%86%B5%EC%8B%A0-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%A1%B0\" aria-label=\"ì†Œì¼“ í†µì‹  ë‚´ë¶€ êµ¬ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>RST íŒ¨í‚·ì˜ ì›ì¸ì„ íŒŒì•…í•˜ê¸° ìœ„í•´, ì†Œì¼“ í†µì‹ ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ì.\në¨¼ì €, ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ìˆ˜ë½í•˜ëŠ” accept ì‹œìŠ¤í…œ í˜¸ì¶œì— ëŒ€í•œ ì„¤ëª…ì„ man ëª…ë ¹ì–´ë¡œ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">man</span> accept</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">accept() extracts the first connection request on the queue\nof pending connections, creates a new socket with the same properties of\nsocket, and allocates a new file descriptor for the socket. If no\npending connections are present on the queue, and the socket is not\nmarked as non-blocking, accept() blocks the caller until a connection is present.</code></pre></div>\n<blockquote>\n<p>accept() í•¨ìˆ˜ëŠ” ëŒ€ê¸° ì¤‘ì¸ ì—°ê²° ìš”ì²­ì˜ íì—ì„œ ì²« ë²ˆì§¸ ì—°ê²° ìš”ì²­ì„ ì¶”ì¶œí•˜ì—¬,\ní•´ë‹¹ ì†Œì¼“ê³¼ ë™ì¼í•œ ì†ì„±ì„ ê°€ì§„ ìƒˆë¡œìš´ ì†Œì¼“ì„ ìƒì„±í•˜ê³  ê·¸ ì†Œì¼“ì— ëŒ€í•œ ìƒˆë¡œìš´ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë¥¼ í• ë‹¹í•œë‹¤.\níì— ëŒ€ê¸° ì¤‘ì¸ ì—°ê²°ì´ ì—†ê³  ì†Œì¼“ì´ non-blockingìœ¼ë¡œ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°, accept()ëŠ” ì—°ê²°ì´ ìˆì„ ë•Œê¹Œì§€ í˜¸ì¶œìë¥¼ ì°¨ë‹¨í•œë‹¤.</p>\n</blockquote>\n<p>man ì—ì„œ ì„¤ëª…ëœ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì†Œì¼“ ë‚´ë¶€ì ìœ¼ë¡œ ì—°ê²° ìš”ì²­ì„ ìœ„í•œ ëŒ€ê¸°ì—´ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ìœ ì§€í•œ ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\nì†Œì¼“ í†µì‹  ê³¼ì • ì¤‘, ë‚´ë¶€ì— ëŒ€ê¸°ì—´ì´ ì¡´ì¬í•œë‹¤ëŠ” ì‹¤ë§ˆë¦¬ë¥¼ í†µí•´ ê´€ë ¨ ìë£Œë¥¼ ì°¸ì¡°í•˜ì—¬ ë‚´ìš©ì„ ì •ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.\nì°¸ì¡°í•œ ìë£ŒëŠ” ë§¨ ì•„ë˜ ë” ì½ì„ê±°ë¦¬ì— ì •ë¦¬í•´ë‘ì—ˆë‹¤.</p>\n<h3 id=\"SYN-íì™€-accept-í\" style=\"position:relative;\">SYN íì™€ accept í<a href=\"#SYN-%ED%81%90%EC%99%80-accept-%ED%81%90\" aria-label=\"SYN íì™€ accept í permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì€ 3-Way Handshake ê³¼ì • ì¤‘ ë‚´ë¶€ì ìœ¼ë¡œ SYN íì™€ accept íë¥¼ ìœ ì§€í•œë‹¤.\nì•„ë˜ í”„ë¡œì„¸ìŠ¤ëŠ” 3-Way Handshake ê³¼ì • ì¤‘ ë‘ ê°œì˜ íê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ” ì§€ë¥¼ ì„¤ëª…í•œë‹¤.</p>\n<ol>\n<li>í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— ì—°ê²°ì„ ì‹œì‘í•˜ë ¤ê³  SYN íŒ¨í‚·ì„ ë³´ë‚´ê³ , ì´í›„ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœë¡œ ë“¤ì–´ê°„ë‹¤.</li>\n<li>ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ SYN ìš”ì²­ì„ ë°›ìœ¼ë©´ <code class=\"language-text\">SYN_RECV</code> ìƒíƒœë¡œ ë³€ê²½ëœë‹¤. ì´ë•Œ, ì»¤ë„ì€ ì´ ì—°ê²° ì •ë³´ë¥¼ SYN íì— ì €ì¥í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ SYN+ACK íŒ¨í‚·ì„ ì‘ë‹µí•œë‹¤.</li>\n<li>í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ SYN + ACKë¥¼ ë°›ê³ , ACKë¥¼ ì„œë²„ì—ê²Œ ì‘ë‹µí•˜ë©´ì„œ <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœë¡œ ë³€ê²½ëœë‹¤.</li>\n<li>ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ACKë¥¼ ë°›ìœ¼ë©´, ì»¤ë„ì€ ì—°ê²° ì •ë³´ë¥¼ SYN íì—ì„œ ì œê±°í•˜ê³  accept íì— ì¶”ê°€í•œë‹¤. ê·¸ í›„ ì„œë²„ëŠ” <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœë¡œ ë“¤ì–´ê°„ë‹¤.</li>\n<li>ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ accept í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, ì—°ê²°ì€ accept íì—ì„œ êº¼ë‚´ì§„ë‹¤.</li>\n</ol>\n<p>ì•„ë˜ <strong>ê·¸ë¦¼2</strong>ëŠ” ìœ„ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ í‘œí˜„í•œ ê²ƒ ì´ë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5fa15322156f084449a8ed27ed873cf9/045f5/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4klEQVR42oVUTW/aQBTk/1966rmXqodKvVc59FKpqdoqUiBJE0IgBPAHGH+sP9a7/pjOrjGEJKi2ng328+y8N/N2oPUYafoJRfEFVb1BCzAaRn82aPiwLH8w7yOU+oq6rnZ5r8+B1tfYbN5DiA8E9J8lYv/bAOb5GXzvHe+foWtll2xenBawZXJV1WjMVycOkyPEFqvVDFEckGF9MndgLlXFEtrTgObIs4iVLJESuKkbHEogr6axYX6zZIk4WttE05tTDNM0gLMaQyQ+tNIEYMkG5CiRDPMswWJ+B2cxhi6LkwzrWkMWGYo8I9scSRghEwUXeoLjnMFzv6HSUVdyWYTYPJ3Df/yOXGygdAUppWVgWpHLEmmh6AQFVZbQWvOuLCNTWZYukGVLLqoMYEvkEk1FgFoSoLECRWQgEsF2xLh58HBx62K6ZFsqjVLVmDoKk1UFJyj3bbElmz9pkWA4vcRwNsRoOqSSIVKCGUDD5lB2p66uW4KV+DuXHaAhUXfVWEClCsRUMckj3kOWW0DEwpblBS4myzEenHs8rqa2fzKX7Kck2/ot27S24S9tY5LNqpt4TTb3BJzA2ayswkVOMUSKhIuWMkUU3SDcXpLIetfDis5vzTjVNmxDep8dKd0xMr41wOa9kgKe95sq/6QwqwNg25rkpovD3Fm/Wc+RbUX1zTPDfp14cJMVvNg5mpxB7zGj7luAe2AC2g93rRmvb/Frfo4bd8Q9oPveitJwOoqcvSgz1I3umLbtnlkfYeRiNruC78/puwxpnkJwKEpOmnnfLzyQbKrrTOk7x3rs1KGVpI223G0ES9ddMc9Gbg9ohjoI17i4+4PRbITx8g6JSKhaSBUT3C/vcf14jasZlUyjnYnbfX+PBOyNLbm6sceaESQcPcURk8r6cCsC+JGPuTuBHyxQkmFje4k3Y2AuRr0jH7avd5sij7kfTmh4n2P6H8B+E+jjSN3dM2ObPu8UmAH8B0I4E+p9tuhHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"[ê·¸ë¦¼2] ì†Œì¼“ í†µì‹  ê³¼ì •\"\n        title=\"\"\n        src=\"/static/5fa15322156f084449a8ed27ed873cf9/ca1dc/img_1.png\"\n        srcset=\"/static/5fa15322156f084449a8ed27ed873cf9/e7570/img_1.png 170w,\n/static/5fa15322156f084449a8ed27ed873cf9/f46e7/img_1.png 340w,\n/static/5fa15322156f084449a8ed27ed873cf9/ca1dc/img_1.png 680w,\n/static/5fa15322156f084449a8ed27ed873cf9/045f5/img_1.png 797w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">[ê·¸ë¦¼2] ì†Œì¼“ í†µì‹  ê³¼ì •</figcaption>\n  </figure></p>\n<p>SYN íëŠ” 1ë²ˆì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚´ì˜¨ SYN íŒ¨í‚·<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>ì„ ì €ì¥í•œë‹¤.\nSYN + ACK íŒ¨í‚·ìœ¼ë¡œ ì‘ë‹µí•˜ê³ , í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ACK ì‘ë‹µì´ ì˜¤ì§€ ì•Šì„ ê²½ìš° ì¬ì‹œë„í•˜ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì¼ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•œ ìš©ë„ì´ë‹¤.</p>\n<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ accept()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ í´ë¼ì´ì–¸íŠ¸ë¡œ ACK ê¹Œì§€ ë°›ê²Œë˜ë©´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœì´ë‹¤.\naccept íëŠ” 4ë²ˆì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ACK ì‘ë‹µì„ ì¼ì‹œì ìœ¼ë¡œ ì €ì¥í•´ë‘ê³ , accept()ê°€ í˜¸ì¶œë˜ë©´ ì´ ëŒ€ê¸°ì—´ì—ì„œ ì œê±°ë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬ëœë‹¤.</p>\n<p>SYN íì™€ accept íì˜ í¬ê¸°ë¥¼ ê²°ì •í•˜ëŠ” ê´€ë ¨ ì»¤ë„ íŒŒë¦¬ë¯¸í„°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sysctl</span> net.ipv4.tcp_max_syn_backlog\n<span class=\"token function\">sysctl</span> net.core.somaxconn </code></pre></div>\n<blockquote>\n<p>tcp_max_syn_backlog :\nMaximal number of remembered connection requests, which have not\nreceived an acknowledgment from connecting client.\nThe minimal value is 128 for low memory machines, and it will\nincrease in proportion to the memory of machine.\nIf server suffers from overload, try increasing this number.</p>\n</blockquote>\n<blockquote>\n<p>somaxconn :\nLimit of socket listen() backlog, known in userspace as SOMAXCONN.\nDefaults to 128. See also tcp_max_syn_backlog for additional tuning\nfor TCP sockets.</p>\n</blockquote>\n<h3 id=\"listen\" style=\"position:relative;\">listen()<a href=\"#listen\" aria-label=\"listen permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>listen í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì£¼ì–´ì§€ëŠ” backlogëŠ” ëŒ€ê¸° ì¤‘ì¸ ì—°ê²° ìš”ì²­ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.\naccept íì˜ í¬ê¸° ê²°ì •ì— ìˆì–´ì„œ, somaxconn ì»¤ë„ íŒŒë¼ë¯¸í„°ì™€ listen í•¨ìˆ˜ì˜ backlog ì¸ì ë‘ ê°€ì§€ê°€ ì¤‘ìš”í•œ ì—­í• ì„ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> sockfd<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> backlog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>accept íì˜ í¬ê¸°ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹ì€ ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…ë˜ì–´ ìˆë‹¤.<sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup></p>\n<blockquote>\n<p>Now it specifies the queue length for completely\nestablished sockets waiting to be accepted, instead of the number\nof incomplete connection requests. The maximum length of the\nqueue for incomplete sockets can be set using\n/proc/sys/net/ipv4/tcp_max_syn_backlog. When syncookies are\nenabled there is no logical maximum length and this setting is\nignored. See tcp(7) for more information.\nIf the backlog argument is greater than the value in\n/proc/sys/net/core/somaxconn, then it is silently capped to that\nvalue. Since Linux 5.4, the default in this file is 4096; in\nearlier kernels, the default value is 128. Before Linux 2.4.25,\nthis limit was a hard coded value, SOMAXCONN, with the value 128.</p>\n</blockquote>\n<p>ìš”ì•½í•˜ë©´, backlog ê°’ì´ /proc/sys/net/core/somaxconnë³´ë‹¤ í¬ë©´, ìë™ìœ¼ë¡œ somaxconn ê°’ìœ¼ë¡œ ì œí•œëœë‹¤.\në¶ˆì™„ì „í•œ ì—°ê²°ì˜ ìµœëŒ€ í ê¸¸ì´ëŠ” /proc/sys/net/ipv4/tcp_max_syn_backlogë¡œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë©°, Linux 2.2 ì´ì „ì—ëŠ” somaxconn ê°’ì´ ë¶ˆì™„ì „í•œ ì—°ê²° ìš”ì²­ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ì—ˆë‹¤ê³  í•œë‹¤.\nì¦‰, accept íì˜ í¬ê¸°ëŠ” <strong>min(somaxconn, backlog)</strong> ê°’ìœ¼ë¡œ ì„¤ì •ëœë‹¤.</p>\n<h2 id=\"ê²€ì¦-ë°-í…ŒìŠ¤íŠ¸\" style=\"position:relative;\">ê²€ì¦ ë° í…ŒìŠ¤íŠ¸<a href=\"#%EA%B2%80%EC%A6%9D-%EB%B0%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"ê²€ì¦ ë° í…ŒìŠ¤íŠ¸ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ ì»¤ë„ íŒŒë¼ë¯¸í„° ì„¤ì •ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p>\n<h4>Server</h4>\n<p>ServerSocket ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì—°ê²°ì„ ëŒ€ê¸°í•˜ëŠ” ìƒíƒœë¡œ ìœ ì§€í•˜ë˜, accept() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì—°ê²°ì„ ìˆ˜ë½í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Server</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8100</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerSocket</span> serverSocket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerSocket</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Client</h4>\n<p>RestTemplateì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì— NUM_THREADS ê°œìˆ˜ë§Œí¼ì˜ ìš”ì²­ì„ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì „ì†¡í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> <span class=\"token constant\">URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"http://localhost:8100\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">NUM_THREADS</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">ExecutorService</span> es <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NUM_THREADS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">RestTemplate</span> restTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token constant\">NUM_THREADS</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">var</span> response <span class=\"token operator\">=</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tes<span class=\"token punctuation\">.</span><span class=\"token function\">awaitTermination</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SECONDS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>somaxconn=5, ìš”ì²­ 10ê°œì¸ ê²½ìš°</h4>\n<p>somaxconn íŒŒë¼ë¯¸í„°ë¥¼ 5ë¡œ ì„¤ì •í•˜ì—¬ ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  10ê°œì˜ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì „ì†¡í•œë‹¤. ì´í›„ netstatì„ ì‚¬ìš©í•˜ì—¬ ì†Œì¼“ì˜ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo sysctl -w kern.ipc.somaxconn=5</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ netstat -an | grep 8100\ntcp        6      0 0.0.0.0:8888            0.0.0.0:*               LISTEN\ntcp        0      1 127.0.0.1:57826         127.0.0.1:8888          SYN_SENT\ntcp        0      0 127.0.0.1:57824         127.0.0.1:8888          ESTABLISHED\ntcp        0      1 127.0.0.1:57832         127.0.0.1:8888          SYN_SENT\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57814         ESTABLISHED\ntcp        0      1 127.0.0.1:57828         127.0.0.1:8888          SYN_SENT\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57818         ESTABLISHED\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57824         ESTABLISHED\ntcp        0      0 127.0.0.1:57822         127.0.0.1:8888          ESTABLISHED\ntcp        0      0 127.0.0.1:57820         127.0.0.1:8888          ESTABLISHED\ntcp        0      1 127.0.0.1:57830         127.0.0.1:8888          SYN_SENT\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57820         ESTABLISHED\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57816         ESTABLISHED\ntcp      116      0 127.0.0.1:8888          127.0.0.1:57822         ESTABLISHED\ntcp        0      0 127.0.0.1:57818         127.0.0.1:8888          ESTABLISHED\ntcp        0      0 127.0.0.1:57814         127.0.0.1:8888          ESTABLISHED\ntcp        0      0 127.0.0.1:57816         127.0.0.1:8888          ESTABLISHED</code></pre></div>\n<p>netstatì„ í†µí•´ í™•ì¸í–ˆì„ ë•Œ, <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœì¸ ì†Œì¼“ìŒì´ ì´ 6ê°œ ìƒì„±ë˜ì—ˆê³ , ë‚˜ë¨¸ì§€ 4ê°œì˜ ìš”ì²­ì´ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nì¦‰, <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœì¸ ì†Œì¼“ì´ somaxconnì˜ í•œê³„ì— ë„ë‹¬í•˜ë©´, ê·¸ ì´í›„ì˜ ìš”ì²­ë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœë¡œ ëŒ€ê¸°í•˜ê²Œ ëœë‹¤.\n<code class=\"language-text\">SYN_SENT</code> ìƒíƒœì¸ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì€ SYN + ACK ì‘ë‹µì„ ë°›ì§€ ëª»í•˜ì—¬, ì¼ì • ì‹œê°„ì„ ì§€ë‚˜ë©´ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ë˜ì–´ ë“œë¡­ëœë‹¤.\nì´ ë•Œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ <code class=\"language-text\">Caused by: java.net.ConnectException: Operation timed out</code> ì˜ˆì™¸ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>\n<p>somaxconnì„ 5ë¡œ ì„¤ì •í–ˆì§€ë§Œ <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœ ì†Œì¼“ì´ 6ìŒì¸ ì´ìœ ëŠ” accept íê°€ ê½‰ ì°¨ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë¡œì§ì—ì„œ >= ì¡°ê±´ ëŒ€ì‹  > ì¡°ê±´ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìµœëŒ€ backlog ê°’ë³´ë‹¤ 1ê°œë¥¼ ë” ë°›ê²Œëœë‹¤.<sup id=\"fnref-5\"><a href=\"#fn-5\" class=\"footnote-ref\">5</a></sup>\nì´ëŠ” ì»¤ë„ ë²„ì „ì´ë‚˜ ìš´ì˜ì²´ì œ ë³„ë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">static</span> <span class=\"token keyword\">inline</span> bool <span class=\"token function\">sk_acceptq_is_full</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sock</span> <span class=\"token operator\">*</span>sk<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">READ_ONCE</span><span class=\"token punctuation\">(</span>sk<span class=\"token operator\">-></span>sk_ack_backlog<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token function\">READ_ONCE</span><span class=\"token punctuation\">(</span>sk<span class=\"token operator\">-></span>sk_max_ack_backlog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë‹¤ìŒìœ¼ë¡œ, 4ê°œì˜ ì†Œì¼“ì´ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nê·¸ëŸ°ë° íŠ¹ì´í•œ ì ì€ SYN íê°€ ê°€ë“ ì°¨ ìˆì§€ ì•Šì•„ë„ í•´ë‹¹ ì†Œì¼“ë“¤ì´ <code class=\"language-text\">SYN_RECV</code> ìƒíƒœê°€ ì•„ë‹Œ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœì— ìˆë‹¤ëŠ” ì ì´ë‹¤.\nì´ ìƒí™©ì€ í´ë¼ì´ì–¸íŠ¸ê°€ SYN íŒ¨í‚·ì„ ë³´ëƒˆì§€ë§Œ ì„œë²„ì—ì„œ SYN + ACK ì‘ë‹µì„ ë°›ì§€ ëª»í•œ ìƒí™©ì„ ë‚˜íƒ€ë‚¸ë‹¤.\naccept íê°€ ê°€ë“ ì°° ê²½ìš° SYN íì— ìš”ì²­ì´ ìˆœì„œëŒ€ë¡œ ì €ì¥ë˜ì–´ <code class=\"language-text\">SYN_RECV</code> ìƒíƒœë¥¼ ì˜ˆìƒí–ˆëŠ”ë°, ì •í™•í•œ ì›ì¸ì€ ì»¤ë„ ì†ŒìŠ¤ì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤.\nì•„ë˜ëŠ” ì»¤ë„ ì†ŒìŠ¤ì— ì¼ë¶€ë¶„ì´ë‹¤.</p>\n<p>listen() ì´í›„ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì˜¤ë©´ ì•„ë˜ <code class=\"language-text\">tcp_conn_request</code><sup id=\"fnref-6\"><a href=\"#fn-6\" class=\"footnote-ref\">6</a></sup> í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">tcp_conn_request</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">struct</span> <span class=\"token class-name\">request_sock_ops</span> <span class=\"token operator\">*</span>rsk_ops<span class=\"token punctuation\">,</span>\n\t\t     <span class=\"token keyword\">const</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">tcp_request_sock_ops</span> <span class=\"token operator\">*</span>af_ops<span class=\"token punctuation\">,</span>\n\t\t     <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sock</span> <span class=\"token operator\">*</span>sk<span class=\"token punctuation\">,</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sk_buff</span> <span class=\"token operator\">*</span>skb<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>syncookies <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">||</span> <span class=\"token function\">inet_csk_reqsk_queue_is_full</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>isn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\twant_cookie <span class=\"token operator\">=</span> <span class=\"token function\">tcp_syn_flood_action</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">,</span> rsk_ops<span class=\"token operator\">-></span>slab_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>want_cookie<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">goto</span> drop<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">sk_acceptq_is_full</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">NET_INC_STATS</span><span class=\"token punctuation\">(</span><span class=\"token function\">sock_net</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> LINUX_MIB_LISTENOVERFLOWS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">goto</span> drop<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">// ... ì¤‘ëµ</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ì†ŒìŠ¤ì—ì„œ ì²« ë²ˆì§¸ ifë¬¸ì€ <code class=\"language-text\">inet_csk_reqsk_queue_is_full()</code> í•¨ìˆ˜ë¥¼ í†µí•´ SYN íê°€ ê½‰ ì°¼ëŠ”ì§€ í™•ì¸í•œë‹¤.\në§Œì•½ ê½‰ ì°¼ë‹¤ë©´, ë°”ë¡œ ë“œë¡­ ì²˜ë¦¬ê°€ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\në‹¤ìŒìœ¼ë¡œ <code class=\"language-text\">sk_acceptq_is_full()</code> í•¨ìˆ˜ë¡œ accept íê°€ ê½‰ ì°¼ëŠ”ì§€ í™•ì¸í•˜ê³ , ê½‰ ì°¨ ìˆì„ ê²½ìš°ì—ë„ ë“œë¡­ ì²˜ë¦¬í•œë‹¤.\nì¦‰, SYN íëŠ” ê½‰ ì°¨ ìˆì§€ ì•Šì•„ë„ accept íê°€ ê½‰ ì°¨ë©´ ìš”ì²­ì´ ë“œë¡­ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<blockquote>\n<p>SYN íëŠ” ë‚´ìš©ì´ ë³µì¡í•˜ê³  ë°©ëŒ€í•˜ì—¬ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§€ëŠ” ì•ŠëŠ”ë‹¤. SYN íì— ê´€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ì²¨ë¶€ëœ ë§í¬ë¥¼ í†µí•´ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.<sup id=\"fnref-7\"><a href=\"#fn-7\" class=\"footnote-ref\">7</a></sup><sup id=\"fnref-8\"><a href=\"#fn-8\" class=\"footnote-ref\">8</a></sup></p>\n</blockquote>\n<h2 id=\"Connection-reset-by-peer\" style=\"position:relative;\">Connection reset by peer<a href=\"#Connection-reset-by-peer\" aria-label=\"Connection reset by peer permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ somaxconn í¬ê¸°ë§Œí¼ accept í í¬ê¸°ê°€ ê²°ì •ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.\naccept íê°€ ê½‰ ì°¨ë”ë¼ë„ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ëŠ” ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.\nëŒ€ì‹  íê°€ ê½‰ ì°¬ í›„ë¡œëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì´ <code class=\"language-text\">SYN_SENT</code> ìƒíƒœì—ì„œ ë©ˆì¶° íƒ€ì„ì•„ì›ƒì´ ë°œìƒí–ˆë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ëŠ” ì–¸ì œ ë°œìƒí•˜ëŠ” ê²ƒì¼ê¹Œ?\nê²°ë¡ ë¶€í„° ë§í•˜ë©´ SYN íì— accept í ì‚¬ì´ì¦ˆë¥¼ ì´ˆê³¼í•˜ëŠ” ìš”ì²­ì´ ëª°ë¦´ ê²½ìš°, SYN íì—ì„œ accept íë¡œ ì´ë™í•˜ëŠ” ê³¼ì •ì—ì„œ accept íì˜ ì˜¤ë²„í”Œë¡œê°€ ë°œìƒí•˜ê²Œ ë˜ë©´, ê·¸ ì¶”ê°€ ìš”ì²­ì— ëŒ€í•´ì„œ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.</p>\n<p>ìœ„ì˜ í…ŒìŠ¤íŠ¸ ë¡œì§ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ 10ê°œì˜ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ í•˜ì˜€ë‹¤. 1ì´ˆëŠ” 3-Way-Handshakingì„ í•˜ëŠ”ë° ì¶©ë¶„í•œ ì‹œê°„ìœ¼ë¡œ\nìš”ì²­ íŒ¨í‚·ì´ SYN í -> accept íê¹Œì§€ ê°€ëŠ”ë° ì¶©ë¶„í•œ ì‹œê°„ì´ë‹¤. ê·¸ë˜ì„œ ê²°êµ­ SYN íì—ëŠ” ìš”ì²­ë“¤ì´ ë¨¸ë¬¼ì§€ ì•Šê³  accept íì—ì„œë§Œ ìš”ì²­ì´ ë¨¸ë¬¼ê²Œ ëœë‹¤.\nìš”ì²­ë§ˆë‹¤ ì¶©ë¶„í•œ í…€ì´ ìˆê¸° ë•Œë¬¸ì— accept íì—ë§Œ ìš”ì²­ì´ ìŒ“ì´ë‹¤ê°€ ê·¸ ì´ìƒì˜ ìš”ì²­ì´ ì˜¤ê²Œ ë˜ë©´ ì„œë²„ì—ì„œëŠ” ACK ì‘ë‹µì„ ì£¼ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œëŠ” timeoutì´ ë°œìƒí•œë‹¤.</p>\n<p>ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ê°„ì˜ 1ì´ˆ ê°„ê²©ì„ ì—†ì• ë©´ ì–´ë–»ê²Œ ë ê¹Œ? SYN íì˜ í¬ê¸°ê°€ 10ì´ê³ , accept í í¬ê¸°ê°€ 5ë¼ê³  ê°€ì •í•˜ì.\nì´ ìƒí™©ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë™ì‹œì— 7ê°œì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¨ë‹¤ê³  ìƒê°í•´ë³´ì.\ní´ë¼ì´ì–¸íŠ¸ëŠ” SYN íŒ¨í‚· 7ê°œë¥¼ ì „ì†¡í•˜ê³ , ì„œë²„ì˜ SYN íì— 7ê°œì˜ ìš”ì²­ì´ ìŒ“ì¸ë‹¤.\nì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ SYN + ACK ì‘ë‹µì„ ë³´ë‚¸ë‹¤.\nê·¸ í›„ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ 7ê°œì˜ ACKë¥¼ ë°›ì•„ <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœê°€ ë˜ì–´, 7ê°œì˜ ìš”ì²­ì„ accept íì— ë„£ì„ ê²ƒì´ë‹¤. ê·¸ëŸ°ë° accept íì˜ í¬ê¸°ëŠ” 5ì´ë‹¤.\në”°ë¼ì„œ 5ê°œì˜ ìš”ì²­ì€ íì— ë“¤ì–´ê°€ê³ , ë‚˜ë¨¸ì§€ 2ê°œì˜ ìš”ì²­ì€ ë²„ë ¤ì§„ë‹¤. ê·¸ë ‡ì§€ë§Œ í•´ë‹¹ 2ê°œì˜ ìš”ì²­ì€ ì´ë¯¸ <code class=\"language-text\">ESTABLISHED</code> ìƒíƒœì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì™€ì˜ TCP ì—°ê²°ì„ ëŠê¸° ìœ„í•´ RST íŒ¨í‚·ì„ ì „ì†¡í•œë‹¤.\nì•„ë˜ ê·¸ë¦¼3ì€ ìš”ì²­ì´ ëª°ë ¸ì„ ë•Œ, 2ê°œì˜ RST íŒ¨í‚·ì´ ë°œìƒí•˜ëŠ” ìƒí™©ì„ í‘œí˜„í•œë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 658px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29e4866ff56c2985a9d0cd6bca3a1640/e7930/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.35294117647058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9UlEQVR42q1Uy27TQBTNZ7BhiQRskBAb2CD+gw1igxAfgIT4BRYgJHZFrBCVSim0FPpK0xLUNO4zj8aJ4zzsPGvnYcd2EtuHO06cJn1IrcRIVzPyjM8959w7E7DtKej6dcTjdyDLN2Hb9ylkDIaLyeEMvrrbUJQbODq6hWrlGvr91/SN7dgI2HYC3e5HFItTaDY/Edg0HEe/ANAdAsowzQ+Q5Hdott7Q+fXhlouAf1TTdNpwcJnh2DYsTUO9LKNRr8Pp9UZ7gYEMhwBbxK43lOUSi5M4w9DW0axEEON+IM8vwbFk+MfGGGpXYGihrYooiAeoSAlYhnLC0GfQaDRQqVRQJwmqqsIwDHQ6HW8esRzOrmNCKe/jgFuGkAzCMUsjt0eAx8fHVOk4crkcstksMpkMFapIlZe9uVarecESW1YXhmVDJ5sisRJevo/g7750liH7URRFD4zneaRSKW+dTqe9dT6f99axWAw7u7vY4/7i61oGtx8v4PPv9MUesrlHlWu32x4rQRCQTCaxtbWFcDiMjY0NzM8vILjyCz/DOTx8sYzZ9ez5gDa1hK5TFZtNz1MmmQVjzhj67Hf39hE/4DAXyuLu0yV8WREmJUuShGg06rHJk49MGgNhwTwtFAoeYLVa9ewxTIuq08N8KIVHz2bxLZiaBGTFWFhcRJhkhTY3we3sYJsS8OQd87ZSLsOgqo/3pmmaA+8LeU/VBKBAMlZnZsBzHA4JLHF4SH0mgiemAs1FJpuxpCiTFVKpRPLTaGkGRKmBtm4OPRwCtsmzXqvFzAQ1ItxaFQZlNkimSpLrlLBK4DmKPPMxnkB0O4zvoQzuPZnD9BJ/qij6yV2euG5UJGo8UIcDLKGiwJYlaGtBdOJ7mNvM4cHzNcwExXOqzH5mYP6NYH6denNc/8ZQcztdA3+4NF69XcV65BRDXb/Ea+NOPmedjkHtpaLdUtBsqB6BUVFY3/X7/Us9DuO3y2J2jOWakMya+iqDtY1Pwk8SwH8e/wAyPOPyOHGj3gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"[ê·¸ë¦¼3]RST íŒ¨í‚· ë°œìƒ\"\n        title=\"\"\n        src=\"/static/29e4866ff56c2985a9d0cd6bca3a1640/e7930/img_2.png\"\n        srcset=\"/static/29e4866ff56c2985a9d0cd6bca3a1640/e7570/img_2.png 170w,\n/static/29e4866ff56c2985a9d0cd6bca3a1640/f46e7/img_2.png 340w,\n/static/29e4866ff56c2985a9d0cd6bca3a1640/e7930/img_2.png 658w\"\n        sizes=\"(max-width: 658px) 100vw, 658px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">[ê·¸ë¦¼3]RST íŒ¨í‚· ë°œìƒ</figcaption>\n  </figure></p>\n<h2 id=\"ë¬¸ì œ-í•´ê²°-ë°-ë§ˆë¬´ë¦¬\" style=\"position:relative;\">ë¬¸ì œ í•´ê²° ë° ë§ˆë¬´ë¦¬<a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-%EB%B0%8F-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë¬¸ì œ í•´ê²° ë° ë§ˆë¬´ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì§€ê¸ˆê¹Œì§€ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë©´ <code class=\"language-text\">Connection reset by peer</code> ì˜ˆì™¸ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ RST íŒ¨í‚·ì„ ìˆ˜ì‹ í•  ë•Œ ë°œìƒí•œë‹¤.\nì´ RST íŒ¨í‚·ì€ ì„œë²„ì˜ accept íì— ë„ˆë¬´ ë§ì€ ìš”ì²­ì´ ë™ì‹œì— ë„ì°©í•˜ì—¬ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•  ë•Œ, ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡í•˜ì—¬ ì†Œì¼“ ì—°ê²°ì„ ì¢…ë£Œí•œë‹¤.</p>\n<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„  listen() í•¨ìˆ˜ì˜ backlog ê°’ì„ ì¡°ì ˆí•˜ê±°ë‚˜, ì»¤ë„ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ìˆë‹¤.\nì•ì„œ ì‚´í´ë³¸ ë°”ì™€ ê°™ì´ <strong>min(somaxconn, backlog)</strong> ê³µì‹ì— ë”°ë¼, somaxconn ê°’ì´ backlogë³´ë‹¤ ì‘ìœ¼ë©´ ê·¸ ê°’ì´ ì ìš©ëœë‹¤. ë”°ë¼ì„œ somaxconn ê°’ì´ ë„ˆë¬´ ì‘ìœ¼ë©´ ì¡°ì •ì´ í•„ìš”í•˜ë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ ì ì ˆí•œ accept íì˜ í¬ê¸°ëŠ” ì–¼ë§ˆì¼ê¹Œ? ì´ëŠ” ì„œë²„ì˜ í™˜ê²½ê³¼ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ë‹¤. ë¬´ì¡°ê±´ì ìœ¼ë¡œ accept íì˜ í¬ê¸°ë¥¼ ëŠ˜ë¦°ë‹¤ê³  í•´ì„œ ì²˜ë¦¬ëŸ‰ì´ ê·¸ë§Œí¼ ë¹„ë¡€í•´ì„œ ëŠ˜ì–´ë‚˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.\nëŒ€ì‹ , ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ì´ë¥¼ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” í†µê³„ë¥¼ ì œê³µí•œë‹¤.</p>\n<ul>\n<li>TcpExtListenOverflows :  SYN íì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë²„í”Œë¡œë¥¼ ì¶”ì í•œë‹¤.</li>\n<li>TcpExtListenDrops : accept íì—ì„œ ë°œìƒí•˜ëŠ” ë“œë¡­ì„ ì¶”ì í•œë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo apt-get install iproute2\n\n$ nstat -az TcpExtListenDrops\nTcpExtListenDrops 12946172 0.0\n\n$ nstat -az TcpExtListenOverflows\nTcpExtListenOverflows 11447 0.0</code></pre></div>\n<p>ë˜ëŠ” netstatì˜ Recv-Q ë¡œ SYN íì— ìŒ“ì¸ ìš”ì²­ ìˆ˜ë¥¼ ì•Œ ìˆ˜ë„ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-an</span>\nActive Internet connections <span class=\"token punctuation\">(</span>servers and established<span class=\"token punctuation\">)</span>\nProto Recv-Q Send-Q Local Address           Foreign Address         State\ntcp       <span class=\"token number\">20</span>      <span class=\"token number\">0</span> <span class=\"token number\">0.0</span>.0.0:8888            <span class=\"token number\">0.0</span>.0.0:*               LISTEN</code></pre></div>\n<p>ì´ëŸ¬í•œ í†µê³„ë¥¼ í™œìš©í•˜ë©´ ì„œë²„ì˜ ìƒí™©ì— ë§ê²Œ ìµœì ì˜ ê°’ì„ ê²°ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ë”-ì½ì„ê±°ë¦¬\" style=\"position:relative;\">ë” ì½ì„ê±°ë¦¬<a href=\"#%EB%8D%94-%EC%9D%BD%EC%9D%84%EA%B1%B0%EB%A6%AC\" aria-label=\"ë” ì½ì„ê±°ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"https://blog.cloudflare.com/syn-packet-handling-in-the-wild/\">https://blog.cloudflare.com/syn-packet-handling-in-the-wild/</a></li>\n<li><a href=\"https://www.alibabacloud.com/blog/tcp-syn-queue-and-accept-queue-overflow-explained_599203\">https://www.alibabacloud.com/blog/tcp-syn-queue-and-accept-queue-overflow-explained_599203</a></li>\n<li><a href=\"https://brunch.co.kr/@alden/6\">https://brunch.co.kr/@alden/6</a></li>\n</ul>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p><a href=\"https://man7.org/linux/man-pages/man2/accept.2.html\">https://man7.org/linux/man-pages/man2/accept.2.html</a></p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-2\">\n<p>êµ¬ì²´ì ìœ¼ë¡œ <a href=\"https://elixir.free-electrons.com/linux/v4.14.12/source/include/net/inet_sock.h#L73\">inet_reqeust_sock</a> ì„ ì €ì¥í•œë‹¤.    </p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-3\">\n<p><a href=\"https://elixir.bootlin.com/linux/v4.15.18/source/Documentation/networking/ip-sysctl.txt#L372\">https://elixir.bootlin.com/linux/v4.15.18/source/Documentation/networking/ip-sysctl.txt#L372</a>    </p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-4\">\n<p><a href=\"https://man7.org/linux/man-pages/man2/listen.2.html\">https://man7.org/linux/man-pages/man2/listen.2.html</a>    </p>\n<a href=\"#fnref-4\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-5\">\n<p><a href=\"https://elixir.bootlin.com/linux/latest/source/include/net/sock.h#L1033\">https://elixir.bootlin.com/linux/latest/source/include/net/sock.h#L1033</a></p>\n<a href=\"#fnref-5\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-6\">\n<p><a href=\"https://elixir.bootlin.com/linux/latest/source/net/ipv4/tcp_input.c#L6942\">https://elixir.bootlin.com/linux/latest/source/net/ipv4/tcp_input.c#L6942</a></p>\n<a href=\"#fnref-6\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-7\">\n<p><a href=\"https://www.alibabacloud.com/blog/tcp-syn-queue-and-accept-queue-overflow-explained_599203\">https://www.alibabacloud.com/blog/tcp-syn-queue-and-accept-queue-overflow-explained_599203</a></p>\n<a href=\"#fnref-7\" class=\"footnote-backref\">â†©</a>\n</li>\n<li id=\"fn-8\">\n<p><a href=\"https://brunch.co.kr/@alden/6\">https://brunch.co.kr/@alden/6</a></p>\n<a href=\"#fnref-8\" class=\"footnote-backref\">â†©</a>\n</li>\n</ol>\n</div>","fields":{"slug":"/socket_internal/"},"frontmatter":{"title":"ìš”ì²­ì´ ê¸‰ì¦í•˜ëŠ” ìƒí™©ì˜ Connection reset by peer íŠ¸ëŸ¬ë¸” ìŠˆíŒ…","date":"October 30, 2023"}},{"id":"0bbc831b-b7eb-5629-8c7d-30c1dd056af5","html":"<h2 id=\"Selector\" style=\"position:relative;\">Selector<a href=\"#Selector\" aria-label=\"Selector permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Buffer í¸ì—ì„œë„ ë³´ì•˜ë“¯ì´, java.nio ëŠ” ê¸°ì¡´ Java I/Oì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ íƒ„ìƒë˜ì—ˆë‹¤.\nC/C++ì˜ ê²½ìš°ì—ëŠ” ì´ë¯¸ POSIX ê³„ì—´ OSì˜ select()ë‚˜ poll() ê°™ì€ ì‹œìŠ¤í…œ í˜¸ì¶œë¡œ ë©€í‹°í”Œë ‰ì‹±ì„ êµ¬í˜„í•˜ì˜€ì§€ë§Œ ê¸°ì¡´ Java I/OëŠ” ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤.</p>\n<p>SelectorëŠ” ë©€í‹°í”Œë ‰ì‹± I/Oë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ë©€í‹°í”Œë ‰ì‹± I/OëŠ” ë‹¨ì¼ ìŠ¤ë ˆë“œ ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ëŸ¬ I/O ì‘ì—…ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì¤€ë¹„ëœ ì‘ì—…ì—ë§Œ ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•œë‹¤.</p>\n<p>SelectorëŠ” ì—¬ëŸ¬ SelectableChannel ê°ì²´ë¥¼ ë“±ë¡í•˜ê³ , ë“±ë¡ëœ ì±„ë„ë“¤ ì¤‘ ì–´ë–¤ ì±„ë„ì´ ì¤€ë¹„ëœ ìƒíƒœì¸ì§€ í™•ì¸í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\nselect() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ SelectorëŠ” ë“±ë¡ëœ ì±„ë„ë“¤ì„ í™•ì¸í•˜ê³ , ì¤€ë¹„ëœ ì±„ë„ë“¤ì˜ SelectionKeyë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<p>SelectionKeyëŠ” SelectableChannelê³¼ Selector ê°„ì˜ ì—°ê²°ì„ ë‚˜íƒ€ë‚´ëŠ” í‚¤ì´ë‹¤.\nSelectionKeyëŠ” ê° ì±„ë„ì˜ ê´€ì‹¬ ì‘ì—…(ì½ê¸°, ì“°ê¸° ë“±)ì„ ê¸°ì–µí•˜ë©°, í•´ë‹¹ ì±„ë„ì´ í˜„ì¬ ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í•  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ ëª¨ë‹ˆí„°ë§í•œë‹¤.</p>\n<p>SelectableChannelì€ I/O ì±„ë„ì„ ë‚˜íƒ€ë‚´ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì´ë‹¤. SocketChannel, ServerSocketChannel ë“±ì´ ì´ë¥¼ êµ¬í˜„í•œë‹¤.\nSelectableChannelì€ Selectorì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ íŠ¹ì • ì‘ì—…(ì½ê¸°,ì“°ê¸° ë“±)ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<p>ë©€í‹°í”Œë ‰ì‹± êµ¬í˜„ì˜ í•µì‹¬ì€ ì¤€ë¹„ëœ ìƒíƒœì˜ ì±„ë„ì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ìˆë‹¤. ì´ë¥¼ ì¤€ë¹„ì„± ì„ íƒ(readiness selection)ì´ë¼ê³  í•œë‹¤.</p>\n<p>ì¤€ë¹„ì„± ì„ íƒì€ ì–¸ëœ»ë³´ë©´ non-blocking ëª¨ë“œì™€ í´ë§ìœ¼ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•  ê²ƒ ê°™ì§€ë§Œ ì‘ì—…ì˜ ì¤€ë¹„ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì½”ë“œì™€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.\në˜í•œ, non-blocking ëª¨ë“œë¡œ ê° ì±„ë„ì— ëŒ€í•´ ì§ì ‘ ì¤€ë¹„ ì—¬ë¶€ë¥¼ ë¬¼ì–´ë³´ëŠ” ê²ƒì€ ë§ì€ ì‹œìŠ¤í…œ í˜¸ì¶œë¡œ ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì‘ì—…ì´ë‹¤.</p>\n<p>nio ì´ì „ì—ëŠ” ì¤€ë¹„ì„± ì„ íƒì„ í‰ë‚´ë‚´ê¸° ìœ„í•´ ê° ì†Œì¼“ì— ëŒ€í•œ ê°ê°ì˜ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ê³  read() ë©”ì„œë“œì—ì„œ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ë„ë¡ í•˜ëŠ” ë°©ë²•ì´ ì‚¬ìš©ë˜ì—ˆë‹¤.\nì´ë ‡ê²Œ í•˜ë©´ ê° ìŠ¤ë ˆë“œê°€ ì†Œì¼“ ëª¨ë‹ˆí„° ì—­í• ì„ ìˆ˜í–‰í•˜ê³  JVMì˜ ìŠ¤ë ˆë“œ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì•Œë¦¼ ë©”ì»¤ë‹ˆì¦˜ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<p>Java NIOì—ì„œëŠ” ì¤€ë¹„ì„± ì„ íƒì„ ìš´ì˜ ì²´ì œì— ìœ„ì„í•˜ê³ , Selector í´ë˜ìŠ¤ë¥¼ í†µí•´ ì´ìš©í•  ìˆ˜ ìˆë‹¤.\nSelectorëŠ” ì—¬ëŸ¬ ì±„ë„ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , í•´ë‹¹ ì±„ë„ì´ ì¤€ë¹„ ìƒíƒœì¸ ê²½ìš° ì•Œë ¤ì¤Œìœ¼ë¡œì¨ íš¨ìœ¨ì ì¸ I/O ì²˜ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.\nì´ë¥¼ í†µí•´ ë‹¤ìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°ì„ ê´€ë¦¬í•˜ê³  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 606px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2168fc5feabb8bd7c1cb526019e46b74/cec09/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.235294117647065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABbUlEQVR42nWSbcuCYAyF+/9/qrDIoC99ycyyqDRIK8RKe19cg0nm8wjDm7PtbGdb6/V6CV8URXK5XPRt2Pl8ltPpVMPKshTP8/T9fr8b1sJxv99lNBrJbrerAvnm87naN7bf78VxnKq44fYpIc4gCGqE2GKxkPV6Lc/ns0pIkkTG47FkWSaPx0M7vl6vasS1TNpsNmt0iLTpdKpyDUvTVFzX1U4hYSQ0BAcFlBAHiYfDoSF5uVzWMGLo8F/Jt9tNmSE8Ho/6NttsNmpIMYwYxsOb3O+FKCGVkAHharXSynEca9ckgiOHKyiKQmfq+75st1vNg7TWIRXZcL/fl8FgoIsIw1DJu92u4pBizJSYXq+nvuFw2CS0DTEXKtKhYciFmE1inBcxxEJEbGOGeZ7rxpDClhk6Sfwnk0k1WzDiiKEIfk7o+6SUkABmhVQ7ZIwzarfb0ul09G0447BYijUk21Ko/mscL/aXz1T8Sv4ABrmOHmaMKX8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"selection ì—°ê´€ í´ë˜ìŠ¤ë“¤ ê´€ê³„\"\n        title=\"\"\n        src=\"/static/2168fc5feabb8bd7c1cb526019e46b74/cec09/img.png\"\n        srcset=\"/static/2168fc5feabb8bd7c1cb526019e46b74/e7570/img.png 170w,\n/static/2168fc5feabb8bd7c1cb526019e46b74/f46e7/img.png 340w,\n/static/2168fc5feabb8bd7c1cb526019e46b74/cec09/img.png 606w\"\n        sizes=\"(max-width: 606px) 100vw, 606px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">selection ì—°ê´€ í´ë˜ìŠ¤ë“¤ ê´€ê³„</figcaption>\n  </figure></p>\n<p>ìœ„ ê·¸ë¦¼ì€ ì•„ë˜ ì½”ë“œë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Selector</span> selector <span class=\"token operator\">=</span> <span class=\"token class-name\">Selector</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchannel1<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchannel2<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_WRITE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchannel3<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_WRITE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ì±„ë„ì´ ì¤€ë¹„ë  ë•Œê¹Œì§€ ìµœëŒ€ 10ì´ˆê°„ ë¸”ë¡í‚¹ëœë‹¤.</span>\nreadyCount <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ ì½”ë“œëŠ” Selectorë¥¼ ìƒì„±í•œ ë‹¤ìŒ, ê°ê° ë‹¤ë¥¸ ê´€ì‹¬ì‚¬ ì§‘í•©ì„ ê°€ì§€ëŠ” ê¸°ì¡´ì˜ ì„¸ ê°œì˜ ì†Œì¼“ ì±„ë„ì„ Selectorì— ë“±ë¡í•œë‹¤.\nselector.select(10000) ëŠ” ë“±ë¡ëœ ì±„ë„ì—ì„œ ê´€ì‹¬ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œê¹Œì§€ ìµœëŒ€ 10ì´ˆê°„ ë¸”ë¡í‚¹ëœë‹¤.</p>\n<p>ì•„ë˜ëŠ” Selectorì˜ ì£¼ìš” API ëª©ë¡ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Selector</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Closeable</span> <span class=\"token punctuation\">{</span>\n\n\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Selector</span> <span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">SelectorProvider</span><span class=\"token punctuation\">.</span><span class=\"token function\">provider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">openSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isOpen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectorProvider</span> <span class=\"token function\">provider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">selectNow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> timeout<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\t\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Selector</span> <span class=\"token function\">wakeup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"SelectableChannel\" style=\"position:relative;\">SelectableChannel<a href=\"#SelectableChannel\" aria-label=\"SelectableChannel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SelectableChannel</span>\n    <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractInterruptibleChannel</span>\n    <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Channel</span>\n<span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectorProvider</span> <span class=\"token function\">provider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">validOps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isRegistered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectionKey</span> <span class=\"token function\">keyFor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Selector</span> sel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectionKey</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Selector</span> sel<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> ops<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClosedChannelException</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectionKey</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Selector</span> sel<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> ops<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> att<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClosedChannelException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Selectorì˜ ì±„ë„ ë“±ë¡ì€ SelectableChannel ì˜ register()ë¡œ í•  ìˆ˜ ìˆë‹¤.\nregisterëŠ” Selector ê°ì²´ì™€ opsë¼ëŠ” ì •ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</p>\n<p>ops ë§¤ê°œë³€ìˆ˜ëŠ” ì±„ë„ì´ ë“±ë¡ë˜ëŠ” ê´€ì‹¬ ì‘ì—… ì§‘í•©ì„ ë‚˜íƒ€ë‚¸ë‹¤.\nì´ ê°’ì€ ì±„ë„ì˜ ì¤€ë¹„ ìƒíƒœë¥¼ í™•ì¸í•  ë•Œ Selectorê°€ í™•íŒí•´ì•¼ í•˜ëŠ” I/O ì‘ì—…ì„ ë¹„íŠ¸ ë§ˆìŠ¤í¬ë¡œ í‘œí˜„í•œ ê²ƒì´ë‹¤.\nêµ¬ì²´ì ì¸ ì‘ì—… ë¹„íŠ¸ëŠ” SelectionKey í´ë˜ìŠ¤ì˜ public static í•„ë“œë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤.</p>\n<p>JDK 1.4ë¶€í„°ëŠ” ì½ê¸°(OP_READ), ì“°ê¸°(OP_WRITE), ì—°ê²°(OP_CONNECT), ìˆ˜ë½(OP_ACCEPT) ì‘ì—…ì´ ì •ì˜ë˜ì–´ ìˆë‹¤.\nê° ì±„ë„ë§ˆë‹¤ ì§€ì›ë˜ëŠ” ì‘ì—…ì´ ìˆë‹¤. SocketChannelì˜ ê²½ìš° accept ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤.\nì§€ì›ë˜ì§€ ì•ŠëŠ” ì‘ì—…ì— ì±„ë„ì„ Selectorì— ë“±ë¡í•˜ë ¤ê³  í•˜ë©´ Exceptionì´ ë°œìƒí•œë‹¤. validOps() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ì±„ë„ì´ í—ˆìš©í•˜ëŠ” ì‘ì—… ì§‘í•©(ë¹„íŠ¸ ë§ˆìŠ¤í¬)ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<p>ë‘ë²ˆì§¸ register() ë©”ì„œë“œì—ëŠ” att ë¼ëŠ” Objcetë¥¼ ë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ ê°ì²´ ì°¸ì¡°ë¥¼ SelectionKeyì´ ì „ë‹¬í•˜ê³  attch()ë¡œ í•´ë‹¹ ì°¸ì¡°ë¥¼ ë‹¤ì‹œ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<p>í•˜ë‚˜ì˜ ì±„ë„ ê°ì²´ëŠ” ì—¬ëŸ¬ Selectorì— ë“±ë¡ë  ìˆ˜ ìˆë‹¤. ì±„ë„ì´ í˜„ì¬ ì–´ë–¤ ì„ íƒê¸°ì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ isRegistered() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤.\nì´ ë©”ì„œë“œëŠ” ì±„ë„ì´ ì ì–´ë„ í•˜ë‚˜ì˜ ì„ íƒê¸°ì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ ì—¬ë¶€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•˜ì§€ë§Œ, ì±„ë„ì´ ì–´ë–¤ ì„ íƒê¸°ì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ëŠ” ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ê° ì±„ë„ì˜ Selectorì™€ ì±„ë„ ë“±ë¡ì€ SelectionKey ìœ¼ë¡œ ìº¡ìŠí™”ëœë‹¤. keyFor() ë©”ì„œë“œëŠ” íŠ¹ì • ì±„ë„ê³¼ ì£¼ì–´ì§„ Selectorì— ì—°ê²°ëœ SelectionKeyë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<h2 id=\"SelectionKey\" style=\"position:relative;\">SelectionKey<a href=\"#SelectionKey\" aria-label=\"SelectionKey permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>SelectionKeyëŠ” íŠ¹ì • ì±„ë„ì„ íŠ¹ì • Selectorì™€ ë“±ë¡ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ë©°, í•´ë‹¹ ì±„ë„ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•  ìˆ˜ ìˆë‹¤.\nì•„ë˜ëŠ” SelectionKeyì˜ ì£¼ìš” APIì™€ ì„¤ëª…ì´ë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SelectionKey</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">OP_WRITE</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">OP_CONNECT</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">OP_ACCEPT</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">SelectableChannel</span> <span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Selector</span> <span class=\"token function\">selector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">interestOps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">interestOps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ops<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">int</span> <span class=\"token function\">readyOps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isReadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isWritable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isConnectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isAcceptable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> ob<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">attachment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>channel()</h4>\n<p>SelectionKeyì™€ ê´€ë ¨ëœ SelectableChannel ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<h4>selector()</h4>\n<p>SelectionKeyì™€ ê´€ë ¨ëœ Selector ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<h4>cancel()</h4>\n<p>Selectorì™€ Channel ê´€ê³„ë¥¼ í•´ì§€í•  ë•Œ ì‚¬ìš©ëœë‹¤. í•´ë‹¹ ì„ íƒ í‚¤ê°€ ë¬´íš¨í™”ë˜ê³  ì—°ê²°ì´ í•´ì œëœë‹¤.\në‹¤ë§Œ, SelectionKeyì´ ì·¨ì†Œëœë‹¤ê³  í•´ë„ Selectorì— ì±„ë„ì€ ë“±ë¡ëœ ìƒíƒœë¡œ ë‚¨ì•„ìˆë‹¤. ì±„ë„ì€ Selectorì˜ ë‹¤ìŒ select() ë©”ì„œë“œ í˜¸ì¶œ ë˜ëŠ” ì§„í–‰ ì¤‘ì¸ select() ë©”ì„œë“œ ì™„ë£Œ ì‹œì ì— í•´ì§€ëœë‹¤.\nì±„ë„ì´ ì·¨ì†Œëœ SelectionKeyì™€ í•¨ê»˜ Selector ë“±ë¡ëœ ìƒíƒœì—ì„œ í•´ë‹¹ SelectionKeyë¥¼ ì‚¬ìš©í•˜ë ¤ê³  ì‹œë„í•˜ë©´ CancelledKeyExceptionì´ ë°œìƒí•œë‹¤.</p>\n<h4>isValid()</h4>\n<p>í‚¤ê°€ ì•„ì§ ìœ íš¨í•œ ë“±ë¡ì„ ë‚˜íƒ€ë‚´ëŠ”ì§€ í™•ì¸í•œë‹¤. ì±„ë„ì´ ë‹«íˆë©´ í•´ë‹¹ ì±„ë„ê³¼ ê´€ë ¨ëœ ëª¨ë“  SelectionKeyì´ê°€ ìë™ìœ¼ë¡œ ë¬´íš¨í™” ëœë‹¤.</p>\n<h4>interestOps()</h4>\n<p>í˜„ì¬ SelectionKeyì˜ ê´€ì‹¬ ì‘ì—… ì§‘í•©ì„ ë°˜í™˜í•œë‹¤. ì´ ê°’ì€ SelectableChannel.register ë¡œ ë“±ë¡í•  ë•Œ ì „ë‹¬ëœ ê°’ì´ë‹¤.\nì¸ìˆ˜ìˆëŠ” interestOps()ë¥¼ í˜¸ì¶œí•˜ë©´ ìƒˆë¡œìš´ ê´€ì‹¬ ì‘ì—… ì§‘í•©ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<h4>readyOps()</h4>\n<p>í˜„ì¬ ì„ íƒ í‚¤ì™€ ê´€ë ¨ëœ ì±„ë„ì—ì„œ ì‹¤ì œë¡œ ìˆ˜í–‰ ê°€ëŠ¥í•œ I/O ì‘ì—…ì˜ ì§‘í•©ì„ ë°˜í™˜í•œë‹¤.\nì´ ì§‘í•©ì€ ìµœê·¼ select() ë©”ì„œë“œ í˜¸ì¶œë¡œ ê²°ì •ëœ ê²ƒìœ¼ë¡œ, ê´€ì‹¬ ì‘ì—… ì§‘í•© ì¤‘ì—ì„œ ì‹¤ì œë¡œ ìˆ˜í–‰ ê°€ëŠ¥í•œ ì‘ì—…ì„ ë‚˜íƒ€ë‚¸ë‹¤.   </p>\n<p>ì¤‘ìš”í•œ ì ì€ readyOps()ì˜ ë°˜í™˜ê°’ì€ ì ˆëŒ€ì ì¸ ë³´ì¥ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.\nreadyOpsì€ Selectorê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ë“±ë¡ëœ ì±„ë„ë“¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•œ ì‹œì ì—ì„œì˜ ì •ë³´ë¥¼ ë‹´ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.\në”°ë¼ì„œ, ë©€í‹°ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œëŠ” ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> readyOps <span class=\"token operator\">=</span> key<span class=\"token punctuation\">.</span><span class=\"token function\">readyOps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>readyOps <span class=\"token operator\">&amp;</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  key<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>read <span class=\"token punctuation\">(</span>myBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>isReadable()</h4>\n<p>isReadable(), isWritable(), isConnectable(), isAcceptable() ê° ë©”ì„œë“œëŠ” ì±„ë„ì´ ê° ì‘ì—…ì— ëŒ€í•´ ì¤€ë¹„ ìƒíƒœì¸ì§€ë¥¼ ê²€ì‚¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ <code class=\"language-text\">key.isWritable()</code> ëŠ” <code class=\"language-text\">(key.readyOps() &amp; SelectionKey.OP_WRITE) != 0</code> ì™€ ë™ì¼í•˜ë‹¤.</p>\n<h4>attach()</h4>\n<p>ì´ ë©”ì„œë“œëŠ” SelectionKeyì— ì²¨ë¶€ ê°ì²´ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ê°ì²´, ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´, ë‹¤ë¥¸ ì±„ë„ ë“±ê³¼ ê´€ë ¨ì§“ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nSelectableChannel.registerì˜ att ë§¤ê°œë³€ìˆ˜ì™€ ë™ì¼í•˜ê²Œ ì‚¬ìš©ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">=</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">,</span> myObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ì˜ ì½”ë“œëŠ” ì•„ë˜ ì½”ë“œì™€ ë™ì¼í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">=</span> channel<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nkey<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span>myObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>attachment()</h4>\n<p>ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ SelectionKeyì— ì²¨ë¶€ëœ ê°ì²´ í•¸ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.\në§Œì•½ ì²¨ë¶€ëœ ê°ì²´ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ëª…ì‹œì ìœ¼ë¡œ nullì´ ì§€ì •ë˜ì—ˆë‹¤ë©´ ì´ ë©”ì„œë“œëŠ” nullì„ ë°˜í™˜í•œë‹¤.</p>\n<h2 id=\"Selector-ë™ì‘ì›ë¦¬\" style=\"position:relative;\">Selector ë™ì‘ì›ë¦¬<a href=\"#Selector-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC\" aria-label=\"Selector ë™ì‘ì›ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>SelectorëŠ” ë“±ë¡ëœ ì±„ë„ë“¤ì˜ ì§‘í•©ì„ ê´€ë¦¬í•˜ë©°, ê° ë“±ë¡ì€ SelectionKey ê°ì²´ë¡œ ìº¡ìŠí™”ëœë‹¤.\nSelector ê°ì²´ëŠ” ì„¸ ê°€ì§€ ì¢…ë¥˜ì˜ í‚¤ ì§‘í•©ì„ ìœ ì§€í•œë‹¤.</p>\n<ul>\n<li><strong>Registered key set</strong>ì€ Selectorì— ë“±ë¡ëœ ëª¨ë“  í‚¤ ì§‘í•©ì„ ë‚˜íƒ€ë‚¸ë‹¤. keys() ë©”ì„œë“œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.   </li>\n<li><strong>Selected key set</strong>ì€ ë“±ë¡ëœ í‚¤ì˜ ê´€ì‹¬ ì‘ì—… ì§‘í•© ì¤‘ ì ì–´ë„ í•˜ë‚˜ì˜ ì‘ì—…ì— ëŒ€í•´ ì¤€ë¹„ê°€ ëœ í‚¤ ì§‘í•©ì„ ì˜ë¯¸í•œë‹¤.\nselectedKeys() ë©”ì„œë“œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</li>\n<li><strong>Cancelled key set</strong>ì€ cancel()ë¡œ ë¬´íš¨í™˜ëœ í‚¤ë“¤ì˜ ì§‘í•©ì´ë‹¤. ë¹„ê³µê°œë¡œ ìœ ì§€ë˜ì–´ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.</li>\n</ul>\n<p>Selectorì—ì„œ select() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‹¤ìŒ ì„¸ ë‹¨ê³„ê°€ ìˆ˜í–‰ëœë‹¤.</p>\n<h4>ì·¨ì†Œëœ í‚¤ í™•ì¸</h4>\n<p>ì·¨ì†Œëœ í‚¤ ì§‘í•©ì„ í™•ì¸í•œë‹¤. ì·¨ì†Œëœ í‚¤ê°€ ìˆë‹¤ë©´ ì´ë“¤ì€ ë‹¤ë¥¸ ë‘ í‚¤ ì§‘í•©(Registered key set, elected key set)ì—ì„œ ì œê±°ë˜ê³ , ê´€ë ¨ëœ ì±„ë„ì€ ë“±ë¡ í•´ì œëœë‹¤.\nì´ ë¶€ë¶„ì€ SelectionKeyì˜ cancel() ë©”ì„œë“œì—ì„œ ì´ë¯¸ ì„¤ëª…í–ˆë‹¤.</p>\n<h4>ì‘ì—… ê´€ì‹¬ ì§‘í•© í™•ì¸</h4>\n<p>ë“±ë¡ëœ í‚¤ ì§‘í•©ì˜ ê° í‚¤ì˜ ì‘ì—… ê´€ì‹¬ ì§‘í•©ì„ ì¡°ì‚¬í•œë‹¤.\nì´ ì‹œì  ì´í›„ì— ì‘ì—… ê´€ì‹¬ ì§‘í•©ì— ëŒ€í•œ ë³€ê²½ ì‚¬í•­ì€ ê³ ë ¤ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h4>ì±„ë„ ì¤€ë¹„ ìƒíƒœ í™•ì¸</h4>\n<p>OSì—ê²Œ í˜„ì¬ ì±„ë„ì˜ ì‘ì—… ê´€ì‹¬ ìƒíƒœë¥¼ í™•ì¸í•˜ë„ë¡ ìš”ì²­í•œë‹¤.\nì´ë•Œ ìŠ¤ë ˆë“œëŠ” í˜„ì¬ ì±„ë„ì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì¼ì • ì‹œê°„ ë™ì•ˆ blockingë  ìˆ˜ ìˆë‹¤.\nì‹œìŠ¤í…œ í˜¸ì¶œì´ ì™„ë£Œë˜ë©´ ì±„ë„ì˜ ì¤€ë¹„ ìƒíƒœê°€ ê²°ì •ëœë‹¤.</p>\n<p>ê·¸ í›„, OSë¡œë¶€í„° ê° ì±„ë„ì˜ í‚¤ì— ëŒ€í•œ <strong>ì¤€ë¹„ëœ ì§‘í•©(ready sets)</strong>ì„ ì–»ê²Œ ë˜ëŠ”ë°, ê°ê°ì˜ í‚¤ê°€ Selected key setì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ í‚¤ë¥¼ Selected key set ì— ì¶”ê°€í•œë‹¤.</p>\n<p>ë§Œì•½, ì±„ë„ì˜ í‚¤ê°€ Selected key setì— ì´ë¯¸ í¬í•¨ë˜ì–´ ìˆë‹¤ë©´, í˜„ì¬ ì±„ë„ì´ ì–´ë–¤ ì‘ì—…ì—(OP_XXXX) ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¹„íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.</p>\n<h4>ì·¨ì†Œëœ í‚¤ ì¬í™•ì¸</h4>\n<p><strong>ì±„ë„ ì¤€ë¹„ ìƒíƒœ í™•ì¸</strong>ì—ì„œ ìŠ¤ë ˆë“œê°€ ë¸”ë¡í‚¹ë˜ì–´ ì‹œê°„ì´ ë§ì´ íë¥¼ ìˆ˜ ìˆë‹¤. ê·¸ ë™ì•ˆ SelectionKeyê°€ ì·¨ì†Œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì·¨ì†Œëœ í‚¤ë¥¼ ì¬í™•ì¸í•œë‹¤.</p>\n<h4>ê²°ê³¼ê°’ ë¦¬í„´</h4>\n<p>select() ë©”ì„œë“œë¡œ ë°˜í™˜ë˜ëŠ” ê°’ì€ <strong>ì±„ë„ ì¤€ë¹„ ìƒíƒœ í™•ì¸</strong>ì—ì„œ ì¤€ë¹„ëœ ì§‘í•©(ready sets)ì´ ìˆ˜ì •ëœ í‚¤ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.\nSelection key set ë‚´ì˜ ëª¨ë“  ì±„ë„ì˜ ì´ ìˆ˜ê°€ ì•„ë‹Œ, select ë©”ì„œë“œ í˜¸ì¶œ ê°„ì— ì¤€ë¹„ëœ ì±„ë„ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, ì²« ë²ˆì§¸ select() í˜¸ì¶œì—ì„œ 2ê°œì˜ ì±„ë„ì´ ì‘ì—… ì¤€ë¹„ ìƒíƒœë¡œ íŒë‹¨ë˜ë©´ ë°˜í™˜ê°’ì€ 2ê°œ ëœë‹¤.\në‘ ë²ˆì§¸ í˜¸ì¶œì—ì„œ 1ê°œì˜ ì¶”ê°€ ì±„ë„ì´ ì‘ì—… ì¤€ë¹„ ìƒíƒœë¡œ ì¶”ê°€ë˜ë©´ ë°˜í™˜ê°’ 1ì´ ëœë‹¤.\nì„¸ ë²ˆì§¸ í˜¸ì¶œì—ì„œ ì•„ë¬´ ì±„ë„ë„ ë³€ê²½ì‚¬í•­ì´ ì—†ìœ¼ë©´ ë°˜í™˜ê°’ì€ 0ì´ ëœë‹¤.</p>\n<p>Selector í´ë˜ìŠ¤ì—ëŠ” ì„¸ ê°€ì§€ í˜•íƒœì˜ select() ë©”ì„œë“œê°€ ìˆë‹¤. ê°ê°ì— ëŒ€í•´ ì•Œì•„ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì¸ìˆ˜ì—†ëŠ” select() ëŠ” ì¤€ë¹„ëœ ì±„ë„ì´ ìƒê¸¸ ë•Œ ê¹Œì§€ ë¸”ë¡œí‚¹ëœë‹¤. ë”°ë¼ì„œ ë°˜í™˜ê°’ì€ í•­ìƒ 0 ë³´ë‹¤ í° ê°’ì„ ê°€ì§„ë‹¤.\në§Œì•½, ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ wakeup() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ 0ì´ ë°˜í™˜ë  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë‹¤ìŒì€ long timeout ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” select ì´ë‹¤. ì¤€ë¹„ëœ ì±„ë„ì„ í™•ì¸í•˜ê¸° ìœ„í•´  ìµœëŒ€ í•´ë‹¹ ì‹œê°„ë§Œí¼ ëŒ€ê¸°í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectNow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>non-blocking ëª¨ë“œì˜ select ë©”ì„œë“œì´ë‹¤. ì¤€ë¹„ëœ ì±„ë„ì´ ì—†ìœ¼ë©´ 0ì„ ë°˜í™˜í•œë‹¤.</p>\n<h2 id=\"Selection-ì‘ì—…-ì¤‘ì§€í•˜ê¸°\" style=\"position:relative;\">Selection ì‘ì—… ì¤‘ì§€í•˜ê¸°<a href=\"#Selection-%EC%9E%91%EC%97%85-%EC%A4%91%EC%A7%80%ED%95%98%EA%B8%B0\" aria-label=\"Selection ì‘ì—… ì¤‘ì§€í•˜ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h4>wakeup()</h4>\n<p>Selector ê°ì²´ì— ëŒ€í•´ wakeup() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ Selectorì—ì„œ select() ì‘ì—…ì´ ì§„í–‰ ì¤‘ì´ë¼ë©´ 0ì„ ë°˜í™˜ì‹œí‚¨ë‹¤.\ní˜„ì¬ select() ì‘ì—… ì¤‘ì´ ì•„ë‹ˆë¼ë©´, ë‹¤ìŒ select() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ selectNow()ë¡œ ë™ì‘ë˜ì–´ ì¦‰ì‹œ ë°˜í™˜ëœë‹¤. ê·¸ í›„ì˜ select í˜¸ì¶œì€ ì •ìƒì ìœ¼ë¡œ ë™ì‘ëœë‹¤.</p>\n<h4>close()</h4>\n<p>Selectorë¥¼ ë‹«ìœ¼ë©´ í˜„ì¬ ì„ íƒ ì‘ì—… ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ì¦‰ì‹œ ê¹¨ìš°ê³  í•´ë‹¹ Selectorì™€ ê´€ë ¨ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•œë‹¤.</p>\n<h4>interrupt()</h4>\n<p>ë¸”ë¡œí‚¹ëœ ìŠ¤ë ˆë“œì˜ interrupt() ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ í•´ë‹¹ ìŠ¤ë ˆë“œì˜ \"ì¸í„°ëŸ½íŠ¸ ìƒíƒœ\"ê°€ ì„¤ì •ëœë‹¤.\nìŠ¤ë ˆë“œì˜ ì¸í„°ëŸ½íŠ¸ ìƒíƒœê°€ ì„¤ì •ëœ í›„ì— í•´ë‹¹ ìŠ¤ë ˆë“œê°€ ì±„ë„ì—ì„œ I/O ì‘ì—…ì„ ì‹œë„í•˜ë©´ í•´ë‹¹ ì±„ë„ì´ ì¦‰ì‹œ ë‹«íˆê³  ìŠ¤ë ˆë“œëŠ” ClosedByInterruptException ê³¼ ê°™ì€ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.\nì´ëŸ° ê²½ìš°ì—ëŠ” Thread.interrupted() ë¡œ ì¸í„°ëŸ½íŠ¸ ìƒíƒœë¥¼ ì§€ìš¸ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"Selector-í‚¤-ê´€ë¦¬\" style=\"position:relative;\">Selector í‚¤ ê´€ë¦¬<a href=\"#Selector-%ED%82%A4-%EA%B4%80%EB%A6%AC\" aria-label=\"Selector í‚¤ ê´€ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Selectorë¡œ ê°„ë‹¨í•œ ì„œë²„ë¥¼ ë§Œë“¤ì–´ë³´ì. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ accept í•˜ê³  í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ì„œë²„ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token class-name\">ServerSocketChannel</span> serverChannel <span class=\"token operator\">=</span> <span class=\"token class-name\">ServerSocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">ServerSocket</span> server <span class=\"token operator\">=</span> serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token class-name\">Selector</span> selector <span class=\"token operator\">=</span> <span class=\"token class-name\">Selector</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\tserver<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\tserverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">configureBlocking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tserverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_ACCEPT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token class-name\">Iterator</span> it <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">)</span> it<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span><span class=\"token function\">isAcceptable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token function\">registerChannel</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span><span class=\"token function\">isReadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í´ë¼ì´ì–¸íŠ¸ê°€ ë°ì´í„°ë¥¼ ë³´ë‚´ì™”ìŠµë‹ˆë‹¤\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerChannel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Selector</span> selector<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">SelectionKey</span> key<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">ServerSocketChannel</span> serverSocket <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerSocketChannel</span><span class=\"token punctuation\">)</span> key<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">SocketChannel</span> socket <span class=\"token operator\">=</span> serverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>socket <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tsocket<span class=\"token punctuation\">.</span><span class=\"token function\">configureBlocking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsocket<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>selector.select() ë¡œ ë“±ë¡í•œ ì±„ë„ì˜ ì‘ì—…ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì•„ë˜ while ë¬¸ ì•ˆì—ì„œ <code class=\"language-text\">key.isAcceptable()</code> ì™€ <code class=\"language-text\">key.isReadable()</code> ë©”ì„œë“œë¥¼ í†µí•´,\naccept ì‘ì—…ê³¼ read ì‘ì—… ê°ê°ì— ëŒ€í•´ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p>\n<p>í•˜ì§€ë§Œ, ì´ ì½”ë“œëŠ” ì‹¬ê°í•œ ë¬¸ì œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë° ì„œë²„ë¥¼ ë„ìš°ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ì†ì„ í•˜ê³  ë°ì´í„°ë¥¼ ë³´ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ ì¶œë ¥í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤\ní´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤\ní´ë¼ì´ì–¸íŠ¸ê°€ ë°ì´í„°ë¥¼ ë³´ë‚´ì™”ìŠµë‹ˆë‹¤</code></pre></div>\n<p>í´ë¼ì´ì–¸íŠ¸ 1ëŒ€ë§Œ ì ‘ì†í–ˆì§€ë§Œ <code class=\"language-text\">í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤</code> ë©”ì‹œì§€ê°€ ë‘ ë²ˆ ì¶œë ¥ëœë‹¤.\nì´ëŠ” <strong>Selector ë™ì‘ì›ë¦¬</strong> ì„¹ì…˜ì— <strong>ì±„ë„ ì¤€ë¹„ ìƒíƒœ í™•ì¸</strong> ì—ì„œ ì„¤ëª…ì„ ë³´ë©´ ì•Œ ì‚¬ ìˆë‹¤.,\nselect() ë©”ì„œë“œëŠ” ì¤€ë¹„ëœ ì‘ì—… ì§‘í•©ì„ Selected key setì— ì¶”ê°€í•˜ê³ , ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í‚¤ë©´ ì¤€ë¹„ ì™„ë£Œëœ ì‘ì—…ì˜ ë¹„íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•  ë¿ ì´ë‹¤.\nì´ëŠ” ë³„ë„ë¡œ SelectionKeyë¥¼ ì œê±°í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ select() ì—°ì‚°ì˜ ê²°ê³¼ëŠ” ê³„ì† ëˆ„ì ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\nì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/595a25bfb9489232c3e91cbbe6c8cb67/35f7f/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42qWQ627iMBCF8/4PtX+6lbZLgYWmjbhD7k5iEgLkQi7fTtJKfYBaOvL4+Nia+YwgDFFRhOd5OI5D0zT8ZBnbY8BkbvIyXeIEZ3T+wPYTTGvLbGER6Rv63pE5IZf1gXxpkaoUfWvZnXzJ7Xh5XbA9BRR1j+FGV2ZvG8zVkSgt8ZISV12Ym1vm4ofJHVc8FWREH3tic4OKb2Pu6Gl5u2a6WHFwNemtwWh76PpeBENdNR0PKWrRo+1GDd5wrrpPjbV4TdeP2e+9w9Bao9OzjJYQxxFd2/6Mob138N8s7MU7tqs4X2sZMxM+HuudTZLdyYqWPNTkdsB1c+Si89Fz/XjkaAlb24spH9Jh6Gcksw+SuYU6l9hxyc7RPE+WPP35JzyvnMQLThFq+o76u8QPLpIrWO0Dfsv519OE1WFoRhje5ddC5i+EVVG3FFVDPTD7UjXcVy2l3Jdjrh87GbyR9RfLuvms/wM1yGAR6S/VkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SelectionKey ìƒíƒœ\"\n        title=\"\"\n        src=\"/static/595a25bfb9489232c3e91cbbe6c8cb67/ca1dc/img_1.png\"\n        srcset=\"/static/595a25bfb9489232c3e91cbbe6c8cb67/e7570/img_1.png 170w,\n/static/595a25bfb9489232c3e91cbbe6c8cb67/f46e7/img_1.png 340w,\n/static/595a25bfb9489232c3e91cbbe6c8cb67/ca1dc/img_1.png 680w,\n/static/595a25bfb9489232c3e91cbbe6c8cb67/35f7f/img_1.png 818w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">SelectionKey ìƒíƒœ</figcaption>\n  </figure></p>\n<p>Loop1 ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ í—ˆìš© ë˜ë©´ SelectionKeyì˜ OP_ACCEPT ë¹„íŠ¸ë¥¼ ì¼ ë‹¤.\nLoop2 ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë˜ë©´ OP_READ ë¹„íŠ¸ë¥¼ ì¼ ë‹¤.\nOP_READ ë¹„íŠ¸ë¥¼ ì¼ ë‹¤ê³  OP_ACCEPT ë¹„íŠ¸ê°€ êº¼ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” í‚¤ ì§‘í•©ì—ì„œ í•´ë‹¹ í‚¤ê°€\nì œê±°ë  ë•Œê¹Œì§€ í‚¤ì— ìœ ì§€ëœë‹¤.</p>\n<p>ì´ëŠ” ë“±ë¡ëœ ì±„ë„ì˜ í˜„ì¬ ìƒíƒœê°€ ì œëŒ€ë¡œ í‘œì‹œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë²ˆê±°ëŸ¬ì›Œ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ,\nì´ëŠ” ì˜ë„ëœ ì„¤ê³„ë¡œ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ë§ì€ ìœ ì—°ì„±ì„ ì œê³µí•˜ì§€ë§Œ í‚¤ë¥¼ ì˜¬ë°”ë¥´ê²Œ ê´€ë¦¬í•˜ì—¬ í‚¤ì˜ ìƒíƒœ ì •ë³´ê°€ ì˜¤ë˜ë˜ì§€ ì•Šë„ë¡ ë³´ì¥í•˜ëŠ” ì±…ì„ì„ ë¶€ì—¬í•œë‹¤.</p>\n<p>ë§Œì•½ í”„ë¡œê·¸ë¨ì´ ì›ë˜ ì˜ë„ëŒ€ë¡œ ë™ì‘í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” ì¤€ë¹„ ì™„ë£Œëœ í‚¤ë¥¼ ì²˜ë¦¬í•˜ê³  <strong>Selected key set</strong> ì—ì„œ <code class=\"language-text\">it.remove()</code> ë¡œ í•´ë‹¹ í‚¤ë¥¼ ì œê±°í•´ì¤˜ì•¼ í•œë‹¤.\ní•´ë‹¹ ë‚´ìš©ì„ ë°˜ì˜í•œ ì¼ë°˜ì ì¸ Selectorë¥¼ ì´ìš©í•œ ì±„ë„ ê´€ë¦¬ëŠ” ëª¨ìŠµì€ ì•„ë˜ íë¦„ì„ ê°€ì§„ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Iterator</span> it <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">SelectionKey</span> key<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">)</span>it<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span><span class=\"token function\">isAcceptable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">registerChannel</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">somethingCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span><span class=\"token function\">isReadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">registerChannel</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">somethingCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    it<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Selector, SelectableChannel, SelectionKeyëŠ” Java NIOì˜ í•µì‹¬ ìš”ì†Œë¡œ, ê³ ì„±ëŠ¥ì„ ìœ„í•œ Native I/O ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.</li>\n<li>SelectableChannelì€ I/O ì±„ë„ì„ ë‚˜íƒ€ë‚´ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ, SocketChannel, ServerSocketChannel ë“±ì´ ì´ë¥¼ êµ¬í˜„í•œë‹¤. Selectorì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì±„ë„ì˜ ì‘ì—… ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•œë‹¤.</li>\n<li>SelectionKey: SelectableChannelê³¼ Selector ê°„ì˜ ì—°ê²°ì„ ë‚˜íƒ€ë‚´ë©°, ì±„ë„ì˜ ê´€ì‹¬ ì‘ì—…ê³¼ í˜„ì¬ ì‘ì—… ì¤€ë¹„ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤.</li>\n<li>Selector ë™ì‘ ì›ë¦¬: Selectorì˜ select() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì±„ë„ ìƒíƒœ í™•ì¸, ì‘ì—… ê´€ì‹¬ ì§‘í•© í™•ì¸, ì±„ë„ ì¤€ë¹„ ìƒíƒœ í™•ì¸ ë“±ì˜ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤</li>\n<li>ì±„ë„ ë“±ë¡ ë° ê´€ë¦¬: select()ëŠ” ê²°ê³¼ë¥¼ SelectionKeyì— ëˆ„ì ì‹œí‚¨ë‹¤. ì´ëŠ” í‚¤ ê´€ë¦¬ì— ì±…ì„ì´ í”„ë¡œê·¸ë˜ë¨¸ì— ìˆë‹¤.</li>\n</ul>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Java NIO (Ron Hitchens)</li>\n</ul>","fields":{"slug":"/java-nio-selector/"},"frontmatter":{"title":"Java NIO - Selector","date":"October 19, 2023"}},{"id":"cf146ad2-1f45-5a60-a4d6-e2b637ff2e18","html":"<h2 id=\"Channel\" style=\"position:relative;\">Channel<a href=\"#Channel\" aria-label=\"Channel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Channelì€ íŒŒì¼ì´ë‚˜ ì†Œì¼“ê³¼ ê°™ì€ ì—”í‹°í‹° ê°„ì— ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì†¡í•˜ëŠ” í†µë¡œì´ë‹¤.\nì±„ë„ì€ ì¼ë°˜ì ìœ¼ë¡œ ìš´ì˜ì²´ì œì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°ë‚˜ í•¸ë“¤ëŸ¬ì™€ ì¼ëŒ€ì¼ ê´€ê³„ë¥¼ ê°€ì§„ë‹¤.\nì±„ë„ì€ Javaì˜ í”Œë«í¼ ë…ë¦½ì„±ì„ ìœ ì§€í•˜ë©´ì„œë„ ìš´ì˜ ì²´ì œì˜ ë„¤ì´í‹°ë¸Œ I/O ê¸°ëŠ¥ì— ëŒ€í•œ ì¶”ìƒí™”ë¥¼ ì œê³µí•œë‹¤.</p>\n<p>ì•„ë˜ ê·¸ë¦¼ì€ Channel í´ë˜ìŠ¤ì˜ ìƒì†ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84b1c560243e23d2fe3d8bc7ce7e2bff/1e052/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 131.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADBElEQVR42oXVh27tOAwE0Pv/v5Qgvffee++9Nz4cAjTWi7xdA4p9JXI0M6SUTvzl+fn5yfHy8hJ7e3txdnYW7+/v8X9P578APcfHx9HX1xczMzPx8PDQWvsV8Pv7O97e3lrj9fU17u7u4vn5OTY3N2NkZCRGR0fj+vo6Pj4+4vPz86+gHTIEeL6+vjJpaWkpVlZWUurR0VHMz8/HxsZGbG1txe7ubszOzsbBwcGvjBMQUD1ra2vR1dUVPT09+b24uBjd3d3Nb5sNDQ3lPF9/BSyG3sDJxeDy8jKTFMb78fExx8nJSVxdXaWam5ubVrE6gs/Pz+Pw8DB9sjMg8qamppKRxPX19RgeHs63dWynp6czhyXyE1ABFhYWUlJvb28GSQK8vb2dXvLMmmSxNgFSBKjhbSPZwBIQADIuLi5iYmIi505PT3MeawOb+/v7tGF/fz8VtNpGskXe+Aag/0gz59smfOOhby2FyNPTU9ze3jZ16KiQBO2hTTTw8vJybgAY8xrAvVdXV9MOG5T/vhtAyZOTkzlIqKrZvVjzkc/j4+MZbw5Lj34E3ALkF5OBMhxbzLGUrOL9/f0J6HfJr43NNYCSxsbG8sySA8hQvWJoQ2u+Dd1RD6YNoKLYDSNDVVWyiqQA5GgnLKlwvlUWEbm1aasoOzs7aTRACc4uPxVLsGKR7KJw9MRXN3jriAZQlXhHNv+wcgQVB2uA1oHpADE2taYgerJh6A8m/HMJYGjRjoYTQD7JgDCuFkKEf/qwLopkaNFJkFBjbm4uWQAgSXXF+A2ogMtDqlpFQbtOBcaY8hEImSpuDZg35uKwI9vF3PJQMp+YX3LNuwh4hzHQYui3ItVVZr7xUH+5TSRXs7rWMAE2MDCQjEh3u7iA3Tplhze2DSB2g4OD2byOmMW6JDCofwVs0aO6wX2oECVVPLUJqKeqxxREPwLjz7+veLH6EAE+k6vSCtQA2hWgw48d2XavG0ThCpT0igWOtQqLbwBJcqxIBo4d4GqF+qdfseLI/mcbsYaHfwBJp4Fs8VqY8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Channel ìƒì† ê´€ê³„\"\n        title=\"\"\n        src=\"/static/84b1c560243e23d2fe3d8bc7ce7e2bff/ca1dc/img.png\"\n        srcset=\"/static/84b1c560243e23d2fe3d8bc7ce7e2bff/e7570/img.png 170w,\n/static/84b1c560243e23d2fe3d8bc7ce7e2bff/f46e7/img.png 340w,\n/static/84b1c560243e23d2fe3d8bc7ce7e2bff/ca1dc/img.png 680w,\n/static/84b1c560243e23d2fe3d8bc7ce7e2bff/1e052/img.png 872w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Channel ìƒì† ê´€ê³„</figcaption>\n  </figure></p>\n<p>ê³„ì¸µêµ¬ì¡° ìƒë‹¨ì— WritableByteChannelê³¼ ReadableByteChannel ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ê²Œ ë˜ë©´ ì±„ë„ì€ ë°”ì´íŠ¸ ë²„í¼ì— ëŒ€í•´ì„œë§Œ\nì‘ë™í•œë‹¤ëŠ” ê²ƒì„ ì§ì‘í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ìš´ì˜ì²´ì œì˜ ì €ìˆ˜ì¤€ I/Oê°€ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>InterruptibleChannel ì¸í„°í˜ì´ìŠ¤ëŠ” ì±„ë„ì´ ì•ˆì „í•˜ê²Œ ì¤‘ë‹¨ë˜ê³  ë‹«í ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤.\nìŠ¤ë ˆë“œê°€ interruptible ì±„ë„ì—ì„œ I/O ì‘ì—…ì— ì°¨ë‹¨ë˜ì–´ ìˆì„ ë•Œ, í•´ë‹¹ ìŠ¤ë ˆë“œì˜ interrupt ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì±„ë„ì´ ë‹«íˆê³ , ìŠ¤ë ˆë“œì˜ ì¤‘ë‹¨ ìƒíƒœê°€ ì„¤ì •ë˜ë©°, ì±„ë„ì—ì„œ ClosedByInterruptExceptionì´ ë°œìƒí•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” Channcel ì¸í„°í˜ì´ìŠ¤ì˜ ì „ì²´ ì†ŒìŠ¤ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Channel</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isOpen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"Channel-Open\" style=\"position:relative;\">Channel Open<a href=\"#Channel-Open\" aria-label=\"Channel Open permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>I/OëŠ” í¬ê²Œ íŒŒì¼ I/Oì™€ ìŠ¤íŠ¸ë¦¼(ë˜ëŠ” ì†Œì¼“) I/Oë¡œ êµ¬ë¶„ëœë‹¤.\n<strong>Channel ìƒì† ê´€ê³„</strong> ì´ë¯¸ì§€ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ í•˜ë‚˜ì˜ FileChannelê³¼ ì„¸ ê°œì˜ ì†Œì¼“ ì±„ë„(SocketChannel, ServerSocketChannel, DatagramChannel)ì´ ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<p>FileChannelì€ RandomAccessFile, FileInputStream, FileOutputStream ì™€ ê°™ì€ ê°ì²´ì—ì„œ getChannel ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ë§Œ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// íŒŒì¼ ì±„ë„ ìƒì„±</span>\n<span class=\"token class-name\">RandomAccessFile</span> raf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RandomAccessFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"somefile\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">FileChannel</span> fc <span class=\"token operator\">=</span> raf<span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë‚˜ë¨¸ì§€ ì†Œì¼“ ì±„ë„ë“¤ì€ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SocketChannel</span> sc <span class=\"token operator\">=</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsc<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"somehost\"</span><span class=\"token punctuation\">,</span>someport<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">ServerSocketChannel</span> ssc <span class=\"token operator\">=</span> <span class=\"token class-name\">ServerSocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nssc<span class=\"token punctuation\">.</span><span class=\"token function\">socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span>somelocalport<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">DatagramChannel</span> dc <span class=\"token operator\">=</span> <span class=\"token class-name\">DatagramChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"ì±„ë„-ì‚¬ìš©\" style=\"position:relative;\">ì±„ë„ ì‚¬ìš©<a href=\"#%EC%B1%84%EB%84%90-%EC%82%AC%EC%9A%A9\" aria-label=\"ì±„ë„ ì‚¬ìš© permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì±„ë„ì€ ë‹¨ë°©í–¥(unidirectional) ë˜ëŠ” ì–‘ë°©í–¥(bidirectional)ì¼ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ReadableByteChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Channel</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span> dst<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">WritableByteChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Channel</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span> src<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ReadableByteChannel ì¸í„°í˜ì´ìŠ¤ëŠ” read() ë©”ì„œë“œë¥¼ ì •ì˜í•˜ë¯€ë¡œ, ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ì±„ë„ì€ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆë‹¤.\në°˜ëŒ€ë¡œ WritableByteChannel ì¸í„°í˜ì´ìŠ¤ëŠ” write() ë©”ì„œë“œë¥¼ ì œê³µí•˜ë¯€ë¡œ, ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ì±„ë„ì€ ë°ì´í„°ë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.\nì–´ë–¤ ì±„ë„ í´ë˜ìŠ¤ê°€ ë‘ ì¸í„°í˜ì´ìŠ¤ ì¤‘ í•˜ë‚˜ë§Œ êµ¬í˜„í•˜ë©´ ê·¸ ì±„ë„ì€ ë‹¨ë°©í–¥ì´ê³ , ë‘ ì¸í„°í˜ì´ìŠ¤ ëª¨ë‘ë¥¼ êµ¬í˜„í•˜ë©´ ì–‘ë°©í–¥ ì±„ë„ì´ ëœë‹¤.</p>\n<p>ByteChannel ì¸í„°í˜ì´ìŠ¤ëŠ” ReadableByteChannelì™€ WritableByteChannelë¥¼ ëª¨ë‘ í™•ì¥í•˜ëŠ”ë°, ëª¨ë“  File ì±„ë„ê³¼ ì†Œì¼“ ì±„ë„ì´ ByteChannelì„ í™•ì¥í•˜ë¯€ë¡œ ì–‘ë°©í–¥ ì±„ë„ì´ ëœë‹¤.\nì†Œì¼“ì€ í•­ìƒ ì–‘ë°©í–¥ì´ì§€ë§Œ, íŒŒì¼ì€ í•­ìƒ ê·¸ë ‡ì§€ ì•Šë‹¤. ì˜ˆë¥¼ ë“¤ë©´ FileInputStream ê°ì²´ì—ì„œ getChannel() ë©”ì„œë“œë¡œ ì–»ëŠ” FileChannelì€ ì½ê¸° ì „ìš© ì±„ë„ì´ ëœë‹¤.\në§Œì•½ í•´ë‹¹ ì±„ë„ì— writeë¥¼ í•˜ê²Œ ë˜ë©´ NonWritableChannelExceptionì´ ë°œìƒí•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” System.in ì±„ë„ì—ì„œ System.out ì±„ë„ë¡œ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ëŠ” ì˜ˆì œ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChannelCopy</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">ReadableByteChannel</span> source <span class=\"token operator\">=</span> <span class=\"token class-name\">Channels</span><span class=\"token punctuation\">.</span><span class=\"token function\">newChannel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">WritableByteChannel</span> dest <span class=\"token operator\">=</span> <span class=\"token class-name\">Channels</span><span class=\"token punctuation\">.</span><span class=\"token function\">newChannel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">channelCopy1</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> dest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsource<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdest<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">channelCopy1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ReadableByteChannel</span> src<span class=\"token punctuation\">,</span> <span class=\"token class-name\">WritableByteChannel</span> dest<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">ByteBuffer</span> buffer <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocateDirect</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">flip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tdest<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">flip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">hasRemaining</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tdest<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ScatterGather\" style=\"position:relative;\">Scatter/Gather<a href=\"#ScatterGather\" aria-label=\"ScatterGather permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Scatter/Gather ëŠ” ìš´ì˜ ì²´ì œì—ì„œ I/O ì‘ì—…ì„ ìµœì í™”í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.</p>\n<ul>\n<li>Scatter: ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²„í¼ë¡œ ë¶„ì‚°í•˜ì—¬ ì½ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</li>\n<li>Gather: ì—¬ëŸ¬ ë²„í¼ì—ì„œ ë°ì´í„°ë¥¼ ëª¨ì•„ì„œ ì“°ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</li>\n</ul>\n<p>Scatter/Gatherë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ë²„í¼ì˜ ì£¼ì†Œ ëª©ë¡ì„ í•œ ë²ˆì˜ ì‹œìŠ¤í…œ í˜¸ì¶œë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.\nì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ëŸ¬ ì‹œìŠ¤í…œ í˜¸ì¶œì„ í•˜ëŠ” ê²ƒì„ í”¼í•  ìˆ˜ ìˆë‹¤.   </p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9360d4367299b407a6b6c26ffe473951/a31f0/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR42nVSWaqEQAyc+19KQfDDFR1QBDcEBVFh3HfzqECLDG8CoeksVelKv67rovM8ad93Oo6DcBeOOHxdV1qWhWtE7pe90NC2LRVFQU3TcNN38ziO9Pl8OA5Dz09AFHmeR7quk23bZBgG+b5PrutSWZZMBkDYc/r/7jegaZrskiQxkGVZDJznOROBUBhkmeeZT2FPUAYMw5Bd0zRuxqTwLMuo73uq65q6rqM0TSmOY3Ich4Ig4DzqxQsYcNs2LlQUhWRZ5gkx1fv9Zk3BDAkQAyhAQAYgkFVVRUmSsOY3YBRFpKoqF6EBBYgBDMuABJBkGIZ7KeKJIMHLRI63PE0T64LRkYAjJr6RMPGNvpfy3PofAkhe5dqKWi8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3ê°œì˜ ë²„í¼ì—ì„œ scatteringìœ¼ë¡œ read\"\n        title=\"\"\n        src=\"/static/9360d4367299b407a6b6c26ffe473951/ca1dc/img_1.png\"\n        srcset=\"/static/9360d4367299b407a6b6c26ffe473951/e7570/img_1.png 170w,\n/static/9360d4367299b407a6b6c26ffe473951/f46e7/img_1.png 340w,\n/static/9360d4367299b407a6b6c26ffe473951/ca1dc/img_1.png 680w,\n/static/9360d4367299b407a6b6c26ffe473951/a31f0/img_1.png 685w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">3ê°œì˜ ë²„í¼ì—ì„œ scatteringìœ¼ë¡œ read</figcaption>\n  </figure></p>\n<p>ì•„ë˜ëŠ” Scatter/Gather I/Oë¥¼ ì§€ì›í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. read, write ë©”ì„œë“œì— ByteBuffer ë°°ì—´ì„ ì¸ìë¡œ ë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ScatteringByteChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ReadableByteChannel</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> dsts<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> offset<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> length<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> dsts<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">GatheringByteChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WritableByteChannel</span> <span class=\"token punctuation\">{</span>\n\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> srcs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> offset<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> length<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\t\t\t\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> srcs<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì•„ë˜ëŠ” Scatterë¡œ ë‘ ê°œì˜ ë²„í¼ì— ë¶„ì‚° ì €ì¥í•˜ëŠ” ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ByteBuffer</span> header <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span>allocateDirect <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">ByteBuffer</span> body <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span>allocateDirect <span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> buffers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> header<span class=\"token punctuation\">,</span> body <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> bytesRead <span class=\"token operator\">=</span> channel<span class=\"token punctuation\">.</span>read <span class=\"token punctuation\">(</span>buffers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì±„ë„ì— 38byteê°€ ì¤€ë¹„ë˜ì–´ ìˆë‹¤ë©´ headerì— 10byte, bodyì— 28byteê°€ ì €ì¥ëœë‹¤.\nì•„ë˜ëŠ” 4ê°œì˜ ë²„í¼ì— Scatter readë¥¼ ì‚¬ìš©í•œ ëª¨ìŠµì´ë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/210a33dab5b459d05412c0295e64467e/e6e97/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1UlEQVR42pVR2QrDMAzL/39goQ+lJ73vi94aMmR0pRtrQCRxYkm2FS5rXVd0XYdxHLFtG54udb7M84yiKGBZFjzPQ1VVj0k/CKdpgmEYiOMYtm0LOZ0uyyJifNc7cRzHO1ef1TUQRRGCIIDv+6jrGn3fSzLdlmWJpmmQ57mI7ft+7/CsxE9ZlglhmqYIw1BAUvaWAm3bCih4BitR52HofnF3HAeu64orJjPGhF+gGaX7wVKTJBFi9oluWPowDBL7eyicpmmakswzwRI5FA6HYne9+kb4ArBsbucsssTeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"scattering read using four buffers\"\n        title=\"\"\n        src=\"/static/210a33dab5b459d05412c0295e64467e/ca1dc/img_2.png\"\n        srcset=\"/static/210a33dab5b459d05412c0295e64467e/e7570/img_2.png 170w,\n/static/210a33dab5b459d05412c0295e64467e/f46e7/img_2.png 340w,\n/static/210a33dab5b459d05412c0295e64467e/ca1dc/img_2.png 680w,\n/static/210a33dab5b459d05412c0295e64467e/e6e97/img_2.png 864w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">scattering read using four buffers</figcaption>\n  </figure></p>\n<p>Scatter/Gather ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ë©´ ì½ì€ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²„í‚·ìœ¼ë¡œ ë¶„ë¦¬í•˜ê±°ë‚˜ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„° ë©ì–´ë¦¬ë¥¼ ì „ì²´ ë°ì´í„°ë¡œ ëª¨ìœ¼ëŠ”\në²ˆê±°ë¡œìš´ ì‘ì—…ì„ ìš´ì˜ì²´ì œì— ìœ„ì„í•˜ì—¬, ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì¤„ì´ê³  ë°ì´í„° ì´ë™ ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"File-Channel\" style=\"position:relative;\">File Channel<a href=\"#File-Channel\" aria-label=\"File Channel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>FileChannelì€ í•­ìƒ ë¸”ë¡œí‚¹ ëª¨ë“œë¡œ ë™ì‘í•˜ë©°, ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œë¡œ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.\në…¼ë¸”ëŸ¬í‚¹ ëª¨ë“œê°€ íŒŒì¼ I/Oì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ul>\n<li>ìºì‹±ê³¼ ìµœì í™”: ìš´ì˜ ì²´ì œì˜ ìºì‹±ê³¼ ìµœì í™”ë¡œ ì¸í•´, íŒŒì¼ I/OëŠ” ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë¹ ë¥´ê²Œ ì²˜ë¦¬ëœë‹¤. ë”°ë¼ì„œ ë…¼ë¸”ë¡œí‚¹ì˜ ì´ì ì´ í¬ê²Œ ë‚˜íƒ€ë‚˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</li>\n<li>ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°ì´í„°: íŒŒì¼ì˜ í¬ê¸°ì™€ ìœ„ì¹˜ëŠ” ì•Œë ¤ì ¸ ìˆê¸° ë•Œë¬¸ì—, ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ì˜ í•„ìš”ì„±ì´ ìƒëŒ€ì ìœ¼ë¡œ ì¤„ì–´ë“ ë‹¤.</li>\n<li>êµ¬ì¡°í™”ëœ ë°ì´í„°: íŒŒì¼ì˜ êµ¬ì¡°í™”ëœ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´, ìŠ¤íŠ¸ë¦¼ ì§€í–¥ I/Oì™€ ê°™ì€ ì—°ì†ì ì¸ ë°ì´í„° íë¦„ì„ ì²˜ë¦¬í•˜ëŠ” ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ì´ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<p>ë²„í¼ì˜ get()ê³¼ put() ë©”ì„œë“œì²˜ëŸ¼, read()ë‚˜ write()ë¡œ ë°”ì´íŠ¸ë¥¼ ì „ì†¡í•  ë•Œ íŒŒì¼ì˜ ìœ„ì¹˜ë„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ëœë‹¤.\níŒŒì¼ì˜ ìœ„ì¹˜ê°€ size() ë©”ì„œë“œë¡œ ë°˜í™˜ë˜ëŠ” íŒŒì¼ í¬ê¸°ì— ë„ë‹¬í•˜ë©´, read()ëŠ” íŒŒì¼ì˜ ë(end-of-file)ì„ ë‚˜íƒ€ë‚´ëŠ” -1ì„ ë°˜í™˜í•œë‹¤.   </p>\n<p>íŒŒì¼ í¬ê¸°ë¥¼ ë„˜ì–´ì„œ write()ë¥¼ ìˆ˜í–‰í•˜ë©´, ìƒˆë¡œ ì“°ëŠ” ë°”ì´íŠ¸ë¥¼ ìˆ˜ìš©í•˜ê¸° ìœ„í•´ íŒŒì¼ í¬ê¸°ê°€ ì»¤ì§„ë‹¤. ì´ì „ íŒŒì¼ì˜ ëê³¼ ìƒˆë¡œ ì¶”ê°€ëœ ë°”ì´íŠ¸ ì‚¬ì´ì˜ ë°”ì´íŠ¸ ê°’ì€ FileChannel í´ë˜ìŠ¤ì— ì˜í•´ ì§€ì •ë˜ì§€ ì•Šì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ê¸°ë³¸ íŒŒì¼ ì‹œìŠ¤í…œì˜ ë™ì‘ì„ ë°˜ì˜í•œë‹¤.\nìš´ì˜ ì²´ì œë‚˜ íŒŒì¼ ì‹œìŠ¤í…œ ìœ í˜•ì— ë”°ë¼ íŒŒì¼ì— êµ¬ë©ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.   </p>\n<p>íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì´ë ¤ë©´, truncate()ë¥¼ ì‚¬ìš©í•´ ì§€ì •í•œ ìƒˆ í¬ê¸°ë¥¼ ë„˜ì–´ì„œëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ì˜ë¼ë‚¸ë‹¤. í˜„ì¬ í¬ê¸°ê°€ ìƒˆ í¬ê¸°ë³´ë‹¤ í¬ë©´, ìƒˆ í¬ê¸°ë¥¼ ë„˜ì–´ì„œëŠ” ëª¨ë“  ë°”ì´íŠ¸ëŠ” ë²„ë ¤ì§„ë‹¤. ì œê³µëœ ìƒˆ í¬ê¸°ê°€ í˜„ì¬ íŒŒì¼ í¬ê¸°ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìœ¼ë©´ íŒŒì¼ì€ ìˆ˜ì •ë˜ì§€ ì•ŠëŠ”ë‹¤. ì–´ëŠ ê²½ìš°ì—ë“  truncate()ì˜ ë¶€ìˆ˜ íš¨ê³¼ëŠ” íŒŒì¼ ìœ„ì¹˜ë¥¼ ì œê³µëœ ìƒˆ í¬ê¸°ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.   </p>\n<p>íŒŒì¼ì´ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì— ìˆìœ¼ë©´, force()ì—ì„œ ë°˜í™˜ë  ë•Œ ì±„ë„ì´ ìƒì„±ëœ ì´í›„ (ë˜ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ force()ê°€ í˜¸ì¶œëœ ì´í›„) íŒŒì¼ì— ëŒ€í•œ ëª¨ë“  ìˆ˜ì • ì‚¬í•­ì´ ë””ìŠ¤í¬ì— ê¸°ë¡ë˜ì—ˆìŒì´ ë³´ì¥ëœë‹¤.\nì´ëŸ¬í•œ ë™ê¸°í™”ëŠ” ë°ì´í„° ë¬´ê²°ì„±ê³¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë³µêµ¬ë¥¼ ìœ„í•´ ì¤‘ìš”í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¸ëœì­ì…˜ ì²˜ë¦¬ì™€ ê°™ì€ ì¤‘ìš”í•œ ì‘ì—…ì—ì„œ ì´ê²ƒì€ í•„ìˆ˜ì ì´ë‹¤.   </p>\n<p>ê·¸ëŸ¬ë‚˜ íŒŒì¼ì´ NFSì™€ ê°™ì€ ì›ê²© íŒŒì¼ ì‹œìŠ¤í…œì— ìˆìœ¼ë©´ ì´ëŸ¬í•œ ë™ê¸°í™”ë¥¼ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤. ë‹¤ë¥¸ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œë„ êµ¬í˜„ì— ë”°ë¼ ë™ì¼í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\nJVMì€ ìš´ì˜ ì²´ì œë‚˜ íŒŒì¼ ì‹œìŠ¤í…œì´ ì§€í‚¤ì§€ ì•ŠëŠ” ì•½ì†ì„ í•  ìˆ˜ ì—†ë‹¤. ì‹œìŠ¤í…œ ì‹¤íŒ¨ì—ë„ ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•´ì•¼ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°, ì‚¬ìš© ì¤‘ì¸ ìš´ì˜ ì²´ì œë‚˜ íŒŒì¼ ì‹œìŠ¤í…œì´ ê·¸ëŸ¬í•œ ì¸¡ë©´ì—ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” FileChannelë¡œ íŒŒì¼ì„ Copy í•˜ëŠ” ì˜ˆì œ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FileCopyExample</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">String</span> sourceFilePath <span class=\"token operator\">=</span> <span class=\"token string\">\"ì›ë³¸íŒŒì¼ê²½ë¡œ/ì›ë³¸íŒŒì¼.txt\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">String</span> destinationFilePath <span class=\"token operator\">=</span> <span class=\"token string\">\"ëŒ€ìƒíŒŒì¼ê²½ë¡œ/ëŒ€ìƒíŒŒì¼.txt\"</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">FileInputStream</span> sourceStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span>sourceFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">FileOutputStream</span> destinationStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">(</span>destinationFilePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token class-name\">FileChannel</span> sourceChannel <span class=\"token operator\">=</span> sourceStream<span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">FileChannel</span> destinationChannel <span class=\"token operator\">=</span> destinationStream<span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token class-name\">ByteBuffer</span> buffer <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">int</span> bytesRead<span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>bytesRead <span class=\"token operator\">=</span> sourceChannel<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">flip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ë²„í¼ë¥¼ ì½ê¸° ëª¨ë“œë¡œ ì „í™˜</span>\n\t\t\t\tdestinationChannel<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ë²„í¼ì˜ ë‚´ìš©ì„ ëŒ€ìƒ íŒŒì¼ë¡œ ë³µì‚¬</span>\n\t\t\t\tbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ë²„í¼ë¥¼ ì´ˆê¸°í™”í•˜ì—¬ ë‹¤ì‹œ ì“°ê¸° ëª¨ë“œë¡œ ì „í™˜</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\tsourceStream<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tdestinationStream<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tsourceChannel<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tdestinationChannel<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"íŒŒì¼ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"Memory-Mapped-Files\" style=\"position:relative;\">Memory-Mapped Files<a href=\"#Memory-Mapped-Files\" aria-label=\"Memory Mapped Files permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>FileChannel í´ë˜ìŠ¤ì˜ map() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´, íŒŒì¼ê³¼ íŠ¹ë³„í•œ ìœ í˜•ì˜ ByteBuffer ì‚¬ì´ì— ê°€ìƒ ë©”ëª¨ë¦¬ ë§¤í•‘ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë””ìŠ¤í¬ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ê°€ìƒ ë©”ëª¨ë¦¬ ë§¤í•‘ì´ ìƒì„±ë˜ê³ , í•´ë‹¹ ê°€ìƒ ë©”ëª¨ë¦¬ ê³µê°„ ì£¼ìœ„ì— MappedByteBuffer ê°ì²´ê°€ ê°ì‹¸ì§„ë‹¤.   </p>\n<p>map()ì—ì„œ ë°˜í™˜ëœ MappedByteBuffer ê°ì²´ëŠ” ëŒ€ë¶€ë¶„ì˜ ë©´ì—ì„œ ë©”ëª¨ë¦¬ ê¸°ë°˜ ë²„í¼ì²˜ëŸ¼ ë™ì‘í•œë‹¤. ê·¸ëŸ¬ë‚˜ ê·¸ ë°ì´í„° ìš”ì†ŒëŠ” ë””ìŠ¤í¬ì— ìˆëŠ” íŒŒì¼ì— ì €ì¥ëœë‹¤. get()ì„ í˜¸ì¶œí•˜ë©´ ë””ìŠ¤í¬ íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©°, ë§¤í•‘ì´ ì„¤ì •ëœ ì´í›„ì— ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ íŒŒì¼ì´ ìˆ˜ì •ë˜ì—ˆë”ë¼ë„ í˜„ì¬ íŒŒì¼ì˜ ë‚´ìš©ì„ ë°˜ì˜í•œë‹¤.    </p>\n<p>ë©”ëª¨ë¦¬ ë§¤í•‘ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ì±„ë„ì„ ì‚¬ìš©í•  ë•Œì¡°ì°¨ë„ ì „í†µì ì¸ ë°©ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“°ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤. ëª…ì‹œì ì¸ ì‹œìŠ¤í…œ í˜¸ì¶œì„ í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. ë” ì¤‘ìš”í•œ ê²ƒì€ ìš´ì˜ ì²´ì œì˜ ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ í˜ì´ì§€ë¥¼ ìºì‹œí•œë‹¤ëŠ” ê²ƒì´ë‹¤.   </p>\n<p>ìœ íš¨í•œ ë©”ëª¨ë¦¬ í˜ì´ì§€ê°€ í•œ ë²ˆ ìƒì„±ë˜ë©´, ë‹¤ë¥¸ ì‹œìŠ¤í…œ í˜¸ì¶œì„ í•˜ì§€ ì•Šê³ ë„ ì „ì²´ í•˜ë“œì›¨ì–´ ì†ë„ë¡œ ë‹¤ì‹œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ë©”ëª¨ë¦¬ ë§¤í•‘ì„ í™œìš©í•˜ë©´, ìì£¼ ì°¸ì¡°ë˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ë˜ëŠ” ì¸ë±ìŠ¤ë‚˜ ë‹¤ë¥¸ ì„¹ì…˜ì´ í¬í•¨ëœ í° êµ¬ì¡°í™”ëœ íŒŒì¼ì—ì„œ í° ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FileChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractChannel</span>\n\t\t<span class=\"token keyword\">implements</span> <span class=\"token class-name\">ByteChannel</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">GatheringByteChannel</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ScatteringByteChannel</span> <span class=\"token punctuation\">{</span>\n  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">MappedByteBuffer</span> map <span class=\"token punctuation\">(</span><span class=\"token class-name\">MapMode</span> mode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> position<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MapMode</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapMode</span> <span class=\"token constant\">READ_ONLY</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MapMode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"READ_ONLY\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapMode</span> <span class=\"token constant\">READ_WRITE</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MapMode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"READ_WRITE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapMode</span> <span class=\"token constant\">PRIVATE</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MapMode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PRIVATE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token punctuation\">}</span>\n \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì•„ë˜ ì½”ë“œëŠ” FileChannelì˜ ì „ì²´ íŒŒì¼ ë°ì´í„°ì— ëŒ€í•´ì„œ MappedByteBufferë¥¼ ìƒì„±í•˜ëŠ” ì˜ˆì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">buffer <span class=\"token operator\">=</span> fileChannel<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FileChannel<span class=\"token punctuation\">.</span>MapMode</span><span class=\"token punctuation\">.</span><span class=\"token constant\">READ_ONLY</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> fileChannel<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë§µí•‘ ëª¨ë“œëŠ” ì½ê¸° ì „ìš©(MapMode.READ<em>ONLY) ë˜ëŠ” ì½ê¸°/ì“°ê¸°(MapMode.READ</em>WRITE)ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤. ìš”ì²­í•œ ë§¤í•‘ ëª¨ë“œëŠ” map() ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ” FileChannel ê°ì²´ì˜ ì•¡ì„¸ìŠ¤ ê¶Œí•œì— ë”°ë¼ ì œí•œë  ìˆ˜ ìˆë‹¤.   </p>\n<p>MapMode.PRIVATE ëª¨ë“œëŠ” ë³µì‚¬ í›„ ì“°ê¸° ë§¤í•‘ì„ ì›í•œë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚¸ë‹¤. ì´ëŠ” put()ì„ í†µí•´ ë§Œë“  ëª¨ë“  ìˆ˜ì • ì‚¬í•­ì´ MappedByteBuffer ì¸ìŠ¤í„´ìŠ¤ë§Œ ë³¼ ìˆ˜ ìˆëŠ” ê°œì¸ ë°ì´í„° ë³µì‚¬ë³¸ì„ ìƒì„±í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê¸°ë³¸ íŒŒì¼ì—ëŠ” ë³€ê²½ ì‚¬í•­ì´ ì ìš©ë˜ì§€ ì•Šìœ¼ë©°, ë²„í¼ê°€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ë  ë•Œ ë³€ê²½ ì‚¬í•­ì€ ì†ì‹¤ëœë‹¤.   </p>\n<p>ë³µì‚¬ í›„ ì“°ê¸°ëŠ” ìš´ì˜ ì²´ì œì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ê´€ë¦¬í•˜ëŠ” ë° ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì´ë‹¤. ë³µì‚¬ í›„ ì“°ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ í˜ì´ì§€ë¥¼ ê³µìœ í•  ìˆ˜ ìˆê²Œ ë˜ë©°, ì´ë¡œ ì¸í•´ ë™ì¼í•œ íŒŒì¼ì˜ ì—¬ëŸ¬ ë§¤í•‘ì— ëŒ€í•œ ë§ì€ ì´ì ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ëŸ°ë° ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€, ë²„í¼ê°€ í•´ë‹¹ íŒŒì¼ ì˜ì—­ì„ ì•„ì§ ìˆ˜ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œ, ì‹¤ì œ íŒŒì¼ì˜ í•´ë‹¹ ì˜ì—­ì— ë‹¤ë¥¸ ë°©ë²•(ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜)ìœ¼ë¡œ ë³€ê²½ì´ ë°œìƒí•˜ë©´, MapMode.PRIVATE ëª¨ë“œë¡œ ìƒì„±ëœ ë²„í¼ëŠ” ê·¸ ë³€ê²½ ì‚¬í•­ì„ ë³¼ìˆ˜ ìˆë‹¤. ì¦‰, íŒŒì¼ì˜ ì›ë³¸ ë°ì´í„°ê°€ ë³€ê²½ë˜ë©´, í•´ë‹¹ ë³€ê²½ì€ ë²„í¼ì—ë„ ë°˜ì˜ëœë‹¤.</p>\n<p>í•˜ì§€ë§Œ, ë²„í¼ê°€ ì´ë¯¸ í•´ë‹¹ íŒŒì¼ ì˜ì—­ì„ ìˆ˜ì •í•œ ê²½ìš°, ë²„í¼ëŠ” ê·¸ ì˜ì—­ì˜ ë³µì‚¬ë³¸ì„ ê°€ì§€ê³  ìˆê²Œ ëœë‹¤. ë”°ë¼ì„œ, ì´í›„ì— ì‹¤ì œ íŒŒì¼ì˜ í•´ë‹¹ ì˜ì—­ì— ë³€ê²½ì´ ë°œìƒí•˜ë”ë¼ë„, ë²„í¼ëŠ” ê·¸ ë³€ê²½ì„ ë°˜ì˜í•˜ì§€ ì•Šê³ , ë³¸ì¸ì´ ìˆ˜ì •í•œ ë³µì‚¬ë³¸ì˜ ë°ì´í„°ë¥¼ ìœ ì§€í•œë‹¤.   </p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, íŒŒì¼ì— \"Hello\"ë¼ëŠ” ë¬¸ìì—´ì´ ìˆê³ , ì´ë¥¼ MapMode.PRIVATE ëª¨ë“œë¡œ ë§¤í•‘í•˜ì—¬ ë²„í¼ë¥¼ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í•˜ì.\nì´í›„, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ íŒŒì¼ì˜ \"Hello\"ë¥¼ \"World\"ë¡œ ë³€ê²½í•˜ë©´, ë²„í¼ëŠ” \"World\"ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.\nê·¸ëŸ¬ë‚˜, ë²„í¼ê°€ ë¨¼ì € \"Hello\"ë¥¼ \"Java\"ë¡œ ë³€ê²½í•œ í›„ì— íŒŒì¼ì´ \"World\"ë¡œ ë°”ë€Œë©´, ë²„í¼ëŠ” ì—¬ì „íˆ \"Java\"ë¥¼ ë³´ê²Œ ëœë‹¤.</p>\n<p>MappedByteBufferì˜ isLoaded ë©”ì„œë“œëŠ” ë§¤í•‘ëœ íŒŒì¼ì´ ì™„ì „íˆ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\ntrueë¥¼ ë°˜í™˜í•˜ë©´ ë§¤í•‘ëœ ë²„í¼ì— ì ‘ê·¼í•  ë•Œ ì§€ì—°ì´ ê±°ì˜ ì—†ê±°ë‚˜ ì „í˜€ ì—†ì„ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. falseë¥¼ ë°˜í™˜í•´ë„ íŒŒì¼ì´ ë©”ëª¨ë¦¬ì— ì™„ì „íˆ ë¡œë“œë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\nì´ ë©”ì„œë“œëŠ” ë³´ì¦ì´ ì•„ë‹Œ íŒíŠ¸ë¥¼ ì œê³µí•œë‹¤.   </p>\n<p>force ë©”ì„œë“œëŠ” MappedByteBufferì—ì„œì˜ ë³€ê²½ ì‚¬í•­ì„ ë””ìŠ¤í¬ì— flushí•œë‹¤.\nMappedByteBufferë¥¼ í†µí•´ íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•  ë•ŒëŠ” FileChannel.force() ëŒ€ì‹  MappedByteBuffer.force()ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</p>\n<h2 id=\"Socket-Channel\" style=\"position:relative;\">Socket Channel<a href=\"#Socket-Channel\" aria-label=\"Socket Channel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>java.nio ì˜ Socket Channelì€ ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì„ ëª¨ë¸ë§í•œ í´ë˜ìŠ¤ì´ë‹¤. íŒŒì¼ ì±„ë„ê³¼ëŠ” ë‹¤ë¥´ê²Œ nonblocking ëª¨ë“œê°€ ê°€ëŠ¥í•˜ë©°,\nì†Œì¼“ ì—°ê²°ì„ ìœ„í•´ ìŠ¤ë ˆë“œë¥¼ í• ë‹¹í•  í•„ìš”ê°€ ì—†ìœ¼ë©° í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¡œë„ ìˆ˜ì²œ ê°œì˜ ì†Œì¼“ ì—°ê²°ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì†Œì¼“ ì±„ë„ì€ ê¸°ì¡´ì˜ java.netì— ìˆëŠ” ì†Œì¼“ì´ í”„ë¡œí† ì½œ ì—°ì‚° ëŒ€ë¶€ë¶„ì— ì¬ì‚¬ìš©ëœë‹¤.</p>\n<p>ë‹¤ìŒ ë©”ì„œë“œëŠ” ì±„ë„ì˜ ì°¨ë‹¨ ëª¨ë“œì™€ ê´€ë ¨ëœ ë©”ì„œë“œì´ë‹¤. ëª¨ë“  ì†Œì¼“ ì±„ë„(SocketChannel, ServerSocketChannel, DatagramChannel)ì´ ìƒì„±ë  ë•ŒëŠ” ê·¸ì— ëŒ€ì‘í•˜ëŠ” í”¼ì–´ ì†Œì¼“ ê°ì²´ê°€ í•¨ê»˜ ìƒì„±ëœë‹¤.\nì´ í”¼ì–´ ì†Œì¼“ì€ Socket, ServerSocket, DatagramSocket í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì´ë‹¤.</p>\n<p>ì†Œì¼“ ì±„ë„ì€ í”„ë¡œí† ì½œ ì—°ì‚°ì„ í•´ë‹¹ í”¼ì–´ ì†Œì¼“ ê°ì²´ì— ìœ„ì„í•œë‹¤.\nì±„ë„ í´ë˜ìŠ¤ì—ì„œ ì†Œì¼“ ë©”ì„œë“œê°€ ì¤‘ë³µë˜ì–´ ë³´ì´ëŠ” ê²½ìš°, ê·¸ ë©”ì„œë“œì—ëŠ” ì±„ë„ í´ë˜ìŠ¤ì—ë§Œ í•´ë‹¹í•˜ëŠ” ë‹¤ë¥¸ ì—°ì‚°ì´ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SelectableChannel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractInterruptibleChannel</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Channel</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> configureBlocking <span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> block<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isBlocking</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">blockingLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì±„ë„ì˜ ë¸”ë¡œí‚¹ ëª¨ë“œë¡œ ì„¤ì •í•˜ë ¤ë©´ configureBlocking() ë©”ì„œë“œì— trueë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ê³ , ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œë¡œ ì„¤ì •í•˜ë ¤ë©´ falseë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ëœë‹¤.</p>\n<p>ì±„ë„ì´ í˜„ì¬ ì–´ë–¤ ëª¨ë“œì— ìˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ isBlocking() ë©”ì„œë“œë¡œ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<p>blockingLock()ìœ¼ë¡œ ë°˜í™˜ëœ ê°ì²´ëŠ” ì±„ë„ì´ ë¸”ë¡œí‚¹ ëª¨ë“œì— ë³€ê²½ì„ í•  ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ëª¨ë‹ˆí„° ê°ì²´ì´ë‹¤.\nì´ ê°ì²´ì— ì ê¸ˆì„ ë³´ìœ í•œ ìŠ¤ë ˆë“œë§Œ ì±„ë„ì˜ ë¸”ë¡œí‚¹ ëª¨ë“œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\nì½”ë“œì˜ ì¤‘ìš”í•œ ë¶€ë¶„ ë™ì•ˆ ì†Œì¼“ì˜ ë¸”ë¡œí‚¹ ëª¨ë“œê°€ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ í•˜ê±°ë‚˜, ë‹¤ë¥¸ ìŠ¤ë ˆë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ì¼ì‹œì ìœ¼ë¡œ ëª¨ë“œë¥¼ ë³€ê²½í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Object</span> lockObj <span class=\"token operator\">=</span> serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">blockingLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsynchronize <span class=\"token punctuation\">(</span>lockObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">boolean</span> prevState <span class=\"token operator\">=</span> serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">isBlocking</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  serverChannel<span class=\"token punctuation\">.</span>configureBlocking <span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  socket <span class=\"token operator\">=</span> serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  serverChannel<span class=\"token punctuation\">.</span>configureBlocking <span class=\"token punctuation\">(</span>prevState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ServerSocketChannel\" style=\"position:relative;\">ServerSocketChannel<a href=\"#ServerSocketChannel\" aria-label=\"ServerSocketChannel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ServerSocketChannel ê°ì²´ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ServerSocket ê°ì²´(í”¼ì–´ ì†Œì¼“)ì™€ ì—°ê´€ë˜ì–´ ìˆìœ¼ë©°,\nì´ë¥¼ í†µí•´ ì¼ë°˜ì ì¸ ì†Œì¼“ ì—°ì‚°, í¬íŠ¸ ë°”ì¸ë”© ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ServerSocketChannel</span> ssc <span class=\"token operator\">=</span> <span class=\"token class-name\">ServerSocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">ServerSocket</span> serverSocket <span class=\"token operator\">=</span> ssc<span class=\"token punctuation\">.</span><span class=\"token function\">socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token number\">1234</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ServerSocketChannelì™€ ê¸°ì¡´ ServerSocket ëª¨ë‘ accept() ë¼ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.\nì´ ë©”ì„œë“œëŠ” ë“¤ì–´ì˜¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì„ ìˆ˜ë½í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.</p>\n<p>ServerSocketì˜ accept() ë©”ì„œë“œëŠ” í•­ìƒ blocking ëª¨ë“œë¡œ ë™ì‘í•œë‹¤.  ì¦‰, ì„œë²„ëŠ” ìƒˆë¡œìš´ ì—°ê²°ì´ ìˆ˜ë½ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ê²Œ ëœë‹¤.   </p>\n<p>ServerSocketChannelì˜ accept() ë©”ì„œë“œëŠ” nonblocking ëª¨ë“œë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤. ì¦‰, í˜¸ì¶œ ì‹œì ì— ìˆ˜ë½í•  ì—°ê²°ì´ ì—†ë‹¤ë©´ nullì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤.\në”°ë¼ì„œ, ì„œë²„ëŠ” ìƒˆ ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì„ ê³„ì† ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.   </p>\n<p>ServerSocketChannelì€ Selectorì™€ í•¨ê»˜ ì‚¬ìš©í–ˆì„ ë•Œ, ìƒˆ ì—°ê²°ì´ ë„ì°©í–ˆì„ ë•Œ ì´ë²¤íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"SocketChannel\" style=\"position:relative;\">SocketChannel<a href=\"#SocketChannel\" aria-label=\"SocketChannel permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ëª¨ë“  SocketChannel ê°ì²´ëŠ” í”¼ì–´ ê°ì²´ì¸ Socketê³¼ í•¨ê»˜ ìƒì„±ëœë‹¤.\nSocketChannelì˜ static ë©”ì„œë“œì¸ open() ë©”ì„œë“œëŠ” ìƒˆë¡œìš´ SocketChannel ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.\nìƒˆ SocketChannelì—ì„œ socket()ì„ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ í”¼ì–´ Socket ê°ì²´ê°€ ë°˜í™˜ë”˜ë‹¤.\ní•´ë‹¹ Socketì—ì„œ getChannel()ì„ í˜¸ì¶œí•˜ë©´ ì›ë˜ SocketChannelì´ ë°˜í™˜ëœë‹¤.</p>\n<p>SocketChannelì˜ ì—°ê²°ì€ open() ì´ë‚˜ connect() ë©”ì„œë“œë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.\nì•„ë˜ëŠ” SocketChannel ì—°ê²°ì˜ ì˜ˆì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SocketChannel</span> socketChannel <span class=\"token operator\">=</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"8080\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SocketChannel</span> socketChannel <span class=\"token operator\">=</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsocketChannel<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"8080\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>nonblocking ëª¨ë“œì—ì„œ connect()ë¥¼ í˜¸ì¶œí•´ì„œ ë°˜í™˜ê°’ì´ trueì´ë©´ ì—°ê²°ì´ ì¦‰ì‹œ ì„±ë¦½ë˜ì—ˆë‹¤ëŠ” ê²ƒì´ê³ , ì—°ê²°ì´ ì¦‰ì‹œ ì„±ë¦½ë˜ì§€ ì•Šìœ¼ë©´ connect()ëŠ” falseë¥¼ ë°˜í™˜ëœë‹¤.</p>\n<p>ë§Œì•½ ì—°ê²°ì´ ë°”ë¡œ ì„±ë¦½ë˜ì§€ ì•ŠëŠ” ê²½ìš° (ì„œë²„ì— ì—°ê²°í•˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°), ì—°ê²°ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê³„ì† ì§„í–‰ëœë‹¤.\nisConnectPending() ë©”ì„œë“œëŠ” ì—°ê²°ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, ì†Œì¼“ ì±„ë„ì„ nonblocking ëª¨ë“œë¡œ ì„¤ì •í•˜ê³  ì—°ê²°ì„ ì‹œë„í–ˆì„ ë•Œ ì—°ê²°ì´ ì¦‰ì‹œ ì„±ë¦½ë˜ì§€ ì•Šìœ¼ë©´ isConnectPending() ë©”ì„œë“œëŠ” trueë¥¼ ë°˜í™˜í•˜ê³ , ì—°ê²°ì´ ì„±ë¦½ë˜ê°€ë‹ˆ ì—°ê²°ì´ ì‹œì‘ë˜ì§€ ì•Šì•˜ì„ ê²½ìš° falseë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<p>finishConnect() ë©”ì„œë“œëŠ” nonblocking ëª¨ë“œì—ì„œ ì—°ê²°ì„ ì‹œë„í•œ í›„ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\nì—°ê²°ì´ ì„±ë¦½ë˜ì—ˆì„ ê²½ìš° trueë¥¼ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì„ ê²½ìš° falseë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì—°ê²° ê³¼ì •ì´ ì‹œì‘ë˜ì§€ ì•Šì•˜ì„ ë•Œ(connect í˜¸ì¶œ ì „) ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">InetSocketAddress</span> addr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">SocketChannel</span> sc <span class=\"token operator\">=</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsc<span class=\"token punctuation\">.</span>configureBlocking <span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsc<span class=\"token punctuation\">.</span>connect <span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>sc<span class=\"token punctuation\">.</span><span class=\"token function\">finishConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">doSomethingElse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">doSomethingWithChannel</span><span class=\"token punctuation\">(</span>sc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsc<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Java NIO(Ron Hitchens)</li>\n</ul>","fields":{"slug":"/java-nio-channel/"},"frontmatter":{"title":"Java NIO - Channel","date":"October 14, 2023"}},{"id":"8d197033-5a60-5434-bc31-0481d7d6e8c4","html":"<h2 id=\"What-is-Light-Weight-Container\" style=\"position:relative;\">What is Light-Weight Container?<a href=\"#What-is-Light-Weight-Container\" aria-label=\"What is Light Weight Container permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ ì˜ë¯¸í•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ê°ì²´(ëŒ€ë¶€ë¶„ ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´)ëŠ” ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ë©° ì»¨í…Œì´ë„ˆì— ì˜í•´ ê´€ë¦¬ëœë‹¤ê³  í•œë‹¤. ë‹¤ìŒì€ ê²½ëŸ‰ ì»¨í…Œì´ë„ˆê°€ ê°€ì§€ëŠ” íŠ¹ì§•ë“¤ì´ë‹¤.</p>\n<ul>\n<li>ë¹„ì¹¨íˆ¬ì„± (Non-invasiveness): ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— íŠ¹ë³„í•œ ì˜ì¡´ì„±ì„ ë¶€ê³¼í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì˜ë¯¸í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê¸°ì¡´ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ëŠ” ì¸í”„ë¼ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ë¶€ê³¼í•˜ì§€ ì•Šì•„ì•¼ í•¨ì„ ì˜ë¯¸í•œë‹¤.</li>\n<li>ë¹ ë¥¸ ì‹œì‘: ì»¨í…Œì´ë„ˆëŠ” ë¹ ë¥´ê²Œ ì‹œì‘ë˜ì–´ì•¼ í•œë‹¤. ì´ëŠ” ê°œë°œ ë° ë°°í¬ ì‹œê°„ì„ ì¤„ì´ê³ , ì‚¬ìš©ìì—ê²Œ ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„ì„ ì œê³µí•œë‹¤..</li>\n<li>íŠ¹ë³„í•œ ë°°í¬ ë‹¨ê³„ ë¶ˆí•„ìš”: ì»¨í…Œì´ë„ˆ ë‚´ì˜ ê°ì²´ë¥¼ ë°°í¬í•  ë•Œ íŠ¹ë³„í•œ ë‹¨ê³„ë‚˜ ë³µì¡í•œ ì„¤ì • ì—†ì´ ì‰½ê²Œ ë°°í¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</li>\n<li>ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œì˜ ì‹¤í–‰: ì»¨í…Œì´ë„ˆëŠ” ê·¸ í¬ê¸°ì™€ API ì˜ì¡´ì„±ì´ ìµœì†Œí™”ë˜ì–´ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì›¹ ì»¨í…Œì´ë„ˆ, ë…ë¦½ ì‹¤í–‰í˜• í´ë¼ì´ì–¸íŠ¸, ì•„ë‹ˆë©´ ì• í”Œë¦¿ì—ì„œë„ ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</li>\n<li>ê´€ë¦¬ ê°ì²´ ì¶”ê°€ì˜ ë‚®ì€ ì¥ë²½: ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ë¥¼ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ìˆì–´ì„œ ë…¸ë ¥ê³¼ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œê°€ ìµœì†Œí™”ë˜ì–´ì•¼ í•œë‹¤. ì´ëŠ” ì„¸ë°€í•œ ê°ì²´ë¿ë§Œ ì•„ë‹ˆë¼ ëŒ€í˜• ì»´í¬ë„ŒíŠ¸ë„ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•¨ì„ ì˜ë¯¸í•œë‹¤.</li>\n</ul>\n<h2 id=\"Container-Benefits\" style=\"position:relative;\">Container Benefits<a href=\"#Container-Benefits\" aria-label=\"Container Benefits permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Pluggability: ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ì˜ í”ŒëŸ¬ê·¸ ê°€ëŠ¥ì„±ì„ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´, ë™ì¼í•œ ì»´í¬ë„ŒíŠ¸ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ë‹¤ë¥¸ EJB êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í˜¸ì¶œ ì½”ë“œê°€ êµ¬í˜„ ì „ëµì—ì„œ ê²©ë¦¬ëœë‹¤. ìë°” ì¸í„°í˜ì´ìŠ¤ëŠ” ì™„ë²½í•œ ë¶„ë¦¬ë¥¼ ì œê³µí•˜ì§€ë§Œ, ì–´ë–¤ ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ ê²°ì •í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. ìë°” ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë§ì€ ì´ì ì´ ì‚¬ë¼ì§„ë‹¤.</li>\n<li>Consistency: ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ê°€ ì—†ìœ¼ë©´ ì„œë¹„ìŠ¤ ì¡°íšŒê°€ ë¶ˆê·œì¹™ì ì´ê²Œ ëœë‹¤. ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ê°ì²´ëŠ” ê°œë°œìì˜ ì„ í˜¸ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ìœ„ì¹˜í•  ìˆ˜ ìˆë‹¤. êµ¬ì„± ê´€ë¦¬ë„ ë§ˆì°¬ê°€ì§€ë¡œ ë¶ˆê·œì¹™ì ì´ê²Œ ë¼ì„œ ì§€ì†ì ì¸ ìœ ì§€ ê´€ë¦¬ ë¬¸ì œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆë‹¤.</li>\n<li>One stop shop: ì»¨í…Œì´ë„ˆë§Œ ì°¾ìœ¼ë©´ ê·¸ ì•ˆì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤. ëª¨ë“  ê°ì²´ì— ëŒ€í•´ ì „ìš© ì‹±ê¸€í†¤ì´ë‚˜ íŒ©í† ë¦¬ê°€ í•„ìš” ì—†ë‹¤.</li>\n<li>Delivery of enterprise services: ì¼ê´€ëœ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ì»¨í…Œì´ë„ˆ ëª¨ë¸ì˜ ì¼ë¶€ë¡œ, ë˜ëŠ” ì¶”ê°€ ê¸°ëŠ¥ìœ¼ë¡œ ì—”í„°í”„ë¼ì´ì¦ˆ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì´ ë” ì‰¬ì›Œì§„ë‹¤.</li>\n</ul>\n<h2 id=\"Inversion-Of-Control\" style=\"position:relative;\">Inversion Of Control<a href=\"#Inversion-Of-Control\" aria-label=\"Inversion Of Control permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì»¨í…Œì´ë„ˆì— ì˜ì¡´í•˜ëŠ” ê²ƒì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ì–¸ê¸‰í–ˆë‹¤. ê·¸ëŸ°ë° ì´ê²Œ ì–´ë–»ê²Œ ê°€ëŠ¥í• ê¹Œ? ëŒ€ë¶€ë¶„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´ëŠ” ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´, ë°ì´í„° ì ‘ê·¼ ê°ì²´, ë¦¬ì†ŒìŠ¤ì™€ ê°™ì€ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤. ê·¸ëŸ¼ ê°ì²´ë“¤ì´ ë‹¤ë¥¸ ê´€ë¦¬ ê°ì²´ë‚˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì•„ì•¼ í•˜ê³ , ê·¸ëŸ¬í•œ ì¡°íšŒë¥¼ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆì— ì˜ì¡´í•´ì•¼ í•˜ì§€ ì•Šì„ê¹Œ? ì»¨í…Œì´ë„ˆì— ì˜ì¡´ì„±ì„ ë„ì…í•˜ì§€ ì•Šê³  ì˜ì¡´ì„±ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ê²ƒì€ ì œì–´ì˜ ì—­ì „(Inversion of Control)ê³¼ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)ì˜ ë§ˆë²•ì„ í†µí•´ ëŒ€ë¶€ë¶„ ê°€ëŠ¥í•˜ë‹¤.</p>\n<p>ì œì–´ì˜ ì—­ì „ì€ í”„ë ˆì„ì›Œí¬ì—ì„œ ì¤‘ìš”í•œ ê°œë…ì´ë‹¤. ì´ëŠ” \"Donâ€™t call us, weâ€™ll call you.\" ë¼ëŠ” í• ë¦¬ìš°ë“œ ì›ì¹™ì„ í†µí•´ ê°€ì¥ ì˜ ì´í•´ëœë‹¤.</p>\n<p>ì˜ì¡´ì„± ì£¼ì…ì€ ì œì–´ì˜ ì—­ì „ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì¡°íšŒ ì½”ë“œë¥¼ ì œê±°í•˜ê³ , ì»¨í…Œì´ë„ˆê°€ ì–¸ì–´ ìˆ˜ì¤€ì—ì„œ í‘œí˜„ëœ ì˜ì¡´ì„±ì„ ìë™ìœ¼ë¡œ í•´ê²°í•˜ê²Œ í•œë‹¤.</p>\n<h2 id=\"Dependency-Injection\" style=\"position:relative;\">Dependency Injection<a href=\"#Dependency-Injection\" aria-label=\"Dependency Injection permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì´ ë°©ë²•ì€ ì»¨í…Œì´ë„ˆì—ê²Œ ì˜ì¡´ì„± ì¡°íšŒë¥¼ ì™„ì „íˆ ë§¡ê¸°ê³ , ê´€ë¦¬ë˜ëŠ” ê°ì²´ê°€ JavaBean setter ë©”ì„œë“œë‚˜ ìƒì„±ì ì¸ìˆ˜ë¥¼ í†µí•´ ì´ˆê¸°í™”ë  ë•Œ ì˜ì¡´ì„±ì´ ê·¸ ì•ˆìœ¼ë¡œ ì „ë‹¬ë  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>ì´ê²ƒì„ ì–¸ì–´ ê¸°ë°˜ì˜ IoCë¼ê³  ë¶€ë¥¸ë‹¤. ì™œëƒí•˜ë©´ íŠ¹ë³„í•œ ì»¨í…Œì´ë„ˆ APIë‚˜ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤. ì˜ì¡´ì„± ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ IoC ì»¨í…Œì´ë„ˆê°€ ëª¨ë“  ì—°ê²° ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤. ì»¨í…Œì´ë„ˆëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´ì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì–»ê¸° ìœ„í•œ ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ ì»¨í…Œì´ë„ˆë¥¼ ì¬êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ì€ ì—¬ëŸ¬ ê°€ì§€ ì¥ì ì„ ì œê³µí•œë‹¤.</p>\n<ul>\n<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ë¦¬ì†ŒìŠ¤ë‚˜ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì°¾ê¸° ìœ„í•œ ì½”ë“œ(lookup)ê°€ ì™„ì „íˆ ì œê±°ëœë‹¤. ì´ëŠ” ì½”ë“œë¥¼ ë” ê¹”ë”í•˜ê²Œ ë§Œë“¤ì–´ ì¤€ë‹¤.</li>\n<li>ì»¨í…Œì´ë„ˆ APIì— ëŒ€í•œ ì˜ì¡´ì„± ì—†ì–´ ìˆœìˆ˜í•œ ìë°” ì–¸ì–´ ê°œë…ë§Œì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤.</li>\n<li>ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ íŠ¹ë³„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ë‹¤.</li>\n</ul>\n<h2 id=\"Spring-IoC-Container\" style=\"position:relative;\">Spring IoC Container<a href=\"#Spring-IoC-Container\" aria-label=\"Spring IoC Container permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìŠ¤í”„ë§ì˜ ê¸°ë³¸ì ì¸ ê²½ëŸ‰ ì»¨í…Œì´ë„ˆ ì¸í„°í˜ì´ìŠ¤ëŠ” BeanFactory ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BeanFactory</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Object</span> <span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Object</span> <span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span> requiredType<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">containsBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">isSingleton</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">NoSuchBeanDefinitionException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">getAliases</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">NoSuchBeanDefinitionException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>BeanFactory ì¸í„°í˜ì´ìŠ¤ëŠ” ë¬¸ìì—´ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•œ getBean ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<p>BeanFactoryëŠ” ê³„ì¸µ êµ¬ì¡°ì˜ ì¼ë¶€ì¼ ìˆ˜ ìˆëŠ”ë°, íŠ¹ì • íŒ©í† ë¦¬ì—ì„œ beanì„ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ ë¶€ëª¨ íŒ©í† ë¦¬ì—ê²Œ ìš”ì²­ëœë‹¤. ì´ë ‡ê²Œ í•´ì„œ ìµœìƒìœ„ íŒ©í† ë¦¬ê¹Œì§€ ì°¾ê²Œ ëœë‹¤. ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì˜ bean ì •ì˜ëŠ” í•˜ìœ„ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë³¼ ìˆ˜ ìˆì§€ë§Œ ë°˜ëŒ€ëŠ” ì•„ë‹ˆë‹¤.</p>\n<p>BeanFactory ì¸í„°í˜ì´ìŠ¤ì˜ ëŒ€ë¶€ë¶„ì˜ êµ¬í˜„ì€ ì´ë¦„ë³„ë¡œ ê°ì²´ë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼ ê·¸ ê°ì²´ë“¤ì„ IoCë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•˜ëŠ” ë° í’ë¶€í•œ ì§€ì›ì„ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê´€ë¦¬ë˜ëŠ” ê°ì²´ ê°„ì˜ ì˜ì¡´ì„±ê³¼ ê°„ë‹¨í•œ ì†ì„±ì„ ê´€ë¦¬í•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” BeanFactory ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•œ ListableBeanFactory ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ListableBeanFactory</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BeanFactory</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getBeanDefinitionCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">containsBeanDefinition</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Map</span> <span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span> type<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> includePrototypes<span class=\"token punctuation\">,</span>\n\t<span class=\"token keyword\">boolean</span> includeFactoryBeans<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ListableBeanFactoryëŠ” íŒ©í† ë¦¬ ë‚´ì˜ beanì„ ë‚˜ì—´í•˜ëŠ” ê²ƒì„ ì§€ì›í•˜ëŠ” í•˜ìœ„ ì¸í„°í˜ì´ìŠ¤ë‹¤. ì´ëŠ” ì •ì˜ëœ beanì˜ ìˆ˜, ëª¨ë“  beanì˜ ì´ë¦„, ì£¼ì–´ì§„ ìœ í˜•ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ beanì˜ ì´ë¦„ì„ ê²€ìƒ‰í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<p>ListableBeanFactoryë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ë„ì¤‘ì—, ì¦‰ ëŸ°íƒ€ì„ì— ì–´ë–¤ ê°ì²´ë“¤ì´ í•„ìš”í•œì§€ ì•Œê²Œ ë˜ê³ , ê·¸ ê°ì²´ë“¤ê³¼ í•¨ê»˜ ì‘ë™í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>\n<p>ë‹¤ì‹œ ë§í•´, í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•  ë•Œ ëª¨ë“  ê°ì²´ë¥¼ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ì„ ë•Œ, ListableBeanFactoryë¥¼ ì‚¬ìš©í•˜ë©´ ì‹¤í–‰ ì¤‘ì— í•„ìš”í•œ ê°ì²´ë“¤ì„ ì°¾ì•„ì„œ ê·¸ê²ƒë“¤ê³¼ í•¨ê»˜ ì‘ì—…í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤.</p>\n<p>ì–´ë–¤ ê°ì²´ë“¤ì€ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‹œì ì— ì½œë°±ì„ ë°›ê¸¸ ì›í•  ìˆ˜ ìˆë‹¤. Springì˜ ë¹ˆ íŒ©í† ë¦¬ëŠ” ì´ë¥¼ ìœ„í•œ ë‘ ê°€ì§€ ë°©ë²•ì„ ì œê³µí•œë‹¤. ì½œë°± ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜, ì½œë°± ë©”ì„œë“œë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>Springì—ì„œ ì œê³µí•˜ëŠ” ë‘ ê°œì˜ ì½œë°± ì¸í„°í˜ì´ìŠ¤ëŠ” org.springframework.beans.factory.InitializingBeanê³¼ org.springframework.beans.factory.DisposableBeanì´ë‹¤. ì´ë“¤ì€ ì†ì„±ì´ ì„¤ì •ëœ í›„ì™€ ë¹ˆ íŒ©í† ë¦¬ê°€ ì¢…ë£Œë  ë•Œ ê°„ë‹¨í•œ ì¸ì ì—†ëŠ” ì½œë°± ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">InitializingBean</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">afterPropertiesSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">DisposableBean</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë•Œë¡œëŠ” íŠ¹ì • ë¹ˆì´ ìì‹ ì´ ì†í•´ ìˆëŠ” ë¹ˆ íŒ©í† ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•´ì•¼ í•  ë•Œê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¹ˆì´ ìì‹ ì„ ê´€ë¦¬í•˜ëŠ” ë¹ˆ íŒ©í† ë¦¬ì˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë‚˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ í•  ë•Œ ê·¸ë ‡ë‹¤.</p>\n<p>ì´ëŸ° ê²½ìš°ë¥¼ ìœ„í•´ Springì€ ì´ˆê¸°í™” ì‹œì ì— í•´ë‹¹ ë¹ˆì—ê²Œ ìì‹ ì´ ì†í•´ ìˆëŠ” ë¹ˆ íŒ©í† ë¦¬ì˜ ì°¸ì¡°(reference)ë¥¼ ì œê³µí•˜ëŠ” ì½œë°±(callback) ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë¹ˆì€ ìì‹ ì„ ê´€ë¦¬í•˜ëŠ” ë¹ˆ íŒ©í† ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ ì½œë°±ì„ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” BeanFactoryAware ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BeanFactoryAware</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Aware</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setBeanFactory</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanFactory</span> beanFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ëŸ¬í•œ setBeanFactory ë©”ì„œë“œëŠ” InitializingBean ì¸í„°í˜ì´ìŠ¤ì˜ afterPropertiesSet ë©”ì„œë“œë³´ë‹¤ ë¨¼ì € í˜¸ì¶œëœë‹¤.\nì†Œê°œí•œ ì¸í„°í˜ì´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë³´ë‹¤ Spring í”„ë ˆì„ì›Œí¬ ìì²´ ë‚´ì—ì„œ ë” ìì£¼ ì‚¬ìš©ëœë‹¤.</p>\n<h2 id=\"Spring-ApplicationContext\" style=\"position:relative;\">Spring ApplicationContext<a href=\"#Spring-ApplicationContext\" aria-label=\"Spring ApplicationContext permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Springì€ ë¹ˆ íŒ©í† ë¦¬(bean factory)ë¥¼ í™•ì¥í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸(application context) ë¼ëŠ” ê°œë…ì„ ì œê³µí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” ë¹ˆ íŒ©í† ë¦¬ì˜ ê¸°ëŠ¥ì„ í¬í•¨í•˜ë©´ì„œë„ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•œë‹¤.</p>\n<ul>\n<li>ë©”ì‹œì§€ ì†ŒìŠ¤ ì§€ì›: í‚¤ë¥¼ í†µí•´ ì§€ì—­í™”ëœ ë©”ì‹œì§€ë¥¼ ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ê¸°ë³¸ êµ¬í˜„ì€ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ì—ì„œ ë©”ì‹œì§€ë¥¼ ì½ì–´ì˜¨ë‹¤.</li>\n<li>íŒŒì¼ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼: ì‹¤ì œ ë¦¬ì†ŒìŠ¤ í™˜ê²½(ì˜ˆ: íŒŒì¼ ì‹œìŠ¤í…œ ë˜ëŠ” ServletContext)ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.</li>\n<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸ ì§€ì›: Observer ë””ìì¸ íŒ¨í„´ì˜ êµ¬í˜„ìœ¼ë¡œ, ë“±ë¡ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ìŠ¤ë„ˆì—ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•œë‹¤. ì´ë¥¼ í†µí•´ ì´ë²¤íŠ¸ ë°œì†¡ìì™€ ìˆ˜ì‹ ì ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶˜ë‹¤. ë˜í•œ, ë¦¬ìŠ¤ë„ˆëŠ” ì»¨í…ìŠ¤íŠ¸ ìƒëª…ì£¼ê¸° ì´ë²¤íŠ¸ì˜ ì•Œë¦¼ë„ ë°›ì„ ìˆ˜ ìˆë‹¤. Springì˜ AOP í”„ë ˆì„ì›Œí¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ \"ì´ë²¤íŠ¸\"ì˜ ì•Œë¦¼ ì„¤ì •ì„ ìœ„í•œ ëŒ€ì•ˆì´ ë  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<p>ì¤‘ì‹¬ì´ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ëŠ” ApplicationContextì´ë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ListableBeanFactoryë¥¼ í™•ì¥í•œë‹¤. ë”°ë¼ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œëŠ” ApplicationContextë¥¼ ë§ˆì¹˜ BeanFactoryì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"BeanFactoryPostProcessor\" style=\"position:relative;\">BeanFactoryPostProcessor<a href=\"#BeanFactoryPostProcessor\" aria-label=\"BeanFactoryPostProcessor permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” Bean Factory Post-processing ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì´ ê¸°ëŠ¥ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì½ì–´ë“¤ì¸ ë¹ˆ ì •ì˜ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@FunctionalInterface</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BeanFactoryPostProcessor</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">postProcessBeanFactory</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigurableListableBeanFactory</span> beanFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ì»¨í…ìŠ¤íŠ¸ê°€ ì‹œì‘ë  ë•Œ ì´ í›„ì²˜ë¦¬ê¸°ë“¤ì€ ì½œë°±ì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ëª¨ë“  ë¹ˆë“¤ë³´ë‹¤ ë¨¼ì € ì ìš©ë˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë¹ˆì˜ ì •ì˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ë©´, ë¹ˆì˜ ì„¤ì • ì •ë³´(XML ë“±)ì— ì •í™•í•œ ê°’ ëŒ€ì‹ ì— í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë‚˜ ì™¸ë¶€ API í‚¤ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì§ì ‘ XMLì— ì“°ëŠ” ëŒ€ì‹  {db_password}ì™€ ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì¦‰, í›„ì²˜ë¦¬ëŠ” ë¹ˆì˜ ì„¤ì • ì •ë³´ë¥¼ ìµœì¢…ì ìœ¼ë¡œ ì¡°ì •í•˜ê±°ë‚˜ ì™„ì„±í•˜ëŠ” ë‹¨ê³„ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ìŠ¤í”„ë§-DIì˜-ë‚´ë¶€-ë™ì‘\" style=\"position:relative;\">ìŠ¤í”„ë§ DIì˜ ë‚´ë¶€ ë™ì‘<a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-DI%EC%9D%98-%EB%82%B4%EB%B6%80-%EB%8F%99%EC%9E%91\" aria-label=\"ìŠ¤í”„ë§ DIì˜ ë‚´ë¶€ ë™ì‘ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì•ì„œ ì–¸ê¸‰í•œ ì¸í„°í˜ì´ìŠ¤ë“¤ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ êµ¬í˜„ì— ìˆì–´ í•µì‹¬ì ì¸ ì—­í• ì„ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ë§ì§€ ì•Šë‹¤.\nì—¬ê¸°ì„œëŠ” ìŠ¤í”„ë§ì˜ DIê°€ ì´ëŸ¬í•œ í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ì–´ë–»ê²Œ í™œìš©í•˜ì—¬ ë™ì‘í•˜ëŠ”ì§€ì— ëŒ€í•´ ì‚´í´ë³¼ ê²ƒì´ë‹¤.</p>\n<p>ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”, ì„¸ë¶€ì ì¸ êµ¬í˜„ ë“± ë³µì¡í•œ ë‚´ìš©ì€ ì¼ë‹¨ ì œì³ë‘ê³ , ì•ì„œ ì‚´í´ë³¸ í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ë¡œ @Autowiredì˜ DI ë™ì‘ ë°©ì‹ì— ì´ˆì ì„ ë§ì¶°ë³´ì.\nì•„ë˜ ì˜ˆì œëŠ” Programmatic ë°©ì‹ìœ¼ë¡œ DIë¥¼ ì ìš©í•œ ì˜ˆì‹œì´ë‹¤.</p>\n<ol>\n<li>ItemService ì™€ ItemRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemService</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Autowired</span> <span class=\"token class-name\">ItemRepository</span> itemRepository<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>itemRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">String</span> <span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemRepositoryImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>Annotation Config ê¸°ë°˜ ìŠ¤í”„ë§ ë¹ˆì„ ì„¤ì •í•œë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token function\">itemRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ItemRepositoryImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>\n<p>AutowireCapableBeanFactory ë¹ˆ íŒ©í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ItemService ì˜ì¡´ì„±ì„ ì£¼ì…í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DIApplication</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">AutowireCapableBeanFactory</span> beanFactory <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getAutowireCapableBeanFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Springì˜ ì œì–´ ë°–ì—ì„œ ItemServiceì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤</span>\n\t<span class=\"token class-name\">ItemService</span> itemService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ItemService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// AutowireCapableBeanFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ìë™ ì£¼ì…í•œë‹¤.</span>\n\tbeanFactory<span class=\"token punctuation\">.</span><span class=\"token function\">autowireBean</span><span class=\"token punctuation\">(</span>itemService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// itemService ì˜ ì˜ì¡´ì„± ì£¼ì…ì´ ì™„ë£Œë˜ì—ˆë‹¤.</span>\n\titemService<span class=\"token punctuation\">.</span><span class=\"token function\">printItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// output : \"hello world\"</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<p>ìœ„ì˜ ì˜ˆì œì—ì„œ, ItemServiceì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” Springì˜ ë¹ˆ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ì™¸ë¶€ì—ì„œ ìƒì„±ë˜ì—ˆì§€ë§Œ, AutowireCapableBeanFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ ItemRepository ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ\nì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë‹¤.</p>\n<p>AutowireCapableBeanFactoryëŠ” BeanFactoryì˜ í™•ì¥ ì¸í„°í˜ì´ìŠ¤ë¡œ ê¸°ì¡´ì˜ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ìë™ ì™€ì´ì–´ë§ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">AutowireCapableBeanFactory</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BeanFactory</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\">/**\n\t * Populate the given bean instance through applying after-instantiation callbacks\n\t * and bean property post-processing (e.g. for annotation-driven injection).\n\t * &lt;p>Note: This is essentially intended for (re-)populating annotated fields and\n\t * methods, either for new instances or for deserialized instances. It does\n\t * &lt;i>not&lt;/i> imply traditional by-name or by-type autowiring of properties;\n\t * use {@link #autowireBeanProperties} for those purposes.\n\t * @param existingBean the existing bean instance\n\t * @throws BeansException if wiring failed\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">autowireBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> existingBean<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>autowireBean ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ í›„ì²˜ë¦¬(Post-Processing)ë¥¼ ìˆ˜í–‰í•˜ì—¬ @Autowiredì™€ ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ í•„ë“œë‚˜ ë©”ì„œë“œë¥¼ ì±„ìš°ëŠ” ì—­í• ì„ í•œë‹¤.\nautowireBean ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ @Autowiredì™€ ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•„ë“œë‚˜ ë©”ì„œë“œì— ê°’ì„ ì£¼ì…í•˜ëŠ” ì—­í• ì„ í•œë‹¤.   </p>\n<p>ë©”ì„œë“œì˜ ë‚´ë¶€ êµ¬í˜„ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ë¡œì§ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InstantiationAwareBeanPostProcessor</span> bp <span class=\"token operator\">:</span> <span class=\"token function\">getBeanPostProcessorCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>instantiationAware<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">PropertyValues</span> pvsToUse <span class=\"token operator\">=</span> bp<span class=\"token punctuation\">.</span><span class=\"token function\">postProcessProperties</span><span class=\"token punctuation\">(</span>pvs<span class=\"token punctuation\">,</span> bw<span class=\"token punctuation\">.</span><span class=\"token function\">getWrappedInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> beanName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// ...\t</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>InstantiationAwareBeanPostProcessor ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ìˆœíšŒí•˜ë©° postProcessProperties ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. InstantiationAwareBeanPostProcessor ì¸í„°í˜ì´ìŠ¤ëŠ” BeanPostProcessorì˜ í™•ì¥ìœ¼ë¡œ, í”„ë¡œí¼í‹°ì˜ ì‚¬í›„ ì²˜ë¦¬ë¥¼ ìœ„í•œ ì¶”ê°€ì ì¸ ì½œë°± ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<p>ì‹¤ì œë¡œ ì˜ì¡´ì„± ì£¼ì…ì€ InstantiationAwareBeanPostProcessor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ AutowiredAnnotationBeanPostProcessor í´ë˜ìŠ¤ì˜ postProcessProperties ë©”ì„œë“œ ë‚´ì—ì„œ ìˆ˜í–‰ëœë‹¤.</p>\n<p>ì•„ë˜ëŠ” AutowiredAnnotationBeanPostProcessor í´ë˜ìŠ¤ì˜ postProcessProperties() ë©”ì„œë“œ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AutowiredAnnotationBeanPostProcessor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SmartInstantiationAwareBeanPostProcessor</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">BeanFactoryAware</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">PropertyValues</span> <span class=\"token function\">postProcessProperties</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyValues</span> pvs<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> bean<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> beanName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">InjectionMetadata</span> metadata <span class=\"token operator\">=</span> <span class=\"token function\">findAutowiringMetadata</span><span class=\"token punctuation\">(</span>beanName<span class=\"token punctuation\">,</span> bean<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> pvs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\tmetadata<span class=\"token punctuation\">.</span><span class=\"token function\">inject</span><span class=\"token punctuation\">(</span>bean<span class=\"token punctuation\">,</span> beanName<span class=\"token punctuation\">,</span> pvs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanCreationException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> ex<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BeanCreationException</span><span class=\"token punctuation\">(</span>beanName<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Injection of autowired dependencies failed\"</span><span class=\"token punctuation\">,</span> ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">return</span> pvs<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>metadata.inject(bean, beanName, pvs); ë¼ì¸ì—ì„œ ì‹¤ì œë¡œ ì˜ì¡´ì„± ì£¼ì…ì´ ë°œìƒí•œë‹¤.</p>\n<p>AutowiredAnnotationBeanPostProcessorê°€ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € ì£¼ì…í•  ê°ì²´ê°€ Spring ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬ë˜ì–´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ì»¨í…Œì´ë„ˆë¥¼ ì°¸ì¡°í•˜ì—¬ í•„ìš”í•œ ê°ì²´ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.\nì´ë•Œ ì»¨í…Œì´ë„ˆë¥¼ ì–´ë–»ê²Œ ì°¸ì¡°í• ê¹Œ? ë°”ë¡œ BeanFactoryAware ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨ beanFactoryë¥¼ ì£¼ì…ë°›ì„ ìˆ˜ ìˆë‹¤. AutowiredAnnotationBeanPostProcessorëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì£¼ì…ë°›ì€ beanFactoryë¥¼ ë©¤ë²„ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  postProcessProperties ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ, ì´ beanFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ë¹ˆì„ ê²€ìƒ‰í•˜ê³ , ê·¸ê²ƒì„ í†µí•´ DIë¥¼ ìˆ˜í–‰í•œë‹¤.</p>\n<p>ìœ„ì—ì„œ ì‚´í´ë³¸ Springì˜ í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ì¸ beanFactory -> BeanPostProcessor -> BeanFactoryAware -> beanFactory ì¤‘ì‹¬ìœ¼ë¡œ ì½”ë“œê°€ ë‚˜íƒ€ë‚˜ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ì™„ì „í•œ-Spring-IoC\" style=\"position:relative;\">ì™„ì „í•œ Spring IoC<a href=\"#%EC%99%84%EC%A0%84%ED%95%9C-Spring-IoC\" aria-label=\"ì™„ì „í•œ Spring IoC permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìœ„ì—ì„œ ì‚´í´ë³¸ ì˜ˆì œëŠ” DIì˜ ì‘ë™ ë°©ì‹ì„ ì„¤ëª…í•˜ê¸° ìœ„í•œ ê²ƒìœ¼ë¡œ ì™„ì „í•œ IoCê°€ ì ìš©ëœ ê²ƒìœ¼ë¡œ ë³´ê¸°ëŠ” ì–´ë µë‹¤.\nì½”ë“œ ë‚´ì—ì„œ ì§ì ‘ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë©°, ì£¼ì…í•˜ëŠ” ê³¼ì •ì´ íŠ¹ì • ê¸°ìˆ ì— ì˜ì¡´ì ì¸ ì¹¨íˆ¬ì ì¸ ë°©ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆë‹¤.\nì´ì œ Springì— ì œì–´ê¶Œì„ ë„˜ê¸°ê³ , ì»¨í…ìŠ¤íŠ¸ì˜ ìƒì„±ê³¼ ê°ì²´ì˜ ìƒì„± ë° ì¡°ë¦½ì„ í”„ë ˆì„ì›Œí¬ì— ì™„ì „íˆ ìœ„ì„í•˜ëŠ” ë°©ì‹ì„ ì‚´í´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemService</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">ItemRepository</span> itemRepository<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>itemRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">String</span> <span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemRepositoryImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ItemService</span> <span class=\"token function\">itemService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ItemService</span><span class=\"token punctuation\">(</span><span class=\"token function\">itemRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ItemRepository</span> <span class=\"token function\">itemRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ItemRepositoryImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DIApplication</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Autowired</span> <span class=\"token class-name\">ItemService</span> itemService<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DIApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ApplicationRunner</span> <span class=\"token function\">applicationRunner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> args <span class=\"token operator\">-></span> itemService<span class=\"token punctuation\">.</span><span class=\"token function\">printItemName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>SpringApplication.run ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë©´ì„œ ë©”ì¸ ìŠ¤ë ˆë“œì˜ ì œì–´ê¶Œì´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¡œ ë„˜ì–´ê°„ë‹¤.\nê·¸ í›„, Spring í”„ë ˆì„ì›Œí¬ëŠ” @Configuration ì´ ë¶™ì€ ìë°” ì„¤ì • íŒŒì¼ì„ ì½ì–´ ì„¤ì • íŒŒì¼ì— ë§ê²Œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì¡°ë¦½í•œë‹¤.\nìš°ë¦¬ëŠ” ê°ì²´ ì¡°ë¦½ì— ëŒ€í•œ ì„¤ì • íŒŒì¼ë§Œ ì œê³µí•œí•˜ë©´ Springì´ ë‚˜ë¨¸ì§€ ì‘ì—…ì„ ì²˜ë¦¬í•´ì¤€ë‹¤.</p>\n<h2 id=\"ë§ˆë¬´ë¦¬\" style=\"position:relative;\">ë§ˆë¬´ë¦¬<a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"ë§ˆë¬´ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê²½ëŸ‰ ì»¨í…Œì´ë„ˆì˜ íŠ¹ì§•ê³¼ ê·¸ ì¥ì ì„ ì‚´í´ë³´ì•˜ê³  IoC ì»¨í…Œì´ë„ˆì˜ í•„ìš”ì„±ì— ëŒ€í•´ì„œë„ ì‚´í´ë³´ì•˜ë‹¤.\nDependency Injectionì€ IoCì˜ ì¤‘ì‹¬ ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤.\në”ë¶ˆì–´, ìŠ¤í”„ë§ì—ì„œ IoC ì»¨í…Œì´ë„ˆë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ì™€ í•¨ê»˜ êµ¬ì²´ì ì¸ ì˜ˆì œë¥¼ í†µí•´ ì•Œì•„ë³´ì•˜ë‹¤.</p>\n<p>ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ ì¶”ìƒí™”, ìºì‹œ ì¶”ìƒí™”, AOP ë“±ì˜ ì—”í„°í”„ë¼ì´ì¦ˆ ê°œë°œ APIë¥¼ ì†ì‰½ê²Œ ì œê³µí•˜ì§€ë§Œ, ê·¸ ì¤‘ì‹¬ì—ëŠ” IoC ì»¨í…Œì´ë„ˆê°€ ìˆë‹¤ê³  ìƒê°í•œë‹¤.\nIoC ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ì§€í–¥ ì¡°ë¦½ í”„ë ˆì„ì›Œí¬ì˜ ì—­í• ì„ í•˜ë©°, ì´ë¥¼ í†µí•´ ê°ì²´ ì§€í–¥ ì„¤ê³„ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.\nê·¸ë ‡ì§€ ì•Šì•˜ë‹¤ë©´, ê°ì²´ë¥¼ ì¡°ë¦½í•˜ê³  ìƒì„±í•˜ëŠ” ë°ì— í›¨ì”¬ ë” ë§ì€ ì‹œê°„ì„ ì†Œë¹„í–ˆì„ ê²ƒì´ë‹¤.</p>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Expert One-on-One J2EE Development without EJB (Rod Johnson, Juergen Hoeller) </li>\n<li><a href=\"https://docs.spring.io/spring-framework/reference/core/beans.html\">https://docs.spring.io/spring-framework/reference/core/beans.html</a></li>\n</ul>","fields":{"slug":"/spring-core-container/"},"frontmatter":{"title":"ìŠ¤í”„ë§ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” IoC ì»¨í…Œì´ë„ˆì˜ ì›ë¦¬ì™€ ì´í•´","date":"October 11, 2023"}},{"id":"c2d0081b-ae3d-5801-ace1-d61452e19444","html":"<h2 id=\"ê°œìš”\" style=\"position:relative;\">ê°œìš”<a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"ê°œìš” permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"https://px201226.github.io/tomcat/\">ì§€ë‚œ ê²Œì‹œë¬¼</a>ì—ì„œëŠ” Tomcatì˜ ì•„í‚¤í…ì²˜ì™€ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ ì—°ê²° ë°©ì‹, ê·¸ë¦¬ê³  ìš”ì²­ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤.\níŠ¹íˆ, NIO Connectorì˜ Selectorë¥¼ í™œìš©í•œ ì´ë²¤íŠ¸ ë£¨í”„ ì²˜ë¦¬ ë°©ì‹ì€ BIO Connectorì— ë¹„í•´ í›¨ì”¬ ë” ë§ì€ ì—°ê²°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì—ˆë‹¤.</p>\n<p>ì´ë²ˆ ê²Œì‹œë¬¼ì—ì„œëŠ” Tomcatì´ Selectorë¥¼ í†µí•´ ê´€ë¦¬í•˜ëŠ” ìˆ˜ ë§ì€ ì—°ê²°ë“¤ì„ íƒ€ì„ì•„ì›ƒ ê´€ì ì—ì„œ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠ”ì§€ì— ëŒ€í•´ ì‚´í´ë³¸ë‹¤.</p>\n<h2 id=\"Tomcatì˜-íƒ€ì„ì•„ì›ƒ-ê´€ë¦¬\" style=\"position:relative;\">Tomcatì˜ íƒ€ì„ì•„ì›ƒ ê´€ë¦¬<a href=\"#Tomcat%EC%9D%98-%ED%83%80%EC%9E%84%EC%95%84%EC%9B%83-%EA%B4%80%EB%A6%AC\" aria-label=\"Tomcatì˜ íƒ€ì„ì•„ì›ƒ ê´€ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” íƒ€ì„ì•„ì›ƒì—ëŠ” í¬ê²Œ 3-way-handshake ì¤‘ ë°œìƒí•˜ëŠ” Connection Timeout, Read Timeout, Write Timeout ì´ ìˆë‹¤.\nì´ ì¤‘ í†°ìº£ê³¼ ê°™ì€ ì„œë²„ ì¸¡ì—ì„œ Connection Timeoutì€ í•¸ë“¤ë§ í•  ìˆ˜ ì—†ëŠ”ë°, ê·¸ ì´ìœ ëŠ” ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ê¸° ìœ„í•´ ë¬´í•œì • ëŒ€ê¸°í•˜ê³  í•¸ë“œ ì‰ì´í¬ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ë”ë¼ë„\nTCP/IP ìŠ¤íƒì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ Read/Write Timeout ì˜ë¯¸ëŠ” ë°ì´í„°ë¥¼ read/write ìœ„í•´ ìµœëŒ€ ëŒ€ê¸°í•˜ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ socket.read()ì— íƒ€ì„ì•„ì›ƒì„ 10ì´ˆë¡œ ì„¤ì •í–ˆë‹¤ë©´, ì´ëŠ” ì†Œì¼“ì—ì„œ ë°ì´í„°ë¥¼ ì½ê¸° ì‹œì‘í•˜ê¸° ì „ì— ìµœëŒ€ 10ì´ˆ ë™ì•ˆ ëŒ€ê¸°í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.\në§Œì•½ 9ì´ˆì— ì²« ë²ˆì§¸ íŒ¨í‚·ì´ ë„ì°©í•˜ê³  15ì´ˆì— ëª¨ë“  íŒ¨í‚· ì „ì†¡ì´ ëë‚˜ë”ë¼ë„, socket.read()ëŠ” ì´ë¯¸ ë°ì´í„°ë¥¼ ì½ê¸° ì‹œì‘í–ˆê¸° ë•Œë¬¸ì— íƒ€ì„ì•„ì›ƒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\nì¦‰, íƒ€ì„ì•„ì›ƒì€ ë°ì´í„°ê°€ ì²˜ìŒìœ¼ë¡œ ë„ì°©í•˜ê¸° ì „ ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ì„ ë§í•œë‹¤. ë°ì´í„°ê°€ ë„ì°©í•˜ê¸° ì‹œì‘í•œ í›„ì—ëŠ” íƒ€ì„ì•„ì›ƒì€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>Spring/Tomcat ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ Timeout ì†ì„±ì„ ì œê³µí•œë‹¤. </p>\n<ul>\n<li><strong>server.tomcat.connection-timeout</strong> : ì—°ê²°ì„ ìˆ˜ë½í•œ í›„ ìš”ì²­ URI ì¤„ì´ ì œì‹œë  ë•Œê¹Œì§€ ì–¼ë§ˆ ë™ì•ˆ ê¸°ë‹¤ë¦´ì§€ë¥¼ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì •í•œë‹¤. -1ì„ ì‚¬ìš©í•˜ë©´ ì‹œê°„ ì œí•œì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ë‹¤. ê¸°ë³¸ê°’ì€ 60ì´ˆì´ë‹¤.   </li>\n<li><strong>server.tomcat.keep-alive-timeout</strong> : ë‹¤ë¥¸ HTTP ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê¸° ì „ì— ì—°ê²°ì„ ë‹«ì„ ë•Œê¹Œì§€ ì–¼ë§ˆ ë™ì•ˆ ê¸°ë‹¤ë¦´ì§€ë¥¼ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì •í•œë‹¤. ê¸°ë³¸ê°’ì€ connectionTimeout ì†ì„±ì— ì„¤ì •ëœ ê°’ì„ ì‚¬ìš©í•œë‹¤. -1 ê°’ì„ ì‚¬ìš©í•˜ë©´ ì‹œê°„ ì œí•œì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ë‹¤.</li>\n</ul>\n<p>Tomcatì—ì„œëŠ” ë³„ë„ì˜ Read/Write Timeout ì†ì„±ì€ ì œê³µí•˜ì§€ ì•Šê³  connection-timeout ì†ì„±ì„ ì œê³µí•œë‹¤.\nAcceptor ìŠ¤ë ˆë“œì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì´ ì´ë£¨ì–´ì§€ë©´ í•´ë‹¹ ì†Œì¼“ì˜ Read/Write Timeoutì„  connection-timeoutìœ¼ë¡œ ì„¤ì •í•˜ê³  Poller ì— ë“±ë¡ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">setReadTimeout</span><span class=\"token punctuation\">(</span><span class=\"token function\">getConnectionTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsocketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">setWriteTimeout</span><span class=\"token punctuation\">(</span><span class=\"token function\">getConnectionTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ê·¸ í›„, PollerëŠ” ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ëŒë©´ì„œ í•´ë‹¹ ì†Œì¼“ì´ íƒ€ì„ì•„ì›ƒì´ ë°œìƒí•˜ì˜€ëŠ”ì§€ ê²€ì‚¬í•œë‹¤.\nì•„ë˜ëŠ” Pollerì˜ ì´ë²¤íŠ¸ ë£¨í”„ ë¡œì§ì„ ë‹¨ìˆœí™” í•œ ê²ƒ ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">boolean</span> hasEvents <span class=\"token operator\">=</span> <span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        keyCount <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectNow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\n        <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> iterator <span class=\"token operator\">=</span>\n            keyCount <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>iterator <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t  <span class=\"token function\">processKey</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\t\t\t\t\n        <span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span>keyCount<span class=\"token punctuation\">,</span>hasEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Process timeouts</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">processKey(sk, socketWrapper)</code> ì—ì„œ ì¤€ë¹„ëœ ì†Œì¼“ì˜ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§€ê³  <code class=\"language-text\">timeout(keyCount,hasEvents)</code> ì—ì„œ íƒ€ì„ì•„ì›ƒ ê´€ë ¨ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§„ë‹¤.   </p>\n<h3 id=\"timeoutkeyCounthasEvents\" style=\"position:relative;\">timeout(keyCount,hasEvents)<a href=\"#timeoutkeyCounthasEvents\" aria-label=\"timeoutkeyCounthasEvents permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> keyCount<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> hasEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>timeout ë©”ì„œë“œëŠ” í˜„ì¬ selectorì— ë“±ë¡ëœ ëª¨ë“  í‚¤ì˜ ìˆ˜ì¸ keyCountì™€ ë“±ë¡ëœ ì±„ë„ì—ì„œ ê´€ì‹¬ ìˆëŠ” ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆëŠ” ì§€ ì—¬ë¶€ì¸ hasEvents ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.</p>\n<h4>ì¡°ê±´ ê²€ì‚¬</h4>\n<p>timeout ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë©´ ì²« ë²ˆì§¸ë¡œ ì•„ë˜ì˜ ì¡°ê±´ì„ ê²€ì‚¬í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextExpiration <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>keyCount <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> hasEvents<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>now <span class=\"token operator\">&lt;</span> nextExpiration<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>close<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">nextExpiration > 0 &amp;&amp; (now &lt; nextExpiration)</code> : í˜„ì¬ ì‹œê°„ì´ nextExpirationê¹Œì§€ ì•„ì§ ê²½ê³¼í•˜ì§€ ì•Šì•˜ë‹¤ë©´</li>\n<li><code class=\"language-text\">(keyCount > 0 || hasEvents)</code> : polling íë‚˜ selectorì— ì´ë²¤íŠ¸ê°€ ëŒ€ê¸° ì¤‘ì´ë¼ë©´</li>\n<li><code class=\"language-text\">!close</code> : ì„œë²„ ì†Œì¼“ì´ ì•„ì§ ë‹«íˆì§€ ì•Šì•˜ë‹¤ë©´</li>\n</ul>\n<p>ì—¬ê¸°ì„œ nextExpirationì€ <code class=\"language-text\">System.currentTimeMillis() + socketProperties.getTimeoutInterval()</code>ë¡œ ê³„ì‚°ëœë‹¤.</p>\n<p>ì¡°ê±´ì˜ í•µì‹¬ì€ ê³„ì‚°ëœ nextExpirationê³¼ í˜„ì¬ ì‹œê°„ì„ ë¹„êµí•´ì„œ íƒ€ì„ì•„ì›ƒ ë¡œì§ì„ ê³„ì†í• ì§€ ê²°ì •í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p><code class=\"language-text\">socketProperties.getTimeoutInterval()</code>ì˜ ê¸°ë³¸ ê°’ì€ 1ì´ˆë¡œ, ì´ ë•Œë¬¸ì— ë¬´í•œë£¨í”„ ë‚´ì—ì„œ 1ì´ˆë§ˆë‹¤ íƒ€ì„ì•„ì›ƒì„ ê²€ì‚¬í•˜ê²Œ ëœë‹¤.\nì´ëŸ° ë°©ì‹ì€ busy waitë¡œ ë™ì‘í•˜ëŠ”ë°, ì§§ì€ ê°„ê²©ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìŠ¤ë ˆë“œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ê°™ì€ ì‘ì—… ìŠ¤ì¼€ì¤„ë§ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ë ¤ëŠ” ì˜ë„ë¡œ ë³´ì¸ë‹¤.</p>\n<h4>ì—°ê²°ë˜ì–´ ìˆëŠ” ëª¨ë“  ì†Œì¼“ í™•ì¸</h4>\n<p>Selectorì— ë“±ë¡ëœ ëª¨ë“  SelectionKeyë¥¼ ê°€ì ¸ì™€ ì—°ê²°ë˜ì–´ ìˆëŠ” ëª¨ë“  ì†Œì¼“ì— ëŒ€í•´ì„œ íƒ€ì„ì•„ì›ƒ ê²€ì‚¬ë¥¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">:</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    keycount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">NioSocketWrapper</span> socketWrapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NioSocketWrapper</span><span class=\"token punctuation\">)</span> key<span class=\"token punctuation\">.</span><span class=\"token function\">attachment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// ìƒëµ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// ì†Œì¼“ì´ í˜„ì¬ read ì‘ì—…ì— ê´€ì‹¬ì´ ìˆë‹¤ë©´ readTimeout íŒë‹¨</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">interestOpsHas</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">long</span> delta <span class=\"token operator\">=</span> now <span class=\"token operator\">-</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">getLastRead</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">long</span> timeout <span class=\"token operator\">=</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">getReadTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeout <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> delta <span class=\"token operator\">></span> timeout<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        readTimeout <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// ì†Œì¼“ì´ í˜„ì¬ write ì‘ì—…ì— ê´€ì‹¬ì´ ìˆë‹¤ë©´ writeTimeout íŒë‹¨</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>readTimeout <span class=\"token operator\">&amp;&amp;</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">interestOpsHas</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_WRITE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">long</span> delta <span class=\"token operator\">=</span> now <span class=\"token operator\">-</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">getLastWrite</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">long</span> timeout <span class=\"token operator\">=</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">getWriteTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeout <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> delta <span class=\"token operator\">></span> timeout<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        writeTimeout <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Selectorë¡œ ê´€ë¦¬í•˜ëŠ” ê° ì—°ê²°ì˜ ì •ë³´ëŠ” SelectionKeyì— ë‹´ê²¨ìˆë‹¤. ì´ SelectionKeyì—ì„œ socketWrapperë¥¼ ê°€ì ¸ì™€ ì—°ê²° ìƒíƒœë¥¼ íŒŒì•…í•˜ê³  ì¡°ì ˆí•œë‹¤.</p>\n<p>socketWrapperë¡œ í•´ë‹¹ ì†Œì¼“ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ ì–¸ì œ ë°ì´í„°ë¥¼ ì½ì—ˆëŠ”ì§€ (getLastRead)ì™€ ì¼ëŠ”ì§€ (getLastWrite) í™•ì¸í•œë‹¤.\ní˜„ì¬ ì‹œê°„ê³¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“´ ì‹œê°„ ì‚¬ì´ì˜ ì°¨ì´ë¥¼ deltaë¡œ ê³„ì‚°í•œë‹¤.\nì´ deltaê°€ ì„¤ì •ëœ timeoutì„ ë„˜ìœ¼ë©´, ê·¸ ì—°ê²°ì€ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  ê´€ë ¨ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<h4>íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</h4>\n<p>ìœ„ì—ì„œ ì„¤ì •ëœ writeTimeout, readTimeout ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ì—¬ íƒ€ì„ì•„ì›ƒì´ë¼ê³  íŒë‹¨ë˜ë©´ cancelledKey ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.\ncancelledKey ë©”ì„œë“œëŠ” í• ë‹¹ë˜ì–´ ìˆëŠ” ìì›ì„ í•´ì œí•˜ê³  ì†Œì¼“ ì—°ê²°ì„ ì¢…ë£Œí•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>readTimeout <span class=\"token operator\">&amp;&amp;</span> socketWrapper<span class=\"token punctuation\">.</span>readOperation <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>socketWrapper<span class=\"token punctuation\">.</span>readOperation<span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">cancelledKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>writeTimeout <span class=\"token operator\">&amp;&amp;</span> socketWrapper<span class=\"token punctuation\">.</span>writeOperation <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>socketWrapper<span class=\"token punctuation\">.</span>writeOperation<span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">cancelledKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">processSocket</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SocketEvent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ERROR</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cancelledKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">socketWrapper.readOperation.process()</code> ë° <code class=\"language-text\">socketWrapper.writeOperation.process()</code><br>\nsocketWrapperì˜ readOperation, writeOperation ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ì¼ ë•Œ ì‚¬ìš©ëœë‹¤.\ntimeoutì´ ë°œìƒí–ˆì„ ë•Œ ë“±ë¡ëœ ë¹„ë™ê¸° ì‘ì—…ì´ ìˆìœ¼ë©´ process() ë¥¼ í†µí•´ í•´ë‹¹ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.<br>\në§Œì•½ ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬ì— ì‹¤íŒ¨í•œë‹¤ë©´<code class=\"language-text\">(!socketWrapper.readOperation.process() == true) ì¸ ê²½ìš°</code> cancelledKey ì„ í˜¸ì¶œí•˜ì—¬ socketì„ close í•œë‹¤.</li>\n<li><code class=\"language-text\">processSocket(socketWrapper, SocketEvent.ERROR, true)</code><br>\në™ê¸° HTTP ìš”ì²­ ì²˜ë¦¬ì„ ì²˜ë¦¬í•  ë•Œ ì„ íƒë˜ëŠ” ë¡œì§ì´ë‹¤. processSocket ë©”ì„œë“œì— SocketEvent.ERRORë¼ëŠ” Enum íƒ€ì…ì„ ì „ë‹¬í•˜ë©´ í•´ë‹¹ ë©”ì„œë“œ ë‚´ì—ì„œ SocketEventì˜ ê°’ì— ë”°ë¼ ì²˜ë¦¬ ë¡œì§ì´ ë¶„ê¸°ëœë‹¤.\nprocessSocketì€ Worker threadPoolì—ì„œ ìŠ¤ë ˆë“œ í•˜ë‚˜ë¥¼ í• ë‹¹ë°›ì•„ ì†Œì¼“ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.\nì¦‰, ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ í•˜ë‚˜ í• ë‹¹ë°›ì•„ socket close ì‘ì—…ì„ ì§„í–‰í•œë‹¤.<br>\në§Œì•½ Worker Poolì—ì„œ ìŠ¤ë ˆë“œ í• ë‹¹ì— ì‹¤íŒ¨í•˜ë©´ <code class=\"language-text\">(!processSocket(socketWrapper, SocketEvent.ERROR, true) == true)</code> í˜„ì¬ì˜ Main Thread(Poller Thread)ì—ì„œ cancelledKeyë¥¼ í˜¸ì¶œí•˜ì—¬ socketì„ close í•œë‹¤.</li>\n</ul>\n<h2 id=\"Persistent-Connection\" style=\"position:relative;\">Persistent Connection<a href=\"#Persistent-Connection\" aria-label=\"Persistent Connection permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>HTTP í”„ë¡œí† ì½œì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ì—°ê²°ì„±(connectionless)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤. ì´ëŠ” ë§¤ ìš”ì²­ë§ˆë‹¤ 3-way-handshakeë¥¼ ë§ºì–´ì•¼ í•˜ëŠ” ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•œë‹¤.\nê·¸ë˜ì„œ HTTP/1.1 ë¶€í„°ëŠ” ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ì—°ê²°ì„ ë§ºëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê¸°ì¡´ ì—°ê²°ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” keep-alive ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ tomcatì—ì„œëŠ” ì–´ë–»ê²Œ Persistent Connectionì„ ê´€ë¦¬í• ê¹Œ? ê¸°ë³¸ì ìœ¼ë¡œ Tomcat 8.0 ì´í›„ë¶€í„°ëŠ” java.nioì˜ Selectorë¥¼ ì´ìš©í•˜ì—¬ ì†Œì¼“ì„ ê´€ë¦¬í•œë‹¤.\nSelectorë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œë„ ëŒ€ëŸ‰ì˜ Connectionë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œëŠ” Tomcatì˜ ì½”ë“œ ë ˆë²¨ì—ì„œ Persistent Connection (Keep-Alive Connection) ê³¼ Non-Persistent Connection (Close Connection) ì²˜ë¦¬ì˜ ì°¨ì´ë¥¼ ë¶„ì„í•´ë³´ë ¤ê³  í•œë‹¤.</p>\n<p>Tomcatì˜ Http11ProcessorëŠ” HTTP í”„ë¡œí† ì½œì˜ í•µì‹¬ ë¶€ë¶„ì„ êµ¬í˜„í•˜ëŠ”ë°, Keep-alive ì²˜ë¦¬ ì—­ì‹œ ì—¬ê¸°ì„œ ì´ë£¨ì–´ì§„ë‹¤.\nHttp11Processorì˜ <code class=\"language-text\">service()</code> ë©”ì„œë“œëŠ” ì†Œì¼“ì„ í†µí•´ ë“¤ì–´ì˜¤ëŠ” HTTP ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. ìš”ì²­ í—¤ë”ë¥¼ íŒŒì‹±í•˜ê³  ì„œë¸”ë¦¿ìœ¼ë¡œ ìš”ì²­ì„ ìœ„ì„í•˜ê³  ìš”ì²­ ìƒíƒœì— ë”°ë¼ ì†Œì¼“ ìƒíƒœë¥¼ ê²°ì •í•˜ì—¬ ë°˜í™˜í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">SocketState</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketWrapperBase</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> socketWrapper<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">enum</span> <span class=\"token class-name\">SocketState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">OPEN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CLOSED</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">LONG</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ASYNC_END</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SENDFILE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">UPGRADING</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">UPGRADED</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ASYNC_IO</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SUSPENDED</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">SocketState service(socketWrapper) {\n    ìš”ì²­ ì •ë³´ ë° í”Œë˜ê·¸ ì´ˆê¸°í™”\n\n    while (ë‹¤ì–‘í•œ ì¡°ê±´ë“¤)\n        ìš”ì²­ í—¤ë” íŒŒì‹± ì‹œë„\n        í”„ë¡œí† ì½œ ì¤€ë¹„\n        ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ì§€ í™•ì¸\n        ìš”ì²­ í—¤ë” íŒŒì‹±\n        ì—…ê·¸ë ˆì´ë“œ ìš”ì²­ í™•ì¸\n        ìš”ì²­ ì¤€ë¹„ ë° ì²˜ë¦¬\n        ìš”ì²­ ì¢…ë£Œ ì²˜ë¦¬\n        ìš”ì²­ ì¹´ìš´í„° ì—…ë°ì´íŠ¸\n        sendfile ìƒíƒœ ì²˜ë¦¬\n\n   return ì†Œì¼“ ìƒíƒœ ê²°ì • ë° ë°˜í™˜\n}</code></pre></div>\n<h3 id=\"Non-Persistent-Connection-ì²˜ë¦¬\" style=\"position:relative;\">Non-Persistent Connection ì²˜ë¦¬<a href=\"#Non-Persistent-Connection-%EC%B2%98%EB%A6%AC\" aria-label=\"Non Persistent Connection ì²˜ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>HTTP ìš”ì²­ì´ Non-persistent ì¸ ê²½ìš° service ë©”ì„œë“œëŠ” SocketState.CLOSED ë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.\nì›Œì»¤ ìŠ¤ë ˆë“œëŠ” ì´ ì†Œì¼“ ì²˜ë¦¬ ê²°ê³¼ê°€ SocketState.CLOSEDì¼ ê²½ìš°, ì†Œì¼“ ì—°ê²°ì„ ì¢…ë£Œí•˜ê³  ê´€ë ¨ ìì›ì„ í•´ì œí•œë‹¤. ì•„ë˜ ì½”ë“œëŠ” ì´ëŸ¬í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>handshake <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">SocketState</span> state<span class=\"token operator\">=</span><span class=\"token class-name\">SocketState</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OPEN</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Process the request from this socket</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">==</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      state <span class=\"token operator\">=</span> <span class=\"token function\">getHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span><span class=\"token class-name\">SocketEvent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OPEN_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n      state <span class=\"token operator\">=</span> <span class=\"token function\">getHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">==</span><span class=\"token class-name\">SocketState</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CLOSED</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      poller<span class=\"token punctuation\">.</span><span class=\"token function\">cancelledKey</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSelectionKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ <code class=\"language-text\">getHandler().process()</code>ëŠ” Http11Processorì˜ process ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ë‹¤.\nì½”ë“œ ë§ˆì§€ë§‰ì˜ ifë¬¸ì—ì„œ process ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì´ SocketState.CLOSEDì¼ ë•Œ, <code class=\"language-text\">poller.cancelledKey()</code>ë¥¼ í˜¸ì¶œí•´ ì—°ê²°ì„ ì¢…ë£Œí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<p>HTTP ìš”ì²­ì´ Non-persistent ì¸ì§€ íŒë‹¨í•˜ëŠ” ì¡°ê±´ì€ ì—¬ëŸ¬ ê°€ì§€ ìˆëŠ”ë° Non-persistentì— í•´ë‹¹í•˜ëŠ” ì¡°ê±´ì´ë©´ keepAlive ë³€ìˆ˜ë¥¼ falseë¡œ ë³€ê²½í•˜ê³  service() ë©”ì„œë“œì˜ ë°˜í™˜ê°’ìœ¼ë¡œ SocketState.CLOSED ë¥¼ ë¦¬í„´í•œë‹¤. íŒë‹¨ ì¡°ê±´ì€ ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ê²ƒë“¤ì´ ìˆë‹¤.</p>\n<h4>HTTP/1.0 ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>protocolMB<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constants</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HTTP_10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    http09 <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    http11 <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>   </code></pre></div>\n<h4>keep-alive ìµœëŒ€ ìš”ì²­ì´ 1ì´ê±°ë‚˜ ìµœëŒ€ ìš”ì²­ì„ ì´ˆê³¼í•œ ê²½ìš°</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> maxKeepAliveRequests <span class=\"token operator\">=</span> protocol<span class=\"token punctuation\">.</span><span class=\"token function\">getMaxKeepAliveRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>maxKeepAliveRequests <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// keep-alive max=1 ì¸ ê²½ìš°</span>\n    keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>maxKeepAliveRequests <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">decrementKeepAlive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// keep-alive maxê°’ ë³´ë‹¤ ìš”ì²­ì„ ë” ë§ì´ í•œ ê²½ìš°</span>\n    keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>HTTP ì‘ë‹µ ìƒíƒœì½”ë“œê°€ 200 ë²”ìœ„ê°€ ì•„ë‹Œ ê²½ìš°</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkExpectationAndResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">hasExpectation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isRequestBodyFullyRead</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n            <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">200</span> <span class=\"token operator\">||</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">299</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Client sent Expect: 100-continue but received a</span>\n        <span class=\"token comment\">// non-2xx final response. Disable keep-alive (if enabled)</span>\n        <span class=\"token comment\">// to ensure that the connection is closed. Some clients may</span>\n        <span class=\"token comment\">// still send the body, some may send the next request.</span>\n        <span class=\"token comment\">// No way to differentiate, so close the connection to</span>\n        <span class=\"token comment\">// force the client to send the next request.</span>\n        inputBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">setSwallowInput</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>ìš”ì²­ í—¤ë”ì— Connection: close ë¡œ ëª…ì‹œí•œ ê²½ìš°</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">MimeHeaders</span> headers <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMimeHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Check connection header</span>\n<span class=\"token class-name\">MessageBytes</span> connectionValueMB <span class=\"token operator\">=</span> headers<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constants</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONNECTION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>connectionValueMB <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>connectionValueMB<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> tokens <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">TokenList</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseTokenList</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constants</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONNECTION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tokens<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constants</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CLOSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tokens<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constants</span><span class=\"token punctuation\">.</span><span class=\"token constant\">KEEP_ALIVE_HEADER_VALUE_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        keepAlive <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"Persistent-Connection-ì²˜ë¦¬\" style=\"position:relative;\">Persistent Connection ì²˜ë¦¬<a href=\"#Persistent-Connection-%EC%B2%98%EB%A6%AC\" aria-label=\"Persistent Connection ì²˜ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Persistent Connectionì´ ìœ ì§€ë˜ëŠ” ì¡°ê±´ì€ ìœ„ì˜ Non-Persistent ìš”ì²­ì´ ì•„ë‹ˆë¼ë©´ Keep-Alive ê°€ ë™ì‘í•˜ì—¬ ì†Œì¼“ ì—°ê²°ì„ ê³„ì† ìœ ì§€í•œë‹¤.\nì´ëŠ” HTTP í—¤ë”ì— <code class=\"language-text\">Connection: Keep-alive</code> ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ê°’ìœ¼ë¡œ Keep-aliveê°€ ë™ì‘ëœë‹¤ëŠ” ì–˜ê¸°ì´ë‹¤.\nëŒ€ì‹  response í—¤ë”ì— <code class=\"language-text\">Connection: Keep-alive</code> ì™€ <code class=\"language-text\">Keep-Alive: timeout=60, max=1000</code>ì™€ ê°™ì€ í—¤ë”ê°€ ë‚˜ì˜¤ì§€ ì•Šìœ¼ë‹ˆ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•´ ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.</p>\n<p>Persistent Connection ì€ <code class=\"language-text\">server.tomcat.keep-alive-timeout</code> ì†ì„±ì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.\në§Œì•½ keep-alive-timeout ë™ì•ˆ ì–´ë–¤ read/write í™œë™ë„ ì—†ë‹¤ë©´ í•´ë‹¹ ì—°ê²°ì€ ì¢…ë£Œëœë‹¤.</p>\n<p>ê·¸ëŸ¼ keep-alive-timeoutì€ ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?\nTomcatì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì²˜ìŒ ì—°ê²°í•œ í›„, Read Timeoutì„ ê¸°ì¤€ìœ¼ë¡œ íƒ€ì„ì•„ì›ƒ ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.\nRead Timeout ë‚´ì— í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°ì´í„°ê°€ ë„ì°©í•˜ë©´ ìš”ì²­ì„ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‘ë‹µí•œë‹¤.\në§Œì•½ ì´ ìš”ì²­ì´ Persistent Connection ìš”ì²­ì´ë¼ë©´, Read Timeout ê°’ì„ keep-alive-timeoutìœ¼ë¡œ ë°”ê¾¼ë‹¤.\nê·¸ë¦¬ê³  ë‚˜ì„œëŠ” ì´ì „ì— ì„¤ëª…í•œ Read/Write íƒ€ì„ì•„ì›ƒ ê´€ë¦¬ ë°©ì‹ìœ¼ë¡œ ì—°ê²°ì„ ê³„ì† ìœ ì§€í•˜ê³  ê´€ë¦¬í•œë‹¤.</p>\n<p>ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ keep-alive-timeout ë‚´ì— ê³„ì† ë“¤ì–´ì˜¨ë‹¤ë©´, í•´ë‹¹ ì—°ê²°ì˜ íƒ€ì„ì•„ì›ƒì€ ê³„ì†í•´ì„œ ì´ˆê¸°í™”ë˜ì–´ ì—°ê²°ì´ ì§€ì†ëœë‹¤.\nì´ëŠ” íƒ€ì„ì•„ì›ƒì´ í˜„ì¬ ì‹œê°„ê³¼ ì†Œì¼“ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ Read/Writeí•œ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì„œë²„ì—ì„œ ì—°ê²°ì„ ìœ ì§€í•˜ë ¤ê³  í•´ë„ í´ë¼ì´ì–¸íŠ¸ë„ í•´ë‹¹ ì—°ê²°ì„ ìœ ì§€í•´ì•¼ keep-aliveê°€ ì œëŒ€ë¡œ ì‘ë™í•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, curlì„ ì‚¬ìš©í•˜ì—¬ keep-aliveë¡œ ìš”ì²­ì„ ë³´ë‚´ë„ curl í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë  ë•Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì†Œì¼“ì„ ë¨¼ì € ë‹«ì•„ë²„ë¦¬ê¸° ë•Œë¬¸ì— Persistent Connectionì€ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ê·¸ë¦¬ê³  keep-aliveì˜ ì£¼ìš” ëª©ì ì€ ì´ë¯¸ ë§ºì–´ì§„ ì—°ê²°ì„ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\në”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ìƒˆë¡œìš´ ì†Œì¼“ì„ í†µí•´ ìš”ì²­ì„ ë³´ë‚´ë©´, ì„œë²„ì™€ëŠ” ìƒˆë¡œìš´ ì—°ê²°ì´ í˜•ì„±ëœë‹¤. ì´ ê²½ìš°, ë‹¤ë¥¸ ì†Œì¼“ì—ì„œ ìœ ì§€ë˜ëŠ” Persistent Connectionê³¼ëŠ” ë³„ê°œë¡œ ë™ì‘í•˜ë¯€ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Tomcatì—ì„œëŠ” ì—°ê²°ë“¤ì„ íƒ€ì„ì•„ì›ƒì˜ ê´€ì ì—ì„œ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠ”ì§€, íŠ¹íˆ Read/Write Timeoutê³¼ Persistent Connectionì— ì´ˆì ì„ ë§ì¶° ì‚´í´ë³´ì•˜ë‹¤.\nì´ ê³¼ì •ì—ì„œ busy wait ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì§€ì†ì ìœ¼ë¡œ íƒ€ì„ì•„ì›ƒì„ ê²€ì‚¬í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.\në”ë¶ˆì–´, Tomcatì—ì„œëŠ” <code class=\"language-text\">read-timeout</code> ë˜ëŠ” <code class=\"language-text\">write-timeout</code> ì—†ì´ <code class=\"language-text\">connection-timeout</code> ì´ë¼ëŠ” ëª…ì¹­ìœ¼ë¡œ íƒ€ì„ì•„ì›ƒ ê°’ì„ ì„¤ì •í•˜ëŠ”ë°,\nì´ëŠ” Persistent Connectionì˜ ê²½ìš° <code class=\"language-text\">keep-alive-timeout</code>ìœ¼ë¡œ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— <code class=\"language-text\">connection-timeout</code> ëª…ì¹­ì„ ì“°ì§€ ì•Šì•˜ë‚˜ ì‹¶ë‹¤.</p>","fields":{"slug":"/tomcat-connection/"},"frontmatter":{"title":"Tomcatì€ ì–´ë–»ê²Œ Connectionì„ ê´€ë¦¬í• ê¹Œ?","date":"October 07, 2023"}},{"id":"95f697c4-8442-5eca-942d-91d8eeb8cc56","html":"<h2 id=\"ë²„í¼-IO\" style=\"position:relative;\">ë²„í¼ I/O<a href=\"#%EB%B2%84%ED%8D%BC-IO\" aria-label=\"ë²„í¼ IO permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìš´ì˜ì²´ì œì˜ I/OëŠ” ëª¨ë‘ ë²„í¼ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. í”„ë¡œì„¸ìŠ¤ëŠ” ë²„í¼ì—ì„œ ë°ì´í„°ë¥¼ ì±„ìš°ëŠ” (ì“°ê¸°) ë˜ëŠ” ë²„í¼ì— ë°ì´í„°ë¥¼ ë¹„ìš°ëŠ” (ì½ê¸°) ì‘ì—…ì„ ìš´ì˜ ì²´ì œì— ìš”ì²­í•¨ìœ¼ë¡œì¨ I/Oë¥¼ ìˆ˜í–‰í•œë‹¤.\nëª¨ë“  ë°ì´í„°ëŠ” ì´ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ë¡œ ì´ë™í•˜ê±°ë‚˜ ë‚˜ê°„ë‹¤.\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b0b73aee6b97cb3d63f04ffdca748d26/7ca0c/img_6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABB0lEQVR42l1R26qDMBDs//+S2EdLxQfFVvFKq1BLq1ZFqoJ2zpmFnBMa2FwmOzOb7A6/4/P5YNs2rOsqwb0667gK5qvBvX7ekUBgnmf0fY+u66AwFcTbtsUwDEJSRrrQnyCn9/uNJElwOp0QhiHO5zOezycul4usiny/35FlGaqqkjuuDHKapvkXHMcRvu/Dsiy4rgvDMBAEAcqyFALNiFMwjmN4ngfHcXA8HpHnOYqikKCOCE7ThDRNYZomDoeDuD8eD3F8vV6wbRv7/V4wVsuqb7eb3Kl/5OtoJoLLsuB6vUrprIZR17Uk8/9IZqUU0Jug9jSJokheJIKqq3qCjn13VM/9bsoPVVAUpUmOppgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ìš´ì˜ì²´ì œ I/O\"\n        title=\"\"\n        src=\"/static/b0b73aee6b97cb3d63f04ffdca748d26/7ca0c/img_6.png\"\n        srcset=\"/static/b0b73aee6b97cb3d63f04ffdca748d26/e7570/img_6.png 170w,\n/static/b0b73aee6b97cb3d63f04ffdca748d26/f46e7/img_6.png 340w,\n/static/b0b73aee6b97cb3d63f04ffdca748d26/7ca0c/img_6.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ìš´ì˜ì²´ì œ I/O</figcaption>\n  </figure></p>\n<p>ìœ„ ê·¸ë¦¼ì—ì„œ ì‚¬ìš©ì ê³µê°„(user space)ê³¼ ì»¤ë„ ê³µê°„(kernel space)ì˜ ê°œë…ì— ì£¼ëª©í•˜ì.\nì‚¬ìš©ì ê³µê°„ì€ ì¼ë°˜ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ê³³ì´ë‹¤. JVMë„ ì‚¬ìš©ì ê³µê°„ì—ì„œ ì‹¤í–‰ëœë‹¤. ì‚¬ìš©ì ê³µê°„ì€ íŠ¹ê¶Œì´ ì—†ì–´ í•˜ë“œì›¨ì–´ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.\nì»¤ë„ ê³µê°„ì€ ìš´ì˜ ì²´ì œê°€ ìœ„ì¹˜í•˜ëŠ” ê³³ìœ¼ë¡œ íŠ¹ë³„í•œ ê¶Œí•œì„ ê°€ì§„ë‹¤. ëª¨ë“  I/OëŠ” ì»¤ë„ ê³µê°„ì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.</p>\n<p>í”„ë¡œì„¸ìŠ¤ê°€ I/O ì‘ì—…ì„ ìš”ì²­í•˜ë©´ ì‹œìŠ¤í…œ í˜¸ì¶œì„ ìˆ˜í–‰í•˜ì—¬ ì»¤ë„ë¡œ ì œì–´ê¶Œì„ ì „ë‹¬í•œë‹¤.\nì»¤ë„ì€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì°¾ì•„ ì‚¬ìš©ì ê³µê°„ì˜ ì§€ì •ëœ ë²„í¼ë¡œ ì „ì†¡í•œë‹¤.\nì»¤ë„ì€ ë°ì´í„°ë¥¼ ìºì‹œí•˜ê±°ë‚˜ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ë ¤ê³  ì‹œë„í•˜ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ê°€ ìš”ì²­í•˜ëŠ” ë°ì´í„°ëŠ” ì´ë¯¸ ì»¤ë„ ê³µê°„ì— ìˆì„ ìˆ˜ ìˆë‹¤.</p>\n<p>ê¸°ì¡´ java.io ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ NIO ê°„ì˜ ê°€ì¥ ì¤‘ìš”í•œ ì°¨ì´ì ì€ ë°ì´í„°ë¥¼ íŒ¨í‚¤ì§€í•˜ê³  ì „ì†¡í•˜ëŠ” ë°©ë²•ê³¼ ê´€ë ¨ì´ ìˆë‹¤.\nìš´ì˜ ì²´ì œëŠ” ë°ì´í„°ë¥¼ í° ë©ì–´ë¦¬(ë²„í¼)ë¡œ ì´ë™ì‹œí‚¤ë ¤ê³  í•˜ëŠ” ë°˜ë©´, ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜ I/O í´ë˜ìŠ¤ëŠ” ì‘ì€ ë‹¨ìœ„(ë‹¨ì¼ ë°”ì´íŠ¸ë‚˜ í…ìŠ¤íŠ¸ì˜ ì¤„)ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë ¤ê³  í•œë‹¤.\nJavaì˜ NIOëŠ” ì´ëŸ¬í•œ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë„ì…ë˜ì—ˆë‹¤.\nNIOëŠ” í•œ ë²ˆì— ì—¬ëŸ¬ ë°”ì´íŠ¸ì˜ ë°ì´í„° ë¸”ë¡ì„ ì²˜ë¦¬í•˜ê³  ìš´ì˜ ì²´ì œì˜ native I/O ë¥¼ ë”ìš± í™œìš©í•˜ì—¬ ê¸°ì¡´ I/Oì˜ í•œê³„ë¥¼ ê·¹ë³µí•œë‹¤.</p>\n<h2 id=\"Buffer\" style=\"position:relative;\">Buffer<a href=\"#Buffer\" aria-label=\"Buffer permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Buffer ê°ì²´ëŠ” ê³ ì •ëœ ì–‘ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆì´ë‹¤. ë²„í¼ëŠ” ì±„ì›Œì§€ê³  ë¹„ì›Œì§„ë‹¤.\në²„í¼ëŠ” ì±„ë„ê³¼ ë°€ì ‘í•˜ê²Œ ì‘ë™í•œë‹¤. ì±„ë„ì€ I/O ì „ì†¡ì´ ì´ë£¨ì–´ì§€ëŠ” í¬í„¸ì´ë©°, ë²„í¼ëŠ” ê·¸ ë°ì´í„° ì „ì†¡ì˜ ì¶œë°œì§€ë‚˜ ëŒ€ìƒì´ë‹¤. ë‚˜ê°€ëŠ” ì „ì†¡ì˜ ê²½ìš°, ì „ì†¡í•˜ê³  ì‹¶ì€ ë°ì´í„°ëŠ” ë²„í¼ì— ë„£ì–´ì ¸ ì±„ë„ë¡œ ì „ë‹¬ëœë‹¤.\në“¤ì–´ì˜¤ëŠ” ì „ì†¡ì˜ ê²½ìš°, ì±„ë„ì€ ì œê³µí•˜ëŠ” ë²„í¼ì— ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.\në²„í¼ ì‚¬ì´ì˜ í˜‘ë ¥í•˜ëŠ” ê°ì²´ ì‚¬ì´ì˜ ì´ëŸ¬í•œ í•¸ë“œì˜¤í”„ëŠ” ë°ì´í„° ì²˜ë¦¬ì˜ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” í•µì‹¬ì´ë‹¤</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/88f114d19acec492c041fab251e6c7fc/a0e79/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42p1SiaqDMBDM/39bEbQe4FG8KtaqPbwoaucxCylCH6+PLiTZbCazk90ofLBlWdA0DW63G9Z1/QSH2m6ez+draHs8HiiKAlmWoe/7N9wW+0a4JaYyWlVVSJIEjuPgeDy+VP+pkE+Z5xnjOOJ6veJyueB0OiHPcwRBAMMwsNvtxCcpkxBD7DRNcleXQzHg+z5c10Ucx7BtW9REUSREh8NB/DAMxbcsS3CmaWK/30uMKzHDMEBxYrbz+SxB1okgqrjf70LUtq3UME1TucQSsK6M87zrOpRlKXcU5fKAnSQx/bqupatcudcJ+cQtljHiSM7BBip8abq7JGcZPM+TZOq3b/DfoQnZQCpkE79WqI0/g6S6JD+UqAFOMqByiQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Buffer ì¢…ë¥˜\"\n        title=\"\"\n        src=\"/static/88f114d19acec492c041fab251e6c7fc/ca1dc/img.png\"\n        srcset=\"/static/88f114d19acec492c041fab251e6c7fc/e7570/img.png 170w,\n/static/88f114d19acec492c041fab251e6c7fc/f46e7/img.png 340w,\n/static/88f114d19acec492c041fab251e6c7fc/ca1dc/img.png 680w,\n/static/88f114d19acec492c041fab251e6c7fc/a0e79/img.png 824w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Buffer ì¢…ë¥˜</figcaption>\n  </figure></p>\n<h3 id=\"Buffer-ì†ì„±\" style=\"position:relative;\">Buffer ì†ì„±<a href=\"#Buffer-%EC%86%8D%EC%84%B1\" aria-label=\"Buffer ì†ì„± permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Buffer ì—ëŠ” 4ê°€ì§€ ì†ì„±ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Buffer</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\">// Invariants: mark &lt;= position &lt;= limit &lt;= capacity</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> mark <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> position <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> limit<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> capacity<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>mark : ê¸°ì–µëœ ìœ„ì¹˜. mark() í˜¸ì¶œì‹œ mark = positionìœ¼ë¡œ ì„¤ì •ëœë‹¤. reset() í˜¸ì¶œì‹œ position = markë¡œ ì„¤ì •ëœë‹¤. ì„¤ì •ë˜ê¸° ì „ê¹Œì§€ markëŠ” ì •ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>position: ë‹¤ìŒì— ì½ê±°ë‚˜ ì“¸ ìš”ì†Œì˜ ì¸ë±ìŠ¤. ìƒëŒ€ì ì¸ get() ë° put() ë©”ì„œë“œì— ì˜í•´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ëœë‹¤.</li>\n<li>limit: ë²„í¼ì—ì„œ ì½ê±°ë‚˜ ì“¸ ìˆ˜ ìˆëŠ” ì²« ë²ˆì§¸ ìš”ì†Œê°€ ì•„ë‹Œ ìš”ì†Œ. ì¦‰, ë²„í¼ ë‚´ì˜ í™œì„± ìš”ì†Œì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</li>\n<li>capacity: ë²„í¼ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë°ì´í„° ìš”ì†Œì˜ ìµœëŒ€ ê°œìˆ˜. ë²„í¼ê°€ ìƒì„±ë  ë•Œ ì„¤ì •ë˜ë©° ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.</li>\n</ul>\n<p>ì´ ë„¤ ê°€ì§€ ì†ì„± ê°„ì˜ ê´€ê³„ëŠ” í•­ìƒ ë‹¤ìŒì„ ë§Œì¡±í•œë‹¤.<br>\n0 â‰¤ mark â‰¤ position â‰¤ limit â‰¤ capacity</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/19039da6aeb3844fa83299244996eb44/3e20f/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVR42n1R2QqEMAzc//8sH0XEF19URPDA+z7xyO4M1H3YxYE0TTOdpOlLPhjHUbZtk3Vdacuy0I7jkGma7twwDLLvO+N5npmD4X5RFJCSF5amaaQsS6mqioksyyRNU8nznHvl1ZmKwcU9+L7vWYyCruuKbduSJIlEUcQCbdve/p8hF4YhixiGIZqmfTvsuo5iqAKCav8J4MdxzDGgS8dxOCIKBkHAAwBipmmSCJznKdd1/ZhlWeL7PjmYr67rLELBuq4ZKEHP8zj4J+AleDqAj0FDGMMb2JrKJuRJHroAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Buffer.png\"\n        title=\"\"\n        src=\"/static/19039da6aeb3844fa83299244996eb44/3e20f/img_1.png\"\n        srcset=\"/static/19039da6aeb3844fa83299244996eb44/e7570/img_1.png 170w,\n/static/19039da6aeb3844fa83299244996eb44/f46e7/img_1.png 340w,\n/static/19039da6aeb3844fa83299244996eb44/3e20f/img_1.png 529w\"\n        sizes=\"(max-width: 529px) 100vw, 529px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Buffer.png</figcaption>\n  </figure></p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, 10ì˜ ìš©ëŸ‰ì„ ê°€ì§„ BufferëŠ” ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì†ì„±ì´ ì´ˆê¸°í™”ëœë‹¤.\nmarkëŠ” mark()ê°€ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€ ì •ì˜ë˜ì§€ ì•Šê³ , postitionì€ 0ìœ¼ë¡œ ì„¤ì •ë˜ê³ , capcatityì™€ limitì€ 10ìœ¼ë¡œ ì„¤ì •ëœë‹¤.\nì´ ìƒíƒœì—ì„œ ë°ì´í„°ë¥¼ 5ê°œë§Œ ì“´ í›„ì— ë²„í¼ë¥¼ ì½ê¸° ëª¨ë“œë¡œ ì „í™˜í•œë‹¤ë©´(flip()ì„ í˜¸ì¶œ), limitëŠ” 5ë¡œ ì„¤ì •ëœë‹¤.\nì¦‰, ì²˜ìŒ 5ê°œì˜ ë°ì´í„° ìš”ì†Œë§Œ ì½ì„ ìˆ˜ ìˆë‹¤ëŠ” ì–˜ê¸°ì´ë‹¤.</p>\n<h3 id=\"Buffer-ì ‘ê·¼\" style=\"position:relative;\">Buffer ì ‘ê·¼<a href=\"#Buffer-%EC%A0%91%EA%B7%BC\" aria-label=\"Buffer ì ‘ê·¼ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ByteBufferì™€ ê°™ì€ Buffer í´ë˜ìŠ¤ì˜ ì„œë¸Œí´ë˜ìŠ¤ì—ëŠ” get(), put() ì—°ì‚°ì´ ì¡´ì¬í•œë‹¤.\nì´ ì—°ì‚°ì€ ìƒëŒ€ì  ì—°ì‚°ê³¼ ì ˆëŒ€ì  ì—°ì‚°ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ByteBuffer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Buffer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Comparable</span> <span class=\"token punctuation\">{</span>\n\t\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">byte</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">byte</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">ByteBuffer</span> put <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">ByteBuffer</span> put <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> index<span class=\"token punctuation\">,</span> <span class=\"token keyword\">byte</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë²„í¼ëŠ” ë°ì´í„° ìš”ì†Œë¥¼ ì¼ì •í•œ í¬ê¸°ë¡œ ì €ì¥í•˜ëŠ”ë° í•„ìš”ì— ë”°ë¼ ë²„í¼ë¥¼ ì™„ì „íˆ ì±„ìš°ì§€ ì•Šê³  ì¼ë¶€ë¶„ë§Œ ì±„ìš°ê³  ë²„í¼ë¥¼ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì „ì†¡í•˜ê±°ë‚˜ ì½ì„ ìˆ˜ ìˆì–´ì•¼ í•  ê²ƒ ì´ë‹¤.\nì´ë•Œ, ì–´ë””ê¹Œì§€ ë°ì´í„°ê°€ ì±„ì›Œì¡ŒëŠ”ì§€, ë‹¤ìŒ ë°ì´í„°ê°€ ì–´ë””ì— ìœ„ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ë“±ì„ ì•Œì•„ì•¼ ë˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ position ì´ ìˆë‹¤.\nByteBuffer í´ë˜ìŠ¤ì˜ index ì¸ìˆ˜ë¥¼ ë°›ì§€ ì•ŠëŠ” get()ê³¼ put() ë©”ì„œë“œëŠ” ì´ positionì„ ì´ìš©í•œ ìƒëŒ€ì  ì—°ì‚°ì´ë‹¤.</p>\n<p>ìƒëŒ€ì  ì—°ì‚°ì€ position ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“°ê³ , get(), put()ì„ í˜¸ì¶œí•˜ë©´ position ê°’ì´ 1 ì¦ê°€í•œë‹¤.\në§Œì•½, put()ì„ í˜¸ì¶œí•  ë•Œ position >= limit ì´ ë˜ë©´ BufferOverflowException ë°œìƒí•˜ê³ \në§ˆì°¬ê°€ì§€ë¡œ get()ì„ í˜¸ì¶œí•  ë•Œ position >= limit ì´ë¼ë©´ BufferUnderflowException ì´ ë°œìƒí•œë‹¤.</p>\n<p>ì ˆëŒ€ì  ì—°ì‚°ì€ íŠ¹ì • ë²„í¼ ìœ„ì¹˜(index)ì— ì§ì ‘ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“´ë‹¤.\nì´ ì—°ì‚°ì€ positionì˜ ê°’ì„ ë³€ê²½í•˜ì§€ ì•Šê³ , ë²„í¼ì˜ ì¸ë±ìŠ¤ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ IndexOutOfBoundsExceptionì´ ë°œìƒí•œë‹¤.</p>\n<h3 id=\"Buffer-ì±„ìš°ê¸°\" style=\"position:relative;\">Buffer ì±„ìš°ê¸°<a href=\"#Buffer-%EC%B1%84%EC%9A%B0%EA%B8%B0\" aria-label=\"Buffer ì±„ìš°ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì•„ë˜ ì½”ë“œëŠ” capacityê°€ 10ì¸ ByteBufferë¥¼ í• ë‹¹í•˜ê³ , 'hello' ë¼ëŠ” ë¬¸ìë¥¼ ë°”ì´íŠ¸ë¡œ ë²„í¼ì— ì±„ìš°ëŠ” ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ByteBuffer</span> byteBuffer <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bytes <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbyteBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 538px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3802ba7c05ebb4908010cd7f5e2ae42a/32ca7/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVR42n2SyY6DQAxE+f8v48YpCA4Q9n2HEPaKyiNGfchMS5bBbT+XDRrUc134di4lfn3JUWNa27ZYlgXzPOP9fuP1emGaJqzrKp7GO/pxHCWH1ve9xJgfhiHO8/wBep4H3/dBH8exXEZRhDRN4TgOuq7DMAyo6xpN04ACbk8ry1IaUIAACXk+n3BdF0EQCJwgxmi2bePxeKAoCiRJIo3yPBd/C9B1XRoLUN3FcRzIskwK6KuqEjhh6q64AoKYQzCBnEKAHI+dmMy9UCFH+O/j3MopgIc1nE6AHNU0TXkhmN24/BtwmwpksWVZvzHDMGQtfNbYZd93udy2TZZ7/fH7qKu51TGXfwlrqfADWHplVUTcTmsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"buffer ì±„ìš°ê¸°\"\n        title=\"\"\n        src=\"/static/3802ba7c05ebb4908010cd7f5e2ae42a/32ca7/img_2.png\"\n        srcset=\"/static/3802ba7c05ebb4908010cd7f5e2ae42a/e7570/img_2.png 170w,\n/static/3802ba7c05ebb4908010cd7f5e2ae42a/f46e7/img_2.png 340w,\n/static/3802ba7c05ebb4908010cd7f5e2ae42a/32ca7/img_2.png 538w\"\n        sizes=\"(max-width: 538px) 100vw, 538px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">buffer ì±„ìš°ê¸°</figcaption>\n  </figure></p>\n<h3 id=\"Flipping\" style=\"position:relative;\">Flipping<a href=\"#Flipping\" aria-label=\"Flipping permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Bufferë¥¼ ì±„ìš°ê¸° ë²„í¼ì˜ ë°ì´í„°ë¥¼ ì½ê¸° ìœ„í•´ì„œëŠ” Flipping ì„ í†µí•´ Bufferì˜ ë™ì‘ì„ ì „í™˜í•´ì•¼í•œë‹¤.\nBufferì— 'hello'ê°€ ì±„ì›Œì§„ ìƒíƒœì—ì„œ(position=5)ì—ì„œ get()ì„ í•˜ê²Œ ë˜ë©´ ë¹ˆ ê°’ì„ ê°€ì ¸ì˜¬ ê²ƒ ì´ë‹¤.\në”°ë¼ì„œ, Bufferì— ì±„ì›Œì§„ ë°ì´í„°ë¥¼ ì½ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">buffer<span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>bufferì˜ ì½ì„ ìˆ˜ ìˆëŠ” ê°’ì„ í˜„ì¬ bufferì˜ positionìœ¼ë¡œ ì„¤ì •í•˜ê³ , í˜„ì¬ positionì„ ì½ê¸° ì‘ì—…ì„ ìœ„í•´ 0ìœ¼ë¡œ ì„¤ì •í•œë‹¤.\nì´ ì‘ì—…ì€ buffer.flip() ë©”ì„œë“œì™€ ê°™ì€ ë™ì‘ì„ í•œë‹¤.</p>\n<h3 id=\"Draining\" style=\"position:relative;\">Draining<a href=\"#Draining\" aria-label=\"Draining permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Draining ì´ë€ Bufferì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ ì˜¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ìœ„ì—ì„œ Bufferì— ë°ì´í„°ë¥¼ ì½ê¸° ì „ì— Flipping ì´ë¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì„¤ëª…í–ˆë‹¤.\nFlippingí›„ Bufferì˜ ì½ê¸°ëª¨ë“œë¡œ ë°”ê¿” position ì—ì„œ ì‹œì‘í•˜ì—¬ limit ì „ê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ í•œë‹¤.</p>\n<p>ì´ ë•Œ, ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œê°€ hasRemaining() ê³¼ remaining() ì´ë‹¤.\nhasRemaining() ëŠ” í˜„ì¬ positionê³¼ limitì„ ë¹„êµí•˜ì—¬ ì½ì„ ìˆ˜ ìˆëŠ” ë°ì´í„° ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë°˜í™˜í•œë‹¤.\nremaining()ì€ í˜„ì¬ positionì—ì„œ limit ê¹Œì§€ ë‚¨ì•„ìˆëŠ” ë°ì´í„°ì˜ ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> buffer<span class=\"token punctuation\">.</span><span class=\"token function\">hasRemaining</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tbyteArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> buffer<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"Marking\" style=\"position:relative;\">Marking<a href=\"#Marking\" aria-label=\"Marking permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>mark()ë©”ì„œë“œëŠ” í˜¸ì¶œë  ë•Œ Buffer í´ë˜ìŠ¤ì˜ mark ì†ì„±ì„ í˜„ì¬ position ê°’ìœ¼ë¡œ ë³€ê²½í•œë‹¤.\nì´ëŠ” ìœ„ë¦¬ë¥¼ ê¸°ì–µí•˜ê³  ìˆë‹¤ê°€ ë‚˜ì¤‘ì— í•´ë‹¹ ìœ„ì¹˜ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë‹¤.\nreset() ë©”ì„œë“œëŠ” positionì„ í˜„ì¬ mark ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤. mark ê°’ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ Exceptionì´ ë°œìƒí•œë‹¤.</p>\n<p>ë°‘ì— ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ BufferëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ìƒíƒœê°€ ëœë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">buffer<span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mark</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 518px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d8c8957da569f5b8f477c50dd0f0af2/2f227/img_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVR42nWRW4+CUAyE+f8/y8QXicYXDRG8AILiBRQUEJXZfE00+7A7SVPOOW1nOjhVVanrOj0eD8tt2+r5fFq+3W56v99qmkZ1XVvmnjr6+L7f77peryqKQsBZLBba7/fa7XY6nU46HA46Ho+WuaNwvV6rLEsLmok8z+3M+/l8/pI7nudZg+/7Wi6Xms/nWq1WCsNQ0+lUm81GkEZRpDiOjSzLMos0Tb/B0NfrJQfp2+3WggGu65oCmofDoa0EM4PH4/F3GMo+9nBGkK2cJIkx0MTwIAhMBX5x9xs0Q4AdbIWv4HK52Lnvezmz2cxWAgwfjUamEFDwF/gpk8nEtgLYMxgMzFMHNTAAjOYRdf8BEoI1P3X4h8dY8AOPxBIaCtS0VQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Marking\"\n        title=\"\"\n        src=\"/static/1d8c8957da569f5b8f477c50dd0f0af2/2f227/img_3.png\"\n        srcset=\"/static/1d8c8957da569f5b8f477c50dd0f0af2/e7570/img_3.png 170w,\n/static/1d8c8957da569f5b8f477c50dd0f0af2/f46e7/img_3.png 340w,\n/static/1d8c8957da569f5b8f477c50dd0f0af2/2f227/img_3.png 518w\"\n        sizes=\"(max-width: 518px) 100vw, 518px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Marking</figcaption>\n  </figure></p>\n<p>mark=2 ì´ê³ , í˜„ì¬ positionì´ 4ì´ë¯€ë¡œ ì´ ìƒíƒœì—ì„œ readë¥¼ í•˜ê²Œ ë˜ë©´ 'ow' ë¥¼ ì½ì„ ê²ƒ ì´ë‹¤.\nì—¬ê¸°ì„œ reset()ì„ í•˜ë©´ í˜„ì¬ position ê°’ì„ 2ë¡œ ì„¤ì •ëœë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 531px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/131dab0da4277abba67a9fd2a2a1e579/b2c14/img_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVR42m1RSY6DQAzM/7/DC3LlRA4cQBAWiS3s+05lyhEoisZStd22u2RX3/Bn+75jWRZs2yY443VdL/zm53mWO8G4bVtS4cajKAp4nieeKMsSVVUhz3OkaSpIkgR1XaNpGgF7eP/uO47jQxiGIUzTxPP5FOi6Dtu24TiO5Ol5j+NYiLMsExLGzEVRJOScVAjHcUQQBFIgmaIo6PseXdddmKZJaoZhCBGH4KTsIxlr18pMWpYlBWrEB8Mw4NdYYw/18n1fpqRRR25AL4Sc7PF4iNhMqqoK13Vxfhi1+QaNhJqmSUw97/c7Xq/Xh5Dr8DNoJKUuXPM/OwkpEz/kjPmG/g0ojBY906QKLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reset í›„ ìƒíƒœ\"\n        title=\"\"\n        src=\"/static/131dab0da4277abba67a9fd2a2a1e579/b2c14/img_4.png\"\n        srcset=\"/static/131dab0da4277abba67a9fd2a2a1e579/e7570/img_4.png 170w,\n/static/131dab0da4277abba67a9fd2a2a1e579/f46e7/img_4.png 340w,\n/static/131dab0da4277abba67a9fd2a2a1e579/b2c14/img_4.png 531w\"\n        sizes=\"(max-width: 531px) 100vw, 531px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">reset í›„ ìƒíƒœ</figcaption>\n  </figure></p>\n<h3 id=\"Comparing\" style=\"position:relative;\">Comparing<a href=\"#Comparing\" aria-label=\"Comparing permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë²„í¼ ë‘ê°œê°€ ë™ì¼í•˜ë‹¤ëŠ” ê²ƒì€ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.</p>\n<ul>\n<li>ë‘ ê°ì²´ê°€ ê°™ì€ íƒ€ì…ì´ì–´ì•¼ í•œë‹¤.</li>\n<li>ë‘ ë²„í¼ì— ë‚¨ì•„ìˆëŠ” ìš”ì†Œì˜ ìˆ˜ê°€ ê°™ì•„ì•¼ í•œë‹¤. (ì¦‰, positionì—ì„œ limitê¹Œì§€ ìš”ì†Œ ìˆ˜)</li>\n<li>ë‚¨ì•„ìˆëŠ” ë°ì´í„° ìš”ì†Œì˜ ìˆœì„œê°€ ê° ë²„í¼ì—ì„œ ë™ì¼í•´ì•¼ í•œë‹¤.</li>\n</ul>\n<p>compare ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµëœë‹¤. ì—¬ê¸°ì„œ í¬ë‹¤ ì‘ë‹¤ëŠ” ë²„í¼ì˜ ë‚¨ì•„ìˆëŠ” ìš”ì†Œì˜ ìˆ˜ê°€ ë§ëƒ ì ëƒë¥¼ ë§í•œë‹¤.</p>\n<ul>\n<li>ìŒìˆ˜: ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ë²„í¼ê°€ ì „ë‹¬ëœ ë²„í¼ë³´ë‹¤ ì‘ë‹¤.</li>\n<li>0: ë‘ ë²„í¼ê°€ ë™ì¼í•˜ë‹¤.</li>\n<li>ì–‘ìˆ˜: ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ë²„í¼ê°€ ì „ë‹¬ëœ ë²„í¼ë³´ë‹¤ í¬ë‹¤.</li>\n</ul>\n<h3 id=\"Bufferì˜-ìƒì„±\" style=\"position:relative;\">Bufferì˜ ìƒì„±<a href=\"#Buffer%EC%9D%98-%EC%83%9D%EC%84%B1\" aria-label=\"Bufferì˜ ìƒì„± permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>BufferëŠ” ìƒì„±ìë¥¼ í†µí•´ ì§ì ‘ ìƒì„±í•  ìˆ˜ ì—†ë‹¤. ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ê° í´ë˜ìŠ¤ì˜ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// ì‚¬ì´ì¦ˆ 100ì¸ charí˜• buffer </span>\n<span class=\"token class-name\">CharBuffer</span> charBuffer <span class=\"token operator\">=</span> <span class=\"token class-name\">CharBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// wrap ì„ ì‚¬ìš©í•œ ë²„í¼ ìƒì„±</span>\n<span class=\"token keyword\">char</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> myArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">char</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">CharBuffer</span> charbuffer <span class=\"token operator\">=</span> <span class=\"token class-name\">CharBuffer</span><span class=\"token punctuation\">.</span>wrap <span class=\"token punctuation\">(</span>myArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// CharSequenceë¥¼ ì…ë ¥ë°›ëŠ” wrap</span>\n<span class=\"token class-name\">CharBuffer</span><span class=\"token punctuation\">.</span>wrap <span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>wrapì„ ì´ìš©í•œ BufferëŠ” ì½ê¸°/ì“°ê¸° ì‘ì—… ì‹œ, ì‹¤ì œ myArrayë¥¼ ì°¸ì¡°í•˜ê²Œ ëœë‹¤. ì´ë ‡ê²Œ ìƒì„±í•œ Bufferë¥¼ non-direct bufferë¼ê³  í•œë‹¤.\nnon-direct bufferëŠ” ì‹¤ì œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì ìœ¼ë¡œ ë°°ì—´ì„ ì‚¬ìš©í•œë‹¤. ì´ ë°°ì—´ì´ ë°”ë¡œ backing arrays ë¼ê³  í•œë‹¤. wrap ì˜ ì˜ˆì—ì„œëŠ” myArrayê°€ backing arrayê°€ ëœë‹¤.\nì´ì™€ ë°˜ëŒ€ë¡œ, direct Buffer ëŠ” JVM ë°–ì˜ ìœ„ì¹˜í•˜ëŠ” ë„¤ì´í‹°ë¸Œ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì§ì ‘ í• ë‹¹ë˜ì–´ GCì— ì˜í–¥ë°›ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h3 id=\"ByteBuffer\" style=\"position:relative;\">ByteBuffer<a href=\"#ByteBuffer\" aria-label=\"ByteBuffer permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ê¸°ë³¸ ì›ì‹œ íƒ€ì…(int, long, char ë“±)ì— ëŒ€í•œ ë²„í¼ê°€ ìˆì§€ë§Œ ê·¸ ì¤‘ì—ì„œë„ ByteBuffer ëŠ” íŠ¹ë³„í•˜ë‹¤.\nê¸°ë³¸ ì›ì‹œ íƒ€ì…ì€ ì—°ì†ì ì¸ ë°”ì´íŠ¸ ì‹œí€€ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ì €ì¥ëœë‹¤.\në˜í•œ, JVMê³¼ ìš´ì˜ ì²´ì œ ê°„ì— ë°ì´í„°ë¥¼ ì´ë™í•  ë•Œ ë°”ì´íŠ¸ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤. ë•Œë¬¸ì— ë‹¤ë¥¸ ì›ì‹œ íƒ€ì…ì—ëŠ” ì—†ëŠ” ByteBuffer ë§Œì˜ ê³ ìœ  APIë¥¼ ê°€ì§„ë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th>Data Type</th>\n<th>Size (bytes)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Byte</td>\n<td>1</td>\n</tr>\n<tr>\n<td>Char</td>\n<td>2</td>\n</tr>\n<tr>\n<td>Short</td>\n<td>2</td>\n</tr>\n<tr>\n<td>Int</td>\n<td>4</td>\n</tr>\n<tr>\n<td>Long</td>\n<td>8</td>\n</tr>\n<tr>\n<td>Float</td>\n<td>4</td>\n</tr>\n<tr>\n<td>Double</td>\n<td>8</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>HTTP ì—ì„œëŠ” 8ë¹„íŠ¸ë¡œ êµ¬ì„±ëœ ë°”ì´íŠ¸ë¥¼ ì˜¥í…Ÿ(octet)ì´ë¼ê³  í•œë‹¤. ì´ëŠ” ì´ˆê¸° ì»´í“¨í„°ì—ì„œ ë°”ì´íŠ¸ê°€ ê¼­ 8ë¹„íŠ¸ë¥¼ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆì˜€ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n</blockquote>\n<p>ByteBuffer ëŠ” ë‹¤ë¥¸ ë²„í¼ ìœ í˜•ê³¼ ë‹¤ë¥´ê²Œ ì±„ë„ì— ì˜í•œ I/O ì‘ì—…ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤. ì±„ë„ì€ ByteBufferë§Œì„ ì¸ìë¡œ ë°›ê¸° ë•Œë¬¸ì´ë‹¤.\nìš´ì˜ì œì œì˜ I/OëŠ” ì—°ì†ëœ ë°”ì´íŠ¸ ë©”ëª¨ë¦¬ ì˜ì—­ì—ì„œ ìˆ˜í–‰ë˜ëŠ”ë°, JVM ë‚´ì—ì„œì˜ ë°”ì´íŠ¸ ë°°ì—´ì€ ì—°ì†ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, ê°€ë¹„ì§€ ì»¬ë ‰í„°ì— ì˜í•´ ì–¸ì œë“ ì§€ ì´ë™ë  ìˆ˜ ìˆë‹¤.\nê·¸ë˜ì„œ ë°”ì´íŠ¸ ë°°ì—´ì´ ì—°ì†ì ì¸ ë©”ëª¨ë¦¬ ê³µê°„ì— ì €ì¥ë˜ëŠ”ì§€ëŠ” JVMì˜ êµ¬í˜„ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ëŸ° ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ direct bufferê°€ ìˆë‹¤. direct bufferëŠ” ì±„ë„ ë° ë„¤ì´í‹°ë¸Œ I/O í•¨ìˆ˜ì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤.\ndirect bufferëŠ” ë„¤ì´í‹°ë¸Œ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì§ì ‘ í• ë‹¹ë˜ì–´ ë°ì´í„°ë¥¼ JVMì˜ ë©”ëª¨ë¦¬ì—ì„œ ìš´ì˜ ì²´ì œì˜ ë©”ëª¨ë¦¬ë¡œ ë³µì‚¬í•  í•„ìš” ì—†ì´ ë°”ë¡œ ë„¤ì´í‹°ë¸Œ I/O ì—°ì‚°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nê·¸ë˜ì„œ ì¼ë°˜ì ìœ¼ë¡œ I/O ì‘ì—… ì‹œì—ëŠ” direct bufferë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, non-direct bufferë¥¼ ì±„ë„ë¡œ ì „ë‹¬í•˜ê²Œ ë˜ë©´ ì±„ë„ì€ ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<ol>\n<li>ì„ì‹œ direct buffer ë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>non-direct bufferì˜ ë°ì´í„°ë¥¼ direct bufferë¡œ ë³µì‚¬í•œë‹¤.</li>\n<li>direct bufferë¥¼ ì‚¬ìš©í•˜ì—¬ I/O ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</li>\n<li>ì‘ì—…ì´ ëë‚˜ë©´, ì„ì‹œ direct bufferëŠ” GCëœë‹¤.</li>\n</ol>\n<p>ëŒ€ì‹  ì¼ë°˜ì ìœ¼ë¡œ direct buffer ìƒì„± ë¹„ìš©ì€ non-direct buffer ìƒì„± ë¹„ìš©ë³´ë‹¤ í´ ìˆ˜ ìˆë‹¤. direct ë²„í¼ëŠ” ìš´ì˜ì²´ì œ ì½”ë“œë¥¼ í†µí•´ í• ë‹¹ë˜ê¸° ë•Œë¬¸ì´ë‹¤.\ndirect bufferëŠ” ByteBuffer í´ë˜ìŠ¤ì˜ allocateDirect() ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"View-Buffer\" style=\"position:relative;\">View Buffer<a href=\"#View-Buffer\" aria-label=\"View Buffer permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë·° ë²„í¼ëŠ” ì›ë³¸ ë²„í¼ì™€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ì§€ë§Œ, ìì²´ì ì¸ ì†ì„± (ì˜ˆ: position, limit, capacity ë“±)ì„ ê°€ì§„ë‹¤.\nì´ëŠ” ë·° ë²„í¼ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“¸ ë•Œ ì›ë³¸ ë²„í¼ì˜ ë°ì´í„°ê°€ ë³€ê²½ë˜ë©°, ë°˜ëŒ€ì˜ ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.\nìœ„ì—ì„œ ë‚˜ì˜¨ duplicate()ì™€ wrap() ë©”ì„œë“œë¡œ ë§Œë“  ë²„í¼ë„ ë·° ë²„í¼ì˜ ì¼ì¢…ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>ë·° ë²„í¼ì˜ ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€ëŠ” ByteBufferì˜ ë°”ì´íŠ¸ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ ì›ì‹œ íƒ€ì…ìœ¼ë¡œ í•´ì„í•  í•„ìš”ê°€ ìˆì„ ë•Œì´ë‹¤.\nì´ ë•Œ, ByteBufferì˜ asIntBuffer(), asCharBuffer() ë“±ì˜ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ì›í•˜ëŠ” ì›ì‹œ íƒ€ì…ì˜ ë·° ë²„í¼ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ByteBuffer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Buffer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Comparable</span> <span class=\"token punctuation\">{</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">CharBuffer</span> <span class=\"token function\">asCharBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">ShortBuffer</span> <span class=\"token function\">asShortBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">IntBuffer</span> <span class=\"token function\">asIntBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">LongBuffer</span> <span class=\"token function\">asLongBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">FloatBuffer</span> <span class=\"token function\">asFloatBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">DoubleBuffer</span> <span class=\"token function\">asDoubleBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>    </code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bcf2377a68a305cc95f39ad0d3300f94/3a6ec/img_5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVR42n2RZ6rEMAyEc/+T5QbZ/MmGTds00nvR8gkc8iA8g7BsS6OZsSX/rOM45DxPjaf8aVlPlxSv6ypZlklVVZLnuRRFceVlWcr3+5WmaaTvexmGQbqu0x7rCWiaJpnnWRsAADhNU83jOJYkSSQIAgXZtk2WZdE+mCvgvu96yTSCR+4IGtjHcdQBBEDUM5j3uwUKaFjc5bEbebDiDgDkceYN1uSQMP4qYBiG4nmeNjGdJqKuax1i27ZEUSRGjeu6F8vX6yWO41yWKSAsDLvP53N5So5EwPENAJQYhlgDGYZB5o9kAKHu+75KI2g03r7fb/ULYH6Yc9u2WmM+SgGN9nvwAbAyRt/fzGIQNXyIqQHwB5utto08uG2NAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"charí˜• view buffer\"\n        title=\"\"\n        src=\"/static/bcf2377a68a305cc95f39ad0d3300f94/ca1dc/img_5.png\"\n        srcset=\"/static/bcf2377a68a305cc95f39ad0d3300f94/e7570/img_5.png 170w,\n/static/bcf2377a68a305cc95f39ad0d3300f94/f46e7/img_5.png 340w,\n/static/bcf2377a68a305cc95f39ad0d3300f94/ca1dc/img_5.png 680w,\n/static/bcf2377a68a305cc95f39ad0d3300f94/3a6ec/img_5.png 686w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">charí˜• view buffer</figcaption>\n  </figure></p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><strong>ë²„í¼ ê¸°ë°˜ I/O</strong></p>\n<ul>\n<li>ìš´ì˜ì²´ì œì˜ ëª¨ë“  I/O ì‘ì—…ì€ ë²„í¼ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.</li>\n<li>í”„ë¡œì„¸ìŠ¤ëŠ” ë°ì´í„°ë¥¼ ë²„í¼ì— ì“°ê±°ë‚˜ ë²„í¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ìŒìœ¼ë¡œì¨ I/Oë¥¼ ìˆ˜í–‰í•œë‹¤.</li>\n<li>ì‚¬ìš©ì ê³µê°„ì—ì„œëŠ” í•˜ë“œì›¨ì–´ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë©°, ëª¨ë“  I/OëŠ” ì»¤ë„ ê³µê°„ì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.   </li>\n</ul>\n<p><strong>Java NIO</strong></p>\n<ul>\n<li>ê¸°ì¡´ java.io ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ NIOì˜ ì£¼ìš” ì°¨ì´ëŠ” ë°ì´í„° ì²˜ë¦¬ ë°©ì‹ì— ìˆë‹¤.</li>\n<li>ìš´ì˜ ì²´ì œëŠ” ë°ì´í„°ë¥¼ í° ë©ì–´ë¦¬(ë²„í¼)ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°˜ë©´, ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜ I/OëŠ” ì‘ì€ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤.</li>\n<li>NIOëŠ” ì´ëŸ¬í•œ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•˜ë©°, í•œ ë²ˆì— ì—¬ëŸ¬ ë°”ì´íŠ¸ì˜ ë°ì´í„° ë¸”ë¡ì„ ì²˜ë¦¬í•œë‹¤.   </li>\n</ul>\n<p><strong>Buffer</strong></p>\n<ul>\n<li>BufferëŠ” ê³ ì •ëœ ì–‘ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆë¡œ, ë°ì´í„° ì „ì†¡ì˜ ì¶œë°œì§€ë‚˜ ëŒ€ìƒì´ ëœë‹¤.</li>\n<li>BufferëŠ” ì±„ì›Œì§€ê³  ë¹„ì›Œì§€ë©°, ì£¼ìš” ì†ì„±ìœ¼ë¡œëŠ” mark, position, limit, capacityê°€ ìˆë‹¤.</li>\n<li>BufferëŠ” ë°ì´í„°ë¥¼ ì½ê³  ì“¸ ë•Œ ìƒëŒ€ì  ì—°ì‚°ê³¼ ì ˆëŒ€ì  ì—°ì‚°ì„ ì œê³µí•œë‹¤.   </li>\n</ul>\n<p><strong>ByteBuffer</strong></p>\n<ul>\n<li>ByteBufferëŠ” íŠ¹ë³„í•˜ë©°, ë°”ì´íŠ¸ ì¤‘ì‹¬ì˜ I/O ì‘ì—…ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤.</li>\n<li>ByteBufferëŠ” direct bufferì™€ non-direct buffer ë‘ ì¢…ë¥˜ê°€ ìˆìœ¼ë©°, direct bufferëŠ” ë„¤ì´í‹°ë¸Œ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì§ì ‘ í• ë‹¹ëœë‹¤.</li>\n<li>ë·° ë²„í¼ëŠ” ì›ë³¸ ë²„í¼ì™€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ì§€ë§Œ, ìì²´ì ì¸ ì†ì„±ì„ ê°€ì§„ë‹¤.</li>\n</ul>","fields":{"slug":"/java-nio-buffer/"},"frontmatter":{"title":"Java NIO - Buffer","date":"October 03, 2023"}},{"id":"4ac73c64-d597-5ac3-9c91-6214595d54be","html":"<h2 id=\"Socket-Option\" style=\"position:relative;\">Socket Option<a href=\"#Socket-Option\" aria-label=\"Socket Option permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì†Œì¼“ ì˜µì…˜ì€ ìë°”ì˜ Socket í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì´ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë³´ë‚´ê³  ë°›ì„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤. ìë°”ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì†Œì¼“ì— ëŒ€í•´ 9ê°€ì§€ ì˜µì…˜ì´ ì¡´ì¬í•œë‹¤.</p>\n<ul>\n<li>TCP_NODELAY</li>\n<li>SO_BINDADDR</li>\n<li>SO_TIMEOUT</li>\n<li>SO_LINGER</li>\n<li>SO_SNDBUF</li>\n<li>SO_RCVBUF</li>\n<li>SO_KEEPALIVE</li>\n<li>OOBINLINE</li>\n<li>IP_TOS</li>\n</ul>\n<p>java.net.SocketOptions ì¸í„°í˜ì´ìŠ¤ì— ê° ì˜µì…˜ì´ ì •ì˜ë˜ì–´ ìˆê³  socket í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í†µí•´ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œëŠ” ì£¼ìš” ì˜µì…˜ë“¤ì— ê¸°ëŠ¥ì— ëŒ€í•´ ì •ë¦¬í•œë‹¤.</p>\n<h2 id=\"TCP_NODELAY\" style=\"position:relative;\">TCP_NODELAY<a href=\"#TCP_NODELAY\" aria-label=\"TCP_NODELAY permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTcpNoDelay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">getTcpNoDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>TCPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Nagleâ€™s ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì€ íŒ¨í‚·ë“¤ì„ í•©ì³ì„œ í•˜ë‚˜ì˜ í° íŒ¨í‚·ìœ¼ë¡œ ì „ì†¡í•œë‹¤. ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ì‘ì€ íŒ¨í‚·ë“¤ì„ í•˜ë‚˜ì”© ë³´ë‚´ëŠ” ê²ƒë³´ë‹¤, ì—¬ëŸ¬ íŒ¨í‚·ì„ í•˜ë‚˜ì˜ í° íŒ¨í‚·ìœ¼ë¡œ í•©ì³ì„œ ë³´ë‚´ë©´ ì „ì†¡ íš¨ìœ¨ì´ ë†’ì•„ì§€ê¸° ë•Œë¬¸ì´ë‹¤. Nagleâ€™s ì•Œê³ ë¦¬ì¦˜ì€ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì†¡í•˜ê¸° ì¢‹ì€ ë°©ë²•ì´ì§€ë§Œ, íŠ¹ì • ìƒí™©ì—ì„œëŠ” ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì‹¤ì‹œê°„ ë¹ ë¥¸ ì‘ë‹µì´ í•„ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜(ê²Œì„, GUI í”„ë¡œê·¸ë¨ ë“±)ì—ì„œëŠ” íŒ¨í‚·ì´ ì§€ì—° ì—†ì´ ë°”ë¡œ ì „ì†¡ë˜ì–´ì•¼ í•œë‹¤. TCP_NODELAYë¥¼ trueë¡œ ì„¤ì •í•˜ë©´, Nagleâ€™s ì•Œê³ ë¦¬ì¦˜ì´ ë¹„í™œì„±í™”ë˜ì–´ ì‘ì€ íŒ¨í‚·ë„ ì¦‰ì‹œ ì „ì†¡ëœë‹¤.\nì¦‰, íŒ¨í‚·ì„ ë²„í¼ë§í•˜ì§€ ì•Šê³  ì¦‰ì‹œ ì „ì†¡í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</p>\n<h2 id=\"SO_LINGER\" style=\"position:relative;\">SO_LINGER<a href=\"#SO_LINGER\" aria-label=\"SO_LINGER permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setSoLinger</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> seconds<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getSoLinger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>SO_LINGER ì˜µì…˜ì€ ì†Œì¼“ì„ ë‹«ì„ ë•Œ ì•„ì§ ì „ì†¡ë˜ì§€ ì•Šì€ íŒ¨í‚·ì„ ì–´ë–»ê²Œ ì²˜ë¦¬ë ì§€ë¥¼ ê²°ì •í•œë‹¤.\ní° íŒŒì¼ì„ ë‹¤ë¥¸ ì»´í“¨í„°ì—ê²Œ ì „ì†¡í•˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ íŒŒì¼ ì „ì†¡ì´ ì™„ì „íˆ ëë‚˜ê¸° ì „ì— close() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ê¸°ë³¸ì ìœ¼ë¡œ close() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì—°ê²°ì„ ì¢…ë£Œí•˜ë ¤ê³  ì‹œë„í•˜ê³ , ì•„ì§ ì „ì†¡ë˜ì§€ ì•Šì€ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ê·¸ ë°ì´í„°ë¥¼ ì›ê²©ì§€ì— ì „ì†¡í•˜ë ¤ê³  í•œë‹¤. ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ì—°ê²°ì„ ì¢…ë£Œí•˜ê¸° ì „ì— ì „ì†¡ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ë”°ë¼ì„œ, close() ë©”ì„œë“œê°€ ì¦‰ì‹œ ë°˜í™˜ë˜ì—ˆë‹¤ê³  ì‹œìŠ¤í…œ ë‚´ë¶€ ì‘ì—…ì´ ì™„ì „íˆ ëë‚¬ë‹¤ê³  íŒë‹¨í•  ìˆ˜ëŠ” ì—†ë‹¤. ì´ ì˜µì…˜ì€ ì†Œì¼“ì„ close í•  ë•Œ ì²˜ë¦¬ë¥¼ ì„¸ë°€í•˜ê²Œ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>ë¹„í™œì„±í™”ëœ ê²½ìš° (-1): ì†Œì¼“ì€ ë°”ë¡œ ë‹«íˆë©° ì•„ì§ ì „ì†¡ë˜ì§€ ì•Šì€ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ì‹œìŠ¤í…œì€ ê·¸ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë ¤ê³  í•œë‹¤. ì´ ë•Œ ì–¼ë§ˆë‚˜ ì˜¤ëœ ì‹œê°„ ë™ì•ˆ ë…¸ë ¥í• ì§€ëŠ” ì‹œìŠ¤í…œì˜ ê¸°ë³¸ ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.</li>\n<li>í™œì„±í™”ëœ ê²½ìš° (0 ì´ìƒì˜ ê°’): ì„¤ì •ëœ ì‹œê°„(ì´ˆ) ë™ì•ˆ ì•„ì§ ì „ì†¡ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³ , ê·¸ ì‹œê°„ì´ ì§€ë‚˜ë©´ ë‚¨ì€ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ì§€ ì•Šê³  ì†Œì¼“ì„ closeí•œë‹¤.</li>\n<li>0ì¸ ê²½ìš°: ì•„ì§ ì „ì†¡ë˜ì§€ ì•Šì€ ëª¨ë“  ë°ì´í„°ëŠ” ë²„ë ¤ì§€ê³  ì¦‰ì‹œ ì†Œì¼“ì´ closeëœë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">socket<span class=\"token punctuation\">.</span><span class=\"token function\">setSoLinger</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// SO\\_LINGER ì˜µì…˜ ë¹„í™œì„±í™”</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">setSoLinger</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// close() í›„, 5ë¶„ ë™ì•ˆ ì¶”ê°€ ë°ì´í„° ì „ì†¡ì„ í—ˆìš©</span></code></pre></div>\n<p>getSoLinger() ë©”ì„œë“œëŠ” SO_LINGER ì˜µì…˜ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆë‹¤ë©´ -1ì„ ë°˜í™˜í•˜ê³ , ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ í˜„ì¬ ì†Œì¼“ì˜ \"linger\" ì‹œê°„ ì¦‰, ë‹«íˆê¸° ì „ì— ë‚¨ì€ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë° í—ˆìš©ëœ ì‹œê°„ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë°˜í™˜í•œë‹¤.</p>\n<h2 id=\"SO_TIMEOUT\" style=\"position:relative;\">SO_TIMEOUT<a href=\"#SO_TIMEOUT\" aria-label=\"SO_TIMEOUT permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setSoTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> milliseconds<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getSoTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>SO_TIMEOUT ì˜µì…˜ì€ ë„ˆë¬´ ì˜¤ë«ë™ì•ˆ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤.\nsockect.read() ë©”ì„œë“œëŠ” ì†Œì¼“ì—ì„œ ë°ì´í„°ë¥¼ ì½ì„ ë•Œê¹Œì§€ ë¸”ë¡í‚¹ëœë‹¤. ì´ ì˜µì…˜ì„  ì‚¬ìš©í•˜ë©´ read() ë©”ì„œë“œê°€ ë¬´í•œì •ìœ¼ë¡œ ë¸”ë¡í‚¹ ë˜ì§€ ì•Šë„ë¡ íƒ€ì„ì•„ì›ƒì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. 0 ìœ¼ë¡œ ì„¤ì •í•  ê²½ìš° íƒ€ì„ì•„ì›ƒì´ ì—†ìŒì„ ì˜ë¯¸í•˜ê³  ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, 1ë¶„ì˜ read timeoutì„ ì„¤ì •í•˜ê³  ì‹¶ë‹¤ë©´ socket.setSoTimeout(60000); ë¡œ ì„¤ì •í•œë‹¤.</p>\n<h2 id=\"SO_RCVBUF-SO_SNDBUF\" style=\"position:relative;\">SO_RCVBUF, SO_SNDBUF<a href=\"#SO_RCVBUF-SO_SNDBUF\" aria-label=\"SO_RCVBUF SO_SNDBUF permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setReceiveBufferSize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> size<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IllegalArgumentException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getReceiveBufferSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setSendBufferSize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> size<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IllegalArgumentException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getSendBufferSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>SO_RCVBUFëŠ” ë„¤íŠ¸ì›Œí¬ ì…ë ¥ì„ ìœ„í•œ ë²„í¼ í¬ê¸°ë¥¼, SO_SNDBUFëŠ” ë„¤íŠ¸ì›Œí¬ ì¶œë ¥ì„ ìœ„í•œ ë²„í¼ í¬ê¸°ë¥¼ ì œì–´í•œë‹¤.\níŒŒì¼ ì „ì†¡ê³¼ ê°™ì€ ìƒí™©ì—ì„œëŠ” í° ë²„í¼ê°€ ì´ì ì´ ìˆì§€ë§Œ, ê²Œì„ê³¼ ê°™ì€ ì‹¤ì‹œê°„ í†µì‹ ì´ í•„ìš”í•œ ìƒí™©ì˜ ê²½ìš°ì—ëŠ” ë²„í¼ë¥¼ ì‚¬ìš©í•  ê²½ìš° ì „ì†¡ ì§€ì—°ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ìš´ì˜ì²´ì œ ë§ˆë‹¤ ë‹¤ë¥´ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ 128ë°”ì´íŠ¸ê°€ ì¼ë°˜ì ì¸ ê¸°ë³¸ê°’ì´ë‹¤.\në²„í¼ í¬ê¸°ëŠ” ì†Œì¼“ì˜ ìµœëŒ€ ì†ë„ë¥¼ ê²°ì •í•˜ëŠ”ë°, ìµœëŒ€ ê°€ëŠ¥í•œ ëŒ€ì—­í­ì€ ë²„í¼ í¬ê¸°ë¥¼ ì§€ì—°ì‹œê°„ìœ¼ë¡œ ë‚˜ëˆˆ ê°’ì´ë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, ë‘ í˜¸ìŠ¤íŠ¸ ê°„ì˜ ì „ì†¡ ì§€ì—°ì‹œê°„ì´ 0.5ì´ˆì— ë²„í¼ í¬ê¸°ê°€ 128ë°”ì´íŠ¸ë¼ë©´ 128byte/0.5s = 256byte/1sê°€ ëœë‹¤. ì§€ì—°ì‹œê°„ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œì–´í•  ìˆ˜ ì—†ëŠ” ë³€ìˆ˜ì´ë¯€ë¡œ ë²„í¼ ì‚¬ì´ì¦ˆë¥¼ ë‘ ë°°ë¡œ ëŠ˜ë¦¬ë©´ ëŒ€ì—­í­ë„ ë‘ ë°°ë¡œ ì¦ê°€í•œë‹¤.\në¬¼ë¡  ë„¤íŠ¸ì›Œí¬ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ëŒ€ì—­í­ì€ ì œí•œë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê·¸ ë³´ë‹¤ ì‘ê²Œ ì„¤ì •í•´ì•¼ í•œë‹¤.</p>\n<p>java docì„ í™•ì¸í•´ë³´ë©´ setReceiveBufferSize, setSendBufferSize ëŠ” ë„¤íŠ¸ì›Œí¬ I/O ë²„í¼ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ í¬ê¸°ì— ëŒ€í•œ íŒíŠ¸ë¡œ ì‚¬ìš©ëœë‹¤.</p>\n<blockquote>\n<p>Sets the SO_SNDBUF option to the specified value for this Socket. The SO_SNDBUF option is used by the platform's networking code as a hint for the size to set the underlying network I/O buffers.</p>\n</blockquote>\n<p>ì´ëŠ” setìœ¼ë¡œ ì„¤ì •í•˜ë”ë¼ë„ ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ê°’ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì–˜ê¸°ì´ë‹¤. ì‹¤ì œ ë²„í¼ê°€ ì–´ë–¤ í¬ê¸°ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ getSendBufferSize() ë©”ì„œë“œë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"SO_KEEPALIVE\" style=\"position:relative;\">SO_KEEPALIVE<a href=\"#SO_KEEPALIVE\" aria-label=\"SO_KEEPALIVE permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setKeepAlive</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span> \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">getKeepAlive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>SO_KEEPALIVEëŠ” HTTP í”„ë¡œí† ì½œì— Keepalive í—¤ë”ì™€ëŠ” ë‹¤ë¥¸ ì˜µì…˜ì´ë‹¤. SO_KEEPALIVE ì˜µì…˜ì€ ì„œë²„ê°€ ì£½ì–´ìˆëŠ”ì§€ í—¬ìŠ¤ ì²´í¬ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ê¸°ì ìœ¼ë¡œ íŒ¨í‚·ì„ ë³´ë‚´ëŠ” ì˜µì…˜ì´ë‹¤. ì„œë²„ê°€ ì´ íŒ¨í‚·ì— ì‘ë‹µí•˜ì§€ ì•Šìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‘ë‹µì„ ë°›ì„ ë•Œ ê¹Œì§€ ì‹œë„í•˜ë‹¤ê°€ ê²°êµ­ ì‘ë‹µì„ ë°›ì§€ ëª»í•˜ë©´ ì†Œì¼“ì„ closeí•œë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì ì ˆíˆ ì¢…ë£Œë˜ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ë‚˜ ì„œë²„ ì¤‘ í•œ ìª½ì—ì„œë§Œ ì¢…ë£Œëœ ê²½ìš°ë¥¼ half open ì—°ê²°ì´ë¼ê³  í•˜ëŠ”ë°, SO_KEEPALIVEëŠ” ê·¸ ìƒíƒœë¥¼ ê°ì§€í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ë‹¤.</p>\n<p>TCP Keepaliveì˜ ìƒì„¸ ì„¤ì •ì€ ìš´ì˜ì²´ì œ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nì•„ë˜ëŠ” Linuxì—ì„œ keepalive ê´€ë ¨ ì„¤ì •ê°’ë“¤ì´ë‹¤.</p>\n<ul>\n<li>/proc/sys/net/ipv4/tcp_keepalive_time<br>\nì´ íŒŒì¼ì— ì €ì¥ëœ ê°’ì€ TCP keep-alive íŒ¨í‚·ì´ ì²˜ìŒìœ¼ë¡œ ì „ì†¡ë˜ê¸° ì‹œì‘í•˜ëŠ” ì‹œê°„ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ë‚¸ë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ ê¸°ë³¸ê°’ì€ 7200ì´ˆ(2ì‹œê°„)ì´ë‹¤. ì¦‰, ì—°ê²°ì´ ë¹„í™œì„± ìƒíƒœë¡œ ìˆì„ ë•Œ 2ì‹œê°„ í›„ì— ì²« ë²ˆì§¸ keep-alive íŒ¨í‚·ì´ ì „ì†¡ëœë‹¤.</li>\n<li>/proc/sys/net/ipv4/tcp_keepalive_intvl<br>\nì´ íŒŒì¼ì— ì €ì¥ëœ ê°’ì€ keep-alive íŒ¨í‚· ê°„ì˜ ê°„ê²©ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ë‚¸ë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, ì²« ë²ˆì§¸ keep-alive íŒ¨í‚·ì— ëŒ€í•œ ì‘ë‹µì´ ì—†ìœ¼ë©´ ì´ íŒŒì¼ì— ì§€ì •ëœ ê°„ê²© í›„ì— ë‘ ë²ˆì§¸ íŒ¨í‚·ì´ ì „ì†¡ëœë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ ê¸°ë³¸ê°’ì€ 75ì´ˆì´ë‹¤.</li>\n<li>/proc/sys/net/ipv4/tcp_keepalive_probes<br>\nì´ íŒŒì¼ì— ì €ì¥ëœ ê°’ì€ ì—°ì†ì ìœ¼ë¡œ ì „ì†¡ë  ìˆ˜ ìˆëŠ” keep-alive íŒ¨í‚·ì˜ ìµœëŒ€ íšŸìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ ê¸°ë³¸ê°’ì€ 9ì´ë‹¤. ì¦‰, keep-alive íŒ¨í‚· 9íšŒ ì—°ì†ìœ¼ë¡œ ì‘ë‹µì´ ì—†ì„ ê²½ìš° ì—°ê²°ì´ ëŠì–´ì§„ë‹¤.</li>\n</ul>\n<h2 id=\"OOBINLINE\" style=\"position:relative;\">OOBINLINE<a href=\"#OOBINLINE\" aria-label=\"OOBINLINE permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendUrgentData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> data<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setOOBInline</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span> \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">getOOBInline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>TCPì—ëŠ” ê¸´ê¸‰ ë°ì´í„°(Urgent Data)ë¥¼ ë°”ë¡œ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤. sendUrgentData() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ int dataë¥¼ ê±°ì˜ ë°”ë¡œ ì „ì†¡í•œë‹¤. ì „ì†¡ë  ë°”ì´íŠ¸ëŠ” data íŒŒë¼ë¯¸í„°ì˜ ìµœí•˜ìœ„ 8ë¹„íŠ¸ê°€ ì „ì†¡ëœë‹¤. OutputStreamì— ì´ë¯¸ ë°ì´í„°ê°€ ê¸°ë¡ë˜ì–´ ìˆë‹¤ë©´ ì´ë¯¸ ê¸°ë¡ë˜ì–´ ìˆëŠ” ë°ì´í„° ë’¤ì— ì „ì†¡ëœë‹¤.</p>\n<p>OOBINLINE ê°’ì´ trueì´ë©´ ì†Œì¼“ì˜ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì— ìœ„ì¹˜í•˜ê²Œ ë˜ì–´ ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ ì½ì„ ìˆ˜ ìˆë‹¤. ê¸°ë³¸ê°’ì€ falseì´ë‹¤. Javaì—ì„œëŠ” ê¸´ê¸‰ ë°ì´í„°ëŠ” ì¼ë°˜ ë°ì´í„°ì™€ êµ¬ë³„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¸´ê¸‰ ë°”ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸°ê°€ ì–´ë ¤ìš´ë°, Ctrl-C ê°™ì€ íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ê°–ëŠ” ë°”ì´íŠ¸ë¥¼ ì „ì†¡ì´ í•„ìš”í•  ë•Œ ì¨ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"SO_REUSEADDR\" style=\"position:relative;\">SO_REUSEADDR<a href=\"#SO_REUSEADDR\" aria-label=\"SO_REUSEADDR permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setReuseAddress</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> on<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span> \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">getReuseAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SocketException</span></code></pre></div>\n<p>SO_REUSEADDR ì˜µì…˜ì€ ì†Œì¼“ì„ ë‹«ì•˜ì„ ë•Œ í•´ë‹¹ ì†Œì¼“ì˜ í¬íŠ¸ë¥¼ ì¦‰ì‹œ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì—­í• ì€ í•œë‹¤.\nì†Œì¼“ ì—°ê²°ì„ ëŠê²Œ ë˜ë©´ ë¨¼ì € ì—°ê²°ì„ ëŠëŠ” ìª½ì—ì„œ TIME_WAIT ìƒíƒœë¡œ ì¼ì •ì‹œê°„ ìœ ì§€ë˜ëŠ”ë°, ì´ëŠ” ë„¤íŠ¸ì›Œí¬ ìƒì— ì•„ì§ ë„ì°©í•˜ì§€ ì•Šì€ ë§ˆì§€ë§‰ íŒ¨í‚·ë“¤ì´ ì†Œì¼“ì— ë„ì°©í•  ì‹œê°„ì„ í™•ë³´í•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì†Œì¼“ ì—°ê²°ì´ ëŠì–´ì§„ë‹¤ê³  í•´ì„œ ê·¸ í¬íŠ¸ê°€ ì¦‰ì‹œ ì¬ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì‹œìŠ¤í…œì€ ì´ëŸ¬í•œ ëŠ¦ê²Œ ë„ì°©í•œ íŒ¨í‚·ë“¤ì„ ì²˜ë¦¬í•˜ì§€ ì•Šì§€ë§Œ, ê·¸ íŒ¨í‚·ë“¤ì´ ê°™ì€ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì˜ëª» ì „ë‹¬ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì¼ì •ì‹œê°„ì„ ëŒ€ê¸°í•œë‹¤.\nSO_REUSEADDR ì˜µì…˜ì„ í™œì„±í™”í•˜ë©´, ì´ëŸ¬í•œ ëŒ€ê¸° ì‹œê°„ ì—†ì´ í¬íŠ¸ë¥¼ ì¦‰ì‹œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>\n<p>TIME_WAIT ìƒíƒœì— ìì„¸í•œ ì„¤ëª…ì€ <a href=\"https://tech.kakao.com/2016/04/21/closewait-timewait/\">ì¹´ì¹´ì˜¤ ê¸°ìˆ ë¸”ë¡œê·¸</a>ì— ì˜ ì •ë¦¬ëœ ê²ƒì´ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.</p>\n<p>setReuseAddress() ë©”ì„œë“œê°€ ì‘ë™í•˜ë ¤ë©´ ì†Œì¼“ì´ í¬íŠ¸ì— ë°”ì¸ë­ë˜ê¸° ì „ì— setReuseAddress() í˜¸ì¶œí•´ì•¼ í•œë‹¤.\nì¦‰ ì¸ìì—†ëŠ” ìƒì„±ì new Socket() ì„ í†µí•´ ì†Œì¼“ì„ ìƒì„±í•œë‹¤ìŒ setReuseAddress(true)ë¥¼ í˜¸ì¶œí•˜ê³  connect() ë©”ì„œë“œë¥¼ í†µí•´ ì†Œì¼“ì„ ì—°ê²°í•´ì•¼ í•œë‹¤.</p>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>TCP/IP Illustrated</li>\n<li>ìë°” ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° 4íŒ</li>\n</ul>","fields":{"slug":"/socket_option/"},"frontmatter":{"title":"Javaì˜ Socket Option ì •ë¦¬","date":"September 29, 2023"}},{"id":"f7217e81-51a3-58d9-9498-e84defa6368e","html":"<h2 id=\"Jakarta-EE\" style=\"position:relative;\">Jakarta EE<a href=\"#Jakarta-EE\" aria-label=\"Jakarta EE permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Jakarta EE(Java EE)ëŠ” ê¸°ì—…ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì˜ ì‚¬ì–‘ì„ ì •ì˜í•´ë‘” ëª…ì„¸ì„œì´ë‹¤.\nì¦‰, ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ”ë° í•„ìš”í•œ í‘œì¤€í™”ëœ Java APIì˜ ëª¨ìŒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\nJava APIì˜ íŠ¹ì§•ì€ APIë¥¼ ì œê³µí•˜ëŠ” êµ¬í˜„ ë²¤ë”ì™€ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— APIë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ í”ŒëŸ¬ê·¸ í˜•íƒœë¡œ êµ¬í˜„ ë²¤ë”ë¥¼ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.\nêµ¬ì²´ì ìœ¼ë¡œëŠ” JSP, Servlet, EJB, JMS, JMX, JTA ë“± ê¸°ì—…ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì‚¬ì–‘ë“¤ì„ ëª…ì‹œí•˜ê³  ìˆë‹¤.\n<a href=\"http://java.sun.com/javaee/technologies/\">ì—¬ê¸°ì„œ</a> Jakarta EE(Java EE) APIì˜ ì „ì²´ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në‹¤ì–‘í•œ ì¨ë“œíŒŒí‹°ì—ì„œ Jakarta EE(Java EE) ìŠ¤í™ì„ ì¤€ìˆ˜í•œ êµ¬í˜„ì„ ì œê³µí•˜ëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ë²¤ë”ê°€ ìˆë‹¤.\nJakarta EE(Java EE) ìŠ¤í™ì„ ì™„ì „íˆ êµ¬í˜„í•œ ê²ƒì„ WAS(Web Application Server)ë¼ê³  í•œë‹¤.</p>\n<ul>\n<li>JBoss(www.jboss.org)</li>\n<li>JOnAS(jonas.objectweb.org)</li>\n<li>Geronimo(geronimo.apache.org)</li>\n</ul>\n<h2 id=\"Servlet\" style=\"position:relative;\">Servlet<a href=\"#Servlet\" aria-label=\"Servlet permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì„œë¸”ë¦¿ì€ Jakarta EE API ì¤‘ í•˜ë‚˜ë¡œ, Java ê¸°ìˆ ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì›¹ ì»´í¬ë„ŒíŠ¸ì´ë‹¤. Servletì€ ì„œë²„ ì¸¡ì—ì„œ ì‹¤í–‰ë˜ëŠ” Java í´ë˜ìŠ¤ë¡œ, í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ë™ì ì¸ ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±í•œë‹¤.\nJakarta EE(Java EE)ì˜ Servlet ì£¼ìš” ìŠ¤í™ì„ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. <a href=\"https://download.oracle.com/otn-pub/jcp/servlet-3_1-fr-eval-spec/servlet-3_1-final.pdf?AuthParam=1695794208_54642e957120d983f4ca811f71280a25\">Servlet 3.1 Spec docs</a></p>\n<ul>\n<li>ìš”ì²­/ì‘ë‹µ ëª¨ë¸: Servletì€ HTTP ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•œ í›„, ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ìš”ì²­/ì‘ë‹µ ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.</li>\n<li>ìƒëª…ì£¼ê¸° ê´€ë¦¬: Servletì€ íŠ¹ì • ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§„ë‹¤. ì£¼ìš” ë©”ì†Œë“œë¡œëŠ” init(), service(), doGet(), doPost(), destroy() ë“±ì´ ìˆë‹¤.</li>\n<li>ì„¸ì…˜ ê´€ë¦¬: Servlet ìŠ¤í™ì€ í´ë¼ì´ì–¸íŠ¸ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ APIë¥¼ ì œê³µí•œë‹¤.</li>\n<li>ì»¨í…ìŠ¤íŠ¸ ê³µìœ : ServletContextë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì— ê±¸ì³ ì •ë³´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.</li>\n<li>í•„í„°ë§: í•„í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ë° ì‘ë‹µì— ëŒ€í•œ ì‚¬ì „ ë° ì‚¬í›„ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒëª…ì£¼ê¸° ì´ë²¤íŠ¸ë‚˜ ì„¸ì…˜ ìƒì„±/ì†Œë©¸ ë“±ì˜ ì´ë²¤íŠ¸ì— ëŒ€í•œ ë¦¬ìŠ¤ë„ˆë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ë©€í‹° ìŠ¤ë ˆë”©: Servletì€ ë©€í‹° ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œ ì‹¤í–‰ëœë‹¤.</li>\n<li>í¬ì›Œë”© ë° ë¦¬ë‹¤ì´ë ‰ì…˜: ìš”ì²­ì„ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ë¡œ í¬ì›Œë”©í•˜ê±°ë‚˜, í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë‹¤ë¥¸ URLë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.</li>\n<li>ë³´ì•ˆ: Servlet ìŠ¤í™ì€ ì„ ì–¸ì ì¸ ë³´ì•ˆì„ ì œê³µí•˜ì—¬, ì›¹ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ë¥¼ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<h2 id=\"Servlet-Containner\" style=\"position:relative;\">Servlet Containner<a href=\"#Servlet-Containner\" aria-label=\"Servlet Containner permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì›¹ ì„œë²„ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ì¼ë¶€ë¡œì„œ, ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ë©°, ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ê³ , ì›¹ í˜ì´ì§€ì˜ ë™ì ì¸ ë‚´ìš©ì„ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\ní´ë¼ì´ì–¸íŠ¸ê°€ ì›¹ì„œë²„ì— HTTP ìš”ì²­ì„ ë³´ë‚´ë©´, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì´ ìš”ì²­ì„ ë°›ì•„ì„œ ìš”ì²­ URLì— í•´ë‹¹í•˜ëŠ” ì„œë¸”ë¦¿ì— ì „ë‹¬í•˜ë©°, ì„œë¸”ë¦¿ ì“°ë ˆë“œê°€ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì²˜ë¦¬í•œ í›„ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.</p>\n<h2 id=\"Tomcat\" style=\"position:relative;\">Tomcat<a href=\"#Tomcat\" aria-label=\"Tomcat permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Tomcatì€ Servlet ë° JSP ì‚¬ì–‘ì„ êµ¬í˜„í•œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì´ë‹¤. JSPì™€ ì„œë¸”ë¦¿ ì²˜ë¦¬, ì„œë¸”ë¦¿ì˜ ìˆ˜ëª… ì£¼ê¸° ê´€ë¦¬, ìš”ì²­ URLì„ ì„œë¸”ë¦¿ ì½”ë“œë¡œ ë§¤í•‘, HTTP ìš”ì²­ ìˆ˜ì‹  ë° ì‘ë‹µ, í•„í„° ì²´ì¸ ê´€ë¦¬ ë“±ì„ ì²˜ë¦¬í•´ì¤€ë‹¤. í†°ìº£ì€ Jakarta EEë¥¼ ì™„ì „íˆ êµ¬í˜„í•œ WASëŠ” ì•„ë‹ˆê³ , JSP ì™€ Servlet ì‚¬ì–‘ë§Œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— Servlet Containner ë˜ëŠ” Web Container ë¼ê³  ë¶€ë¥¸ë‹¤.</p>\n<h2 id=\"Tomcat-Architecture\" style=\"position:relative;\">Tomcat Architecture<a href=\"#Tomcat-Architecture\" aria-label=\"Tomcat Architecture permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e87b355feb27c84754d957baa200ab8b/44e31/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVR42n2T16pqQRBE/f+/0BcRTIgJI0bMOecsmEVQn+zL6sveHM/DaShnMzNdXV09WrbbrYzHY6lWq+L3+yUQCIjX65VQKCTRaPRPxGIxE/F4XPb7vVjW67UMh0NJp9Nit9slk8lIsViUZrMpo9FIz4z1JwaDgfR6PQXf+XxeVquVWAyFEE0mE3m/30Lc73dVmUwmtTpFyuWylEolBR3N53PN2Ww20ul0/hPy0+/3JZvNCmqJz+cjh8NBrFar2Gw2cTgc4vF41BKAJVgDaaFQkHa7rVDC6XQqkUhE6vW6uXm9XgXlKISIYsfjUbrdrloxm81UGaBl8kyFi8XC9Izvy+Uij8dDdrudkvl8Pk2gMC1CZqyQ1Wo1abVa34QYikI28QOFTMzpdIrL5dJECr1eLzmdTrJcLnUwFDFUs5ot53I53aQFEkjGT8gAigiKQH673XSQ3EMQYkxCEhuNhrZNaxACkt1ut4KLBMpR+Xw+1RZAsa+h0CIqU6mUOWXifD5LOByWYDCoKozpGwEp/qHsayiQ8HAh/JmIGh47dtASRWnTAI8ZEp4O56x4a2GaXKhUKmbb+AmwghUlnP8GJJxxL5FI6F/vHwZnR4/9FDRRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tomcat Architecture\"\n        title=\"\"\n        src=\"/static/e87b355feb27c84754d957baa200ab8b/ca1dc/img.png\"\n        srcset=\"/static/e87b355feb27c84754d957baa200ab8b/e7570/img.png 170w,\n/static/e87b355feb27c84754d957baa200ab8b/f46e7/img.png 340w,\n/static/e87b355feb27c84754d957baa200ab8b/ca1dc/img.png 680w,\n/static/e87b355feb27c84754d957baa200ab8b/44e31/img.png 949w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Tomcat Architecture</figcaption>\n  </figure></p>\n<h4>Server</h4>\n<p>Tomcat ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ìì²´ë¥¼ ì˜ë¯¸í•œë‹¤. í•˜ë‚˜ì˜ JVM ë‚´ì—ì„œ í•˜ë‚˜ì˜ Server ì¸í„°í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.\nì—¬ëŸ¬ ê°œì˜ JVM ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•œë‹¤ë©´ ì—¬ëŸ¬ ëŒ€ì˜ Tomcat Server ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ”ë°\nê°ê°ì˜ Server ì¸ì„œí„´ìŠ¤ëŠ” ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ í¬íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼ ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h4>Service</h4>\n<p>í†°ìº£ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ë¡œ, container ì™€ Connector ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ”ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ í•˜ë‚˜ì˜ Engine íƒ€ì…ì˜\nì»¨í…Œì´ë„ˆ í•˜ë‚˜ì™€ ì—¬ëŸ¬ ê°œì˜ Connectorë¡œ êµ¬ì„±ëœë‹¤. ServiceëŠ” ì—¬ëŸ¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë‹¨ìœ„ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ í•˜ë©´ Connectorê°€ ìš”ì²­ì„ ë°›ì•„, Engine(container)ì—ê²Œ ì „ë‹¬í•œë‹¤.\nEngineì€ ìš”ì²­ì„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¼ìš°íŒ…í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.\nê° ServiceëŠ” ì´ë¦„ì´ ë¶€ì—¬ë˜ì–´ ìˆì–´ ë¡œê·¸ ë©”ì‹œì§€ë¥¼ í†µí•´ Serviceë¥¼ ì‰½ê²Œ ì‹ë³„í•  ìˆ˜ ìˆë‹¤.</p>\n<h4>Connectors</h4>\n<p>ConnectorsëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì›¹ ìš”ì²­ì„ ë°›ì•„ì„œ ì ì ˆí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤.\nì´ë¥¼ í†µí•´ HTTP, HTTPS ë“± ë‹¤ì–‘í•œ í”„ë¡œí† ì½œê³¼ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•œë‹¤.\ní•˜ë‚˜ì˜ Engineì€ ì—¬ëŸ¬ ê°œì˜ Connectorsë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë°, ê° Connectorsì˜ í¬íŠ¸ëŠ” ìœ ì¼í•´ì•¼ í•œë‹¤.\nê¸°ë³¸ ConnectorëŠ” Coyoteì´ë©° HTTP 1.1ì„ êµ¬í˜„í•œë‹¤. ê·¸ ì™¸ì—ë„ AJP, SSL Connector, HTTP 2.0 Connector ë“±ì´ ìˆë‹¤.</p>\n<h4>Engine</h4>\n<p>Engineì€ Tomcat ì„œë²„ì—ì„œ ê°€ì¥ ìƒìœ„ì— ìœ„ì¹˜í•œ ì»¨í…Œì´ë„ˆì´ë‹¤.\nCatalina ì„œë¸”ë¦¿ ì—”ì§„ì„ ëŒ€í‘œí•˜ê³ , HTTP í—¤ë”ë¥¼ ë¶„ì„í•˜ì—¬ ìš”ì²­ì„ ì–´ëŠ ê°€ìƒ í˜¸ìŠ¤íŠ¸ë‚˜ ì»¨í…ìŠ¤íŠ¸ë¡œ ì „ë‹¬í• ì§€ ê²°ì •í•œë‹¤.\ní•˜ë‚˜ì˜ Engine ë‚´ì—ëŠ” ì—¬ëŸ¬ Hostsê°€ í¬í•¨ë  ìˆ˜ ìˆê³ , ê° HostëŠ” ì—¬ëŸ¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.\në˜í•œ ContextëŠ” ë‹¨ì¼ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>\n<h4>Realm</h4>\n<p>Realmì€ ì‚¬ìš©ì ì¸ì¦ê³¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤. Realmì€ ì „ì²´ ì—”ì§„ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì ìš©ë˜ë¯€ë¡œ ì—”ì§„ ë‚´ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì€\nì¸ì¦ì„ ìœ„í•œ Realmì„ ê³µìœ í•˜ê²Œ ëœë‹¤.</p>\n<h4>Valves</h4>\n<p>Valves ìš”ì²­ê³¼ ì‘ë‹µì„ ê°€ë¡œì±„ì„œ ì‚¬ì „ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” Servletì˜ í•„í„°ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, Valves í†°ìº£ ê³ ìœ ì˜ ì»´í¬ë„ŒíŠ¸ì´ë‹¤.\nHosts, contexts, Engineì— Valvesë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ValvesëŠ” ì—”ì§„ê³¼ ì»¨í…ìŠ¤íŠ¸ ì‚¬ì´, í˜¸ìŠ¤íŠ¸ì™€ ì»¨í…ìŠ¤íŠ¸ ì‚¬ì´, ì»¨í…ìŠ¤íŠ¸ì™€ ì›¹ ë¦¬ë¡œìŠ¤ ì‚¬ì´ì—ì„œ ìš”ì²­ì„ ê°€ë¡œì±Œ ìˆ˜ ìˆë‹¤.\nRequest í—¤ë” ë° ì¿ í‚¤ ì €ì¥, Response í—¤ë” ë° ì¿ ê¸° ë“±ì„ ë¡œê¹… ë“±ì— ì‚¬ìš©ëœë‹¤.</p>\n<h4>Host</h4>\n<p>HostëŠ” ì•„íŒŒì¹˜ ì›¹ ì„œë²„ì˜ ê°€ìƒ í˜¸ìŠ¤íŠ¸ì™€ ìœ ì‚¬í•˜ë‹¤. í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ì„œë²„ì— ì—¬ëŸ¬ ê°œì˜ ì›¹ ì‚¬ì´íŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆë‹¤.\nHostëŠ” ë³´í†µ Engine ë‚´ì— ìœ„ì¹˜í•´ Engineì˜ ìš”ì²­ì„ ë°›ì•„ í•´ë‹¹ ìš”ì²­ì´ ì–´ëŠ Hostë¡œ ì „ë‹¬ë ì§€ íŒë‹¨í•œë‹¤.</p>\n<h4>Context</h4>\n<p>ContextëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚˜íƒ€ë‚¸ë‹¤. Engineì´ë‚˜ Hostì—ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ í´ë” ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ë“±ì˜ ì„¤ì •ì„ í¬í•¨í•œë‹¤.\nì—¬ëŸ¬ Contextê°€ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"serverxml\" style=\"position:relative;\">server.xml<a href=\"#serverxml\" aria-label=\"serverxml permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>server.xmlì€ Tomcat ì„œë²„ êµ¬ì„± ìš”ì†Œë¥¼ ì •ì˜í•œë‹¤. Service, Connector, engine, Realm, Valve, Host ë“±ì˜ êµ¬ì„±ì´ í¬í•¨ëœë‹¤.\ntomcatì´ ì„¤ì¹˜ëœ conf ë””ë ‰í† ë¦¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. tomcat 8 ë²„ì „ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì¹˜ í›„ ê¸°ë³¸ ì„¤ì •ì„ í™•ì¸í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Server</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8005<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">shutdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SHUTDOWN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Listener</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.startup.VersionLoggerListener<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token comment\">&lt;!--  ...--></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GlobalNamingResources</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Resource</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserDatabase<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">auth</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Container<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.UserDatabase<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>User database that can be updated and saved<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">factory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.users.MemoryUserDatabaseFactory<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">pathname</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>conf/tomcat-users.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>GlobalNamingResources</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Service</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Catalina<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HTTP/1.1<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">connectionTimeout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20000<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">redirectPort</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8443<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">maxParameterCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1000<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Engine</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Catalina<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defaultHost</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Realm</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.realm.LockOutRealm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Realm</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.realm.UserDatabaseRealm<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">resourceName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserDatabase<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Realm</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Host</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">appBase</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>webapps<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">unpackWARs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autoDeploy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Valve</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.valves.AccessLogValve<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">directory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logs<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">prefix</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost_access_log<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">suffix</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.txt<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%h %l %u %t <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>%r<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> %s %b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Host</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Engine</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Service</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Server</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>server.xml íŒŒì¼ì˜ ì»´í¬ë„ŒíŠ¸ êµ¬ì„±ì€ ì•„ë˜ì™€ ê°™ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë¶€ëª¨-ìì‹ ê´€ê³„ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Server\nâ”œâ”€â”€ Listener (ì—¬ëŸ¬ ê°œ ì¡´ì¬ ê°€ëŠ¥)\nâ”œâ”€â”€ GlobalNamingResources\nâ”‚   â””â”€â”€ Resource (UserDatabase)\nâ””â”€â”€ Service (Catalina)\n    â”œâ”€â”€ Connector (port=8080, protocol=HTTP/1.1)\n    â””â”€â”€ Engine (Catalina)\n        â”œâ”€â”€ Realm (LockOutRealm)\n        â”‚   â””â”€â”€ Realm (UserDatabaseRealm)\n        â””â”€â”€ Host (localhost)\n            â””â”€â”€ Valve (AccessLogValve)</code></pre></div>\n<ul>\n<li>Server: ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì„œë²„ì˜ ì „ë°˜ì ì¸ ì„¤ì •ì„ ê´€ë¦¬í•œë‹¤.</li>\n<li>Listener: ì„œë²„ ë¼ì´í”„ì‚¬ì´í´ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•œë‹¤.</li>\n<li>GlobalNamingResources: ê¸€ë¡œë²Œ ë„¤ì´ë° ë¦¬ì†ŒìŠ¤, UserDatabase ê°™ì€ ë¦¬ì†ŒìŠ¤ ì„¤ì •ì´ ìˆë‹¤.</li>\n<li>Service: í•˜ë‚˜ ì´ìƒì˜ ì»¤ë„¥í„°(Connector)ì™€ í•˜ë‚˜ì˜ ì—”ì§„(Engine)ì„ ê°€ì§„ë‹¤.</li>\n<li>Connector: HTTP ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.</li>\n<li>Engine: ì‹¤ì œë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤.</li>\n<li>Realm: ë³´ì•ˆ ê´€ë ¨ ì„¤ì •ì„ ë‹´ë‹¹í•œë‹¤.</li>\n<li>Host: ê°€ìƒ í˜¸ìŠ¤íŠ¸ ì„¤ì •ì„ ê´€ë¦¬í•œë‹¤.</li>\n<li>Valve: ë¡œê¹…ì´ë‚˜ ë³´ì•ˆ ë“± ì¶”ê°€ì ì¸ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•œë‹¤.</li>\n</ul>\n<blockquote>\n<p>Catalinaë¼ëŠ” ì´ë¦„ì˜ ì„œë¹„ìŠ¤ì—ì„œ HTTP 1.1 í”„ë¡œí† ì½œê³¼ 8080 í¬íŠ¸ ë²ˆí˜¸ê°€ ì •ì˜ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nì´ ì„¤ì •ì€ í†°ìº£ì„ ì„¤ì¹˜í–ˆì„ ë•Œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” ì†Œê°œ í˜ì´ì§€ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ì—­í• ì„ í•œë‹¤.</p>\n</blockquote>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f5e1e2f64382811c2e8c640546e34fd4/c84e4/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEgklEQVR42m2U229UVRTG57+Qik9yS0xMjDEYFYohxGfAhAiYECMXFSLRByNPvvKkj0Z5aBAKxKjcqdD7hba003Y6My3tTOfazuXMnPuZOXNm2pmf6xwTogkn+bLWXnutb39r75UT6t63j4MHuul+fy/vvvUGe9/czdt7XuOd3dvZK3hvdxcf7HmV/Xu62C9+965tHNj5Ch8KDu7cxsEd2zi0o4uPdm3n0OtdhC5eusz3l69w+sIlTpz6guOnvuTo8dMBjvwHhz/5nCMnzvDxp+c4evIsx059xcmz33DyzNecOX+R899+x2fnLhAqlUqk19LkMjkyqUxgFYnZpoWuapi6EUCvqliGSavh0XQbNMU2JMczbZp1F032DV0npCgKsZUosbUoi4lFFlcWUUwFp+lgNkyMhoHVsLA8K7BBzJVDxFdLOdRylrJRRHVUNjc3CSFfVI9zL9XHYHaA0fURhjKD9Kf6GUz3M5wdZEjivh3ODsneQJA3LDmj66P0Z/u5l7jDxPoYmzQJmVs605E7jD34gecbY8zrM8xXJ5mtThDRpyk0k5idEmp7A+0lqDbzpLJJ0rkkak0hlFDCXO05xpNbh5kq36W38CvXcz8H6M3/wrB2l6g7zlorTLI1+z8kNmdZcWeYW54mshJm3VojVDHlMfQkOS3BajFCzk1S8FIUmxlRlw7WpWYWm4ooLWN1lBdwqOJ0qhieguaWcDblUbJVk+HoCou5EhnVxm51SCkm8ZyCYjepb4HV7JCuWlTqLdknQKXWIpZXiEpdyfGwJa+2CSHbNSnJK5VNGRXPkGRZWyVyqsRsUdU0AtgtS15X+xee76sU/Tq7HMT0moojLx9ylVnUpZuYyTuYa3dpbgzQKg5APSaxPspz11Dmb2In7rOljomMMM3KMwqRG5Sjv+Nm/6ZtPhXZk+AsCKG6QHHlNuXEA8qr91ETD7FzTwLCzNgNYn/9RGb0KvmJa7QqPuE8LWWa4kQPhfHfUCJ/YCUf0chLjTUnLReekZvrRRGyiqhQBPXyELhxtNQTSvE/cZVRPHWchh93wqL0GdWRK1izN3FFiCu1zXQfaDOErOwUubEe7PRjIQmL9Bk5aUqUxDBkyJXUQyoy9IaobhuTAWFLC5OfvY6e6cMpDOAWBmmIDVrWVkeI3/6Rjale2voEHXNSCseFMIr2/BG58R5Kc7eCgrY+HhzYEiXrs9fkah5Tl7gt99jw792ZJ+Spyxirj9FXB9gy5+XuokIWAZlFrzJHLTsiCp7ilabo2AvSxRI0knREjX/PuIJGXOyiYIVQo+FimjqWbeLWa1im/Fl0VaAFa8exsG0L161RrzkYhoyNYQS+D11T0TQZcMnxuUL5/DoLCxE2Ngrokri6miAcniOVSgupztLSEsvLz1GUihRqxONLkrsR7KmqSiwWI5fPB3uWJXOoi1Mul0WFHQT8/6O/9lWYpil+iUqlEig2DJ1CoRAQmUEnGslkgmKxGOT7nYQ8z5O2nIDMJ63VpLV6/UXMdV3a7XaAra0tOp1OYF8GP+cfT1Jug03+AN8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"\"\n        src=\"/static/f5e1e2f64382811c2e8c640546e34fd4/ca1dc/img_1.png\"\n        srcset=\"/static/f5e1e2f64382811c2e8c640546e34fd4/e7570/img_1.png 170w,\n/static/f5e1e2f64382811c2e8c640546e34fd4/f46e7/img_1.png 340w,\n/static/f5e1e2f64382811c2e8c640546e34fd4/ca1dc/img_1.png 680w,\n/static/f5e1e2f64382811c2e8c640546e34fd4/02d09/img_1.png 1020w,\n/static/f5e1e2f64382811c2e8c640546e34fd4/c84e4/img_1.png 1037w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">img_1.png</figcaption>\n  </figure></p>\n<h2 id=\"webxml\" style=\"position:relative;\">web.xml<a href=\"#webxml\" aria-label=\"webxml permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>web.xml íŒŒì¼ì€ í†°ìº£ì— ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì–´ë–»ê²Œ ë°°í¬í•˜ê³  ì‹¤í–‰í• ì§€ì— ëŒ€í•œ ê¸°ë³¸ ì„¤ì •ì„ ì œê³µí•œë‹¤.\nì„œë¸”ë¦¿ ì‚¬ì–‘ì— ë”°ë¥´ë©´ ëª¨ë“  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” deployment descriptor(web.xml)ê°€ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.\në§Œì•½ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ë§ˆë‹¤ ê°œë³„ ë°°í¬ ì„¤ëª…ìë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ í•´ë‹¹ ê°œë³„ ì„¤ì •ì´ web.xml ì„¤ì •ì„ ë®ì–´ì”Œìš´ë‹¤.</p>\n<p>ì•„ë˜ì™€ ê°™ì€ URLë¡œ ìš”ì²­ì„ ë°›ìœ¼ë©´ tomcatì˜ ê° êµ¬ì„±ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ íë¦„ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.</p>\n<p><code class=\"language-text\">https://www.example.com/store/book/</code></p>\n<ul>\n<li>https://: : Connectorë¡œ SSL ì„¤ì • (/conf/server.xml)</li>\n<li>www.example.com : Virtual host name (/conf/server.xml)</li>\n<li>/store : context path (Context Descriptor XML)</li>\n<li>/book : ì„œë¸”ë¦¿ ë§µí•‘ (/WEB-INF/web.xml) </li>\n</ul>\n<p>ìœ„ URLì˜ í”„ë¡œí† ì½œ(https://) ë¶€ë¶„ì´ ë¨¼ì € ì„œë¹„ìŠ¤ì—ì„œ ë¶„ì„ë˜ê³  Coyote Connectorê°€ ìš”ì²­ì„ ì—”ì§„ìœ¼ë¡œ ì „ë‹¬ëœë‹¤.\në‹¤ìŒìœ¼ë¡œ, ì—”ì§„ì—ì„œ í˜¸ìŠ¤íŠ¸ ì´ë¦„(www.example.com)ì„ íŒŒì‹±í•˜ì—¬ í˜¸ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„ íƒí•œë‹¤.\ní˜¸ìŠ¤íŠ¸ëŠ” ë°°í¬ëœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸(/store)ì— ëŒ€í•´ URLì„ ë§µí•‘í•˜ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ web.xmlì— ì˜í•´ ì„œë¸”ë¦¿ ë§µí•‘ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<h2 id=\"Connector-ì•„í‚¤í…ì²˜\" style=\"position:relative;\">Connector ì•„í‚¤í…ì²˜<a href=\"#Connector-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"Connector ì•„í‚¤í…ì²˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Tomcatì—ëŠ” Javaë¡œ ì‘ì„±ëœ org.apache.catalina.Connector ì»´í¬ë„ŒíŠ¸ê°€\nìˆë‹¤. <a href=\"https://github.com/Oreste-Luci/apache-tomcat-8.0.26-src/blob/master/java/org/apache/catalina/connector/Connector.java\">Connector</a> ì¢…ë¥˜ì—ëŠ” HTTP/HTTPS í˜¸ì¶œì„ ìœ„í•œ\nHTTP 1.1 ì»¤ë„¥í„°, AJP(Apache JServ Protocol) í˜¸ì¶œì„ ìœ„í•œ AJP/1.3 ì»¤ë„¥í„°ê°€ ìˆë‹¤. HTTP2 ì»¤ë„¥í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ì¡´ HTTP 1.1 ì»¤ë„¥í„°ì„ ì‚¬ìš©í•˜ê³  HTTP2 UpgradeProtocolì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\nì„¤ì • ë°”ì‹ì€ server.xml íŒŒì¼ì˜ Connector íƒœê·¸ ë‚´ì—ì„œ protocol ì†ì„±ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>HTTP/1.1: org.apache.coyote.http11.Http11AprProtocol</li>\n<li>AJP/1.3: org.apache.coyote.ajp.AjpAprProtocol</li>\n</ul>\n<h3 id=\"AJP-ì»¤ë„¥í„°\" style=\"position:relative;\">AJP ì»¤ë„¥í„°<a href=\"#AJP-%EC%BB%A4%EB%84%A5%ED%84%B0\" aria-label=\"AJP ì»¤ë„¥í„° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>AJP(Apache JServ Protocol)ë€, Tomcatê³¼ ë‹¤ë¥¸ ì›¹ ì„œë²„ (ì˜ˆ: Apache) ê°„ì— í†µì‹ ì„ ìµœì í™”í•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œì´ë‹¤. ì›¹ ì„œë²„ì™€ Tomcat ê°„ì— í†µì‹ ì´ í•„ìš”í•  ë•Œ AJPëŠ” HTTP í”„ë¡ì‹œë³´ë‹¤ ë” ë¹ ë¥¸ ì„±ëŠ¥ì„ ì œê³µí•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ AJPëŠ” HTTPë³´ë‹¤\në¹ ë¥¸ ì„±ëŠ¥ì„ ì œê³µí• ê¹Œ?</p>\n<ul>\n<li>ë°”ì´ë„ˆë¦¬ í¬ë§· ì‚¬ìš©: AJP13ëŠ” ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ ë°”ì´ë„ˆë¦¬ í˜•ì‹ì„ ì‚¬ìš©í•œë‹¤. ì´ì „ ë²„ì „ì¸ AJP10ê³¼ AJP11ì€ í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ë°ì´í„° í˜•ì‹ì„ ì‚¬ìš©í•˜ì˜€ë‹¤. ë°”ì´ë„ˆë¦¬ í˜•ì‹ì€ í…ìŠ¤íŠ¸ í˜•ì‹ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ì—¬ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì—°ê²° ë° ì˜êµ¬ì  ì—°ê²°: ì›¹ ì„œë²„ì™€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ê°„ì˜ í†µì‹ ì€ ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. ì´ ì—°ê²°ì€ ì—¬ëŸ¬ ìš”ì²­ ë° ì‘ë‹µì— ëŒ€í•´ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆì–´ í•¸ë“œì‰ì´í¬ì— í•„ìš”í•œ ì¶”ê°€ì ì¸ ì‹œê°„ì´ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ë°”ì´ë„ˆë¦¬ ì¸ì½”ë”©: AJPëŠ” HTTP ëª…ë ¹ ë° í—¤ë”ì— ëŒ€í•œ ë°”ì´ë„ˆë¦¬ ì¸ì½”ë”©ì„ ì •ì˜í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, HTTPì˜ 'GET' ëª…ë ¹ì€ AJPì—ì„œëŠ” ë‹¨ì¼ ë°”ì´íŠ¸ ê°’ì¸ 2ë¡œ í‘œí˜„ëœë‹¤. ì´ëŸ¬í•œ ë°”ì´ë„ˆë¦¬ ì¸ì½”ë”©ì€ ë°ì´í„°ì˜ í¬ê¸°ë¥¼ ì¤„ì´ê³  ì „ì†¡ ì†ë„ë¥¼ ë†’ì¸ë‹¤.</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96d4c260f4c67ef7fbb74e5be92f13f9/4ec94/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACO0lEQVR42oVUyW7iQBDl/38ALqNh0cwJJDYhBIon7GCBAbMYbFbbQOAISa5v/ErTkklI5vBU3eWqV6+q2x25XC7YbrfY7/d38NwdDl6Af9Z3t+L7GKew2+1wOp0QcV0X0+kUi8UClmUJltYcuulAG3rQjC3+GHtoIx9dc4VF8E3FhTGbzURYxPd9zOdz2LaN5XKJRYCVbeHZPOKXfsPPZx8/nvb43X/Hk3mGs7RgOw6cEJhLUqqMeJ53R6hgTi0YUxv9sQXdmGBgLmDOgnWvh0ajgVqtJrZer4s6dviQkNYwDLjBXN5eb8Hc9ng5HfH+9orj4SDjoRrmKEhnjwiJ1WqFfr8P3z/gfL5I9dF4jOPxFOzPQub8r2VuTNNEs9lEL2hpMBiIj+SsTlImUoWu62i324JOpyOWgu4UMpkOkrKl0WgkwcViEblcTmw+n5dkxk4mE4wD1YwnmPtlywQJW60WEokEYrEYotEo4vG4+NScCdUyfd+eMquydU3TUKlURB0tfeGboMbx5aGoIH5kS5wlSbrdrhwUlVerVWSzWaTTaSnEq/OwZUXGFkjGeZVKJSSTSaRSKVnTR0VqhrTfXmwVPBwORRXVFAoFZDIZlMtlURu+fwTjP50yHaxEIqpgewxQ82SS2rMQD4etMpaWo+E3IVT/sjq99XothIfgr7jdbjI3Frper58utjrpTy2rk1IvB+8i93yJWIAXnGuV+BHqpZLXhm8YqzBRYbPZCIlSoNa04bgwGMdu/wK3qKMfUQpjewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"\"\n        src=\"/static/96d4c260f4c67ef7fbb74e5be92f13f9/ca1dc/img_2.png\"\n        srcset=\"/static/96d4c260f4c67ef7fbb74e5be92f13f9/e7570/img_2.png 170w,\n/static/96d4c260f4c67ef7fbb74e5be92f13f9/f46e7/img_2.png 340w,\n/static/96d4c260f4c67ef7fbb74e5be92f13f9/ca1dc/img_2.png 680w,\n/static/96d4c260f4c67ef7fbb74e5be92f13f9/4ec94/img_2.png 846w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">img_2.png</figcaption>\n  </figure></p>\n<h3 id=\"HTTP-Connector\" style=\"position:relative;\">HTTP Connector<a href=\"#HTTP-Connector\" aria-label=\"HTTP Connector permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>HTTP ConnectorëŠ” HTTP í”„ë¡œí† ì½œì„ êµ¬í˜„í•˜ëŠ” Java í´ë˜ìŠ¤ì´ë‹¤. HTTP ConnectorëŠ” ì„œë¸”ë¦¿ ë° JSPì— ëŒ€í•œ ìš”ì²­ ì´ì™¸ì—ë„ ì •ì  ì»¨í…ì¸  ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ìš”ì²­ì—ë„ ì‘ë‹µí•œë‹¤.\nHTTP ConnectorëŠ” HTTP ìš”ì²­ì„ êµ¬ë¬¸ ë¶„ì„í•˜ê³  Tomcat ì„œë¸”ë¦¿ ì—”ì§„ì— ì „ë‹¬í•˜ëŠ” ì½”ë“œê°€ ìˆë‹¤.\nHTTP Connector ì¢…ë¥˜ì—ëŠ” HTTP/1.1 ì»¤ë„¥í„°, NIO HTTP ì»¤ë„¥í„°, ë„¤ì´í‹°ë¸Œ ì½”ë“œì— ìµœì í™”ëœ APR HTTP ì»¤ë„¥í„° ë“±ì´ ì¡´ì¬í•œë‹¤.\nì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë²„ì˜ íŠ¹ì • TCP í¬íŠ¸ë²ˆí˜¸ì—ì„œ ì—°ê²°ì„ ëŒ€ê¸°(listen)í•œë‹¤.\ní•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ë‚´ì— ì—¬ëŸ¬ Connector ë“¤ì´ êµ¬ì„±ë  ìˆ˜ ìˆê³ , ìš”ì²­ì„ Engineì—ê²Œ ì „ë‹¬í•˜ì—¬ ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.\nConnector ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ì€ server.xmlì—ì„œ xml íƒœê·¸ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€8080â€</span>\n <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€HTTP/1.1â€</span>\n <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€150â€</span>\n <span class=\"token attr-name\">connectionTimeout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€20000â€</span>\n <span class=\"token attr-name\">redirectPort</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€8443â€</span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>HTTP 1.1 Connectorì˜ ë™ì‘ë°©ì‹ì€ ê³µì‹ë¬¸ì„œì— ì˜ ì„¤ëª…ë˜ì–´ìˆë‹¤. ë™ì‹œì— ë°›ì€ ìš”ì²­ì´ í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ worker ìŠ¤ë ˆë“œë³´ë‹¤ ë§ìœ¼ë©´, ì„¤ì •ëœ ìµœëŒ€ì¹˜(maxThreads ì†ì„±ì˜ ê°’)ê¹Œì§€ ì¶”ê°€ ìŠ¤ë ˆë“œê°€ ìƒì„±ëœë‹¤.\në” ë§ì€ ë™ì‹œ ìš”ì²­ì´ ì˜¤ê²Œë˜ë©´, í˜„ì¬ ì—°ê²° ìˆ˜ê°€ maxConnectionsì— ë„ë‹¬í•  ë•Œê¹Œì§€ Tomcatì€ ìƒˆë¡œìš´ ì—°ê²°ì„ acceptí•œë‹¤.\nì—°ê²°ì€ Connectorê°€ ìƒì„±í•œ ì„œë²„ ì†Œì¼“ì—ì„œ ì—°ê²°ì„ ì²˜ë¦¬í•  ìŠ¤ë ˆë“œê°€ ì‚¬ìš© ê°€ëŠ¥í•´ì§ˆ ë•Œê¹Œì§€ ëŒ€ê¸°íì— ë¨¸ë¬¼ê²Œ ëœë‹¤. maxConnectionsì— ë„ë‹¬í•˜ë©´, ìš´ì˜ ì²´ì œëŠ” ì¶”ê°€ ì—°ê²°ì„ íì— ë„£ëŠ”ë‹¤. ì´ ë•Œ, ìš´ì˜ ì²´ì œì—ì„œ ì œê³µí•˜ëŠ” ì—°ê²° íì˜ í¬ê¸°ëŠ” acceptCount ì†ì„±ìœ¼ë¡œ ì •ì˜í•  ìˆ˜\nìˆë‹¤. ìš´ì˜ ì²´ì œ íê°€ ê°€ë“ ì°¨ë©´, ì¶”ê°€ ì—°ê²° ìš”ì²­ì´ ê±°ë¶€ë˜ê±°ë‚˜ timeoutì´ ë°œìƒí•˜ê²Œ ëœë‹¤.\nìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´ ë¡œê·¸ì— <strong>http-nio-8080-exec-?</strong> ë¼ëŠ” Worker ìŠ¤ë ˆë“œ ì´ë¦„ì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ Worker ìŠ¤ë ˆë“œí’€ì„ ì´ˆê¸°í™”í•˜ëŠ” ë¡œì§ì´ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// https://github.com/apache/tomcat/blob/main/java/org/apache/tomcat/util/net/AbstractEndpoint.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    internalExecutor<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">TaskQueue</span> taskqueue<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskQueue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">TaskThreadFactory</span> tf<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskThreadFactory</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"-exec-\"</span><span class=\"token punctuation\">,</span>daemon<span class=\"token punctuation\">,</span><span class=\"token function\">getThreadPriority</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    executor<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span><span class=\"token function\">getMinSpareThreads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">getMaxThreads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SECONDS</span><span class=\"token punctuation\">,</span>taskqueue<span class=\"token punctuation\">,</span>tf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    taskqueue<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">)</span>executor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">executor = new ThreadPoolExecutor(getMinSpareThreads(), getMaxThreads(), 60, TimeUnit.SECONDS,taskqueue, tf)</code> ë¼ì¸ì„ ë³´ë©´ Executor êµ¬í˜„ì²´ë¡œ ThreadPoolExecutorì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„\në³¼ ìˆ˜ ìˆë‹¤.\nThreadPoolExecutor ë™ì‘ì€ <a href=\"https://px201226.github.io/java-concurrency-executor/\">ì—¬ê¸°</a>ì— ì •ë¦¬í•´ë‘” ë‚´ìš©ì´ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì.\nThreadPoolExecutor ê¸°ë³¸ ë™ì‘ì€ ë‚´ë¶€ Queueê°€ ê½‰ ì°¨ì§€ ì•ŠëŠ” ì´ìƒ corePoolSizeë¥¼ ëŠ˜ë¦¬ì§€ ì•ŠëŠ”ë°, ê³µì‹ë¬¸ì„œì—ì„œ ìœ íœ´ ìŠ¤ë ˆë“œê°€ ì—†ìœ¼ë©´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤ëŠ” ë‚´ìš©ê³¼ ì°¨ì´ì ì´ ìˆë‹¤. ì´ ì ì€ ìƒì„±ìë¡œ ì£¼ì…í•œ TaskQueue ì˜ êµ¬í˜„ì„ ë³´ë©´ ì´í•´í•  ìˆ˜ ìˆë‹¤.   </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// https://github.com/apache/tomcat/blob/main/java/org/apache/tomcat/util/threads/TaskQueue.java</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TaskQueue</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">LinkedBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">offer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> o<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">//we can't do any checks</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">//we are maxed out on threads, simply queue the object</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSizeNoLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> parent<span class=\"token punctuation\">.</span><span class=\"token function\">getMaximumPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">//we have idle threads, just add it to the queue</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">getSubmittedCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> parent<span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSizeNoLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">//if we have less threads than maximum force creation of a new thread</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSizeNoLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> parent<span class=\"token punctuation\">.</span><span class=\"token function\">getMaximumPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">//if we reached here, we need to add it to the queue</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>TaskQueueëŠ” í†°ìº£ì—ì„œ LinkedBlockingQueueë¥¼ í™•ì¥í•œ íë¡œ BlockingQueue::offer ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•œë‹¤.\noffer ë©”ì„œë“œì˜ ë‚´ìš©ì„ ì‚´í´ë³´ë©´ í˜„ì¬ ìŠ¤ë ˆë“œ í’€ì˜ í¬ê¸°ê°€ ìµœëŒ€ ìŠ¤ë ˆë“œí’€ í¬ê¸°ê°€ ë™ì¼í•˜ë©´ ì‘ì—…ì„ íì— ì¶”ê°€í•œë‹¤.\nê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ì œì¶œëœ ì‘ì—… ìˆ˜ê°€ í˜„ì¬ ìŠ¤ë ˆë“œ í’€ë³´ë‹¤ ì‘ì€ ê²½ìš°, ì¦‰ ìœ íœ´ ìŠ¤ë ˆë“œê°€ ìˆëŠ” ê²½ìš° ì‘ì—…ì„ íì— ì¶”ê°€í•œë‹¤.\nê·¸ê²ƒë„ ì•„ë‹ˆë¼ë©´ í˜„ì¬ í’€ ì‚¬ì´ì¦ˆê°€ maximum í’€ì‚¬ì´ì¦ˆë³´ë‹¤ ì‘ìœ¼ë©´ falseë¥¼ ë°˜í™˜í•˜ì—¬ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤.\nì•„ë˜ëŠ” HTTP Connectorë¥¼ êµ¬ì„±í•˜ëŠ” ì†ì„±ë“¤ì´ë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/config/http.html\">ì—¬ê¸°ì„œ</a> í™•ì¸í•  ìˆ˜ ìˆë‹¤.   </p>\n<table>\n<thead>\n<tr>\n<th>ì†ì„±ëª…</th>\n<th>ì„¤ëª…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>maxConnections</td>\n<td>ì„œë²„ê°€ í•œ ë²ˆì— ìˆ˜ìš©í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì—°ê²° ìˆ˜. ì´ ìˆ«ìì— ë„ë‹¬í•˜ë©´ ì„œë²„ëŠ” ì¶”ê°€ë¡œ í•œ ê°œì˜ ì—°ê²°ì„ ìˆ˜ìš©í•˜ì§€ë§Œ ì²˜ë¦¬í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì´ ì¶”ê°€ ì—°ê²°ì€ ì²˜ë¦¬ ì¤‘ì¸ ì—°ê²° ìˆ˜ê°€ maxConnections ì•„ë˜ë¡œ ë–¨ì–´ì§ˆ ë•Œê¹Œì§€ ì°¨ë‹¨ëœë‹¤. ì œí•œì— ë„ë‹¬í–ˆì„ ë•Œ ìš´ì˜ ì²´ì œëŠ” ì—¬ì „íˆ acceptCount ì„¤ì •ì„ ê¸°ë°˜ìœ¼ë¡œ ì—°ê²°ì„ ìˆ˜ë½í•  ìˆ˜ ìˆë‹¤. NIO ë° NIO2ì˜ ê²½ìš° ê¸°ë³¸ê°’ì€ 10,000ì´ë‹¤. APR/nativeì˜ ê²½ìš° ê¸°ë³¸ê°’ì€ 8,192ì´ë‹¤. NIO/NIO2ì—ë§Œ í•´ë‹¹ë˜ëŠ”ë°, ì´ ê°’ì„ -1ë¡œ ì„¤ì •í•˜ë©´ maxConnections ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ê³  ì—°ê²°ì´ ê³„ì‚°ë˜ì§€ ì•ŠëŠ”ë‹¤.</td>\n</tr>\n<tr>\n<td>acceptCount</td>\n<td>maxConnectionsì— ë„ë‹¬í–ˆì„ ë•Œ ë“¤ì–´ì˜¤ëŠ” ì—°ê²° ìš”ì²­ì— ëŒ€í•´ ìš´ì˜ ì²´ì œì—ì„œ ì œê³µí•˜ëŠ” ëŒ€ê¸°ì—´ì˜ ìµœëŒ€ ê¸¸ì´. ìš´ì˜ ì²´ì œëŠ” ì´ ì„¤ì •ì„ ë¬´ì‹œí•˜ê³  ëŒ€ê¸°ì—´ì— ë‹¤ë¥¸ í¬ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ íê°€ ê°€ë“ ì°¨ë©´ ìš´ì˜ ì²´ì œì—ì„œ ì¶”ê°€ ì—°ê²°ì„ ê±°ë¶€í•˜ê±°ë‚˜ íƒ€ì„ì•„ì›ƒì´ ë°œìƒí•œë‹¤. ê¸°ë³¸ê°’ì€ 100</td>\n</tr>\n<tr>\n<td>maxKeepAliveRequest</td>\n<td>ì´ ì†ì„±ì€ HTTP ìš”ì²­ì˜ \"keep-alive\" ë™ì‘ì„ ì œì–´í•˜ë©° ì§€ì†ì ì¸ ì—°ê²°(ì¦‰, ë™ì¼í•œ HTTP ì—°ê²°ì„ í†µí•´ ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ í•¨)ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ì„œë²„ì—ì„œ ì—°ê²°ì´ ë‹«í ë•Œê¹Œì§€ íŒŒì´í”„ë¼ì¸í™”í•  ìˆ˜ ìˆëŠ” ìš”ì²­ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. maxKeepAliveRequestì˜ ê¸°ë³¸ê°’ì€ 100ì´ë©°, 1ë¡œ ì„¤ì •í•˜ë©´ HTTP keep-alive ë™ì‘ê³¼ íŒŒì´í”„ë¼ì¸í™”ê°€ ë¹„í™œì„±í™”ëœë‹¤.</td>\n</tr>\n<tr>\n<td>maxSpareThreads</td>\n<td>maxSpareThreads ì†ì„±ì€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ìŠ¤ë ˆë“œì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì œì–´í•œë‹¤. Tomcatì´ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê²ƒë“¤ì„ ì¤‘ì§€í•˜ê¸° ì „ì— í—ˆìš©ë  ìˆ˜ ìˆëŠ” ìŠ¤ë ˆë“œì˜ ìµœëŒ€ ìˆ˜ë‹¤. maxSpareThreadsì˜ ê¸°ë³¸ê°’ì€ 50ì´ë‹¤.</td>\n</tr>\n<tr>\n<td>minSpareThreads</td>\n<td>minSpareThreads ì†ì„±ì€ ì»¤ë„¥í„°ê°€ ì´ˆê¸°í™”ë  ë•Œ ì‹œì‘ë˜ëŠ” ìŠ¤ë ˆë“œì˜ ìµœì†Œ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. minSpareThreadsì˜ ê¸°ë³¸ê°’ì€ 4ë‹¤.</td>\n</tr>\n<tr>\n<td>maxThreads</td>\n<td>ì´ ì†ì„±ì€ ì´ ì»¤ë„¥í„°ê°€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìƒì„±ë˜ëŠ” ìŠ¤ë ˆë“œì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. ì´ëŠ” ì°¨ë¡€ë¡œ ì»¤ë„¥í„°ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë™ì‹œ ìš”ì²­ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. maxThreadsì˜ ê¸°ë³¸ê°’ì€ 200 ìŠ¤ë ˆë“œë‹¤.</td>\n</tr>\n<tr>\n<td>socketBuffer</td>\n<td>ì†Œì¼“ ì¶œë ¥ ë²„í¼ë§ì— ì‚¬ìš©ë  ë²„í¼ì˜ í¬ê¸°(ë°”ì´íŠ¸ ë‹¨ìœ„)ë¥¼ ì§€ì •í•œë‹¤. ì†Œì¼“ ë²„í¼ì˜ ì‚¬ìš©ì€ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¨ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ 9,000 ë°”ì´íŠ¸ í¬ê¸°ì˜ ë²„í¼ê°€ ì‚¬ìš©ë˜ë©°, socketBufferë¥¼ -1ë¡œ ì„¤ì •í•˜ë©´ ë²„í¼ë§ì´ êº¼ì§„ë‹¤.</td>\n</tr>\n<tr>\n<td>tcpNoDelay</td>\n<td>ì´ ì†ì„±ì´ trueë¡œ ì„¤ì •ë˜ë©´, TCP<em>NO</em>DELAY ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ ì˜µì…˜ì´ í™œì„±í™”ëœë‹¤. ê¸°ë³¸ê°’ì€ trueë‹¤.</td>\n</tr>\n<tr>\n<td>connectionLinger</td>\n<td>ì´ Connectorì—ì„œ ì‚¬ìš©í•˜ëŠ” ì†Œì¼“ì´ ë‹«í˜”ì„ ë•Œ ì–¼ë§ˆ ë™ì•ˆ ëŒ€ê¸°í• ì§€ ì •í•˜ëŠ” ì´ˆ ë‹¨ìœ„ì˜ ì‹œê°„ì´ë‹¤. ê¸°ë³¸ê°’ì€ -1ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ì„œ ì†Œì¼“ ì§€ì† ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ëœë‹¤.</td>\n</tr>\n<tr>\n<td>connectionTimeout</td>\n<td>ì´ ConnectorëŠ” ì—°ê²°ì„ ìˆ˜ë½í•œ í›„ ìš”ì²­ URI ì¤„ì´ ì œì‹œë  ë•Œê¹Œì§€ ì–¼ë§ˆ ë™ì•ˆ ê¸°ë‹¤ë¦´ì§€ë¥¼ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì •í•œë‹¤. -1ì„ ì‚¬ìš©í•˜ë©´ ì‹œê°„ ì œí•œì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ë‹¤. ê¸°ë³¸ê°’ì€ 60000(ì¦‰, 60ì´ˆ)ì´ì§€ë§Œ Tomcatì— í¬í•¨ëœ í‘œì¤€ server.xmlì—ì„œëŠ” ì´ ê°’ì„ 20000(ì¦‰, 20ì´ˆ)ìœ¼ë¡œ ì„¤ì •í•œë‹¤ëŠ” ê²ƒì„ ì£¼ì˜í•˜ë¼. disableUploadTimeoutì´ falseë¡œ ì„¤ì •ë˜ì§€ ì•Šìœ¼ë©´, ìš”ì²­ ë³¸ë¬¸(ìˆëŠ” ê²½ìš°)ì„ ì½ì„ ë•Œ ì´ ì‹œê°„ ì œí•œë„ ì‚¬ìš©ëœë‹¤.</td>\n</tr>\n<tr>\n<td>keepAliveTimeout</td>\n<td>ì´ ConnectorëŠ” ë‹¤ë¥¸ HTTP ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê¸° ì „ì— ì—°ê²°ì„ ë‹«ì„ ë•Œê¹Œì§€ ì–¼ë§ˆ ë™ì•ˆ ê¸°ë‹¤ë¦´ì§€ë¥¼ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì •í•œë‹¤. ê¸°ë³¸ê°’ì€ connectionTimeout ì†ì„±ì— ì„¤ì •ëœ ê°’ì„ ì‚¬ìš©í•œë‹¤. -1 ê°’ì„ ì‚¬ìš©í•˜ë©´ ì‹œê°„ ì œí•œì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ë‹¤.</td>\n</tr>\n<tr>\n<td>maxKeepAliveRequests</td>\n<td>ì„œë²„ì— ì˜í•´ ì—°ê²°ì´ ë‹«í ë•Œê¹Œì§€ íŒŒì´í”„ë¼ì¸ì— ë„£ì„ ìˆ˜ ìˆëŠ” HTTP ìš”ì²­ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì •í•œë‹¤. ì´ ì†ì„±ì„ 1ë¡œ ì„¤ì •í•˜ë©´ HTTP/1.0 ì§€ì† ì—°ê²°ê³¼ HTTP/1.1 ì§€ì† ì—°ê²° ë° íŒŒì´í”„ë¼ì´ë‹ì´ ëª¨ë‘ ë¹„í™œì„±í™”ëœë‹¤. -1ë¡œ ì„¤ì •í•˜ë©´ íŒŒì´í”„ë¼ì¸ ë˜ëŠ” ì§€ì† ì—°ê²° HTTP ìš”ì²­ì˜ ìˆ˜ì— ì œí•œì´                                                                                                                                                                  ì—†ë‹¤. ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ì´ ì†ì„±ì€ 100ìœ¼ë¡œ ì„¤ì •ëœë‹¤.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"HTTP-NIO-Connector\" style=\"position:relative;\">HTTP NIO Connector<a href=\"#HTTP-NIO-Connector\" aria-label=\"HTTP NIO Connector permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>HTTP Connectorì—ëŠ” ë‚´ë¶€ í”„ë¡œí† ì½œì— ë”°ë¼ í¬ê²Œ 3ê°€ì§€ í”„ë¡œí† ì½œ êµ¬í˜„ì²´ê°€ ì¡´ì¬í•œë‹¤.\nBIO ConnnectorëŠ” Tomcat 8.0ë¶€í„° ì‚­ì œë˜ì–´ ì—¬ê¸°ì„œëŠ” NIO Connector ì¤‘ì‹¬ìœ¼ë¡œ ì•Œì•„ë³¸ë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th>ì´ë¦„</th>\n<th>ì„¤ëª…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>BIO Connector</td>\n<td>Tomcat 7ì˜ ê¸°ë³¸ Connector (org.apache.coyote.http11.Http11Protocol)<br/>Java Blocking APIë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„</td>\n</tr>\n<tr>\n<td>NIO Connector</td>\n<td>Tomcat 8 ì´í›„ ê¸°ë³¸ Connector (org.apache.coyote.http11.Http11NioProtocol)<br/> Java NIO APIë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„</td>\n</tr>\n<tr>\n<td>APR Connector</td>\n<td>APR ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë” ë‚˜ì€ ì„±ëŠ¥ì˜ Connector (org.apache.coyote.http11.Http11AprProtocol)<br/>JNI(Java Native Interface) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Http11NioProtocol\" style=\"position:relative;\">Http11NioProtocol<a href=\"#Http11NioProtocol\" aria-label=\"Http11NioProtocol permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Java Non-Blocking IOì˜ í•µì‹¬ì€ Selectorë¥¼ ì´ìš©í•œ ì±„ë„ ê´€ë¦¬ì´ë‹¤.\nê´€ì‹¬ìˆëŠ” ì±„ë„(ìš”ì²­, ì½ê¸°, ì¤€ë¹„ì™„ë£Œ ë“±)ì— Selectorì— ë“±ë¡í•˜ê³  ì‹±ê¸€ ìŠ¤ë ˆë“œê°€ Selectorë¥¼ í´ë§í•˜ì—¬ ì¤€ë¹„ëœ ì±„ë„ì— ëŒ€í•´ ì§€ì •ëœ ì½œë°±ì„ ì‹¤í–‰í•˜ì—¬ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.\nHTTP NIO Connector ë„ ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìˆìœ¼ë©°, ì•„ë˜ ê·¸ë¦¼ê³¼ ì•„í‚¤í…ì²˜ë¥¼ ê°€ì§„ë‹¤.<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34f49f6cf213fa6ff308eafb28c1eb71/476b8/img_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVR42qWT6QqAQAiE9/3fMyi67zvjEyaW6F8Louk6jq6FYRis6zpDr+v6S6ZpsgBQ3/c2jqNd12V/DqBhWRY35nl2lgiV+CameCzEzvO04zhcy+ZuIAi7uq6tLEurqsratrV9353xW8QE4Y4Kb9vmZIIcBKmCVoL870MyXXAfEk3TuM1bOCBB5pimqRVF4WAcwACFmVrDViGApVXEZ6iHoRI2LfONzSjyPLcsyyxJErcZC+ACAhR5AJkhIFzWLGGLxq+itERHFMNHDB9dkYf/YUgrVAEENiQyF7Ufr1S8dxoZpJ5HUXtUox0NWvsZP5Rm9bWzvjYkaLckBGL7S77+FLBuRgRZdKuGFwMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"NIO Connector êµ¬ì„±\"\n        title=\"\"\n        src=\"/static/34f49f6cf213fa6ff308eafb28c1eb71/ca1dc/img_3.png\"\n        srcset=\"/static/34f49f6cf213fa6ff308eafb28c1eb71/e7570/img_3.png 170w,\n/static/34f49f6cf213fa6ff308eafb28c1eb71/f46e7/img_3.png 340w,\n/static/34f49f6cf213fa6ff308eafb28c1eb71/ca1dc/img_3.png 680w,\n/static/34f49f6cf213fa6ff308eafb28c1eb71/476b8/img_3.png 803w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">NIO Connector êµ¬ì„±</figcaption>\n  </figure></p>\n<h4>Acceptor</h4>\n<p>Acceptor ìŠ¤ë ˆë“œëŠ” serverSocket.accept() ë¡œ ì†Œì¼“ ì—°ê²°ì„ í•˜ê³  ë°˜í™˜ëœ SocketChannel ì„\nTomcatì˜ NioChannelë¡œ ìº¡ìŠí™”í•œë‹¤. NioChannelì€ ë‹¤ì‹œ PollerEventë¡œ ë˜í•‘ë˜ê³  ì´ë²¤íŠ¸ íì— ë“±ë¡í•œë‹¤.\nAcceptor ìŠ¤ë ˆë“œëŠ” ì†Œì¼“ ì—°ê²° ìˆ˜ë½ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ìƒì„±ì ìŠ¤ë ˆë“œë¥¼ ì˜ë¯¸í•œë‹¤.</p>\n<h4>Poller</h4>\n<p>Non Blocking IO ì²˜ë¦¬ì˜ í•µì‹¬ì¸ ì´ë²¤íŠ¸ ë£¨í”„ ë¡œì§ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. PollerëŠ” ì´ë²¤íŠ¸ íì—ì„œ PollerEventë¥¼ ì†Œë¹„í•œë‹¤.\nPollerEvent ì—ì„œ êº¼ë‚¸ Channelì„ Selectorì— ë“±ë¡í•˜ê³  SelectorëŠ” ì½ì„ ìˆ˜ ìˆëŠ” ì†Œì¼“ì„ ìˆœíšŒí•˜ë©° í•´ë‹¹ ì†Œì¼“ì„ Worker ìŠ¤ë ˆë“œì— ì „ë‹¬í•œë‹¤.</p>\n<h4>Executor(Worker Thread)</h4>\n<p>Worker ìŠ¤ë ˆë“œì—ì„œëŠ” Pollerë¡œë¶€í„° ì†Œì¼“ì„ ë°›ì•„ SocketProcessor ê°ì²´ë¡œ ìº¡ìŠí™”í•˜ê³  Http11NioProcessorì—ì„œ CoyoteAdapterë¥¼ í˜¸ì¶œí•œë‹¤.\nìŠ¤í”„ë§ ë¡œê·¸ì— ì¶œë ¥ë˜ëŠ” <code class=\"language-text\">http-nio-8080-exec-?</code> ê°€ ë°”ë¡œ ì´ Worker ìŠ¤ë ˆë“œë¥¼ ì˜ë¯¸í•œë‹¤.\nCoyoteAdapterëŠ” Connectorì™€ Container(Engine) ì‚¬ì—ì— ë‹¤ë¦¬ ì—­í• ì„ í•œë‹¤. ìš”ì²­ì˜ ë§¤ê°œ ë³€ìˆ˜ë¥¼ íŒŒì‹±í•˜ê³  í•´ë‹¹ contextë¥¼ ì°¾ì•„ Engineì—ê²Œ ì „ë‹¬í•œë‹¤.\nEngineì€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì—¬ ë°˜í™˜ê°’ì„ ë°˜í™˜í•œë‹¤.</p>\n<h3 id=\"ìš”ì²­-ì²˜ë¦¬\" style=\"position:relative;\">ìš”ì²­ ì²˜ë¦¬<a href=\"#%EC%9A%94%EC%B2%AD-%EC%B2%98%EB%A6%AC\" aria-label=\"ìš”ì²­ ì²˜ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë‹¤ìŒìœ¼ë¡œ Tomcatì—ì„œ ìš”ì²­ì„ ì–´ë–»ê²Œ ìˆ˜ë½í•˜ê³  ì„œë¸”ë¦¿ê¹Œì§€ ì „ë‹¬ë˜ì–´ ì²˜ë¦¬ë˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ì.</p>\n<p>ë¨¼ì €, Tomcatì´ run í•˜ê²Œ ë˜ë©´ pollerì™€ acceptor ìŠ¤ë ˆë“œë¥¼ í•˜ë‚˜ì”© ìƒì„±í•˜ê³  ì‹œì‘ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// poller ìŠ¤ë ˆë“œ ìƒì„± ë° ì‹œì‘</span>\npoller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Poller</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Thread</span> pollerThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>poller<span class=\"token punctuation\">,</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"-Poller\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npollerThread<span class=\"token punctuation\">.</span><span class=\"token function\">setPriority</span><span class=\"token punctuation\">(</span>threadPriority<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npollerThread<span class=\"token punctuation\">.</span><span class=\"token function\">setDaemon</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npollerThread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">startAcceptorThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    acceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Acceptor</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">String</span> threadName <span class=\"token operator\">=</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"-Acceptor\"</span><span class=\"token punctuation\">;</span>\n    acceptor<span class=\"token punctuation\">.</span><span class=\"token function\">setThreadName</span><span class=\"token punctuation\">(</span>threadName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>acceptor<span class=\"token punctuation\">,</span> threadName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t<span class=\"token punctuation\">.</span><span class=\"token function\">setPriority</span><span class=\"token punctuation\">(</span><span class=\"token function\">getAcceptorThreadPriority</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t<span class=\"token punctuation\">.</span><span class=\"token function\">setDaemon</span><span class=\"token punctuation\">(</span><span class=\"token function\">getDaemon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì—ì„œ ì‚´í´ë´¤ë“¯ì´ pollerì™€ acceptor ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë˜ë©´ ì´ë²¤íŠ¸ íë¥¼ ì²˜ë¦¬í•˜ê±°ë‚˜ ì†Œì¼“ ì—°ê²°ì„ ìˆ˜ë½í•˜ëŠ”ë°, ì´ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë¬´í•œë£¨í”„ë¡œ êµ¬í˜„ëœë‹¤.</p>\n<p>Acceptor ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë˜ë©´ ServerSocketChannelì˜ accept() ë©”ì„œë“œë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì„ ìˆ˜ë½í•  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.\naccept()ëŠ” blocking ëª¨ë“œë¡œ ë™ì‘ëœë‹¤. ì´ëŠ” í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì„ ìœ„í•œ ìŠ¤ë ˆë“œë¥¼ ë”°ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•˜ê²Œ non-blocking ëª¨ë“œë¡œ í´ë§í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì¸ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NioEndpoint</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractJsseEndpoint</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NioChannel</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token class-name\">SocketChannel</span> <span class=\"token function\">serverSocketAccept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">SocketChannel</span> result <span class=\"token operator\">=</span> serverSock<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Bug does not affect Windows platform and Unix Domain Socket. Skip the check.</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">JrePlatform</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IS_WINDOWS</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">getUnixDomainSocketPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">SocketAddress</span> currentRemoteAddress <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">getRemoteAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">long</span> currentNanoTime <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">nanoTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentRemoteAddress<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>previousAcceptedSocketRemoteAddress<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n\t\t\t\t\tcurrentNanoTime <span class=\"token operator\">-</span> previousAcceptedSocketNanoTime <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">(</span>sm<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"endpoint.err.duplicateAccept\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\tpreviousAcceptedSocketRemoteAddress <span class=\"token operator\">=</span> currentRemoteAddress<span class=\"token punctuation\">;</span>\n\t\t\tpreviousAcceptedSocketNanoTime <span class=\"token operator\">=</span> currentNanoTime<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë§Œì•½, ìœ„ì—ì„œ ìš”ì²­ì´ accept() ë˜ì–´ ì†Œì¼“ ì—°ê²°ì´ ì´ë£¨ì–´ì§€ë©´ ë°˜í™˜ëœ SocketChannelì„ ì´ë²¤íŠ¸ íì— ë“±ë¡í•œë‹¤.\nì´ ì‘ì—…ì€ Acceptor ìŠ¤ë ˆë“œì—ì„œ NioEndpointì€ setSocketOptions() ë©”ì„œë“œë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NioEndpoint</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractJsseEndpoint</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NioChannel</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">setSocketOptions</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketChannel</span> socket<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">NioSocketWrapper</span> socketWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token comment\">//...</span>\n\t\t\t<span class=\"token class-name\">NioSocketWrapper</span> newWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NioSocketWrapper</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\tsocketWrapper <span class=\"token operator\">=</span> newWrapper<span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">//...</span>\n\t\t\tpoller<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">//...</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">NioSocketWrapper</span> socketWrapper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tsocketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">interestOps</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//this is what OP_REGISTER turns into.</span>\n\t\t<span class=\"token class-name\">PollerEvent</span> pollerEvent <span class=\"token operator\">=</span> <span class=\"token function\">createPollerEvent</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span> <span class=\"token constant\">OP_REGISTER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">addEvent</span><span class=\"token punctuation\">(</span>pollerEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>        </code></pre></div>\n<p>SocketChannelì„ NioSocketWrapperë¡œ ë©í•‘ í›„ poller.register()ë¡œ Poller ì´ë²¤íŠ¸ ë“±ë¡ì´ ëë‚˜ë©´, Acceptor ìŠ¤ë ˆë“œëŠ” ë‹¤ìŒ ìš”ì²­ì„ ìˆ˜ë½í•˜ê¸° ìœ„í•´ ì²˜ìŒì˜ accept()ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ ëŒ€ê¸°í•˜ê²Œ ëœë‹¤.\nì´ë¡œì¨, Acceptorì˜ ì—­í• ì€ ëë‚˜ê³  ë‹¤ìŒ ì‘ì—…ì€ Poller ìŠ¤ë ˆë“œì—ì„œ ì´ë£¨ì–´ì§„ë‹¤.</p>\n<p>Poller ìŠ¤ë ˆë“œë„ Acceptor ìŠ¤ë ˆë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¬´í•œë£¨í”„ë¥¼ ëŒë©´ì„œ ì´ë²¤íŠ¸ íì— ë“±ë¡ëœ ì´ë²¤íŠ¸ê°€ ìˆëŠ”ì§€ í´ë§ ë°©ì‹ìœ¼ë¡œ ê²€ì‚¬í•œë‹¤.\ní´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì´ ì´ë£¨ì–´ì§„ë‹¤ë©´ ë‹¤ìŒìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ í•  ì°¨ë¡€ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ê°’ì„ ì½ì–´ ë“¤ì´ê¸° ìœ„í•´ì„œ Selectorì— OP<em>READë¥¼ ë“±ë¡í•œë‹¤.\n`sc.register(getSelector(), SelectionKey.OP</em>READ, socketWrapper)`</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Poller</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">boolean</span> result <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token class-name\">PollerEvent</span> pe <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> size <span class=\"token operator\">=</span> events<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> size <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>pe <span class=\"token operator\">=</span> events<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tresult <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">NioSocketWrapper</span> socketWrapper <span class=\"token operator\">=</span> pe<span class=\"token punctuation\">.</span><span class=\"token function\">getSocketWrapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">SocketChannel</span> sc <span class=\"token operator\">=</span> socketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">getSocket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getIOChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">int</span> interestOps <span class=\"token operator\">=</span> pe<span class=\"token punctuation\">.</span><span class=\"token function\">getInterestOps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sc <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>sm<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"endpoint.nio.nullSocketChannel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tsocketWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>interestOps <span class=\"token operator\">==</span> <span class=\"token constant\">OP_REGISTER</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\tsc<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>sm<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"endpoint.nio.registerFail\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">//..</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê·¸ í›„, Poller ìŠ¤ë ˆë“œëŠ” selector.select() ë¡œ ì±„ë„ì—ì„œ ì´ë²¤íŠ¸ ìˆ˜ì‹ ë¥¼ ìˆ˜ì‹ í•œë‹¤.\në°˜í™˜ëœ SelectionKeyì˜ attatchmentì—ì„œ NioSocketWrapperì„ êº¼ë‚´ì™€ì„œ processKey()ë¡œ ì†Œì¼“ì„ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Poller</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Loop until destroy() is called</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token keyword\">boolean</span> hasEvents <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>close<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\thasEvents <span class=\"token operator\">=</span> <span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wakeupCounter<span class=\"token punctuation\">.</span><span class=\"token function\">getAndSet</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token comment\">// If we are here, means we have other stuff to do</span>\n\t\t\t\t\t\t<span class=\"token comment\">// Do a non blocking select</span>\n\t\t\t\t\t\tkeyCount <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectNow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\tkeyCount <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>selectorTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\twakeupCounter<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\n\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token comment\">// ... </span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t<span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> iterator <span class=\"token operator\">=</span>\n\t\t\t\t\tkeyCount <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Walk through the collection of ready keys and dispatch</span>\n\t\t\t<span class=\"token comment\">// any active event.</span>\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>iterator <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">SelectionKey</span> sk <span class=\"token operator\">=</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\titerator<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">NioSocketWrapper</span> socketWrapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NioSocketWrapper</span><span class=\"token punctuation\">)</span> sk<span class=\"token punctuation\">.</span><span class=\"token function\">attachment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\">// Attachment may be null if another thread has called</span>\n\t\t\t\t<span class=\"token comment\">// cancelledKey()</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>socketWrapper <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token function\">processKey</span><span class=\"token punctuation\">(</span>sk<span class=\"token punctuation\">,</span> socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>processKey() ì—ì„œëŠ” ì†Œì¼“ ì²˜ë¦¬ì— í•„ìš”í•œ ê°ì²´(SocketProcessorBase)ë¥¼ ìƒì„±í•˜ê³ , ìŠ¤ë ˆë“œí’€ Exectorë¥¼ í†µí•´ ì†Œì¼“ ì²˜ë¦¬ë¥¼ ìœ„ì„í•œë‹¤.\nExecutor ìŠ¤ë ˆë“œëŠ” Worker Pool ìŠ¤ë ˆë“œë¥¼ ì˜ë¯¸í•œë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AbstractEndpoint</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">S</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">U</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">processSocket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketWrapperBase</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">S</span><span class=\"token punctuation\">></span></span> socketWrapper<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SocketEvent</span> event<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> dispatch<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token comment\">//...</span>\n\t\t<span class=\"token class-name\">SocketProcessorBase</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">S</span><span class=\"token punctuation\">></span></span> sc <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sc <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tsc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createSocketProcessor</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\tsc<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token class-name\">Executor</span> executor <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dispatch <span class=\"token operator\">&amp;&amp;</span> executor <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\texecutor<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>sc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\tsc<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì†Œì¼“ ì²˜ë¦¬ë¥¼ ë„˜ê²¨ ë°›ì€ Workerì—ì„œëŠ” reqeust, response ê°ì²´ë¥¼ ì„¸íŒ…í•˜ê³ , CoyoteAdapterë¥¼ í†µí•´ ì„œë¸”ë¦¿ìœ¼ë¡œ ì†Œì¼“ì²˜ë¦¬ë¥¼ ìœ„ì„í•œë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// SocketProcessor.java</span>\n<span class=\"token function\">getHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">,</span><span class=\"token class-name\">SocketEvent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OPEN_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// AbstractProcessorLight.java</span>\nstate<span class=\"token operator\">=</span><span class=\"token function\">service</span><span class=\"token punctuation\">(</span>socketWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ìš”ì²­ ìœ„ì„</span>\n\n<span class=\"token comment\">// Http11Processor.java</span>\n<span class=\"token function\">getAdapter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">service</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// CoyoteAdapterë¡œ ìš”ì²­ ìœ„ì„  </span>\n\n<span class=\"token comment\">// CoyoteAdapter.java</span>\nconnector<span class=\"token punctuation\">.</span><span class=\"token function\">getService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPipeline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì»¨í…Œì´ë„ˆë¡œ ìš”ì²­ ì „ë‹¬</span></code></pre></div>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"https://tomcat.apache.org/tomcat-8.5-doc/config/http.html\">https://tomcat.apache.org/tomcat-8.5-doc/config/http.html</a></li>\n<li><a href=\"https://download.oracle.com/otn-pub/jcp/servlet-3_1-fr-eval-spec/servlet-3_1-final.pdf?AuthParam=1695794208_54642e957120d983f4ca811f71280a25\">https://download.oracle.com/otn-pub/jcp/servlet-3_1-fr-eval-spec/servlet-3_1-final.pdf?AuthParam=1695794208_54642e957120d983f4ca811f71280a25</a></li>\n<li><a href=\"https://velog.io/@jihoson94/BIO-NIO-Connector-in-Tomcat\">https://velog.io/@jihoson94/BIO-NIO-Connector-in-Tomcat</a></li>\n<li><a href=\"https://www.programmersought.com/article/90283888271/\">https://www.programmersought.com/article/90283888271/</a></li>\n<li>Pro apache tomcat 6</li>\n</ul>","fields":{"slug":"/tomcat/"},"frontmatter":{"title":"Apache Tomcat ì´í•´í•˜ê¸°(NIO Connector ì¤‘ì‹¬)","date":"September 26, 2023"}},{"id":"cf054fe0-228c-59bf-a5f2-b34c4879742c","html":"<h2 id=\"ReentrantLock\" style=\"position:relative;\">ReentrantLock<a href=\"#ReentrantLock\" aria-label=\"ReentrantLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê³ ìœ ë½(intrinsic locking, synchronized lock. monitor lock)ê³¼ ë‹¬ë¦¬ ReentrantLockì€ í´ë§, íƒ€ì„ì•„ì›ƒ, ì¸í„°ëŸ½íŠ¸ ê°€ëŠ¥í•œ ì ê¸ˆ íšë“ì„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“  ì ê¸ˆ ë° í•´ì œ ì—°ì‚°ì´ ëª…ì‹œì ì´ë‹¤. ì•„ë˜ Lock ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒì ì¸ ì ê¸ˆ ì—°ì‚°ì„ ì •ì˜í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Lock</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">lockInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> timeout<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Condition</span> <span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ReentrantLockì€ Lock ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´í•˜ì—¬, ReentrantLockì„ íšë“ê³¼ í•´ì œëŠ” synchronized ë¸”ë¡ì— ì§„ì…í•˜ê³  ì¢…ë£Œí•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ë©”ëª¨ë¦¬ ì‹œë§¨í‹±(ê°€ì‹œì„±)ì„ ê°€ì§„ë‹¤.</p>\n<p>ReentrantLockì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ê³ ìœ ë½ì˜ í•œê³„ ë•Œë¬¸ì— íƒ„ìƒí•˜ì˜€ë‹¤. ê³ ìœ ë½ì€ ë°ë“œë½ ê°™ì€ ìƒí™©ì´ ë°œìƒí•˜ë”ë¼ë„ ì˜ì›íˆ ëŒ€ê¸°í•´ì•¼ ë˜ê³  ë˜, ì½”ë“œ ë¸”ë¡ ë‹¨ìœ„ë¡œ ì ê¸ˆì„ íšë“í•˜ê³  í•´ì œë˜ì–´ì•¼ ë˜ê¸° ë•Œë¬¸ì— ì¢€ ë” ìœ ì—°í•œ ì ê¸ˆ ë©”ì»¤ë‹ˆì¦˜ì´ í•„ìš”í•˜ê±°ë‚˜ ë” ë‚˜ì€ ì„±ëŠ¥ì„ ìœ„í•´ íƒ„ìƒë˜ì—ˆë‹¤. ì ê¸ˆ ê´€ë¦¬ì— ë§ì€ ë¦¬ì†ŒìŠ¤ê°€ ì‚¬ìš©ë˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì¤„ì–´ë“¤ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ReentrantLockì€ ê³ ìœ ë½ë³´ë‹¤ ë” ë§ì€ ì£¼ì˜ê°€ í•„ìš”í•œë° ë½ì˜ í•´ì œë¥¼ ì§ì ‘ ê´€ë¦¬í•´ì£¼ì–´ì•¼ ë˜ê¸° ë•Œë¬¸ì— ë” ë§ì€ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nlock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// update object state</span>\n    <span class=\"token comment\">// catch exceptions and restore invariants if necessary</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n    lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Java 6.0 ë¶€í„° synchronizedì™€ ë¹„êµí–ˆì„ ë•Œ ReentrantLock ì´ ì„±ëŠ¥ì ìœ¼ë¡œ ì•½ê°„ ë” ìš°ì„¸í•˜ë‹¤ê³  í•œë‹¤.\nì„±ëŠ¥ ìƒì˜ ì´ìœ ë¡œ synchronized ëŒ€ì‹  ReentrantLock ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¶ˆí•„ìš”í•œ ë³µì¡ì„±ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ êµ³ì´ ê·¸ë ‡ê²Œ í•  í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•œë‹¤.</p>\n</blockquote>\n<h2 id=\"íƒ€ì„ì•„ì›ƒ-Lock\" style=\"position:relative;\">íƒ€ì„ì•„ì›ƒ Lock<a href=\"#%ED%83%80%EC%9E%84%EC%95%84%EC%9B%83-Lock\" aria-label=\"íƒ€ì„ì•„ì›ƒ Lock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>lock::tyrLock ì„ ì‚¬ìš©í•˜ë©´ ê³ ìœ ë½ë³´ë‹¤ ë” ì •êµí•œ ì˜¤ë¥˜ ë³µêµ¬ê°€ ê°€ëŠ¥í•´ì§„ë‹¤. ê³ ìœ ë½ì„ ì‚¬ìš©í•˜ì—¬ ë°ë“œë½ì´ ë°œìƒí•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹œì‘í•´ì•¼ë§Œ ë³µêµ¬í•  ìˆ˜ ìˆì§€ë§Œ ì‹œê°„ì œí•œ ì ê¸ˆì€ í™•ë¥ ë¡ ì  ë°©ì‹ìœ¼ë¡œ êµì°© ìƒíƒœ íšŒí”¼ë¥¼ ì œê³µí•œë‹¤.\nlock::lockInterruptibly ë©”ì„œë“œëŠ” ë½ì„ íšë“í•˜ë ¤ê³  ì‹œë„í•  ë•Œ, í˜„ì¬ ìŠ¤ë ˆë“œê°€ ì¸í„°ëŸ½íŠ¸ë˜ì—ˆëŠ”ì§€ë„ í™•ì¸í•œë‹¤. ë½ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ê³  ê³ ìœ ë½ ì²˜ëŸ¼ ë¬´í•œì • ëŒ€ê¸°í•˜ì—¬ ë°ë“œë½ì— ë¹ ì§€ëŠ” ìƒí™©ì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    lock<span class=\"token punctuation\">.</span><span class=\"token function\">lockInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Critical section</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Handle interruption</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ê³µì •ì„±fairness\" style=\"position:relative;\">ê³µì •ì„±(fairness)<a href=\"#%EA%B3%B5%EC%A0%95%EC%84%B1fairness\" aria-label=\"ê³µì •ì„±fairness permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ReentrantLock ìƒì„±ìì—ëŠ” boolean íƒ€ì…ì˜ fairness ê³µì •ì„± ì˜µì…˜ì„ ì œê³µí•œë‹¤.</p>\n<ul>\n<li>ê³µì •í•œ ë½(Fair Lock): ìŠ¤ë ˆë“œë“¤ì´ ìš”ì²­í•œ ìˆœì„œëŒ€ë¡œ ë½ì„ íšë“í•œë‹¤. ì¦‰, ë¨¼ì € ìš”ì²­í•œ ìŠ¤ë ˆë“œê°€ ë¨¼ì € ë½ì„ ì–»ëŠ”ë‹¤.</li>\n<li>ë¹„ê³µì •í•œ ë½(Nonfair Lock): ë½ì´ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœì—ì„œ ìš”ì²­í•œ ìŠ¤ë ˆë“œëŠ” ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ë¬´ì‹œí•˜ê³  ë½ì„ ë°”ë¡œ íšë“í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ \"barging\"ì´ë¼ê³  í•œë‹¤. (ê¸°ë³¸ê°’)</li>\n</ul>\n<p>ê³µì •ì„±ì€ í•­ìƒ ì˜³ì€ ê²ƒ ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ ì‹¤ì œë¡œëŠ” ì„±ë‚­ ìƒì˜ ë¹„ìš©ì´ ë°œìƒí•˜ì—¬ ë¹„ê³µì •í•œ ë½ì´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ë” ë†’ì€ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤. ë¹„ê³µì •í•œ ë½ì—ì„œëŠ” \"barging\"ì´ë¼ëŠ” í˜„ìƒì´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¨ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤ë ˆë“œ Aê°€ ë½ì„ ë³´ìœ í•˜ê³  ìˆê³ , ìŠ¤ë ˆë“œ Bê°€ ê·¸ ë½ì„ ìš”ì²­í–ˆë‹¤ë©´, BëŠ” ëŒ€ê¸° ìƒíƒœë¡œ ë“¤ì–´ê°„ë‹¤. Aê°€ ë½ì„ í•´ì œí•˜ë©´, BëŠ” ë‹¤ì‹œ ì‹¤í–‰ë˜ê³ , ê·¸ ì‚¬ì´ì— ìŠ¤ë ˆë“œ Cê°€ ë½ì„ ìš”ì²­í•˜ë©´, CëŠ” Bê°€ ê¹¨ì–´ë‚˜ê¸°ë„ ì „ì— ë½ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. ì´ë¡œ ì¸í•´ ì „ë°˜ì ì¸ ì²˜ë¦¬ëŸ‰(throughput)ì´ í–¥ìƒë  ìˆ˜ ìˆë‹¤. ê³µì •í•œ ë½ì€ ë½ì„ ì˜¤ë«ë™ì•ˆ ë³´ìœ í•˜ì—¬ ë½ ìš”ì²­ ì‹œ ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ ë•Œ ë¹„ê³µì • ë½ ë°©ì‹ë³´ë‹¤ ìœ ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ë¹„ê³µì •í•œ ë½ì—ì„œëŠ” ë½ì„ ìš”ì²­í•œ ìˆœì„œì™€ ë¬´ê´€í•˜ê²Œ ë½ì„ íšë“í•  ìˆ˜ ìˆì–´ ì¼ë¶€ ìŠ¤ë ˆë“œëŠ” ë½ì„ íšë“í•˜ì§€ ëª»í•˜ëŠ” ê¸°ì•„ ìƒíƒœê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¹„ê³µì •í•œ ë½ì˜ êµ¬í˜„ì€ í†µê³„ì • ê³µì •ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ”ë° í†µê³„ì  ê³µì •ì„±ì´ë€ ì‹œìŠ¤í…œì´ ëª¨ë“  ì‘ì—…ì— ì™„ë²½í•œ ê³µì •ì„±ì„ ë³´ì¥í•˜ì§€ ì•Šë”ë¼ë„, ê¸´ ì‹œê°„ ë™ì•ˆ ë´¤ì„ ë•Œ ê±°ì˜ ëª¨ë“  ìš”ì²­ ë˜ëŠ” ì‘ì—…ì´ ê³µì •í•˜ê²Œ ì²˜ë¦¬ë  ê²ƒì´ë¼ëŠ” í™•ë¥ ì ì¸ ë³´ì¥ì„ ì˜ë¯¸í•œë‹¤.</p>\n<h2 id=\"Read-write-locks\" style=\"position:relative;\">Read-write locks<a href=\"#Read-write-locks\" aria-label=\"Read write locks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ëŒ€ë¶€ë¶„ì˜ ë°ì´í„° êµ¬ì¡°ëŠ” ì½ê¸° ì¤‘ì‹¬ ì‘ì—…ìœ¼ë¡œ ë•Œë•Œë¡œ ìˆ˜ì • ì‘ì—…ì´ ë°œìƒí•œë‹¤. Read-write lockì€ ë¦¬ì†ŒìŠ¤ëŠ” ì—¬ëŸ¬ ì½ê¸° ì‘ì—…ì— ì˜í•´ ë™ì‹œì— ì ‘ê·¼ë  ìˆ˜ ìˆì§€ë§Œ, ì“°ê¸° ì‘ì—…ì´ ì¼ì–´ë‚  ë•ŒëŠ” í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ë‹¨ë…ìœ¼ë¡œ ì ‘ê·¼í•˜ë©° ë‹¤ë¥¸ ì½ê¸°ë‚˜ ì“°ê¸° ì‘ì—…ì€ ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ë™ì‹œì„±(concurrency)ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ReadWriteLock</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Lock</span> <span class=\"token function\">readLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Lock</span> <span class=\"token function\">writeLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ReadWriteLockì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ê³ ë ¤ì‚¬í•­ì´ ìˆì„ ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>Release Preference: ì“°ê¸° ë½(write lock)ì´ í•´ì œë  ë•Œ ëŒ€ê¸° ì¤‘ì¸ ì½ê¸° ì‘ì—…(readers)ê³¼ ì“°ê¸° ì‘ì—…(writers) ì¤‘ ëˆ„êµ¬ì—ê²Œ ìš°ì„ ê¶Œì„ ì¤„ ê²ƒì¸ì§€ë¥¼ ì˜ë¯¸í•œë‹¤. ì´ë¥¼ ì„ íƒí•˜ëŠ” ë°©ë²•ì— ë”°ë¼ ì„±ëŠ¥ê³¼ ê³µì •ì„±ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.</li>\n<li>Reader Barging: ì½ê¸° ë½(read lock)ì´ í™œì„±í™”ë˜ì–´ ìˆê³  ì“°ê¸° ì‘ì—…(writer)ì´ ëŒ€ê¸° ì¤‘ì¼ ë•Œ, ìƒˆë¡œ ë„ì°©í•˜ëŠ” ì½ê¸° ì‘ì—…ì´ ì¦‰ì‹œ ì ‘ê·¼í•  ìˆ˜ ìˆì„ì§€, ì•„ë‹ˆë©´ ëŒ€ê¸° ì¤‘ì¸ ì“°ê¸° ì‘ì—… ë’¤ì— ì¤„ì„ ì„œì•¼ í•˜ëŠ”ì§€ë¥¼ ì˜ë¯¸í•œë‹¤. ì½ê¸° ì‘ì—…ì´ ì“°ê¸° ì‘ì—…ë³´ë‹¤ ë¨¼ì € ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë™ì‹œì„±ì„ í–¥ìƒì‹œí‚¤ì§€ë§Œ, ì“°ê¸° ì‘ì—…ì´ ê³„ì† ëŒ€ê¸° ìƒíƒœì— ë¨¸ë¬¼ëŸ¬ ê¸°ì•„ ìƒíƒœì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤.</li>\n<li>Reentrancy: ì½ê¸° ë½ê³¼ ì“°ê¸° ë½ì´ ì¬ì§„ì… ê°€ëŠ¥í•œì§€(reentrant) ì—¬ë¶€ì…ë‹ˆë‹¤. ì¬ì§„ì… ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì€ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ ì´ë¯¸ íšë“í•œ ë½ì„ ë‹¤ì‹œ íšë“í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.</li>\n<li>Downgrading: ì“°ê¸° ë½ì„ ë³´ìœ í•˜ê³  ìˆëŠ” ìŠ¤ë ˆë“œê°€ ì“°ê¸° ë½ì„ í•´ì œí•˜ì§€ ì•Šê³  ì½ê¸° ë½ì„ íšë“í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•œ í›„ì— ì½ê¸° ì‘ì—…ìœ¼ë¡œ ë ˆë²¨ì„ ë‚®ì¶°ì„œ ë‹¤ë¥¸ ì“°ê¸° ì‘ì—…ì´ ë„ì¤‘ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ëª»í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.</li>\n<li>Upgrading: ì½ê¸° ë½ì„ ë³´ìœ í•˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ ì“°ê¸° ë½ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì½ê¸°-ì“°ê¸° ë½ êµ¬í˜„ì²´ì—ì„œëŠ” ì—…ê·¸ë ˆì´ë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë°, ë‘ ê°œì˜ ë¦¬ë”ê°€ ë™ì‹œì— ì“°ê¸° ì ê¸ˆìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë¥¼ ì‹œë„í•˜ë©´ ì–´ëŠ ìª½ë„ ì½ê¸° ì ê¸ˆì„ í•´ì œëª»í•˜ëŠ” ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</li>\n</ul>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Java Concurrency in practice</li>\n</ul>","fields":{"slug":"/java-concurrency-lock/"},"frontmatter":{"title":"Javaì˜ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° - Lock","date":"September 19, 2023"}},{"id":"3419fd75-1867-5820-8915-bb4785885a65","html":"<h2 id=\"DeadLock\" style=\"position:relative;\">DeadLock<a href=\"#DeadLock\" aria-label=\"DeadLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìŠ¤ë ˆë“œ Aê° ì ê¸ˆ Lì„ ì ìœ í•˜ê³  ìˆê³  ì ê¸ˆ Mì„ íšë“í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” ë™ì‹œì— ìŠ¤ë ˆë“œ Bê°€ ì ê¸ˆ Mì„ ë³´ìœ í•˜ê³  ìˆê³  ì ê¸ˆ Lì„ íšë“í•˜ë ¤ê³  ì‹œë„í•˜ë©´ ë‘ ìŠ¤ë ˆë“œëŠ” ì˜ì›íˆ ëŒ€ê¸°í•˜ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ìƒí™©ì„ ë°ë“œë½ì´ë¼ê³  í•œë‹¤.</p>\n<h2 id=\"lock-ordering-deadlocks\" style=\"position:relative;\">lock-ordering deadlocks<a href=\"#lock-ordering-deadlocks\" aria-label=\"lock ordering deadlocks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì•„ë˜ ì½”ë“œëŠ” leftRight(), rightLeft ë©”ì„œë“œê°€ left, right ë½ì„ ì„œë¡œ ë‹¤ë¥¸ ìˆœì„œë¡œ ì ê¸ˆì„ íšë“í•˜ë ¤ê³  í•˜ê¸° ë•Œë¬¸ì— ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. lock-ordering ì€ left, right ë½ì„ í•„ìš”ë¡œ í•˜ëŠ” ëª¨ë“  ìŠ¤ë ˆë“œì—ì„œ í•­ìƒ ê°™ì€ ìˆœì„œë¡œ left, right ë½ì„ íšë“í•˜ë„ë¡ í•˜ë©´ ë°ë“œë½ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LeftRightDeadlock</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> left <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> right <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">leftRight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">rightLeft</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">doSomethingElse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A ---> lock left -> try to lock right -> wait forever\nB -----> lock right -> try to lock left -> wait forever</code></pre></div>\n<h2 id=\"Dynamic-lock-order-deadlocks\" style=\"position:relative;\">Dynamic lock order deadlocks<a href=\"#Dynamic-lock-order-deadlocks\" aria-label=\"Dynamic lock order deadlocks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë°ë“œë½ì„ ì˜ˆë°©í•˜ê¸° ìœ„í•´ ì ê¸ˆ ìˆœì„œë¥¼ ì œì–´í•˜ê¸° ëª…í™•í•˜ì§€ ì•Šì„ ë•Œê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ fromAccount ì—ì„œ toAccountë¡œ ê³„ì¢Œ ì´ì²´í•˜ëŠ” ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">transferMoney</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Account</span> fromAccount<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Account</span> toAccount<span class=\"token punctuation\">,</span> <span class=\"token class-name\">DollarAmount</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>fromAccount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>toAccount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>       </code></pre></div>\n<p>ìœ„ì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ from, to Accountë¥¼ ë°˜ëŒ€ë¡œ í˜¸ì¶œí•˜ë©´ ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>A: transferMoney(myAccount, yourAccount, 10);</li>\n<li>B: transferMoney(yourAccount, myAccount, 20);</li>\n</ul>\n<p>ì´ëŸ° ê²½ìš°ì—ëŠ” System::identityHashCode ì™€ ê°™ì€ í•´ì‹œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ëœ ì ê¸ˆ ìˆœì„œë¥¼ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.\në‹¤ë§Œ, hashCode ëŠ” ë“œë¬¼ì§€ë§Œ ì¤‘ë³µë˜ëŠ” ê²½ìš°ë„ ìˆê¸° ë•Œë¬¸ì— í•´ì‹œ ì½”ë“œê°€ ë™ì¼í•œ ê²½ìš°ì—ë„ ì ê¸ˆ ìˆœì„œë¥¼ ë³´ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ëŸ° ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ <em>tie breaking</em> ë°©ì‹ì´ë‹¤.</p>\n<p>tie breaking ë°©ì‹ì€ fromAccount, toAccount ì ê¸ˆì„ íšë“í•˜ê¸° ì „ì— tie breaking ì ê¸ˆì„ íšë“í•¨ìœ¼ë¡œì¨ í•œë²ˆì— ë‘ê°œì˜ ì ê¸ˆì„ íšë“í•˜ì—¬ ë°ë“œë½ ê°€ëŠ¥ì„±ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> tie <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">transferMoney</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Account</span> fromAccount<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Account</span> toAccount<span class=\"token punctuation\">,</span> <span class=\"token class-name\">DollarAmount</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">int</span> fromHash <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">identityHashCode</span><span class=\"token punctuation\">(</span>fromAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> toHash <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">identityHashCode</span><span class=\"token punctuation\">(</span>toAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fromHash <span class=\"token operator\">></span> toHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>fromAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>toAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">//...</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fromHash <span class=\"token operator\">&lt;</span> toHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>toAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>fromHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">//...</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>tie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>fromAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>toAccount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">//...</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ê°ì²´-í˜‘ë ¥ê´€ê³„ì—ì„œì˜-deadlocks\" style=\"position:relative;\">ê°ì²´ í˜‘ë ¥ê´€ê³„ì—ì„œì˜ deadlocks<a href=\"#%EA%B0%9D%EC%B2%B4-%ED%98%91%EB%A0%A5%EA%B4%80%EA%B3%84%EC%97%90%EC%84%9C%EC%9D%98-deadlocks\" aria-label=\"ê°ì²´ í˜‘ë ¥ê´€ê³„ì—ì„œì˜ deadlocks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë‘ ê°œ ì´ìƒì˜ ìì›(ë˜ëŠ” ê°ì²´, í´ë˜ìŠ¤ ë“±)ì´ ìƒí˜¸ ì‘ìš©ì„ í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\ní´ë˜ìŠ¤ Aì˜ method1ì€ Aì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , í´ë˜ìŠ¤ Bì˜ ì–´ë–¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.<br>\ní´ë˜ìŠ¤ Bì˜ method2ëŠ” Bì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , í´ë˜ìŠ¤ Aì˜ ìƒíƒœë¥¼ ì°¸ì¡°í•œë‹¤.</p>\n<p>ì´ ë‘ ë©”ì„œë“œê°€ ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— í˜¸ì¶œë  ê²½ìš° ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>method1ì€ Aì˜ ë½ì„ íšë“í•˜ê³  Bì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ë½ì„ ìœ ì§€í•œë‹¤.</li>\n<li>method2ëŠ” Bì˜ ë½ì„ íšë“í•˜ê³  Aì˜ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ê¸° ì „ì— ë½ì„ ìœ ì§€í•œë‹¤.</li>\n</ul>\n<p>ì´ëŸ° ìƒí™©ì—ì„œëŠ” open call ì´ë‚˜ ë½ì˜ ë²”ìœ„ë¥¼ ì¶•ì†Œí•˜ì—¬ ë°ë“œë½ ê°€ëŠ¥ì„±ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>Open Call: ë½ ì—†ì´ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ.</li>\n<li>synchronized ë¸”ë¡ ì¶•ì†Œ: ì „ì²´ ë©”ì†Œë“œì— synchronizedë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ ì—, ì‹¤ì œë¡œ ê³µìœ  ìƒíƒœì— ì ‘ê·¼í•˜ëŠ” ë¶€ë¶„ë§Œ synchronized ë¸”ë¡ìœ¼ë¡œ ë¬¶ëŠ”ë‹¤.</li>\n</ul>\n<blockquote>\n<p>ê²°í•©ëœ(composed) ê°ì²´ë¥¼ ë‚˜ì¤‘ì— ë™ê¸°í™”(synchronizing)í•˜ëŠ” ëŒ€ì‹ ì— ì²˜ìŒë¶€í„° ë™ê¸°í™”ëœ ê°ì²´ë¥¼ ê²°í•©í•˜ëŠ” ê²ƒì´ ë” ë³µì¡í•˜ë‹¤. ë™ê¸°í™”ëœ ê°ì²´ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ë ¤ë©´ ì˜¤í”ˆ ì½œ(open calls)ê³¼ ë½ì˜ ìˆœì„œ ì •í•˜ê¸°(careful lock ordering) ê°™ì€ ê¸°ìˆ ì´ í•„ìš”í•˜ë‹¤.</p>\n</blockquote>\n<h2 id=\"ë¦¬ì†ŒìŠ¤-deadlocks\" style=\"position:relative;\">ë¦¬ì†ŒìŠ¤ deadlocks<a href=\"#%EB%A6%AC%EC%86%8C%EC%8A%A4-deadlocks\" aria-label=\"ë¦¬ì†ŒìŠ¤ deadlocks permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"ë¦¬ì†ŒìŠ¤-ê¸°ë°˜-ë°ë“œë½Resource-based-Deadlock\" style=\"position:relative;\">ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ë°ë“œë½(Resource-based Deadlock)<a href=\"#%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B8%B0%EB%B0%98-%EB%8D%B0%EB%93%9C%EB%9D%BDResource-based-Deadlock\" aria-label=\"ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ë°ë“œë½Resource based Deadlock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ë‘ ê°œì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì. ìŠ¤ë ˆë“œ Aê°€ ë°ì´í„°ë² ì´ìŠ¤ D1ì— ì—°ê²°ì„ í™•ë³´í•˜ê³ , D2ì— ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì„ ìˆ˜ ìˆë‹¤.\në™ì‹œì— ìŠ¤ë ˆë“œ Bê°€ D2ì— ì—°ê²°ì„ í™•ë³´í•˜ê³  D1ì— ì—°ê²°ì„ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆë‹¤.\nì´ëŸ° ìƒí™©ì—ì„œ ë‘ ìŠ¤ë ˆë“œëŠ” ê°ê° ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ í™•ë³´í•˜ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ê¸°ë‹¤ë¦¬ë¯€ë¡œ ë°ë“œë½ì´ ë°œìƒí•œë‹¤.</p>\n<h3 id=\"ìŠ¤ë ˆë“œ-ê¸°ì•„-ë°ë“œë½Thread-Starvation-Deadlock\" style=\"position:relative;\">ìŠ¤ë ˆë“œ ê¸°ì•„ ë°ë“œë½(Thread-Starvation Deadlock)<a href=\"#%EC%8A%A4%EB%A0%88%EB%93%9C-%EA%B8%B0%EC%95%84-%EB%8D%B0%EB%93%9C%EB%9D%BDThread-Starvation-Deadlock\" aria-label=\"ìŠ¤ë ˆë“œ ê¸°ì•„ ë°ë“œë½Thread Starvation Deadlock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì´ í˜•íƒœì˜ ë°ë“œë½ì€ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ê·¸ ê²°ê³¼ë¥¼ ìƒì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ë°œìƒí•œë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, í•˜ë‚˜ì˜ ì‘ì—…ì´ ê²°ê³¼ë¥¼ ìƒì„±í•˜ê³ , ë‹¤ë¥¸ ì‘ì—…ì´ ê·¸ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²½ìš°, ì²« ë²ˆì§¸ ì‘ì—…ì´ ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ ë‘ ë²ˆì§¸ ì‘ì—…ë„ ì˜ì›íˆ ê¸°ë‹¤ë¦¬ê²Œ ëœë‹¤. ì´ëŠ” íŠ¹íˆ ì‘ì—…ë“¤ì´ í•œì •ëœ ìŠ¤ë ˆë“œ í’€ì—ì„œ ì‹¤í–‰ë  ë•Œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"Timed-tryLock\" style=\"position:relative;\">Timed tryLock<a href=\"#Timed-tryLock\" aria-label=\"Timed tryLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ëª…ì‹œì ì¸ Lock í´ë˜ìŠ¤ì˜ \"timed tryLock\" ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ë¬´í•œì • ëŒ€ê¸°í•˜ëŠ” ëŒ€ì‹ ì— íƒ€ì„ì•„ì›ƒì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nì¼ë°˜ì ì¸ ë‚´ì¥ ë½(intrinsic locks)ì€ ë½ì„ íšë“í•  ìˆ˜ ì—†ìœ¼ë©´ ì˜ì›íˆ ëŒ€ê¸°í•˜ê²Œ ë˜ì§€ë§Œ ëª…ì‹œì ì¸ ë½(explicit locks)ì€ íƒ€ì„ì•„ì›ƒì„ ì„¤ì •í•  ìˆ˜ ìˆì–´, ë½ íšë“ì— ì‹¤íŒ¨í•˜ë©´ ì¬ì‹œë„í•  ìˆ˜ ìˆëŠ” ì œì–´ê¶Œì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"livelock\" style=\"position:relative;\">livelock<a href=\"#livelock\" aria-label=\"livelock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë¼ì´ë¸Œë½ì€ ìŠ¤ë ˆë“œê°€ ì°¨ë‹¨ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ ê³„ì† ì‹¤íŒ¨í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì„ ê³„ì† ì¬ì‹œë„í•˜ì—¬ ìŠ¤ë ˆë“œê°€ ê³„ì† ì§„í–‰ë˜ì§€ ëª»í•˜ëŠ” ìƒíƒœì˜ í•œ í˜•íƒœë¥¼ ë§í•œë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, ë©”ì‹œì§• ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë©”ì‹œì§€ ì²˜ë¦¬ì—ì„œ ë²„ê·¸ë¡œ ì¸í•´ íŠ¹ì • ìœ í˜•ì˜ ë©”ì‹œì§€ê°€ í•­ìƒ ì‹¤íŒ¨í•˜ë©´, ê·¸ ë©”ì‹œì§€ëŠ” ê³„ì†í•´ì„œ íì˜ ì•ìœ¼ë¡œ ëŒì•„ê°€ê³  ë‹¤ì‹œ ì²˜ë¦¬ëœë‹¤. ì´ëŸ¬í•œ ë¬¸ì œëŠ” \"poison message problem\"ì´ë¼ê³ ë„ ë¶€ë¥¸ë‹¤. ìŠ¤ë ˆë“œëŠ” ì°¨ë‹¨ë˜ì§€ ì•Šì§€ë§Œ, ê³„ì†í•´ì„œ ê°™ì€ ì‹¤íŒ¨ë¥¼ ë°˜ë³µí•˜ë¯€ë¡œ ì‹¤ì œë¡œëŠ” ì‘ì—…ì´ ì§„í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ë˜ëŠ”, í˜‘ë ¥í•˜ëŠ” ìŠ¤ë ˆë“œì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì„œë¡œì˜ ìƒíƒœì— ë°˜ì‘í•˜ì—¬ ë³€ê²½í•˜ë˜, ê·¸ ê²°ê³¼ë¡œ ì–´ëŠ ìŠ¤ë ˆë“œë„ ì§„í–‰ë˜ì§€ ëª»í•˜ëŠ” ìƒíƒœê°€ ë  ìˆ˜ ìˆë‹¤. ë‘ ì‚¬ëŒì´ ë³µë„ì—ì„œ ì„œë¡œ ì–‘ë³´í•˜ë©´ì„œ ì˜ì›íˆ ì§€ë‚˜ê°€ì§€ ëª»í•˜ëŠ” ìƒí™©ì„ ìƒê°í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ìœ í˜•ì˜ ë¼ì´ë¸Œë½ì„ í•´ê²°í•˜ëŠ” í•˜ë‚˜ì˜ ë°©ë²•ì€ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ì— ë¬´ì‘ìœ„ì„±ì„ ë„ì…í•˜ëŠ” ê²ƒ ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì´ë”ë„· ë„¤íŠ¸ì›Œí¬ì—ì„œ ë‘ ìŠ¤í…Œì´ì…˜ì´ ë™ì‹œì— íŒ¨í‚·ì„ ë³´ë‚´ë©´ ì¶©ëŒì´ ë°œìƒí•œë‹¤ê³  í•  ë•Œ ë‘ ìŠ¤í…Œì´ì…˜ì€ ì¬ì‹œë„ ì‹œê°„ì— ë¬´ì‘ìœ„ì„±ì„ ë„ì…í•˜ì—¬ ì¶©ëŒì„ í”¼í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì•„ë˜ëŠ” Worker1 ê³¼ Worker2ê°€ ê°™ì€ ìì› commonResourceì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•˜ê³ , ìŠ¤ë ˆë“œê°€ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ìì›ì„ ìƒëŒ€ë°©ì—ê²Œ ì–‘ë³´í•˜ì—¬ livelockì´ ë°œìƒí•˜ëŠ” ì˜ˆì œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LiveLockExample</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CommonResource</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token class-name\">Worker</span> owner<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">CommonResource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Worker</span> owner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>owner <span class=\"token operator\">=</span> owner<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Worker</span> <span class=\"token function\">getOwner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> owner<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setOwner</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Worker</span> d<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            owner <span class=\"token operator\">=</span> d<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Worker</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> active<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>active <span class=\"token operator\">=</span> active<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isActive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> active<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CommonResource</span> commonResource<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Worker</span> otherWorker<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// If resource is owned by someone else, wait</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>commonResource<span class=\"token punctuation\">.</span><span class=\"token function\">getOwner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token comment\">// handle</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token comment\">// If other worker is also active, hand over the common resource to the other worker</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>otherWorker<span class=\"token punctuation\">.</span><span class=\"token function\">isActive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" : handing over the resource to the worker: \"</span> <span class=\"token operator\">+</span> otherWorker<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    commonResource<span class=\"token punctuation\">.</span><span class=\"token function\">setOwner</span><span class=\"token punctuation\">(</span>otherWorker<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token comment\">// Now use the commonResource</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": working on the common resource\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                active <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// work completed, so set active to false</span>\n                commonResource<span class=\"token punctuation\">.</span><span class=\"token function\">setOwner</span><span class=\"token punctuation\">(</span>otherWorker<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Worker</span> worker1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Worker 1 \"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Worker</span> worker2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Worker 2\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CommonResource</span> s <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CommonResource</span><span class=\"token punctuation\">(</span>worker1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> worker1<span class=\"token punctuation\">.</span><span class=\"token function\">work</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> worker2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> worker2<span class=\"token punctuation\">.</span><span class=\"token function\">work</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> worker1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ìœ„ì˜ ë©”ì‹œì§• ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” Dead-letter-Queue ë‚˜ Retry Limit, Exponential Backoff ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<h2 id=\"ì°¸ì¡°\" style=\"position:relative;\">ì°¸ì¡°<a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"ì°¸ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>Java Concurrency in practice</li>\n</ul>","fields":{"slug":"/java-concurrency-deadlock/"},"frontmatter":{"title":"Javaì˜ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° - Deadlock","date":"September 18, 2023"}},{"id":"fb92d1e5-6500-58e2-9bf6-4e575c5e083c","html":"<h2 id=\"Executor\" style=\"position:relative;\">Executor<a href=\"#Executor\" aria-label=\"Executor permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>TaskëŠ” ë…¼ë¦¬ì ì¸ ì‘ì—… ë‹¨ìœ„ì´ë©°, ìŠ¤ë ˆë“œëŠ” Taskë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì´ë‹¤. Javaì—ì„œëŠ” Task ì‹¤í–‰ì„ ì¶”ìƒí™”í•˜ì—¬ Executor ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ExecutorëŠ” ë‹¤ì–‘í•œ Task ì‹¤í–‰ ì •ì±…ì„ ì§€ì›í•˜ëŠ” ë¹„ë™ê¸° í”„ë ˆì„ì›Œí¬ì— ê¸°ë°˜ì´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Executor</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Executor êµ¬í˜„ì€ í†µê³„ ìˆ˜ì§‘, ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§ì„ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë¼ì´í”„ì‚¬ì´í´ ì§€ì› ë° í›„í¬ë¥¼ ì œê³µí•œë‹¤.\nExecutorëŠ” ìƒì‚°ì-ì†Œë¹„ì íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ Taskì„ ë“±ë¡í•˜ëŠ” ì‘ì—…ê³¼ Taskë¥¼ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ì„ ë¶„ë¦¬í•˜ì˜€ë‹¤.\nTaskì˜ ë“±ë¡ê³¼ ì²˜ë¦¬ë¥¼ ë¶„ë¦¬ëŠ” íŠ¹ì • Taskì˜ ì‹¤í–‰ ì •ì±…ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.\nì‹¤í–‰ ì •ì±…ì€ ë¬´ì—‡ì„, ì–´ë””ì„œ, ì–¸ì œ, ì–´ë–»ê²Œë¥¼ í¬í•¨í•œë‹¤.</p>\n<ul>\n<li>TaskëŠ” ì–´ë–¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ”ê°€?</li>\n<li>TaskëŠ” ì–´ë–¤ ìˆœì„œë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ê°€? (FIFO, LIFO, Priority)</li>\n<li>ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì‘ì—… ìˆ˜ëŠ”?</li>\n<li>ëª‡ ê°œì˜ ì‘ì—…ì´ ì‹¤í–‰ ëŒ€ê¸°ì—´ì— í¬í•¨ë  ìˆ˜ ìˆë‚˜?</li>\n<li>ì²˜ë¦¬ëŸ‰ ì œí•œìœ¼ë¡œ ì‘ì—…ì„ ê±°ë¶€í•´ì•¼í•˜ëŠ” ê²½ìš°, ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ë‚˜?</li>\n<li>ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ì „í›„ ì¡°ì¹˜ëŠ”?</li>\n</ul>\n<blockquote>\n<p>í˜„ì¬ new Thread(runnable).start() ì™€ ê°™ì€ ì €ìˆ˜ì¤€ì˜ ìŠ¤ë ˆë“œë¥¼ ì§ì ‘ ë‹¤ë£¨ê³  ìˆë‹¤ë©´ Executor ë‚˜ ë¹„ë™ê¸° í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ì„ ì ê·¹ì ìœ¼ë¡œ ê³ ë ¤í•´ë³´ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n</blockquote>\n<h2 id=\"Executor-ë¼ì´í”„ì‚¬ì´í´\" style=\"position:relative;\">Executor ë¼ì´í”„ì‚¬ì´í´<a href=\"#Executor-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4\" aria-label=\"Executor ë¼ì´í”„ì‚¬ì´í´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ExecutorëŠ” Taskë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— íŠ¹ì • ì‹œì ì— ì œì¶œëœ ì‘ì—…ì˜ ìƒíƒœë¥¼ ì¦‰ì‹œ ì•Œ ìˆ˜ ì—†ë‹¤.\nì™„ë£Œë˜ê±°ë‚˜ ì‹¤í–‰ ì¤‘ì´ê±°ë‚˜ ì‹¤í–‰ëŒ€ê¸° ì¤‘ì¼ ìˆ˜ ë„ ìˆë‹¤. ExecutorëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ” ê°‘ì‘ìŠ¤ëŸ½ê²Œ ì¢…ë£Œë˜ë”ë¼ë„ ì¢…ë£Œë¡œ ì¸í•œ ì˜í–¥ë°›ëŠ” ì‘ì—…ì˜ ìƒíƒœ ì •ë³´ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\nExecutorì˜ ìˆ˜ëª… ì£¼ê¸° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ExecutorService ì¸í„°í˜ì´ìŠ¤ëŠ” Executorë¥¼ í™•ì¥í•˜ì—¬ ë¼ì´í”„ ì‚¬ì´í´ ê´€ë¦¬ë¥¼ ìœ„í•œ ì—¬ëŸ¬ ê°€ì§€ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ExecutorService</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Executor</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">shutdownNow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">isShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">isTerminated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">boolean</span> <span class=\"token function\">awaitTermination</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> timeout<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ExecutorService , ExecutorCompletionService ì°¨ì´\nExecutorService ëŠ” Taskë¥¼ ì œì¶œí•œ ìˆœì„œëŒ€ë¡œ ê²°ê³¼ë¥¼ ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.\nExecutorCompletionService ëŠ” Taskë¥¼ ì œì¶œí•œ ìˆœì„œì™€ ìƒê´€ì—†ì´ ë‚´ë¶€ì ìœ¼ë¡œ BlockingQueue ì‚¬ìš©í•˜ì—¬ ì™„ë£Œëœ ì‘ì—… ëª©ë¡ ë¦¬ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ì—¬ ì™„ë£Œëœ Taskë¥¼ poll í•˜ê±°ë‚˜ takeí•  ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<h2 id=\"ThreadPoolExecutor\" style=\"position:relative;\">ThreadPoolExecutor<a href=\"#ThreadPoolExecutor\" aria-label=\"ThreadPoolExecutor permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ThreadPoolExecutor ëŠ” Executorsì˜ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ìƒì„±í•  ìˆ˜ ìˆëŠ” newCachedThreadPool, newFixedThreadPool, newScheduledThreadPool ì˜ ê¸°ë³¸ êµ¬í˜„ì„ ì œê³µí•œë‹¤.\nê¸°ë³¸ êµ¬í˜„ì˜ ì‹¤í–‰ ì •ì±…ì´ í•„ìš”ì— ë§ì§€ ì•ŠëŠ” ê²½ìš° ThreadPoolExecutor ìƒì„±ìë¥¼ í†µí•´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> corePoolSize<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token keyword\">int</span> maximumPoolSize<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token keyword\">long</span> keepAliveTime<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> workQueue<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token class-name\">ThreadFactory</span> threadFactory<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token class-name\">RejectedExecutionHandler</span> handler\n\t\t<span class=\"token punctuation\">)</span> </code></pre></div>\n<ul>\n<li>corePoolSize : ìŠ¤ë ˆë“œ ìˆ˜ì˜ í•˜í•œ, ìµœì†Œ corePoolSize ë§Œí¼ì˜ ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ìœ ì§€í•œë‹¤. workQueueê°€ ê½‰ ì°¨ì§€ ì•ŠëŠ” ì´ìƒ ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ëŠ˜ë¦¬ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>maximumPoolSize : ìŠ¤ë ˆë“œ ìˆ˜ì˜ ìƒí•œ, workQueueê°€ ê½‰ì°° ê²½ìš° ìµœëŒ€ë¡œ ìƒì„±ë  ìˆ˜ ìˆëŠ” ìŠ¤ë ˆë“œ ìˆ˜</li>\n<li>keepAliveTime : ìœ íœ´ ìƒíƒœì¸ ìŠ¤ë ˆë“œê°€ keepAliveTime ì‹œê°„ì´ ì§€ë‚˜ë©´ ìŠ¤ë ˆë“œë¥¼ íšŒìˆ˜í•˜ì—¬ corePoolSizeë¥¼ ìœ ì§€í•œë‹¤.</li>\n</ul>\n<p>Task ë§ˆë‹¤ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒê³¼ ë¹„êµí•˜ì—¬ ìŠ¤ë ˆë“œ í’€ì„ ì‚¬ìš©í•˜ë©´ CPUë¥¼ ì°¨ì§€í•˜ê¸° ìœ„í•´ ê²½ìŸí•˜ë©´ì„œ ëŒ€ê¸°í•˜ëŠ” ëŒ€ì‹  ThreadPoolExecutorë¥¼ ì‚¬ìš©í•˜ë©´ ThreadPoolExecutorì´ ê´€ë¦¬í•˜ëŠ” Runnable Queueì—ì„œ ëŒ€ê¸°ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ëŠ” ìŠ¤ë ˆë“œë¥¼ ì§ì ‘\në§Œë“¤ì–´ ëŒ€ê¸°í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ê²½ì œì ì´ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì†ë„ë³´ë‹¤ ë” ë§ì€ ìš”ì²­ì„ ëª°ë¦´ ê²½ìš° ë©”ëª¨ë¦¬ ë¶€ì¡±ë˜ëŠ” ì‘ë‹µ ì‹œê°„ ì§€ì—° ê°™ì€ ë¬¸ì œê°€ ì—¬ì „íˆ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ThreadPoolExecutorëŠ” ì‹¤í–‰ ëŒ€ê¸° ì¤‘ì¸ íƒœìŠ¤í¬ë¥¼ ë³´ê´€í•˜ê¸° ìœ„í•´ BlockingQueueë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Task í ì¢…ë¥˜ì—ëŠ” unbounded í, bounded í, synchronous handoffê°€ ìˆë‹¤.\nnewFixedThreadPool ë° newSingleThreadExecutor ì˜ ê¸°ë³¸ Task íë¡œëŠ” unbounded LinkedBlockingQueueë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì´ë‹¤. ë”°ë¼ì„œ, ì‘ì—…ì´ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì†ë„ë³´ë‹¤ ë¹¨ë¦¬ ë„ì°©í•˜ëŠ” ê²½ìš° íê°€ ì œí•œ ì—†ì´ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.</p>\n<p>ë³´ë‹¤ ì•ˆì •ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬ ì „ëµìœ¼ë¡œëŠ” ArrayBlockingQueueë‚˜ bounded LinkedBlockingQueue, PriorityBlockingQueue ì™€ ê°™ì€ bounded íë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>synchronous handoffì€ íë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìŠ¤ë ˆë“œ ê°„ì˜ í•¸ë“œ ì˜¤í”„ë¥¼ ê´€ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤.\ní•¸ë“œ ì˜¤í”„ë¥¼ ì‚¬ìš©í•˜ëŠ” SynchronousQueueëŠ” ì‘ì—…ì„ íì— ë„£ê³  ì†Œë¹„ìê°€ íì—ì„œ ì‘ì—…ì„ êº¼ë‚´ì„œ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹ˆë¼ ì‘ì—…ì„ íì— ë„£ìœ¼ë ¤ë©´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì´ë¯¸ í•¸ë“œì˜¤í”„ ìˆ˜ë½ì„ ìœ„í•´ ëŒ€ê¸° ì¤‘ì´ì–´ì•¼ í•œë‹¤. ì‘ì—…ì„ ì‹¤í–‰í•  ìŠ¤ë ˆë“œì— ë°”ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë” íš¨ìœ¨ì ì´ë‹¤.\nSynchronousQueueëŠ” ìŠ¤ë ˆë“œí’€ì´ ë¬´ì œí•œì´ê±°ë‚˜ ì´ˆê³¼ ì‘ì—…ì„ ê±°ë¶€í•˜ëŠ” ê²ƒì´ í—ˆìš©ë˜ëŠ” ê²½ìš°ì— ìœ ìš©í•œ ì„ íƒì§€ì´ë‹¤. newCachedThreadPoolì´ SynchronousQueueë¥¼ ì‚¬ìš©í•œë‹¤.</p>\n<h2 id=\"í¬í™”-ì •ì±…Saturation-policies\" style=\"position:relative;\">í¬í™” ì •ì±…(Saturation policies)<a href=\"#%ED%8F%AC%ED%99%94-%EC%A0%95%EC%B1%85Saturation-policies\" aria-label=\"í¬í™” ì •ì±…Saturation policies permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>í¬í™” ì •ì±…ì€ ìŠ¤ë ˆë“œ í’€ì˜ ì‘ì—… ëŒ€ê¸°ì—´ì´ ê°€ë“ ì°¼ì„ ë•Œ ì–´ë–»ê²Œ ë™ì‘í• ì§€ë¥¼ ì„¤ëª…í•œë‹¤. bounded íê°€ ê°€ë“ ì°¨ë©´ í¬í™” ì •ì±…ì´ ì‹¤í–‰ëœë‹¤. ThreadPoolExecutorì— ëŒ€í•œ í¬í™” ì •ì±…ì€ setRejectedExecutionHandler ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nRejectedExecutionHandler êµ¬í˜„ì—ëŠ” AbortPolicy, CallerRunsPolicy, DiscardOldestPolicyê°€ ìˆë‹¤.</p>\n<ul>\n<li>AbortPolicy: ê¸°ë³¸ ì •ì±…ìœ¼ë¡œ ì‘ì—… ëŒ€ê¸°ì—´ì´ ê°€ë“ ì°¨ë©´ RejectedExecutionExceptionì„ ë°œìƒì‹œí‚¨ë‹¤. í˜¸ì¶œìëŠ” ì´ ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ(try-catch) ì˜¤ë²„í”Œë¡œìš°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>\n<li>DiscardPolicy: ìƒˆë¡œ ì œì¶œëœ ì‘ì—…ì´ ëŒ€ê¸°ì—´ì— ë“¤ì–´ê°ˆ ìˆ˜ ì—†ë‹¤ë©´, ê·¸ ì‘ì—…ì„ ë¬´ì‹œí•œë‹¤.</li>\n<li>DiscardOldestPolicy: ëŒ€ê¸°ì—´ì—ì„œ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë  ì‘ì—…ì„ ì œê±°í•˜ê³  ìƒˆë¡œìš´ ì‘ì—…ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í•œë‹¤. ë§Œì•½ ëŒ€ê¸°ì—´ì´ ìš°ì„ ìˆœìœ„ íë¼ë©´, ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ì˜ ì‘ì—…ì´ ì œê±°ëœë‹¤.</li>\n<li>CallerRunsPolicy: ì´ ì •ì±…ì€ ì‘ì—…ì„ ë¬´ì‹œí•˜ì§€ë„, ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ì§€ë„ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ , ìƒˆë¡œìš´ ì‘ì—…ì„ ì œì¶œí•œ ìŠ¤ë ˆë“œì—ì„œ ì‘ì—…ì„ ì‹¤í–‰í•œë‹¤. ì´ëŠ” ì¼ì¢…ì˜ 'ìŠ¤ë¡œí‹€ë§'(throttling)ìœ¼ë¡œ, ìƒˆ ì‘ì—…ì˜ íë¦„ì„ ëŠ¦ì¶”ê¸° ìœ„í•´ ì¼ë¶€ ì‘ì—…ì„ í˜¸ì¶œìì—ê²Œ ë‹¤ì‹œ ëŒë ¤ë³´ë‚¸ë‹¤.\nCallerRunsPolicyë¥¼ ì‚¬ìš©í•˜ë©´, ì˜ˆë¥¼ ë“¤ì–´ ì›¹ ì„œë²„ì—ì„œ ëª¨ë“  ìŠ¤ë ˆë“œê°€ ì‚¬ìš© ì¤‘ì´ê³  ëŒ€ê¸°ì—´ì´ ê°€ë“ ì°¨ë©´, ë‹¤ìŒ ì‘ì—…ì€ execute í˜¸ì¶œì„ í•˜ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ëœë‹¤.</li>\n</ul>\n<p>ë‹¤ìŒì€ CallerRunsPolicy ë¥¼ ì‚¬ìš©í•œ ê³ ì • ìŠ¤ë ˆë“œí’€ Executorë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ThreadPoolExecutor</span> executor<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token constant\">N_THREADS</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token constant\">N_THREADS</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token number\">0L</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MILLISECONDS</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token constant\">CAPACITY</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nexecutor<span class=\"token punctuation\">.</span><span class=\"token function\">setRejectedExecutionHandler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor<span class=\"token punctuation\">.</span>CallerRunsPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ThreadFactory\" style=\"position:relative;\">ThreadFactory<a href=\"#ThreadFactory\" aria-label=\"ThreadFactory permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìŠ¤ë ˆë“œ í’€ì—ì„œ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ì•¼ í•  ë•Œ ThreadFactory ë¥¼ í†µí•´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤. ê¸°ë³¸ ìŠ¤ë ˆë“œ íŒ©í† ë¦¬ëŠ” ë…¼ë°ëª¬ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤. ì‚¬ìš©ì ì •ì˜ ìŠ¤ë ˆë“œ íŒ©í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” UncaughtExceptionHandlerë¥¼ ì§€ì •í•˜ê±°ë‚˜ ë””ë²„ê·¸ ë¡œê¹…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒê³¼ ê°™ì€\nì‚¬ìš©ì ì§€ì • ìŠ¤ë ˆë“œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ThreadFactory</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">Thread</span> <span class=\"token function\">newThread</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"Extending-ThreadPoolExecutor\" style=\"position:relative;\">Extending ThreadPoolExecutor<a href=\"#Extending-ThreadPoolExecutor\" aria-label=\"Extending ThreadPoolExecutor permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ThreadPoolExecutor ëŠ” í™•ì¥ì„ ìœ„í•´ ì„¤ê³„ë˜ì–´ ì„œë¸Œí´ë˜ìŠ¤ê°€ ì˜¤ë°”ë¼ì´ë“œí•  ìˆ˜ ìˆëŠ” í›„í¬ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.\nbeforeExecute, afterExecute ë©”ì„œë“œëŠ” ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œì—ì„œ í˜¸ì¶œë˜ë©°, beforeExecuteê°€ RuntimeExceptionì„ ë˜ì§€ë©´ íƒœìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³  afterExecuteë„ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.\nterminate ë©”ì„œë“œëŠ” ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ê³  ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œëœ í›„ ìŠ¤ë ˆë“œ í’€ ì¢…ë£Œê°€ ì™„ë£Œë  ë•Œ í˜¸ì¶œëœë‹¤.</p>","fields":{"slug":"/java-concurrency-executor/"},"frontmatter":{"title":"Javaì˜ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° - Executor","date":"September 17, 2023"}},{"id":"a2016a03-202f-508f-b077-7f1c0b11e4b5","html":"<h2 id=\"ë™ì‹œì„±-í”„ë¡œê·¸ë˜ë°-ëª¨ë¸\" style=\"position:relative;\">ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° ëª¨ë¸<a href=\"#%EB%8F%99%EC%8B%9C%EC%84%B1-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EB%AA%A8%EB%8D%B8\" aria-label=\"ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° ëª¨ë¸ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë™ì‹œì„±ì€ ì—¬ëŸ¬ íƒœìŠ¤í¬ê°€ ë™ì‹œì— ì‹¤í–‰ëœë‹¤ëŠ” ì‹œìŠ¤í…œ ì†ì„±ì´ë‹¤. ë˜í•œ íƒœìŠ¤í¬ë“¤ ì‚¬ì´ì—ì„œ ìƒí˜¸ ì‘ìš©ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\nì´ëŸ¬í•œ ë™ì‹œì„±ì€ ë‹¨ì¼ ì½”ì–´ í”„ë¡œì„¸ì„œë¶€í„° ë©€í‹° ì½”ì–´ í”„ë¡œì„¸ì„œ, ë‹¤ì¤‘ í”„ë¡œì„¸ì„œ, ê·¸ë¦¬ê³  ë¶„ì‚° ì‹œìŠ¤í…œê¹Œì§€ ë‹¤ì–‘í•œ ì»´í“¨íŒ… í™˜ê²½ì—ì„œ êµ¬í˜„ë  ìˆ˜ ìˆë‹¤.\nì£¼ ëª©ì ì€ ì‚¬ìš©ìì˜ ì‘ë‹µì„±ì„ í–¥ìƒì‹œí‚¤ê³  ì²˜ë¦¬ëŸ‰ì„ ì¦ê°€ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.</p>\n<p>ë™ì‹œì„±ì€ ì£¼ë¡œ ë©€í‹°ìŠ¤ë ˆë”©ê³¼ ì—°ê´€ë˜ì–´ ìˆì§€ë§Œ, ë©€í‹°ìŠ¤ë ˆë”©ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ì€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œë„ ìœ ì‚¬í•˜ê²Œ ë‚˜íƒ€ë‚œë‹¤.\nì´ëŠ” ë‘ ì‹œìŠ¤í…œ ëª¨ë‘ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ í•˜ë‚˜ì˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.\nê³µìœ  ìƒíƒœ ê´€ë¦¬, ì‘ì—… ë¶„ì‚°, ê·¸ë¦¬ê³  ì‘ì—… ìˆœì„œ ì¡°ì •ê³¼ ê°™ì€ ê³µí†µì ì¸ ë¬¸ì œê°€ í¬í•¨ëœë‹¤.</p>\n<p>ì›¹ ì„œë²„ì˜ ê²½ìš°, ì¼ë°˜ì ìœ¼ë¡œ ìš”ì²­ê³¼ ì²˜ë¦¬ì˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ê°€ì§€ë©°, ì—¬ëŸ¬ ì›¹ ìš”ì²­ì„ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\nì—¬ê¸°ì„œëŠ” ì¸ê¸°ìˆëŠ” ì¸ê¸°ìˆëŠ” ì›¹ í”„ë ˆì„ì›Œí¬ì˜ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° ëª¨ë¸ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤. </p>\n<h2 id=\"Thread-based-Concurrency\" style=\"position:relative;\">Thread-based Concurrency<a href=\"#Thread-based-Concurrency\" aria-label=\"Thread based Concurrency permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìŠ¤ë ˆë“œ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹ì€ ë“¤ì–´ì˜¤ëŠ” ê° ìš”ì²­ì„ ë³„ë„ì˜ ìŠ¤ë ˆë“œì™€ ì—°ê²°í•œë‹¤. thread-per-request ëª¨ë¸ì´ë¼ê³ ë„ í•œë‹¤.\nThread-based Concurrency ëª¨ë¸ì€ ìŠ¤ë ˆë“œê°€ ì›ê²© í˜¸ì¶œ, File I/O ë“±ì˜ ì´ìœ ë¡œ ë¸”ë¡œí‚¹ë  ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•œë‹¤.\nì´ëŸ¬í•œ ì´ìœ ë¡œ ëŒ€ëŸ‰ ìŠ¤ë ˆë“œí’€ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤ë ˆë“œ í•˜ë‚˜ê°€ ìš”ì²­ í•˜ë‚˜ë¥¼ ì²˜ë¦¬í•œë‹¤.\në˜í•œ ìš”ì²­ ì²˜ë¦¬ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ìˆœì°¨ì ìœ¼ë¡œ ì½”ë”©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì½”ë”© ë‚œì´ë„ ë° ë””ë²„ê¹…ì´ ìš©ì´í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.\nì•„ë˜ëŠ” Socket ê¸°ë°˜ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ ë§ˆë‹¤ Counter ê°’ì„ ì¦ê°€ì‹œí‚¤ê³  ì‘ë‹µí•˜ëŠ” ê°„ë‹¨í•œ ì›¹ ì„œë²„ë¥¼ êµ¬í˜„í•œ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> counter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> socket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerSocket</span><span class=\"token punctuation\">(</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> clientSocket <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accept client\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">WorkerRunnable</span><span class=\"token punctuation\">(</span>clientSocket<span class=\"token punctuation\">,</span> counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkerRunnable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Socket</span> clientSocket<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Counter</span> counter<span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">WorkerRunnable</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Socket</span> clientSocket<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Counter</span> counter<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>clientSocket <span class=\"token operator\">=</span> clientSocket<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>counter <span class=\"token operator\">=</span> counter<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token annotation punctuation\">@Override</span>\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token class-name\">BufferedReader</span> input <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedReader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InputStreamReader</span><span class=\"token punctuation\">(</span>clientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">OutputStream</span> output <span class=\"token operator\">=</span> clientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">getOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> time <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> readLine<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token class-name\">String</span> req <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>readLine <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\treq <span class=\"token operator\">=</span> readLine<span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>readLine<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// If the end of the http request, stop</span>\n\t\t\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"favicon.ico\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> increase <span class=\"token operator\">=</span> counter<span class=\"token punctuation\">.</span><span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\toutput<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">(</span><span class=\"token string\">\"HTTP/1.1 200 OK\\n\\nWorkerRunnable: \"</span> <span class=\"token operator\">+</span>\n\t\t\t\t\t\t\t\tincrease <span class=\"token operator\">+</span> <span class=\"token string\">\" - \"</span> <span class=\"token operator\">+</span> time <span class=\"token operator\">+</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\toutput<span class=\"token punctuation\">.</span><span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\toutput<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tinput<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Request processed: {}\"</span><span class=\"token punctuation\">,</span> increase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Counter í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ Counter ê°’ì„ ì¦ê°€ì‹œí‚¤ê¸° ìœ„í•´ ì“°ê¸° ê²½ìŸì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\nì´ëŠ” Counter ê°’ì´ ë³€ê²½ ê°€ëŠ¥í•œ ê³µìœ  ìƒíƒœì´ê¸° ë•Œë¬¸ì— Counter ê°’ì´ CPU ìŠ¤ì¼€ì¤„ë§ê³¼ ê°™ì€\níŠ¹ì • íƒ€ì´ë°ì— ë”°ë¼ ì—°ì‚°ì˜ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ìƒí™©ì„ ê²½ìŸ ìƒíƒœ(Race Condition) ì´ë¼ê³  í•œë‹¤.</p>\n<p>ê²½ìŸ ìƒíƒœì˜ ì›ì¸ì€ ë³€ê²½ ê°€ëŠ¥í•œ ê³µìœ  ë³€ìˆ˜ì— ëŒ€í•œ ì—°ì‚°ì´ atomic operationì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.\nwiki ì—ì„œëŠ” atomic operationì„ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ê³  ìˆë‹¤.</p>\n<blockquote>\n<p>ì›ìì  ì—°ì‚°ì€ ì—°ì‚°ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ í•´ë‹¹ ì—°ì‚° ì¤‘ì— ì½ê±°ë‚˜ ë³€ê²½í•˜ëŠ” ìƒíƒœë¥¼ ì½ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ì—°ì‚°ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<p>ì¦‰, atomic operationì€ ë‹¨ìˆœíˆ ìª¼ê°¤ ìˆ˜ ì—†ëŠ” ì—°ì‚°ì´ ì•„ë‹ˆë¼ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì½”ë“œ ì„¹ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” operation ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\nì—¬ê¸°ì„œëŠ” counter ë³€ìˆ˜ì— ê°’ì„ ì¦ê°€ì‹œí‚¤ëŠ” ë©”ì„œë“œë¥¼ synchronized ë¡œ ë™ê¸°í™”í•˜ì—¬ ê²½ìŸ ìƒíƒœë¥¼ í•´ê²°í•˜ì˜€ë‹¤.\nê³µìœ  ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ë™ì‹œì„± ëª¨ë¸ì˜ ê²½ìš° ìë°”ì—ì„œëŠ” synchronized ì™€ ê°™ì€ ì ê¸ˆ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.</p>\n<p>ì ê¸ˆì„ ì‚¬ìš©í•˜ë©´ ì„ê³„ ì˜ì—­ì— ëŒ€í•œ ì—‘ì„¸ìŠ¤ë¥¼ ì§ë ¬í™”í•˜ì—¬ atomic operationì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.\nì ê¸ˆì€ ë„ˆë¬´ í¬ê²Œ ì¡ìœ¼ë©´ ë™ì‹œì„±ì´ ë–¨ì–´ì§€ê³ , ì ê¸ˆì„ ë„ˆë¬´ ë¯¸ì„¸í•˜ê²Œ ì¡ìœ¼ë©´ ë°ë“œë½, ê¸°ì•„ìƒíƒœ ë“±ì„ ìœ ë°œí•˜ê¸° ì‰¬ì›Œì§„ë‹¤.</p>\n<p>ìŠ¤ë ˆë“œ ê¸°ë°˜ ë™ì‹œì„± ëª¨ë¸ì˜ ë˜ ë‹¤ë¥¸ ë‹¨ì ì€ Context-Switching ì˜¤ë²„í—¤ë“œì´ë‹¤.\nCPUê°€ í•œ ìŠ¤ë ˆë“œ ì‹¤í–‰ì—ì„œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œ ì‹¤í–‰ìœ¼ë¡œ ì „í™˜í•  ë•Œ CPUëŠ” í˜„ì¬ ìŠ¤ë ˆë“œì˜ ë¡œì»¬ ë°ì´í„°, í”„ë¡œê·¸ë¨ í¬ì¸í„° ë“±ì„ ì €ì¥í•˜ê³  ì‹¤í–‰í•  ë‹¤ìŒ ìŠ¤ë ˆë“œì˜ ë¡œì»¬ ë°ì´í„°, í”„ë¡œê·¸ë¨ í¬ì¸í„° ë“±ì„ ë¡œë“œí•´ì•¼ í•œë‹¤.\nì´ ë¹„ìš©ì€ ê²°ì½” ì €ë ´í•˜ì§€ ì•Šë‹¤. ë¶ˆí•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ìœ¼ë¡œ ë§ì€ ì‹œê°„ì„ í—ˆë¹„í•  ìˆ˜ë„ ìˆë‹¤.</p>\n<h2 id=\"Event-driven-Concurrency\" style=\"position:relative;\">Event-driven Concurrency<a href=\"#Event-driven-Concurrency\" aria-label=\"Event driven Concurrency permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Event-driven Concurrencyì€ ì´ë²¤íŠ¸ì— ì‘ë‹µí•˜ì—¬ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ì„ ì˜ë¯¸í•œë‹¤.\nì´ëŠ” ì „í†µì ì¸ ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ë™ì‹œì„±ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ”ë°, ìŠ¤ë ˆë“œ ê¸°ë°˜ ë™ì‹œì„±ì€ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ë°˜ë©´,\nEvent-driven Concurrencyì€ ì¼ë°˜ì ìœ¼ë¡œ í•œ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤.\në”°ë¼ì„œ ìŠ¤ë ˆë“œ ê´€ë¦¬, ë™ê¸°í™” ë¬¸ì œ, ë°ë“œë½ ë“±ì˜ ë³µì¡í•œ ë™ì‹œì„± ë¬¸ì œì—ì„œ ììœ ë¡­ë‹¤.</p>\n<p>ëŒ€ì‹ , ìŠ¤ë ˆë“œ ê¸°ë°˜ ë™ì‹œì„±ì— ë¹„í•´ ì‹¤í–‰ íë¦„ì„ íŒŒì•…í•˜ê¸° ì–´ë µê³  ì½œë°± ì§€ì˜¥ ê°™ì€ ë¬¸ì œë¡œ ì½”ë“œ ë³µì¡ì„±ì´ ì¦ê°€í•  ìˆ˜ ìˆë‹¤.\nCPU ì§‘ì•½ì ì¸ ì‘ì—…(ì´ë¯¸ì§€ ì²˜ë¦¬, ë™ì˜ìƒ ì²˜ë¦¬) ë“± ì—ëŠ” ì í•©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. í•œ ì‘ì—…ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ë©´ ë‹¤ë¥¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ê°€ ì§€ì—°ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì´ëŸ¬í•œ íŒ¨ëŸ¬ë‹¤ì„ì€ Node.js, Vert.x ë“±ì˜ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">EventHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span> key<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReactorEventLoopExample</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Selector</span> selector <span class=\"token operator\">=</span> <span class=\"token class-name\">Selector</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ServerSocketChannel</span> serverChannel <span class=\"token operator\">=</span> <span class=\"token class-name\">ServerSocketChannel</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">configureBlocking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">socket</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InetSocketAddress</span><span class=\"token punctuation\">(</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">=</span> serverChannel<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_ACCEPT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        key<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AcceptHandler</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> serverChannel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">int</span> readyChannels <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>readyChannels <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> selectedKeys <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> keyIterator <span class=\"token operator\">=</span> selectedKeys<span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>keyIterator<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">SelectionKey</span> selectionKey <span class=\"token operator\">=</span> keyIterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">EventHandler</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">EventHandler</span><span class=\"token punctuation\">)</span> selectionKey<span class=\"token punctuation\">.</span><span class=\"token function\">attachment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>handler <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    handler<span class=\"token punctuation\">.</span><span class=\"token function\">handle</span><span class=\"token punctuation\">(</span>selectionKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                keyIterator<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AcceptHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">EventHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Selector</span> selector<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ServerSocketChannel</span> serverSocketChannel<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ì¹´ìš´í„° ì¶”ê°€</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AcceptHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Selector</span> selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServerSocketChannel</span> serverSocketChannel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>selector <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serverSocketChannel <span class=\"token operator\">=</span> serverSocketChannel<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span> key<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SocketChannel</span> clientChannel <span class=\"token operator\">=</span> serverSocketChannel<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>clientChannel <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            counter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ë  ë•Œë§ˆë‹¤ ì¹´ìš´í„° ì¦ê°€</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client accepted. Current connection count: \"</span> <span class=\"token operator\">+</span> counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            clientChannel<span class=\"token punctuation\">.</span><span class=\"token function\">configureBlocking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">SelectionKey</span> clientKey <span class=\"token operator\">=</span> clientChannel<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OP_READ</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            clientKey<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ReadHandler</span><span class=\"token punctuation\">(</span>clientChannel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ReadHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">EventHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">SocketChannel</span> socketChannel<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ReadHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketChannel</span> socketChannel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>socketChannel <span class=\"token operator\">=</span> socketChannel<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SelectionKey</span> key<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ByteBuffer</span> buffer <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> read <span class=\"token operator\">=</span> socketChannel<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>read <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">String</span> output <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received: \"</span> <span class=\"token operator\">+</span> output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>read <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            socketChannel<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì˜ ì˜ˆì œëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•œ ì´ë²¤íŠ¸ ë£¨í”„ ë°©ì‹ì˜ ê°„ë‹¨í•œ ì„œë²„ì´ë‹¤. ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— counter ê°’ì„ ë™ê¸°í™”í•˜ê¸° ìœ„í•œ ìŠ¤ë ˆë“œ ì¡°ì •ì´ í•„ìš”ì—†ë‹¤.\nì‹±ê¸€ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Race conditionì´ ë°œìƒí•˜ì§€ ì•Šê³  context switching ì˜¤ë²„í—¤ë“œë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\nì´ë²¤íŠ¸ ë£¨í”„ ë‚´ Blocking I/O ì‘ì—…ì´ ë°œìƒí•˜ë©´ ì´ë²¤íŠ¸ ë£¨í”„ê°€ ë¸”ë¡í‚¹ ìƒíƒœë¡œ ìœ ì§€ë˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ì‘ì—…ì€ ë³„ë„ì˜ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•´ì•¼ ë™ì‹œì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"Actor-based-Concurrency\" style=\"position:relative;\">Actor-based Concurrency<a href=\"#Actor-based-Concurrency\" aria-label=\"Actor based Concurrency permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>","fields":{"slug":"/java-concurrency-model/"},"frontmatter":{"title":"ì›¹ ì„œë²„ë¥¼ ìœ„í•œ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° ëª¨ë¸","date":"September 07, 2023"}},{"id":"ecca18c5-bf6e-5774-8ac7-467855cb953f","html":"<h2 id=\"synchronized-ë½ì˜-ë‹¨ì \" style=\"position:relative;\">synchronized ë½ì˜ ë‹¨ì <a href=\"#synchronized-%EB%9D%BD%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"synchronized ë½ì˜ ë‹¨ì  permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>ë½ì´ ê±¸ë¦° ê°ì²´ì—ì„œ ì¼ì–´ë‚˜ëŠ” ë™ê¸°í™” ì‘ì—…ì€ ëª¨ë‘ ê· ë“±í•˜ê²Œ ì·¨ê¸‰ëœë‹¤.</li>\n<li>ë½ íšë“/í•´ì œëŠ” ë°˜ë“œì‹œ ë©”ì„œë“œ ìˆ˜ì¤€ì´ë‚˜ ë©”ì„œë“œ ë‚´ë¶€ì˜ ë™ê¸°í™” ë¸”ë¡ ì•ˆì—ì„œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤.</li>\n<li>ë½ì„ ì–»ì§€ ëª»í•œ ìŠ¤ë ˆë“œëŠ” ë¸”ë¡œí‚¹ëœë‹¤. ë½ì„ ì–»ì§€ ëª»í•  ê²½ìš°, ë½ì„ ì–»ì–´ ì²˜ë¦¬ë¥¼ ê³„ì†í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” ê²ƒì¡°ì°¨ ë¶ˆê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p>ë½ì´ ê±¸ë¦° ë°ì´í„°ì— ëª¨ë“  ì—°ì‚°ì´ ë™ë“±í•˜ê²Œ ì·¨ê¸‰ëœë‹¤ëŠ” ì˜ë¯¸ëŠ” ì½ê¸°/ì“°ê¸° ì‘ì—…ì— ë™ì¼í•œ ë ˆë²¨ì˜ ë½ì˜ í•„ìš”í•˜ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.</p>\n<h2 id=\"Java-ë™ì‹œì„±-ë¼ì´ë¸ŒëŸ¬ë¦¬\" style=\"position:relative;\">Java ë™ì‹œì„± ë¼ì´ë¸ŒëŸ¬ë¦¬<a href=\"#Java-%EB%8F%99%EC%8B%9C%EC%84%B1-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC\" aria-label=\"Java ë™ì‹œì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>java.util.concurrent íŒ¨í‚¤ì§€ì—ëŠ” ë©€í‹°ìŠ¤ë ˆë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë” ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆê²Œ ì„¤ê³„ëœ ìë°”ì˜ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ í¬ê²Œ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ul>\n<li>ë½, ì„¸ë§ˆí¬ì–´</li>\n<li>atomics</li>\n<li>Blocking Queue</li>\n<li>latch</li>\n<li>\n<p>Executor</p>\n<!-- more -->\n</li>\n</ul>\n<h3 id=\"javautilconcurrentlocksLock\" style=\"position:relative;\">java.util.concurrent.locks.Lock<a href=\"#javautilconcurrentlocksLock\" aria-label=\"javautilconcurrentlocksLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Lock</span> <span class=\"token punctuation\">{</span>\n\n\n    <span class=\"token comment\">/**\n    * ê¸°ì¡´ ë°©ì‹ëŒ€ë¡œ ë½ì„ íšë“í•˜ê³  ë½ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ë•Œê¹Œì§€ ë¸”ë¡í‚¹í•œë‹¤\n    **/</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n    * ëŒ€ê¸°ì¤‘ì¸ ìŠ¤ë ˆë“œì— ì¸í„°ëŸ½íŠ¸í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. interrupt() ê°€ í˜¸ì¶œë˜ë©´ ëŒ€ê¸° ìƒíƒœê°€ * ì¸í„°ëŸ½íŠ¸ë˜ë©° InterruptedException ì´ ë˜ì ¸ì§„ë‹¤.\n    **/</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">lockInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">/**\n    * í˜¸ì¶œ ì‹œì ì— ì ê¸ˆì´ í•´ì œëœ ê²½ìš°ì—ë§Œ ì ê¸ˆì„ íšë“í•œë‹¤.\n    **/</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    \n    <span class=\"token comment\">/**\n    * ë½ì„ íšë“í•˜ë ¤ê³  ì‹œë„í•œë‹¤. íƒ€ì„ì•„ì›ƒì´ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.\n    **/</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">/**\n    * ë½ì„ í•´ì œí•œë‹¤. lock()ì— ëŒ€ì‘ë˜ëŠ” í›„ì† í˜¸ì¶œì´ë‹¤.\n    **/</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">/**\n    * ë½ ì£¼ìœ„ì— ì¡°ê±´ì„ ì„¤ì •í•´ ìœ ì—°í•˜ê²Œ ë½ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. (ì½ê¸°ì™€ ì“°ê¸°ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤)\n    **/</span>  \n    <span class=\"token class-name\">Condition</span> <span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ReentrantLock í´ë˜ìŠ¤ëŠ” Lockì˜ ì£¼ìš” êµ¬í˜„ì²´ë¡œ, ë‚´ë¶€ì ìœ¼ë¡œ int ê°’ìœ¼ë¡œ compareAndSwap()ì„ í•œë‹¤.\n(AtomicInteger í´ë˜ìŠ¤ì˜ Unsafe í´ë˜ìŠ¤ ì°¸ì¡°)</p>\n<h3 id=\"ì½ê¸°ì“°ê¸°-ë½\" style=\"position:relative;\">ì½ê¸°/ì“°ê¸° ë½<a href=\"#%EC%9D%BD%EA%B8%B0%EC%93%B0%EA%B8%B0-%EB%9D%BD\" aria-label=\"ì½ê¸°ì“°ê¸° ë½ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ê¸°ì¡´ synchronized ë‚˜ ReentrantLock ì„ ì´ìš©í•˜ë©´ í•œ ê°€ì§€ ë½ ì •ì±…ì„ ë”°ë¥¼ ìˆ˜ ë°–ì— ì—†ë‹¤.\ní•œ ì½ê¸° ìŠ¤ë ˆë“œ ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ ì½ê¸° ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ì—¬ ì²˜ë¦¬ìœ¨ì´ ë‚®ì•„ì§ˆ ìˆ˜ ìˆë‹¤.\nì´ëŸ´ ë•Œ ReentrantReadWriteLock í´ë˜ìŠ¤ì˜ ReadLock, WriteLockì„ í™œìš©í•˜ë©´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€\nì½ê¸° ì‘ì—…ì„ í•˜ëŠ” ë„ì¤‘ì—ë„ ë‹¤ë¥¸ ì½ê¸° ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆë‹¤. ë¸”ë¡œí‚¹ì€ ì“°ê¸° ì‘ì—…ì„ í•  ë•Œë§Œ ë°œìƒí•œë‹¤.\nReentrantReadWriteLockì˜ ìƒì„±ìë¡œ boolean fair ë¼ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ”ë° ê¸°ë³¸ê°’ì€ false, ë¶ˆê³µì •(non-fair) ëª¨ë“œì´ë‹¤.\n'ë¶ˆê³µì •â€™ì´ë€ ë§ ìì²´ì˜ ì˜ë¯¸ì²˜ëŸ¼ ë½ì„ íšë“í•œ ìŠ¤ë ˆë“œ í•˜ë‚˜ê°€ ë‹¤ë¥¸ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê³ ê°ˆë˜ê±´ ë§ê±´ ìƒê´€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ, 'ê³µì •â€™ ëª¨ë“œì—ì„œëŠ” ì–´ëŠ ì •ë„ ìŠ¤ë ˆë“œ ê°„ ê³µì •ì„±ì´ ë³´ì¥ë˜ë„ë¡ FIFOì— ê°€ê¹Œìš´ ë°©ì‹ìœ¼ë¡œ ë½ì„ íšë“í•  ìˆ˜ ìˆê²Œ í•¨ìœ¼ë¡œì¨ ê° ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°í•˜ëŠ” ì‹œê°„ì„ ìµœëŒ€í•œ ê· ë“±í•˜ê²Œ ë¶„ë°°í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StockInventory</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReentrantReadWriteLock</span> rwl <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantReadWriteLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> readLock <span class=\"token operator\">=</span> rwl<span class=\"token punctuation\">.</span><span class=\"token function\">readLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> writeLock <span class=\"token operator\">=</span> rwl<span class=\"token punctuation\">.</span><span class=\"token function\">writeLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> stockRepository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getStock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        readLock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"readLock lock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> stockRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getOrDefault</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            readLock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"readLock unLock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increaseStock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        writeLock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"writeLock lock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            stockRepository<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> stockRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getOrDefault</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            writeLock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"writeLock unlock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ReadLock-vs-ReadLock\" style=\"position:relative;\">ReadLock vs ReadLock<a href=\"#ReadLock-vs-ReadLock\" aria-label=\"ReadLock vs ReadLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">readLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">StockInventory</span> stockInventory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StockInventory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> qty <span class=\"token operator\">=</span> stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">getStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>qty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> qty <span class=\"token operator\">=</span> stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">getStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>qty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">15:40:09.316 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- readLock lock\n15:40:09.316 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- readLock lock\n15:40:11.321 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- readLock unLock\n0\n15:40:11.324 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- readLock unLock\n0</code></pre></div>\n<p>ì½ê¸° vs ì½ê¸° ì‹œ, ë½ ê²½í•©ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<h3 id=\"WriteLock-vs-WriteLock\" style=\"position:relative;\">WriteLock vs WriteLock<a href=\"#WriteLock-vs-WriteLock\" aria-label=\"WriteLock vs WriteLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">writeLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">StockInventory</span> stockInventory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StockInventory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">increaseStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">increaseStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">15:42:00.459 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock lock\n15:42:02.467 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock lock\n15:42:02.467 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock unlock\n15:42:04.471 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock unlock</code></pre></div>\n<p>ë¨¼ì € writeLockì„ ì ìœ í•œ ìŠ¤ë ˆë“œê°€ unlock í•  ë•Œê¹Œì§€, ë’¤ì— writeLock ì“°ë ˆë“œê°€ ëŒ€ê¸°í•œë‹¤.</p>\n<h3 id=\"WriteLock-vs-ReadLock\" style=\"position:relative;\">WriteLock vs ReadLock<a href=\"#WriteLock-vs-ReadLock\" aria-label=\"WriteLock vs ReadLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">writeLockVsReadLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">StockInventory</span> stockInventory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StockInventory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">increaseStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> qty <span class=\"token operator\">=</span> stockInventory<span class=\"token punctuation\">.</span><span class=\"token function\">getStock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"aaa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>qty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">15:44:10.126 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock lock\n15:44:12.133 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- readLock lock\n15:44:12.133 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock unlock\n15:44:14.144 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- readLock unLock\n1</code></pre></div>\n<p>writeLockì„ ì ìœ í•œ ìŠ¤ë ˆë“œê°€ unlock í•  ë•Œ ê¹Œì§€, readLockì´ ëŒ€ê¸°í•œë‹¤.</p>\n<h3 id=\"ReadWrite-vs-WriteLock\" style=\"position:relative;\">ReadWrite vs WriteLock<a href=\"#ReadWrite-vs-WriteLock\" aria-label=\"ReadWrite vs WriteLock permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">46</span><span class=\"token operator\">:</span><span class=\"token number\">12.891</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Thread</span><span class=\"token operator\">-</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token constant\">INFO</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>javaconcurrency<span class=\"token punctuation\">.</span>lib<span class=\"token punctuation\">.</span></span>StockInventory</span> <span class=\"token operator\">--</span> readLock lock\n<span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">46</span><span class=\"token operator\">:</span><span class=\"token number\">14.899</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Thread</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token constant\">INFO</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>javaconcurrency<span class=\"token punctuation\">.</span>lib<span class=\"token punctuation\">.</span></span>StockInventory</span> <span class=\"token operator\">--</span> writeLock lock\n<span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">46</span><span class=\"token operator\">:</span><span class=\"token number\">14.899</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Thread</span><span class=\"token operator\">-</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token constant\">INFO</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>javaconcurrency<span class=\"token punctuation\">.</span>lib<span class=\"token punctuation\">.</span></span>StockInventory</span> <span class=\"token operator\">--</span> readLock unLock\n<span class=\"token number\">0</span>\n<span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">46</span><span class=\"token operator\">:</span><span class=\"token number\">16.904</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Thread</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token constant\">INFO</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>javaconcurrency<span class=\"token punctuation\">.</span>lib<span class=\"token punctuation\">.</span></span>StockInventory</span> <span class=\"token operator\">--</span> writeLock unlock</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">15:46:56.315 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- readLock lock\n15:46:58.323 [Thread-0] INFO com.example.javaconcurrency.lib.StockInventory -- readLock unLock\n0\n15:46:58.325 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock lock\n15:47:00.330 [Thread-1] INFO com.example.javaconcurrency.lib.StockInventory -- writeLock unlock</code></pre></div>\n<p>readLock ì ìœ í•œ ìŠ¤ë ˆë“œê°€ unlock í•  ë•Œ ê¹Œì§€, writeLock ëŒ€ê¸°í•œë‹¤.</p>\n<h2 id=\"ì„¸ë§ˆí¬ì–´\" style=\"position:relative;\">ì„¸ë§ˆí¬ì–´<a href=\"#%EC%84%B8%EB%A7%88%ED%8F%AC%EC%96%B4\" aria-label=\"ì„¸ë§ˆí¬ì–´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì„¸ë§ˆí¬ì–´ëŠ” í’€ ìŠ¤ë ˆë“œë‚˜ DB ì ‘ì† ê°ì²´ ë“± ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœëŒ€ Xê°œ ê°ì²´ê¹Œì§€ë§Œ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•œë‹¤ëŠ” ì „ì œí•˜ì— ì •í•´ì§„ ìˆ˜ëŸ‰ì˜ í¼ë°‹ìœ¼ë¡œ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•œë‹¤.\nSemaphore í´ë˜ìŠ¤ì˜ acquire() ë©”ì„œë“œëŠ” ì‚¬ìš© ê°€ëŠ¥í•œ í¼ë°‹ ìˆ˜ë¥¼ í•˜ë‚˜ì”© ì¤„ì´ëŠ”ë°, ë” ì´ìƒ ì“¸ ìˆ˜ ìˆëŠ” í¼ë°‹ì´ ì—†ì„ ê²½ìš° ë¸”ë¡œí‚¹ëœë‹¤.\nrelease() ë©”ì„œë“œëŠ” í¼ë°‹ì„ ë°˜ë‚©í•˜ê³  ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œ ì¤‘ì—ì„œ í•˜ë‚˜ì—ê²Œ í•´ì œí•œ í¼ë°‹ì„ ì „ë‹¬í•œë‹¤.\nì„¸ë§ˆí¬ì–´ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìŠ¤ë ˆë“œê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ìœ í•˜ì§€ ëª»í•˜ëŠ” ê¸°ì•„ìƒíƒœê°€ ë  ê°€ëŠ¥ì„±ì´ ì»¤ì„œ ê³µì •ëª¨ë“œë¡œ ì´ˆê¸°í™”í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.\ní¼ë°‹ì´ í•˜ë‚˜ë¿ì¸ ì„¸ë§ˆí¬ì–´ëŠ” ë®¤í…ìŠ¤ì™€ ë™ë“±í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ ë®¤í…ìŠ¤ëŠ” ë®¤í…ìŠ¤ê°€ ê±¸ë¦° ìŠ¤ë ˆë“œë§Œ í•´ì œí•  ìˆ˜ ìˆëŠ” ë°˜ë©´, ì„¸ë§ˆí¬ì–´ëŠ” ë¹„ì†Œìœ  ìŠ¤ë ˆë“œë„ ë½ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.</p>\n<h3 id=\"Connection-Pool-ì˜ˆì œ\" style=\"position:relative;\">Connection Pool ì˜ˆì œ<a href=\"#Connection-Pool-%EC%98%88%EC%A0%9C\" aria-label=\"Connection Pool ì˜ˆì œ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConnectionPool</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Semaphore</span> semaphore<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Queue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> connectionPool<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ConnectionPool</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> poolSize<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>semaphore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Semaphore</span><span class=\"token punctuation\">(</span>poolSize<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>connectionPool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> poolSize<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pool\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">acquireConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        semaphore<span class=\"token punctuation\">.</span><span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"acquire connection\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> connection<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"release connection\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        semaphore<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ConnectionPoolTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">semaphoreTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> connectionPool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConnectionPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> executorService <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            executorService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> connection <span class=\"token operator\">=</span> connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">acquireConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connection acquired = {}\"</span><span class=\"token punctuation\">,</span> connection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n\n\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">15000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">16:26:59.908 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n16:26:59.908 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n16:26:59.912 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool1\n16:26:59.911 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n16:27:01.918 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n16:27:01.918 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n16:27:01.919 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n16:27:01.919 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n16:27:01.919 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool1\n16:27:01.919 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n16:27:03.925 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n16:27:03.925 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection</code></pre></div>\n<p>semaphore fair = true ì‹œ, ë¦¬ì†ŒìŠ¤ì— ë½ì„ íšë“í•˜ë ¤ê³  í•˜ëŠ” ìŠ¤ë ˆë“œê°€ ë§ì„ ë•Œ í• ë‹¹ë˜ëŠ” ë°©ì‹ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">semaphore_wait_Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> connectionPool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConnectionPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> executorService <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        executorService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> connection <span class=\"token operator\">=</span> connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">acquireConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connection acquired = {}\"</span><span class=\"token punctuation\">,</span> connection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                connectionPool<span class=\"token punctuation\">.</span><span class=\"token function\">releaseConnection</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">15000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">21:00:09.426 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:09.427 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:11.432 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:11.432 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:11.432 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:13.437 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:13.438 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:13.438 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:15.443 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:15.443 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:15.443 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:17.448 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:17.449 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:17.449 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:19.452 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:19.452 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:19.452 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:21.453 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:21.453 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:21.453 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0\n21:00:23.457 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.ConnectionPool -- release connection\n21:00:23.458 [pool-1-thread-5] INFO com.example.javaconcurrency.lib.ConnectionPool -- acquire connection\n21:00:23.458 [pool-1-thread-5] INFO com.example.javaconcurrency.lib.ConnectionPoolTest -- connection acquired = pool0</code></pre></div>\n<p>executorService.execute() ë¡œ ì‹¤í–‰ëœ ìŠ¤ë ˆë“œ ìˆœì„œë³„ë¡œ (1~5) ë½ì„ ê³µì •í•˜ê²Œ íšë“í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"Latch\" style=\"position:relative;\">Latch<a href=\"#Latch\" aria-label=\"Latch permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Latch ëŠ” ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ì„ ì œì–´í•˜ëŠ” ìœ ìš©í•œ ê¸°ë²•ì´ë‹¤. ìŠ¤ë ˆë“œê°€ íƒœìŠ¤í¬#1 -> íƒœìŠ¤í¬#2 -> íƒœìŠ¤í¬#3 ìˆœì„œë¡œ ì§„í–‰ë˜ì–´ì•¼ í•œë‹¤ë©´ Latchë¥¼\nì“°ê¸°ì— ì í•©í•œ ê²½ìš°ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LatchExample</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> latch<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">LatchExample</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> latch<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>latch <span class=\"token operator\">=</span> latch<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Do parallel Async Processing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tlatch<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\tlatch<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Done parallel Async Processing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">latch_test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> countDownLatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> pool <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        pool<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">LatchExample</span><span class=\"token punctuation\">(</span>countDownLatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"await on main\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    countDownLatch<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"done on main\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">21:15:33.891 [pool-1-thread-5] INFO com.example.javaconcurrency.lib.LatchExample -- Do parallel Async Processing\n21:15:33.891 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.LatchExample -- Do parallel Async Processing\n21:15:33.891 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.LatchExample -- Do parallel Async Processing\n21:15:33.891 [main] INFO com.example.javaconcurrency.lib.LatchExampleTest -- await on main\n21:15:33.891 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.LatchExample -- Do parallel Async Processing\n21:15:33.891 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.LatchExample -- Do parallel Async Processing\n21:15:34.898 [pool-1-thread-5] INFO com.example.javaconcurrency.lib.LatchExample -- Done parallel Async Processing\n21:15:34.899 [pool-1-thread-2] INFO com.example.javaconcurrency.lib.LatchExample -- Done parallel Async Processing\n21:15:34.898 [main] INFO com.example.javaconcurrency.lib.LatchExampleTest -- done on main\n21:15:34.898 [pool-1-thread-3] INFO com.example.javaconcurrency.lib.LatchExample -- Done parallel Async Processing\n21:15:34.899 [pool-1-thread-4] INFO com.example.javaconcurrency.lib.LatchExample -- Done parallel Async Processing\n21:15:34.898 [pool-1-thread-1] INFO com.example.javaconcurrency.lib.LatchExample -- Done parallel Async Processing</code></pre></div>\n<p>Latch ì¹´ìš´í„°ê°€ ì²˜ìŒì— 5ë¡œ ì„¸íŒ…í•˜ê³  countDown()ì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì¹´ìš´íŠ¸ ê°’ì€ 1ë§Œí¼ ê°ì†Œí•œë‹¤.\nì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ë©´ ë˜ì¹˜ê°€ ì—´ë¦¬ê³  await() í•¨ìˆ˜ ë•Œë¬¸ì— ëŒ€ê¸° ì¤‘ì´ë˜ ìŠ¤ë ˆë“œëŠ” ëª¨ë‘ í•´ì œë˜ì–´ ì²˜ë¦¬ë¥¼ ì¬ê°œí•˜ê²Œ ëœë‹¤.\në˜ì¹˜ëŠ” ë‹¨ í•œë²ˆë°–ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ê²°ê³¼ê°€ 0ì´ ë˜ë©´ í•´ë‹¹ ë˜ì¹˜ëŠ” ë‘ ë²ˆ ë‹¤ì‹œ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>\n<h2 id=\"Executorì™€-íƒœìŠ¤í¬-ì¶”ìƒí™”\" style=\"position:relative;\">Executorì™€ íƒœìŠ¤í¬ ì¶”ìƒí™”<a href=\"#Executor%EC%99%80-%ED%83%9C%EC%8A%A4%ED%81%AC-%EC%B6%94%EC%83%81%ED%99%94\" aria-label=\"Executorì™€ íƒœìŠ¤í¬ ì¶”ìƒí™” permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì €ìˆ˜ì¤€ì˜ ìŠ¤ë ˆë“œ ë¬¸ì œë¥¼ ì§ì ‘ ë‹¤ë£¨ë ¤ê³  í•˜ê¸° ë³´ë‹¤ëŠ” java.util.concurrent íŒ¨í‚¤ì§€ì—ì„œ ì ì ˆí•œ ìˆ˜ì¤€ìœ¼ë¡œ ì¶”ìƒí™”ëœ ë™ì‹œ í”„ë¡œê·¸ë˜ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“°ëŠ” í¸ì´ ì¢‹ë‹¤.\nJavaì—ì„œëŠ” ì¼ì˜ ë‹¨ìœ„ë¥¼ Taskë¡œ ì¶”ìƒí™”í•˜ì—¬ ê°œë°œìëŠ” ì‹¤ì œ ìŠ¤ë ˆë“œì˜ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ì¼ì¼íˆ ì‹ ê²½ ì“¸ í•„ìš”ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.\nExecutorServiceëŠ” ê´€ë¦¬ë˜ëŠ” ìŠ¤ë ˆë“œ í’€ì—ì„œ íƒœìŠ¤í¬ ì‹¤í–‰ ë©”ì»¤ë‹ˆì¦˜ì„ ê·œì •í•œ ì¸í„°í˜ì´ìŠ¤ë‹¤.<br>\nExecutorsëŠ” í—¬í¼ í´ë˜ìŠ¤ë¡œ, ìŠ¤ë ˆë“œ í’€ì„ ìƒì„±í•˜ëŠ” íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<ul>\n<li>newFixedThreadPool(int nThreads)\ní¬ê¸°ê°€ ê³ ì •ëœ ìŠ¤ë ˆë“œ í’€ì„ ì§€ë‹Œ ExecutorServiceë¥¼ ìƒì„±í•œë‹¤. ìŠ¤ë ˆë“œëŠ” ì¬ì‚¬ìš©ë˜ë©° ìŠ¤ë ˆë“œê°€ ì „ë¶€ ì‚¬ìš© ì¤‘ì¼ ê²½ìš°, ìƒˆ íƒœìŠ¤í¬ëŠ” íì— ë³´ê´€í•œë‹¤.</li>\n<li>newCachedThreadPool()\ní•„ìš”í•œ ë§Œí¼ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ë˜ ê°€ê¸‰ì  ìŠ¤ë ˆë“œë¥¼ ì¬ì‚¬ìš©í•œë‹¤. ìƒì„±ëœ ìŠ¤ë ˆë“œëŠ” 60ì´ˆ ê°„ ìœ ì§€ë˜ë©°, ê·¸ ì´í›„ì—ëŠ” ìºì‹œì—ì„œ ì‚­ì œëœë‹¤.\nì†Œê·œëª¨ ë¹„ë™ê¸° íƒœìŠ¤í¬ì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.</li>\n<li>newSingleThreadExecutor()\nìŠ¤ë ˆë“œ í•˜ë‚˜ë§Œ ê°€ì§€ëŠ” ExecutorServiceë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>newScheduledThreadPool(int corePoolSize)\në¯¸ë˜ì— íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ Callable ê³¼ ì§€ì—° ì‹œê°„ì„ ì „ë‹¬ë°›ëŠ” ë©”ì„œë“¤ì´ ìˆë‹¤.</li>\n</ul>\n<h2 id=\"í¬í¬ì¡°ì¸\" style=\"position:relative;\">í¬í¬/ì¡°ì¸<a href=\"#%ED%8F%AC%ED%81%AC%EC%A1%B0%EC%9D%B8\" aria-label=\"í¬í¬ì¡°ì¸ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìë°” 7ë¶€í„° ë“±ì¥í•œ í¬í¬ ì¡°ì¸ í”„ë ˆì„ì›Œí¬ëŠ” ë©€í‹° í”„ë¡œì„¸ì„œ í™˜ê²½ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ìƒˆë¡œìš´ APIë¥¼ ì œê³µí•œë‹¤.\nì´ í”„ë ˆì„ì›Œí¬ëŠ” ForkJoinPool ì´ë¼ëŠ” ìƒˆë¡œìš´ ExecutorService êµ¬í˜„ì²´ì— ê¸°ë°˜í•œë‹¤. ForkJoinPool í´ë˜ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ë‹¤.</p>\n<ul>\n<li>í•˜ìœ„ ë¶„í•  íƒœìŠ¤í¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>\n<li>Work-Stealing(ì‘ì—… ë¹¼ì•—ê¸°) ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•œë‹¤.</li>\n</ul>\n<p>Work-Stealing ì•Œê³ ë¦¬ì¦˜ì€ ì–´ëŠ ìŠ¤ë ˆë“œê°€ ìì‹ ì´ í• ë‹¹ë°›ì€ ì‘ì—…ì„ ëª¨ë‘ ë§ˆì³¤ëŠ”ë° ë‹¤ë¥¸ ìŠ¤ë ˆë“œì— ì•„ì§ ë°°ë¡œê·¸ê°€ ë‚¨ì•„ ìˆìœ¼ë©´\në°”ìœ ìŠ¤ë ˆë“œì˜ íì—ì„œ ì‘ì—…ì„ ê°€ì ¸ì™€ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ìŠ¤íŠ¸ë¦¼ê³¼-ë³‘ë ¬-ìŠ¤íŠ¸ë¦¼\" style=\"position:relative;\">ìŠ¤íŠ¸ë¦¼ê³¼ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼<a href=\"#%EC%8A%A4%ED%8A%B8%EB%A6%BC%EA%B3%BC-%EB%B3%91%EB%A0%AC-%EC%8A%A4%ED%8A%B8%EB%A6%BC\" aria-label=\"ìŠ¤íŠ¸ë¦¼ê³¼ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ëª¨ë“  ì»¬ë ‰ì…˜ì€ Collection ì¸í„°í˜ì´ìŠ¤ì— ìˆëŠ” stream() ë©”ì„œë“œë¥¼ ì œê³µí•´ì•¼í•œë‹¤.\nstream()ì€ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•˜ëŠ” êµ¬í˜„ì²´ë¥¼ ë‚´ì–´ì£¼ëŠ” ë©”ì„œë“œë¡œ ë‚´ë¶€ì—ì„œ ReferencePipelineì„ ìƒì„±í•œë‹¤.\nparallelStream()ì€ ë³‘ë ¬ë¡œ ë°ì´í„°ë¥¼ ì‘ì—… í›„ ê·¸ ê²°ê³¼ë¥¼ ì¬ì¡°í•©í•  ìˆ˜ ìˆë‹¤. ë‚´ë¶€ì ã…‡ë¡œ Spliteratorë¥¼ ì¨ì„œ ì‘ì—…ì„ ë¶„í• í•˜ê³ \nê³µìš© í¬í¬/ì¡°ì¸ í’€ì—ì„œ ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<h2 id=\"ë½-í”„ë¦¬-ê¸°ë²•\" style=\"position:relative;\">ë½-í”„ë¦¬ ê¸°ë²•<a href=\"#%EB%9D%BD-%ED%94%84%EB%A6%AC-%EA%B8%B0%EB%B2%95\" aria-label=\"ë½ í”„ë¦¬ ê¸°ë²• permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë½-í”„ë¦¬ ê¸°ë²•ì€ ë¸”ë¡œí‚¹ ê¸°ë°˜ì˜ ë½ ë©”ì»¤ë‹ˆì¦˜ì´ ì²˜ë¦¬ìœ¨ì— ì•…ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ì „ì œí•˜ì— ì‹œì‘ë˜ì—ˆë‹¤.\nìŠ¤ë ˆë“œ ë½ì´ ê±¸ë¦¬ëŠ” ìƒí™©ì—ì„œëŠ” ìŠ¤ë ˆë“œë¥¼ ì¤‘ë‹¨/ì¬ê°œì‹œí‚¤ëŠ” ê³¼ì •(ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­)ì— ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë½-í”„ë¦¬í•œ ê¸°ë²•ë³´ë‹¤ í›¨ì”¬ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤.</p>","fields":{"slug":"/java-concurrency/"},"frontmatter":{"title":"Javaì˜ ë™ì‹œì„± í”„ë¡œê·¸ë˜ë° - overview","date":"August 14, 2023"}},{"id":"6f729c84-2239-5a02-8561-deca0f9b05c5","html":"<h2 id=\"Primary-Key-ì„¤ê³„ì˜-ì¤‘ìš”ì„±\" style=\"position:relative;\">Primary Key ì„¤ê³„ì˜ ì¤‘ìš”ì„±<a href=\"#Primary-Key-%EC%84%A4%EA%B3%84%EC%9D%98-%EC%A4%91%EC%9A%94%EC%84%B1\" aria-label=\"Primary Key ì„¤ê³„ì˜ ì¤‘ìš”ì„± permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>InnoDB ê¸°ì¤€ìœ¼ë¡œ MySQLì€ Primary Keyë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í´ëŸ¬ìŠ¤í„°ë§í•œë‹¤.\ní´ëŸ¬ìŠ¤í„°ë§ì´ë¼ëŠ” ìš©ì–´ëŠ” ì¸ì ‘í•œ í‚¤ ê°’ì´ ìˆëŠ” ë ˆì½”ë“œê°€ ë¬¼ë¦¬ì ìœ¼ë¡œë„ ì¸ì ‘í•˜ê²Œ ì €ì¥ëœë‹¤ëŠ” ê²ƒì„ ë§í•œë‹¤.\nì¦‰, ë…¼ë¦¬ì ì¸ PK ê°’ì— ì˜í•´ ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì ì¸ ìœ„ì¹˜ê°€ ê²°ì •ëœë‹¤.\nPKê°’ì´ ë³€ê²½ëœë‹¤ë©´ í•´ë‹¹ ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì ì¸ ìœ„ì¹˜ë„ ë³€ê²½ëœë‹¤ëŠ” ì–˜ê¸°ë‹¤.   </p>\n<p>ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ê°€ ë§ˆì°¬ê°€ì§€ê² ì§€ë§Œ MySQLì˜ PK ì„¤ê³„ëŠ” ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë³´ë‹¤ ë” ì¤‘ìš”í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.\nì™œëƒí•˜ë©´, ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” í´ëŸ¬ìŠ¤í„°ë§í•  ì¸ë±ìŠ¤ë¥¼ ì„ íƒí•  ìˆ˜ ìˆì§€ë§Œ MySQLì€ ê¸°ë³¸í‚¤ë¡œ ê³ ì •ë˜ì–´ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. (MySQL 8.x ê¸°ì¤€)<br>\në˜í•œ, MySQLì€ Secondary Indexì˜ Leaf Nodeì— ì˜¤ë¼í´ê³¼ ê°™ì´ ë¬¼ë¦¬ì  ìœ„ì¹˜ì— ëŒ€í•œ ì°¸ì¡°(ROWID)ê°€ ì•„ë‹Œ PK ê°’ì„ ì €ì¥í•˜ê³ , PK ì¸ë±ìŠ¤ë¥¼ í†µí•´ ì‹¤ì œ ë””ìŠ¤í¬ ë¸”ë¡ì— ì ‘ê·¼í•œë‹¤. ë”°ë¼ì„œ, MySQLì—ì„œ PK ëŠ” ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ì‹ë³„ì ì—­í• ë¿ë§Œ ì•„ë‹ˆë¼ ë‚´ë¶€ êµ¬í˜„ì—ë„ ê´€ì—¬í•˜ê¸° ë•Œë¬¸ì— ê·¸ ì¤‘ìš”ì„±ì€ ë§¤ìš° í¬ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"í´ëŸ¬ìŠ¤í„°í˜•-ì¸ë±ìŠ¤\" style=\"position:relative;\">í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤<a href=\"#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%ED%98%95-%EC%9D%B8%EB%8D%B1%EC%8A%A4\" aria-label=\"í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê³ ì„±ëŠ¥ì„ ìœ„í•œ Primary Key ë¥¼ ì„¤ê³„í•˜ê¸° ìœ„í•´ì„œëŠ” Primary Key ì˜ ì €ì¥ êµ¬ì¡°ì¸ í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•˜ë‹¤.\nì•„ë˜ì˜ ê·¸ë¦¼ì€ <strong>Secondary Index</strong>(Non-Clusted Index) ì™€ <strong>Primary Key Index</strong>(Clusted Index) ì˜ ì €ì¥ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.   </p>\n<p><strong>Secondary Index</strong>(Non-Clusted Index) ê·¸ë¦¼ì˜ ë¦¬í”„ ë…¸ë“œë¥¼ ë³´ë©´ Index Key ê°’ì— í•´ë‹¹ í•˜ëŠ” Primary Key ê°’ì„ ì €ì¥í•˜ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nIndex Key ê°’ì€ ì •ë ¬ë˜ì–´ ìˆì§€ë§Œ Index Key ê°’ì— ë§µí•‘ë˜ëŠ” Primary Keyë“¤ ì‚¬ì´ì—ëŠ” ì•„ë¬´ëŸ° ìˆœì„œê´€ê³„ê°€ ì—†ë‹¤.</p>\n<p><strong>Primary Key Index</strong>(Clusted Index) ê·¸ë¦¼ì˜ ë¦¬í”„ ë…¸ë“œëŠ” Index Key ê°’ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆê³ ,\nì°¸ì¡°ê°€ ì•„ë‹Œ ì‹¤ì œ ë ˆì½”ë“œë¥¼ ì €ì¥í•˜ëŠ” í˜ì´ì§€ê°€ ë¦¬í”„ë…¸ë“œì— ìœ„ì¹˜í•´ ìˆë‹¤. í˜ì´ì§€ ë‚´ì—ì„œë„ Primary Index Key ê°’ ê¸°ì¤€ìœ¼ë¡œ ë ˆì½”ë“œê°€ ë¬¼ë¦¬ì ìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆë‹¤.</p>\n<!-- more -->\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a67dad59e6a37da0b5730238ef926ae2/f97d7/index-tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.94117647058825%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDElEQVR42p2Ta2+iQBiF/f//Zj/sl00v2nQ3rbV1d1vXFRURQQXkLggjcPYwpU3TaGt2kjckM8zzXs6ZFt4tz7axms0QBcHrXlVVMk5ZLXmhLJ9hvo/QsZHYFubTKVzXfQWeuiRw67mwxmO4jgOx38uDXZbBNU1EqyV87qe73WnA9WoFQ5tB+zuEuVgg2W7lgW1ZMNj6gommioJdmp4GnPR62MxURJoKY/AI8/E3/MkYPvfssYLINGApI6TLJTwmyYX4GFgUBQq2I1hBXe1gMEDAWYokQckzKQhnXDAyjkEQWDYzPy4KYVb3BlrnEqsf19AuzhCNhrUaEvYCDSiWvdAR+t5RB0gg0gThdRvOxTeUD12E7TOI4RMqClTlOcBKXVYfW2vkgQ+Vcw3D8KADJLDM2QovZmynjpwAwSQyF6vRKZizXqNsLqfsyNZ1BJyvW9vsjWCtJo2somLIb20d7hm8ZKgqdKpszOdI4lj+brFaU9MwH40wYWyj6B3w7Wqq2NGbk34fG3WKZGli3n+ActeFN1EQEL6h1WIq79BaKat3+cKE2B8AvnCLPUq2X1DZPI5gGAb+DJ4QMJHYxijZRbkXsquqVr5xROszo5a0lH9/C+fuBvpVG3r7HM6vn0ef5AfA558rAsOrS8TfO9h0zmF+/QKvd/s/wKZCtpbyOWY5HZDl8o3nzfM8ZOx/bpOGDyoIltcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"\"\n        src=\"/static/a67dad59e6a37da0b5730238ef926ae2/ca1dc/index-tree.png\"\n        srcset=\"/static/a67dad59e6a37da0b5730238ef926ae2/e7570/index-tree.png 170w,\n/static/a67dad59e6a37da0b5730238ef926ae2/f46e7/index-tree.png 340w,\n/static/a67dad59e6a37da0b5730238ef926ae2/ca1dc/index-tree.png 680w,\n/static/a67dad59e6a37da0b5730238ef926ae2/02d09/index-tree.png 1020w,\n/static/a67dad59e6a37da0b5730238ef926ae2/9d567/index-tree.png 1360w,\n/static/a67dad59e6a37da0b5730238ef926ae2/f97d7/index-tree.png 2000w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">img.png</figcaption>\n  </figure></p>\n<p>Clusted IndexëŠ” êµ¬ì¡°ì ì¸ ì´ìœ ë¡œ ìˆœì°¨ì ì¸ Key ê°’ì„ ë„£ì„ ë•Œ, ì˜¤ë²„í—¤ë“œê°€ ê°€ì • ì ê³  ê°€ì¥ ë¹ ë¥´ë‹¤. ë‹¨ìˆœíˆ Index íŠ¸ë¦¬ ì˜¤ë¥¸ìª½ ë§¨ëì— ìƒˆë¡œìš´ ë ˆì½”ë“œë¥¼ ì‚½ì…í•´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.<br>\në°˜ë©´ì— ë¹„ìˆœì°¨ì ì¸ Key ê°’ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìƒí™©ì´ ë³µì¡í•´ì§„ë‹¤. Key ê°’ì´ ê¸°ì¡´ ë°ì´í„° ì¤‘ê°„ì— ì‚½ì…ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ë³€ê²½ì‚¬í•­ì— ë§ê²Œ ê°±ì‹ í•´ì•¼ í•œë‹¤.<br>\në˜í•œ, ë¦¬í”„ ë…¸ë“œì˜ í˜ì´ì§€ ì•ˆì— ìˆëŠ” ë°ì´í„°ì˜ ìˆœì„œë„ ì¡°ì •ì´ í•„ìš”í•˜ë‹¤. ê¸°ì¡´ ë°ì´í„° ì‚¬ì´ì— ìƒˆ ë ˆì½”ë“œì˜ ì ì ˆí•œ ìœ„ì¹˜ë¥¼ ì°¾ê³  ê³µê°„ì„ í™•ë³´í•´ì•¼ í•œë‹¤. ì´ë¡œ ì¸í•´ ë§ì€ ë°ì´í„°ì˜ ì´ë™ì´ í•„ìš”í•  ìˆ˜ ìˆê³  í˜ì´ì§€ ë¶„í• ë¡œ ë‹¨í¸í™” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ë”°ë¼ì„œ INSERT ì†ë„ê°€ ì¤‘ìš”í•œ í…Œì´ë¸”ì´ë¼ë©´ ìˆœì°¨ì ì¸ ê°’ì„ Primary Keyë¡œ ì„ ì •í•˜ëŠ” ê²ƒì´ ìœ ë¦¬í•˜ë‹¤.</p>\n<h2 id=\"Primary-Key-ìœ í˜•\" style=\"position:relative;\">Primary Key ìœ í˜•<a href=\"#Primary-Key-%EC%9C%A0%ED%98%95\" aria-label=\"Primary Key ìœ í˜• permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"ìë™-ì¦ê°€-Auto-Increment-Primary-Key\" style=\"position:relative;\">ìë™ ì¦ê°€ (Auto Increment) Primary Key<a href=\"#%EC%9E%90%EB%8F%99-%EC%A6%9D%EA%B0%80-Auto-Increment-Primary-Key\" aria-label=\"ìë™ ì¦ê°€ Auto Increment Primary Key permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><strong>ì¥ì </strong></p>\n<ul>\n<li>Primary Key ì±„ë²ˆì„ DBì— ìœ„ì„í•˜ë¯€ë¡œ ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ì¤„ì–´ë“ ë‹¤.</li>\n</ul>\n<p><strong>ë‹¨ì </strong></p>\n<ul>\n<li>í…Œì´ë¸”ì˜ ëŒ€ëŸ‰ INSERT ì‘ì—… ì‹œ, Auto Increament ì—ì„œ ë³‘ëª©í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<h3 id=\"UID\" style=\"position:relative;\">UID<a href=\"#UID\" aria-label=\"UID permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ êµ¬ì¡°ë¥¼ ì´í•´í•˜ë©´, UUIDì™€ ê°™ì€ ëœë¤ ê°’ì´ Primary Keyë¡œ ì„ ì •ë  ê²½ìš°, ë ˆì½”ë“œ í´ëŸ¬ìŠ¤í„°ë§ì— í•„ìš”í•œ ì˜¤ë²„í—¤ë“œë§Œ ë°œìƒí•˜ê³  í¬ê²Œ ì´ì ì´ ì—†ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.\nê·¸ëŸ¬ë‚˜ ëœë¤ UIDê°€ ì•„ë‹Œ ìˆœì°¨ì ì¸ UIDë¥¼ ìƒì„±í•˜ë©´ Auto Incrementì˜ ë³‘ëª©í˜„ìƒê³¼ í´ëŸ¬ìŠ¤í„°ë§ ì˜¤ë²„í—¤ë“œë¥¼ ëª¨ë‘ í”¼í•  ìˆ˜ ìˆë‹¤.\nìˆœì°¨ì ì¸ UIDëŠ” (í˜„ì¬ì‹œê° + ì¼ë ¨ë²ˆí˜¸) ë˜ëŠ” (epoch time + ì¼ë ¨ë²ˆí˜¸)ì™€ ê°™ì€ ì¡°í•©ìœ¼ë¡œ ìˆœì„œë¥¼ ìœ ì§€í•˜ëŠ” UIDë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>\n<p><strong>ì¥ì  (Sequential UID)</strong></p>\n<ul>\n<li>ëŒ€ëŸ‰ INSERT ì‘ì—…ì„ ë§¤ìš° ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<p><strong>ë‹¨ì  (Sequential UID)</strong></p>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìˆœì°¨ì ì¸ UIDë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</li>\n</ul>\n<h3 id=\"Composite-key\" style=\"position:relative;\">Composite key<a href=\"#Composite-key\" aria-label=\"Composite key permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ë…¼ë¦¬ ëª¨ë¸ë§ê³¼ ë¬¼ë¦¬ ëª¨ë¸ë§ì˜ ê²©ì°¨ê°€ ì ê³ , ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ë‹¤. ì¤‘ë³µí‚¤ ê°’ì´ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë™ì‹œì„± ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</p>\n<p><strong>ì¥ì </strong></p>\n<ul>\n<li>ê³µê°„ì  ì§€ì—­ì„±(Spatial Locality) ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<p><strong>ë‹¨ì </strong></p>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì±„ë²ˆì— ëŒ€í•œ ë™ì‹œì„± ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</li>\n</ul>\n<h2 id=\"ëŒ€ë¦¬í‚¤ì™€-ë³µí•©í‚¤-ë¹„êµ\" style=\"position:relative;\">ëŒ€ë¦¬í‚¤ì™€ ë³µí•©í‚¤ ë¹„êµ<a href=\"#%EB%8C%80%EB%A6%AC%ED%82%A4%EC%99%80-%EB%B3%B5%ED%95%A9%ED%82%A4-%EB%B9%84%EA%B5%90\" aria-label=\"ëŒ€ë¦¬í‚¤ì™€ ë³µí•©í‚¤ ë¹„êµ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Auto increament ì™€ UID ë¥¼ ì´ìš©í•œ ê¸°ë³¸í‚¤ ìœ í˜•ì€ ëŒ€ë¦¬í‚¤ë¡œ ì¼ë°˜í™”í•  ìˆ˜ ìˆë‹¤. Primary Keyë¥¼ ëŒ€ë¦¬í‚¤ë¡œ êµ¬ì„±í•œ ë°©ì‹ê³¼ ë³µí•©í‚¤ë¡œ êµ¬ì„±í•œ ë°©ì‹ì˜ ì°¨ì´ì ì„ ë¹„êµí•´ë³¸ë‹¤.</p>\n<h3 id=\"ë¶€ëª¨í…Œì´ë¸”ì˜-ê¸°ë³¸í‚¤ë¥¼-ìì‹-í…Œì´ë¸”ì˜-ê¸°ë³¸í‚¤ë¡œ-ì“°ì§€-ì•Šê³ -ì™¸ë˜í‚¤ë¡œ-ì‚¬ìš©í•˜ëŠ”-ê²½ìš°-ë¹„ì‹ë³„ê´€ê³„\" style=\"position:relative;\">ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¡œ ì“°ì§€ ì•Šê³ , ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° (ë¹„ì‹ë³„ê´€ê³„)<a href=\"#%EB%B6%80%EB%AA%A8%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%98-%EA%B8%B0%EB%B3%B8%ED%82%A4%EB%A5%BC-%EC%9E%90%EC%8B%9D-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%98-%EA%B8%B0%EB%B3%B8%ED%82%A4%EB%A1%9C-%EC%93%B0%EC%A7%80-%EC%95%8A%EA%B3%A0-%EC%99%B8%EB%9E%98%ED%82%A4%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%EB%B9%84%EC%8B%9D%EB%B3%84%EA%B4%80%EA%B3%84\" aria-label=\"ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¡œ ì“°ì§€ ì•Šê³  ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë¹„ì‹ë³„ê´€ê³„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1f5e3d12fa6da564430f23e5ca41b243/b72ad/mysql_img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.647058823529413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAy0lEQVR42pVQywqEMAzs//+aR0HB10FBREVsfT9ndwJZxNsGhrbJZKaJwR9xnheO4/iep+C+b8lf1/WDIeGZIOn51hzDWoe+77HvO5ZlQRzHCMMQzjnM84xhGGC6rpMiUVUVsiyT+ziOmKZJyBRlkBtFEXzfh+d5SNNUDJQrgkEQIM9zEWGztVaKBF2bppEG1ouiQJIkIlTXNdZ1lRVs2yYgx7RtK4Ja5DgKvunKfTEoTNOyLOX+Dtmh/kbHfoO/1B3SlAY6ImtPMPcB2IbQKDoxQukAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysql_img_1.png\"\n        title=\"\"\n        src=\"/static/1f5e3d12fa6da564430f23e5ca41b243/ca1dc/mysql_img_1.png\"\n        srcset=\"/static/1f5e3d12fa6da564430f23e5ca41b243/e7570/mysql_img_1.png 170w,\n/static/1f5e3d12fa6da564430f23e5ca41b243/f46e7/mysql_img_1.png 340w,\n/static/1f5e3d12fa6da564430f23e5ca41b243/ca1dc/mysql_img_1.png 680w,\n/static/1f5e3d12fa6da564430f23e5ca41b243/02d09/mysql_img_1.png 1020w,\n/static/1f5e3d12fa6da564430f23e5ca41b243/b72ad/mysql_img_1.png 1242w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">mysql_img_1.png</figcaption>\n  </figure></p>\n<p>Post, Comment í…Œì´ë¸” ë‘˜ ë‹¤ Auto Increament ê¸°ë³¸í‚¤ë¥¼ ì‚¬ìš©í•˜ê³ , Comment í…Œì´ë¸”ì— post_id FK ë¥¼ ë‘ì–´ Postì™€ ì—°ê´€ê´€ê³„ë¥¼ ë§ºëŠ” ë°©ì‹ì´ë‹¤.\nPost í…Œì´ë¸”ì´ Driving Tableì´ê³  Comment í…Œì´ë¸”ì´ Driven Table ì¸ ê²½ìš° ë‘ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ê²Œ ë˜ë©´ ì•„ë˜ ê·¸ë¦¼ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ íƒìƒ‰í•˜ê²Œ ëœë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/78873/mysql_img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.235294117647065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42o2Sy4qGMAxG//d/NhfiQpcq4kJExfvdDCeQ4vyMOIUQ26QnX2I/8rC2bZNxHKXrOvXYuq4ufl2XnmVZJnEcS13XeufzBKyqSnzflzAMJQgC8TxP8jx38eM4pCgKSZJEjVjf938DqU6QqsMwSFmWauyJGRBDddu2+v2o8DxPmaZJk+d5VuiyLHp2B+77rnHGAuwVCIg5oRbP/htoCvl+BVIdDxCF30DOgP1q2aqwuQO5TCKwpml0hrRmQCvGfdQ7hfyhKIokTVOXfG8ZD4i/zp4YF1GHKuL8LKeQA4wqHLKoZvOzlgECBkRhmyEQch3Qhm2Pl1bwtGtAQLQMGAgqLc9G41qmIkGMWRKw54DZczF1XDJ1eHJe3+F/lqlEBIXMfgDl9Kcs3J4rhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysql_img_2.png\"\n        title=\"\"\n        src=\"/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/ca1dc/mysql_img_2.png\"\n        srcset=\"/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/e7570/mysql_img_2.png 170w,\n/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/f46e7/mysql_img_2.png 340w,\n/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/ca1dc/mysql_img_2.png 680w,\n/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/02d09/mysql_img_2.png 1020w,\n/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/9d567/mysql_img_2.png 1360w,\n/static/e16c9fb809bb5cbd5d5e61d54e7e48f4/78873/mysql_img_2.png 1520w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">mysql_img_2.png</figcaption>\n  </figure></p>\n<p>ì¡°ì¸ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´, Post í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ì™€ ì—°ê²°ëœ Comment í…Œì´ë¸”ì˜ Post_id ê°’ìœ¼ë¡œ ì¡°ì¸ì´ ì´ë£¨ì–´ì§„ë‹¤. Comment í…Œì´ë¸”ì˜ post_idì—ëŠ” ì´ë¯¸ ì¸ë±ìŠ¤ê°€ ìƒì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, Index Range Scanì„ ì‚¬ìš©í•˜ì—¬ Post í…Œì´ë¸”ê³¼ Comment í…Œì´ë¸”ì„ ë§µí•‘í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” SELECT ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ Comment í…Œì´ë¸”ì˜ ë ˆì½”ë“œë¥¼ ê²€ìƒ‰í•œë‹¤. ì´ ê³¼ì •ì—ì„œ Comment ë ˆì½”ë“œì˜ íƒìƒ‰ì„ ìœ„í•´ Random I/Oê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. Comment í…Œì´ë¸”ì˜ POST_ID_IDX ì¸ë±ìŠ¤ëŠ” POST_IDë³„ë¡œ ì •ë ¬ë˜ì–´ ìˆì–´ ê°™ì€ POST_IDë¥¼ ê°€ì§€ë”ë¼ë„ COMMENT_IDëŠ” ë©€ë¦¬ ë–¨ì–´ì ¸ìˆëŠ” ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì˜ ê·¸ë¦¼ì—ì„œ, Post í…Œì´ë¸”ì—ì„œ id=3ì¸ ë ˆì½”ë“œë¥¼ ì¡°íšŒí•˜ë©´, Comment í…Œì´ë¸”ì˜ post_idì™€ì˜ ì¡°ì¸ ê²°ê³¼ë¡œ Comment id (100, 200)ì´ ë°˜í™˜ëœë‹¤. í˜ì´ì§€ ë‹¹ 50ê°œ ë ˆì½”ë“œê°€ ì €ì¥ëœë‹¤ê³  ê°€ì •í•˜ë©´ 2ê°œì˜ Comment ë ˆì½”ë“œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì´ 2ê°œì˜ í˜ì´ì§€ ì½ê¸° ì‘ì—…ì´ í•„ìš”í•˜ê²Œ ëœë‹¤.</p>\n<h3 id=\"ë¶€ëª¨í…Œì´ë¸”ì˜-ê¸°ë³¸í‚¤ë¥¼-ìì‹-í…Œì´ë¸”-ê¸°ë³¸í‚¤ì—-í¬í•¨í•˜ëŠ”-ê²½ìš°-ì‹ë³„ê´€ê³„\" style=\"position:relative;\">ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ìì‹ í…Œì´ë¸” ê¸°ë³¸í‚¤ì— í¬í•¨í•˜ëŠ” ê²½ìš° (ì‹ë³„ê´€ê³„)<a href=\"#%EB%B6%80%EB%AA%A8%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%98-%EA%B8%B0%EB%B3%B8%ED%82%A4%EB%A5%BC-%EC%9E%90%EC%8B%9D-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B8%B0%EB%B3%B8%ED%82%A4%EC%97%90-%ED%8F%AC%ED%95%A8%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%EC%8B%9D%EB%B3%84%EA%B4%80%EA%B3%84\" aria-label=\"ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ìì‹ í…Œì´ë¸” ê¸°ë³¸í‚¤ì— í¬í•¨í•˜ëŠ” ê²½ìš° ì‹ë³„ê´€ê³„ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc6ee2a60d393df21fcb393cd6e4ecdc/abff7/mysql_img_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAx0lEQVR42pVR2QqEQAyb//8+QXxwwAtXZEbxdjyypFBZfNtCcChJmlaDP2rbNuz7jhACxnFE13VY11V6xHmeMErid1kWDMMgbwXFrOM44JwXDvlFUSCOY/R9L71pmgSmrj8yiWLvPbIse8yVqIZt2yJNU1hrcV2X9O/7fsC0hgZJkmCe5ye+mhHOORnAJE3TIM9zRFGEqqrEhMZqSL6hEUU04w24ItMomJBkmnITGpVlKQHekJX1oHrHN2iqxWEUUcz3r1Z/yhfJf9Dl20Hy0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysql_img_3.png\"\n        title=\"\"\n        src=\"/static/dc6ee2a60d393df21fcb393cd6e4ecdc/ca1dc/mysql_img_3.png\"\n        srcset=\"/static/dc6ee2a60d393df21fcb393cd6e4ecdc/e7570/mysql_img_3.png 170w,\n/static/dc6ee2a60d393df21fcb393cd6e4ecdc/f46e7/mysql_img_3.png 340w,\n/static/dc6ee2a60d393df21fcb393cd6e4ecdc/ca1dc/mysql_img_3.png 680w,\n/static/dc6ee2a60d393df21fcb393cd6e4ecdc/02d09/mysql_img_3.png 1020w,\n/static/dc6ee2a60d393df21fcb393cd6e4ecdc/abff7/mysql_img_3.png 1267w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">mysql_img_3.png</figcaption>\n  </figure></p>\n<p>ë‘ë²ˆì§¸ ì˜ˆì—ì„œëŠ” Commentê°€ POSTì˜ IDë¥¼ ìì‹ ì˜ ê¸°ë³¸í‚¤ì— í¬í•¨ì‹œí‚¨ Composite Keyë¡œ PKë¥¼ êµ¬ì„±í•œ ì˜ˆì´ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì•„ë˜ëŠ” Post í…Œì´ë¸”ì´ Driving Tableì´ê³  Comment í…Œì´ë¸”ì´ Driven Table ì¸ ê²½ìš° ë‘ í…Œì´ë¸”ì„ ì¡°ì¸í•  ë•Œ, ë°ì´í„° íƒìƒ‰ ë°©ì‹ì´ë‹¤.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fdb57c196b73d47622224329f6014673/f0e87/mysql_img_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR42nWS2QqEMAxF5///T3xQQV8UEfd9zXA6xOk4WgitTXq8N+1LHsZxHLKuq0zTJPM8y7ZtZs8e5LMskziOpWkak389waqqkiAIxHVdcRxHPM+Tuq5P6L7vBsQ+NWEYSlmW90AGySRJDJg5iiLJ8/wHiEKUD8NwurkFUtx1nYzjaKxwQIOcDaSGn7OmNY+W27Y1gU1mlPZ9/wcEAnBZlg/w2mgFchgLwFDB+grEripk/QO0wQrEIkDWKLyzDIj8adn3fSHSNP3rIQGQmQu5AgGQK4riq5Ae0XgSWqwKCVUIkJmDqFGQ5k+FwAgS+ohZ0xf2scq31untU8tFAELUqVCfg6phkwMc1H2+tQ4AQ5Xaz8a8Q+xpXG/6Luw+A7B/SrwBZvWna8XSdDQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysql_img_4.png\"\n        title=\"\"\n        src=\"/static/fdb57c196b73d47622224329f6014673/ca1dc/mysql_img_4.png\"\n        srcset=\"/static/fdb57c196b73d47622224329f6014673/e7570/mysql_img_4.png 170w,\n/static/fdb57c196b73d47622224329f6014673/f46e7/mysql_img_4.png 340w,\n/static/fdb57c196b73d47622224329f6014673/ca1dc/mysql_img_4.png 680w,\n/static/fdb57c196b73d47622224329f6014673/02d09/mysql_img_4.png 1020w,\n/static/fdb57c196b73d47622224329f6014673/9d567/mysql_img_4.png 1360w,\n/static/fdb57c196b73d47622224329f6014673/f0e87/mysql_img_4.png 1554w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">mysql_img_4.png</figcaption>\n  </figure></p>\n<p>ì²«ë²ˆì§¸ ë°©ì‹ê³¼ ìœ ì‚¬í•˜ê²Œ, ì¡°ì¸ì´ ë°œìƒí–ˆì„ ë•Œ Comment ë ˆì½”ë“œë¥¼ ì½ì–´ì˜¤ê¸° ìœ„í•´ í˜ì´ì§€ 3ì„ ë‘ ë²ˆ ì°¸ì¡°í•˜ê²Œ ë˜ì§€ë§Œ, ì´ ê²½ìš° í˜ì´ì§€ 3ì€ ì´ë¯¸ ìºì‹±ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë‘ ë²ˆì§¸ ì°¸ì¡°ëŠ” ì¶”ê°€ì ì¸ I/Oë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ë‘ ë°©ì‹ì—ì„œ ë…¼ë¦¬ì  í˜ì´ì§€ I/OëŠ” 2ë¡œ ë™ì¼í•˜ì§€ë§Œ, ë¬¼ë¦¬ì  í˜ì´ì§€ I/O(ìºì‹œ ì ìš© ì‹œ)ëŠ” ê°ê° 2ì™€ 1ë¡œ ë‹¤ë¥´ë‹¤. ì¡°ì¸ë˜ëŠ” ë°ì´í„°ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë‘ ë°©ì‹ ì‚¬ì´ì˜ ë¬¼ë¦¬ì  I/O ì°¨ì´ëŠ” ë”ìš± ì»¤ì§€ê²Œ ëœë‹¤.</p>\n<p>ì´ëŸ¬í•œ ê²°ê³¼ëŠ” ë‘ ë²ˆì§¸ ì¼€ì´ìŠ¤ì—ì„œ ì‹ë³„ê´€ê³„ë¥¼ ì‚¬ìš©í•´ ê¸°ë³¸í‚¤ë¥¼ ë³µí•©í‚¤ë¡œ êµ¬ì„±í–ˆê¸° ë•Œë¬¸ì— ë°œìƒí•œë‹¤. POST_IDë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¡°ì¸ì„ ìˆ˜í–‰í•  ë•Œ, ê³µê°„ì  ì§€ì—­ì„±(Spatial Locality)ì˜ ì›ë¦¬ê°€ ì ìš©ë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. íŠ¹ì • Postì— ì†í•œ Comment ì§‘í•©ì€ ê°™ì€ ë…¼ë¦¬ì  ì˜ì—­ì— ì†í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. POST<em>IDì™€ COMMENT</em>IDë¡œ í´ëŸ¬ìŠ¤í„°ë§í•˜ë©´, ë¬¼ë¦¬ì ìœ¼ë¡œë„ POST_IDì— ì†í•œ COMMENT ì§‘í•©ì´ ìœ ì‚¬í•œ ì˜ì—­ì— ìœ„ì¹˜í•˜ê²Œ ë˜ë¯€ë¡œ ìºì‹± í™•ë¥ ì´ ë†’ì•„ì§€ê²Œ ëœë‹¤.</p>\n<p>ì‹¤ì œë¡œ ê°™ì€ í˜ì´ì§€ ë²ˆí˜¸ì— ì €ì¥ë˜ì–´ ìˆëŠ” ë ˆì½”ë“œë¥¼ íƒìƒ‰í•˜ê¸° ìœ„í•´ì„œ ëª‡ë²ˆì˜ I/Oê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” MySQLì—ì„œ ì œê³µí•˜ëŠ” ìƒíƒœ ë³€ìˆ˜ ì¤‘ Innodb_buffer_pool_reads ê°’ì„ í™•ì¸í•˜ì—¬ ë¬¼ë¦¬ì  I/O ë°œìƒëŸ‰ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ ìƒíƒœë³€ìˆ˜ëŠ” ë²„í¼í’€ì—ì„œ ì½ì§€ëª»í•˜ê³  ë””ìŠ¤í¬ì—ì„œ ì§ì ‘ ì½ì€ ìˆ˜ë¥¼ ì˜ë¯¸í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤.</p>\n<h4>ë°ì´í„°ë¥¼ ì½ê¸° ì „ì— Innodb_buffer_pool_reads ê°’</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mysql<span class=\"token operator\">></span> SHOW <span class=\"token environment constant\">SESSION</span> STATUS LIKE <span class=\"token string\">'Innodb_buffer_pool_reads%'</span><span class=\"token punctuation\">;</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Variable_name            <span class=\"token operator\">|</span> Value <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Innodb_buffer_pool_reads <span class=\"token operator\">|</span> <span class=\"token number\">1652</span>  <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token number\">1</span> row <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.03</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<h4>ë©€ë¦¬ ë–¨ì–´ì§„ ë‘ ê°œì˜ Recordë¥¼ ë‘ ê±´ ì½ëŠ” ê²½ìš° (ë ˆì½”ë“œì˜ í˜ì´ì§€ê°€ ë‹¤ë¥¸ ê²½ìš°)</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> *\n-<span class=\"token operator\">></span> from ORDER\n-<span class=\"token operator\">></span> where ORDER.ORDER_NO <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2000,3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nSHOW <span class=\"token environment constant\">SESSION</span> STATUS LIKE <span class=\"token string\">'Innodb_buffer_pool_reads%'</span><span class=\"token punctuation\">;</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Variable_name            <span class=\"token operator\">|</span> Value <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Innodb_buffer_pool_reads <span class=\"token operator\">|</span> <span class=\"token number\">1654</span>  <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token number\">1</span> row <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.04</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>PKê°€ 2000, 3000 ì¸ ë ˆì½”ë“œ ë‘ ê±´ì„ ì½ì—ˆì„ ë–„ Innodb_buffer_pool_reads ë³€ìˆ˜ê°€ 1652 â†’ 1654 ë¡œ ì¦ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 2ë²ˆì˜ Disk I/Oê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>\n<h4>í´ëŸ¬ìŠ¤í„°ë§ìœ¼ë¡œ ì¸ì ‘í•œ Recordë¥¼ ë‘ ê±´ ì½ëŠ” ê²½ìš° (ë ˆì½”ë“œ í˜ì´ì§€ê°€ ê°™ì€ ê²½ìš°)</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> *\n-<span class=\"token operator\">></span> from <span class=\"token variable\"><span class=\"token variable\">`</span>MARKETBOM2_SCHM<span class=\"token variable\">`</span></span>.BIZ_SLIP_TRADE\n-<span class=\"token operator\">></span> where BIZ_SLIP_TRADE.TRADE_SLIP_NO <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5000,5001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmysql<span class=\"token operator\">></span> SHOW <span class=\"token environment constant\">SESSION</span> STATUS LIKE <span class=\"token string\">'Innodb_buffer_pool_reads%'</span><span class=\"token punctuation\">;</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Variable_name            <span class=\"token operator\">|</span> Value <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token operator\">|</span> Innodb_buffer_pool_reads <span class=\"token operator\">|</span> <span class=\"token number\">1655</span>  <span class=\"token operator\">|</span>\n+--------------------------+-------+\n<span class=\"token number\">1</span> row <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>PKê°€ 5000, 5001 ì¸ ë ˆì½”ë“œë¥¼ ë‘ ê±´ ì½ì—ˆì„ ë•Œ Innodb_buffer_pool_read ë³€ìˆ˜ê°€ 1654 â†’ 1655 ë¡œ ì¦ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì•„ê¹Œì™€ ê°™ì´ ë ˆì½”ë“œë¥¼ ë‘ ê±´ ì½ì—ˆì§€ë§Œ ì‹¤ì œ Disk I/O ë°œìƒëŸ‰ì€ 1ë²ˆì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>MySQLì˜ ê³ ì„±ëŠ¥ Primary Key ì„¤ê³„ë¥¼ ìœ„í•´ì„œëŠ” í´ëŸ¬ìŠ¤í„°ë§ ì¸ë±ìŠ¤ì˜ íŠ¹ì„±ì„ ì´í•´í•˜ê³  í…Œì´ë¸”ì˜ ì£¼ ìš©ë„ ë° ì•¡ì„¸ìŠ¤ íŒ¨í„´ì„ ì •í™•íˆ íŒŒì•…í•´ì•¼ í•œë‹¤.</p>\n<p>ì“°ê¸° ì¤‘ì‹¬ì˜ ì‘ì—…ì—ì„œëŠ” ìˆœì°¨ì  IDë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì“°ê¸° ì‘ì—… ì‹œ ë””ìŠ¤í¬ I/Oë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•¨ì´ë‹¤.</p>\n<p>ì½ê¸° ì¤‘ì‹¬ì˜ ì‘ì—…ì—ì„œëŠ” Random I/Oê°€ ì£¼ë¡œ ë°œìƒí•œë‹¤ë©´ ëŒ€ë¦¬í‚¤ë¥¼, Join ë§ì´ ê±¸ë¦¬ê±°ë‚˜ ì—…ë¬´ì ìœ¼ë¡œ ì—°ê´€ëœ ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ì¡°íšŒê°€ ë§ì´ ë˜ëŠ” ê²½ìš°ë¼ë©´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¸ì ‘í•  ìˆ˜ ìˆë„ë¡ ì—…ë¬´ì ì¸ ë³µí•©í‚¤ë¥¼ êµ¬ì„±í•˜ëŠ”ê²Œ ìœ ë¦¬í•  ê²ƒ ì´ë‹¤.</p>\n<p>ì‹¤ì œ ì—…ë¬´ ì‹œìŠ¤í…œì—ì„œëŠ” ì¤‘ìš”í•œ í…Œì´ë¸”(ì˜ˆ: ì´ì»¤ë¨¸ìŠ¤ì˜ ì£¼ë¬¸ í…Œì´ë¸”)ì— ëŒ€í•´ì„œëŠ” ì“°ê¸°ì™€ ì½ê¸° ì‘ì—… ëª¨ë‘ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•œë‹¤. ì´ëŸ° ìƒí™©ì—ì„œëŠ” ì“°ê¸°ì™€ ì½ê¸° ê°„ì˜ íŠ¸ë ˆì´ë“œ ì˜¤í”„ë¥¼ ê³ ë ¤í•˜ì—¬ ê²°ì •í•´ì•¼í•œë‹¤. ëŒ€ë‹¤ìˆ˜ì˜ ì‹œìŠ¤í…œì—ì„œ ì“°ê¸° ëŒ€ë¹„ ì½ê¸°ì˜ ë¹„ìœ¨ì´ 8:2 ë˜ëŠ” 9:1ë¡œ ë‚˜íƒ€ë‚˜ê¸° ë•Œë¬¸ì—, ì½ê¸° ì‘ì—…ì— ìµœì í™”ëœ ì„¤ê³„ë¥¼ íƒí•˜ëŠ” ê²ƒì´ ëŒ€ì²´ë¡œ ìœ ë¦¬í•  ê²ƒ ì´ë‹¤.</p>\n<p>ì¤‘ìš”í•œê²ƒì€ MySQLì˜ í´ëŸ¬ìŠ¤í„° ì¸ë±ìŠ¤ì™€ ì„¸ì»¨ë”ë¦¬ ì¸ë±ìŠ¤ êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³ , ê·¸ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹œìŠ¤í…œ ìš”êµ¬ ì‚¬í•­ì— ê°€ì¥ ì í•©í•œ  Primary Keyë¥¼ ì„ íƒí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</p>","fields":{"slug":"/mysql-primary-key-design/"},"frontmatter":{"title":"ê³ ì„±ëŠ¥ì„ ìœ„í•œ MySQL Primary Key ì„¤ê³„ ì „ëµ","date":"August 06, 2023"}},{"id":"0c1fde6e-04b9-55b9-9496-1b8635b58e46","html":"<h2 id=\"Spring-Boot2--Ehcache3\" style=\"position:relative;\">Spring Boot2 + Ehcache3<a href=\"#Spring-Boot2--Ehcache3\" aria-label=\"Spring Boot2  Ehcache3 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Spring Cache Abstract ì™€ Ehcache3 ëª¨ë“ˆ ì„¤ì • ë°©ë²•ì„ ì•Œì•„ë³¸ë‹¤.</p>\n<h2 id=\"Gradle-Dependency-ì„¤ì •\" style=\"position:relative;\">Gradle Dependency ì„¤ì •<a href=\"#Gradle-Dependency-%EC%84%A4%EC%A0%95\" aria-label=\"Gradle Dependency ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">implementation(\"org.springframework.boot:spring-boot-starter-cache\")\nimplementation(\"org.ehcache:ehcache:3.9.5\")\nimplementation(\"javax.cache:cache-api:1.1.1\")</code></pre></div>\n<h2 id=\"ìºì‹œ-êµ¬ì„±\" style=\"position:relative;\">ìºì‹œ êµ¬ì„±<a href=\"#%EC%BA%90%EC%8B%9C-%EA%B5%AC%EC%84%B1\" aria-label=\"ìºì‹œ êµ¬ì„± permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Ehcache3 ë²„ì „ë¶€í„°ëŠ” JSR-107ì„ ìë°” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.\nìºì‹œì— ëŒ€í•œ ìë°” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ JCache ë¼ê³  í•œë‹¤.\nJPA êµ¬í˜„ì²´ì— Hibernate ì™€ EclipseLink ë“±ì´ ìˆëŠ” ê²ƒ ì²˜ëŸ¼ JCache êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ê°€ Ehcache3 ì´ë‹¤.</p>\n<!-- more -->\n<h3 id=\"Ehcache-Configuration\" style=\"position:relative;\">Ehcache Configuration<a href=\"#Ehcache-Configuration\" aria-label=\"Ehcache Configuration permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>EhcacheëŠ” Programmatic ê³¼ xml ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nìì„¸í•œê±´ <a href=\"https://www.ehcache.org/documentation/3.9/getting-started.html#configuring-with-java\">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì.\nì—¬ê¸°ì„œëŠ” XML ë°©ì‹ì´ ì¡°ê¸ˆ ë” ê´€ë¦¬í•˜ê¸° ì‰¬ìš¸ ê²ƒ ê°™ì•„ XML ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>config</span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">'</span></span>\n  <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>http://www.ehcache.org/v3<span class=\"token punctuation\">'</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>jsr107</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.ehcache.org/v3/jsr107<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core.xsd\n        http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">jsr107:</span>defaults</span> <span class=\"token attr-name\">enable-management</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">enable-statistics</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>service</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>cache-template</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>default<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>listeners</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>listener</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>class</span><span class=\"token punctuation\">></span></span>com.example.springboot.cache.EhcacheEventListener<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>class</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>event-firing-mode</span><span class=\"token punctuation\">></span></span>ASYNCHRONOUS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>event-firing-mode</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>event-ordering-mode</span><span class=\"token punctuation\">></span></span>UNORDERED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>event-ordering-mode</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>CREATED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>UPDATED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>EXPIRED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>REMOVED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>EVICTED<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>events-to-fire-on</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>listener</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>listeners</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>heap</span><span class=\"token punctuation\">></span></span>100<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>heap</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>offheap</span> <span class=\"token attr-name\">unit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>MB<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>offheap</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>cache-template</span><span class=\"token punctuation\">></span></span>\n\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>cache</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findByEventGroupId<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">uses-template</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>default<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>key-type</span><span class=\"token punctuation\">></span></span>java.lang.String<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>key-type</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value-type</span><span class=\"token punctuation\">></span></span>com.marketboro.marketbom2.module.system.domain.entity.applicationmessage.Eventagsgregator<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value-type</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>expiry</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ttl</span> <span class=\"token attr-name\">unit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>minutes<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ttl</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>expiry</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>cache</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>config</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><a href=\"https://www.ehcache.org/documentation/3.9/xml.html\">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ XMLì˜ elementë“¤ì„ ì •ë¦¬í•˜ì˜€ë‹¤.</p>\n<h3 id=\"config\" style=\"position:relative;\"><code class=\"language-text\">&lt;config></code><a href=\"#config\" aria-label=\"config permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>XML êµ¬ì„±ì˜ ë£¨íŠ¸ ìš”ì†Œì´ë‹¤. í•˜ë‚˜ì˜ <code class=\"language-text\">&lt;config></code> ìš”ì†ŒëŠ” CacheManagerì— ëŒ€í•œ ì •ì˜ë¥¼ ì œê³µí•œë‹¤.</p>\n<h3 id=\"persistence\" style=\"position:relative;\"><code class=\"language-text\">&lt;persistence></code><a href=\"#persistence\" aria-label=\"persistence permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì˜ì†í™” ìºì‹œ ë§¤ë‹ˆì €ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ìš”ì†Œì´ë‹¤. ì—¬ê¸°ì—ëŠ” ë””ìŠ¤í¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ í•˜ëŠ” ë””ë ‰í„°ë¦¬ ìœ„ì¹˜ê°€ í•„ìš”í•˜ë‹¤.</p>\n<h3 id=\"cache\" style=\"position:relative;\"><code class=\"language-text\">&lt;cache></code><a href=\"#cache\" aria-label=\"cache permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">&lt;cache></code> ìš”ì†ŒëŠ” CacheManagerì— ì˜í•´ ìƒì„± ë° ê´€ë¦¬ë  Cache ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.\n<code class=\"language-text\">&lt;cache></code> ìš”ì†ŒëŠ” Aliasë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ì§€ì •í•´ì¤˜ì•¼í•œë‹¤. AliasëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê°™ì€ ì—­í™œì„ í•œë‹¤.\nKey ê°’ì´ ê°™ë”ë¼ë„ Alias(ë„¤ì„ìŠ¤í˜ì´ìŠ¤)ê°€ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ë³„ê°œë¡œ ì €ì¥ëœë‹¤.</p>\n<p><code class=\"language-text\">&lt;cache></code> ìš”ì†ŒëŠ” ì•„ë˜ ìš”ì†Œë“¤ì„ í¬í•¨í•  ìˆ˜ ìˆë‹¤.</p>\n<ol>\n<li><code class=\"language-text\">&lt;key-type></code>: ìºì‹œ Keyì— í•´ë‹¹í•˜ëŠ” í’€íŒ¨í‚¤ì§€ í´ë˜ìŠ¤ëª…</li>\n<li><code class=\"language-text\">&lt;value-type></code>: ìºì‹œ Valueì— í•´ë‹¹í•˜ëŠ” í’€íŒ¨í‚¤ì§€ í´ë˜ìŠ¤ëª…</li>\n<li><code class=\"language-text\">&lt;expiry></code>: ë§Œë£Œ ìœ í˜•ì— ëŒ€í•œ ì„¤ì •</li>\n<li><code class=\"language-text\">&lt;eviction-advisor></code>: ìºì‰¬ ë§Œë£Œì— ëŒ€í•œ advisorë¥¼ ì„¤ì •í•œë‹¤.</li>\n<li><code class=\"language-text\">&lt;resource></code>: ìŠ¤í† ë¦¬ì§€ ê³„ì¸µê³¼ ìš©ëŸ‰ì„ ì„¤ì •í•œë‹¤. heap ë§Œ ì‚¬ìš©í•  ê²½ìš° <code class=\"language-text\">&lt;heap></code> ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥</li>\n</ol>\n<p>ìŠ¤í† ë¦¬ì§€ ê³„ì¸µì€ ë‹¤ì–‘í•œ ë°ì´í„° ì €ì¥ ì˜ì—­ì„ ì‚¬ìš©í•˜ë„ë¡ Ehcacheë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.\nEhcacheì—ì„œ ì§€ì›í•˜ëŠ” ë°ì´í„° ì €ì¥ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\nê³„ì¸µ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì¤‘ ê³„ì¸µ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤. ìºì‹œê°€ On-Heap ê³„ì¸µì— ì—†ìœ¼ë©´ Off-heap ê³„ì¸µì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.\në‹¤ì¤‘ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í• ì ì€, ì•„ë˜ ê³„ì¸µ ìŠ¤í† ë¦¬ì§€ í• ë‹¹ëŸ‰ë³´ë‹¤ ìœ— ê³„ì¸µ ìŠ¤í† ë¦¬ì§€ í• ë‹¬ëŸ‰ì´ ì ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.</p>\n<ul>\n<li>On-Heap Store<br>\nJavaì˜ ì˜¨-í™ RAM ë©”ëª¨ë¦¬ë¥¼ í™œìš©í•˜ì—¬ ìºì‹œ í•­ëª©ì„ ì €ì¥í•©ë‹ˆë‹¤. ì´ ê³„ì¸µì€ Java ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë™ì¼í•œ í™ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©°, ëª¨ë“  í™ ë©”ëª¨ë¦¬ëŠ” JVM ê°€ë¹„ì§€ ì»¬ë ‰í„°ì—ì„œ ìŠ¤ìº”í•´ì•¼ í•©ë‹ˆë‹¤. JVMì´ ì‚¬ìš©í•˜ëŠ” í™ ê³µê°„ì´ ë§ì„ìˆ˜ë¡ ê°€ë¹„ì§€ ìˆ˜ì§‘ ì¼ì‹œ ì¤‘ì§€ë¡œ ì¸í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ì´ ë”\në§ì´ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤. ì´ ì €ì¥ì†ŒëŠ” ë§¤ìš° ë¹ ë¥´ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ì œí•œëœ ì €ì¥ì†Œ ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤.</li>\n<li>Off-Heap Store<br>\nì‚¬ìš© ê°€ëŠ¥í•œ RAMì— ì˜í•´ì„œë§Œ í¬ê¸°ê°€ ì œí•œë©ë‹ˆë‹¤. Java ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(GC)ì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§¤ìš° ë¹ ë¥´ì§€ë§Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ë‹¤ì‹œ ì•¡ì„¸ìŠ¤í•  ë•Œ JVM í™ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì´ë™í•´ì•¼ í•˜ë¯€ë¡œ ì˜¨-í™ ìŠ¤í† ì–´ë³´ë‹¤ ëŠë¦½ë‹ˆë‹¤.</li>\n<li>Disk Store<br>\në””ìŠ¤í¬ ì €ì¥ì†Œ - ë””ìŠ¤í¬(íŒŒì¼ ì‹œìŠ¤í…œ)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹œ í•­ëª©ì„ ì €ì¥í•©ë‹ˆë‹¤. ì´ ìœ í˜•ì˜ ì €ì¥ì†Œ ë¦¬ì†ŒìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë§¤ìš° í’ë¶€í•˜ì§€ë§Œ RAM ê¸°ë°˜ ì €ì¥ì†Œë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤. ë””ìŠ¤í¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° ì²˜ë¦¬ëŸ‰ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ ë¹ ë¥¸ ì „ìš© ë””ìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´\nì¢‹ìŠµë‹ˆë‹¤.</li>\n<li>Clustered Store<br>\nì´ ë°ì´í„° ì €ì¥ì†ŒëŠ” ì›ê²© ì„œë²„ì— ìˆëŠ” ìºì‹œì…ë‹ˆë‹¤. ì›ê²© ì„œë²„ì—ëŠ” ì„ íƒì ìœ¼ë¡œ ì¥ì•  ì¡°ì¹˜ ì„œë²„ê°€ ìˆì–´ ê³ ê°€ìš©ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°í˜• ìŠ¤í† ë¦¬ì§€ëŠ” í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ì¼ê´€ì„± ìœ ì§€ì™€ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë“±ì˜ ìš”ì¸ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ ê³„ì¸µì€ ë³¸ì§ˆì ìœ¼ë¡œ ë¡œì»¬ ì˜¤í”„ í™\nìŠ¤í† ë¦¬ì§€ë³´ë‹¤ ëŠë¦½ë‹ˆë‹¤.\nTerracotta ë¼ëŠ” ë¶„ì‚° ìºì‹œ ì„œë²„ë¡œë§Œ ê°€ëŠ¥í•œ ê²ƒ ê°™ë‹¤.</li>\n</ul>\n<h3 id=\"cache-template\" style=\"position:relative;\"><code class=\"language-text\">&lt;cache-template></code><a href=\"#cache-template\" aria-label=\"cache template permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">&lt;cache></code> ìš”ì†Œê°€ í…œí”Œë¦¿ì„ ìƒì†ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. <code class=\"language-text\">uses-template</code> ì†ì„±ì„ í†µí•´ cache-templateì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ìºì‹œ-êµì²´-ì •ì±…\" style=\"position:relative;\">ìºì‹œ êµì²´ ì •ì±…<a href=\"#%EC%BA%90%EC%8B%9C-%EA%B5%90%EC%B2%B4-%EC%A0%95%EC%B1%85\" aria-label=\"ìºì‹œ êµì²´ ì •ì±… permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Ehcache 2.x ë²„ì „ì—ì„œëŠ” í™ ë©”ëª¨ë¦¬ì— ëŒ€í•œ ìºì‹œ êµì²´ ì •ì±…<code class=\"language-text\">(LRU, LFU, FIFO)</code>ì„ ì§€ì›í–ˆë‹¤. ê·¸ëŸ°ë° Ehcache 3ë¶€í„°ëŠ” 3ê°€ì§€ ì •ì±…ì´ ì‚¬ë¼ì¡ŒëŠ”ë°,\nêµ¬ê¸€ë§ì„ í†µí•´ ì¡°ì‚¬í•´ë³¸ ê²°ê³¼, í™ ë©”ëª¨ë¦¬ êµì²´ ì •ì±…ê³¼ ë‹¤ë¥¸ ê³„ì¸µì˜ êµì²´ ì •ì±…ì´ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì§€ì›ì´ ì¤‘ë‹¨ëœ ë“¯ í•˜ë‹¤.\nê·¸ë˜ì„œ 3 ë²„ì „ ê¸°ì¤€ìœ¼ë¡œëŠ” ë‹¤ìŒ ì„¸ê°€ì§€ ì •ì±…ì„ ì œê³µí•˜ê³  ìˆë‹¤.</p>\n<ul>\n<li>no expiry : ìºì‹œ ë§¤í•‘ì´ ë§Œë£Œë˜ì§€ ì•ŠìŒ</li>\n<li>time-to-live : ìºì‹œ ë§¤í•‘ì´ ìƒì„±ëœ í›„ ì •í•´ì§„ ê¸°ê°„ í›„ì— ë§Œë£Œë¨</li>\n<li>time-to-idle : ìºì‹œ ë§¤í•‘ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•œ ì‹œê°„ ì´í›„ ì •í•´ì§„ ê¸°ê°„ í›„ì— ë§Œë£Œë¨</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>cache</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>withExpiry<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>expiry</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ttl</span> <span class=\"token attr-name\">unit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>seconds<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>20<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ttl</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>expiry</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>heap</span><span class=\"token punctuation\">></span></span>100<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>heap</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>cache</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"Custom-expiry\" style=\"position:relative;\">Custom expiry<a href=\"#Custom-expiry\" aria-label=\"Custom expiry permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Ehcache3 ì€ Custom expiry ì •ì±…ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” custom policy í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ExpiryPolicy</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token class-name\">Duration</span> <span class=\"token constant\">INFINITE</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Duration</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofNanos</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_VALUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">ExpiryPolicy</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token constant\">NO_EXPIRY</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExpiryPolicy</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"No Expiry\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForCreation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">INFINITE</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForAccess</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Supplier</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForUpdate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Supplier</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> oldValue<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> newValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForCreation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> var1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span> var2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForAccess</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> var1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Supplier</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> var2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token class-name\">Duration</span> <span class=\"token function\">getExpiryForUpdate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> var1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Supplier</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> var2<span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span> var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>cache</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>withCustomExpiry<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>expiry</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>class</span><span class=\"token punctuation\">></span></span>com.pany.ehcache.MyExpiry<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>class</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>expiry</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>heap</span><span class=\"token punctuation\">></span></span>100<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>heap</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>cache</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"Springboot-Configuration\" style=\"position:relative;\">Springboot Configuration<a href=\"#Springboot-Configuration\" aria-label=\"Springboot Configuration permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Ehcache3 ëŠ” JCache ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">jcache</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span> classpath<span class=\"token punctuation\">:</span>ehcache.xml</code></pre></div>\n<p>Ehcache 2.x ë²„ì „ì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ehcache</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span> classpath<span class=\"token punctuation\">:</span>ehcache.xml</code></pre></div>\n<p>ê·¸ë¦¬ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì— <code class=\"language-text\">@EnableCaching</code> ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableCaching</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ExampleApplication</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìƒˆ í”„ë¡œì íŠ¸ë¡œ ì‹œì‘í•œë‹¤ë©´ ì—¬ê¸°ê¹Œì§€ë§Œ í•´ë„ Springboot ì™€ Ehcache ì„¤ì •ì€ ì™„ë£Œëœë‹¤.\në§Œì•½, í”„ë¡œì íŠ¸ì— redisë¥¼ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ë©´ redisê°€ Ehcacheë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ì•„ ê¸°ë³¸ CacheMangerë¥¼ <code class=\"language-text\">RedissonSpringCacheManager</code>ë¡œ ì„¤ì •í•œë‹¤.\në”°ë¼ì„œ, ë”°ë¡œ Ehcacheìš© CacheManagerë¥¼ <code class=\"language-text\">@Bean</code>ìœ¼ë¡œ ë“±ë¡í•´ì£¼ì–´ì•¼ í•œë‹¤.\nì—¬ê¸°ì„œ ì¤‘ìš”í•œê²ƒì€ <code class=\"language-text\">org.springframework.cache.CacheManger</code> ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ <code class=\"language-text\">org.springframework.cache.ehcache.EhCacheCacheManager</code> ê°€ ìˆëŠ”ë°, ì´ í´ë˜ìŠ¤ëŠ” Ehcache2 ë²„ì „ì— ì‚¬ìš©ë˜ëŠ” ê²ƒì´ë‹¤.\nì²˜ìŒì—ë„ ë§í–ˆë“¯ì´ Ehcache3ëŠ” JCacheì˜ í•œ ì¢…ë¥˜ë¡œ <code class=\"language-text\">JCacheCacheMangerë¡œ</code> ë“±ë¡í•´ì¤˜ì•¼í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CacheManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Caching</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CachingProvider</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>jcache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JCacheCacheManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathResource</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EhcacheConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"ehCacheManager\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span>CacheManager</span> <span class=\"token function\">cacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">CachingProvider</span> cachingProvider <span class=\"token operator\">=</span> <span class=\"token class-name\">Caching</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCachingProvider</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.ehcache.jsr107.EhcacheCachingProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">CacheManager</span> manager <span class=\"token operator\">=</span> cachingProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getCacheManager</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathResource</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/ehcache.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JCacheCacheManager</span><span class=\"token punctuation\">(</span>manager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìºì‹±ì„ ì ìš©í•  ë©”ì„œë“œì— @Cacheable ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheService</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Cacheable</span><span class=\"token punctuation\">(</span>cacheManager <span class=\"token operator\">=</span> <span class=\"token string\">\"ehCacheManager\"</span><span class=\"token punctuation\">,</span> cacheNames <span class=\"token operator\">=</span> <span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"findById = {}\"</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Cache ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë©”ì„œë“œ ì¸ìì¸ id ê°’ì„ keyë¡œ, return ê°’ì„ valueë¡œ ê²°ê³¼ë¥¼ ìºì‹±í•œë‹¤.\n@Cacheableì€ ë‹¤ìŒ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>value / cacheName : ë©”ì„œë“œ ì‹¤í–‰ ê²°ê³¼ê°€ ì €ì¥ë  ìºì‹œì˜ ì´ë¦„ì…ë‹ˆë‹¤.</li>\n<li>key : SpEL(Spring Expression Language) ë¡œ ìºì‹œ í•­ëª©ì˜ í‚¤ì…ë‹ˆë‹¤ . ë§¤ê°œë³€ìˆ˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ë©”ì„œë“œ ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•´ í‚¤ê°€ ìƒì„±ë©ë‹ˆë‹¤.</li>\n<li>keyGenerator : KeyGenerator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©ì ì •ì˜ ìºì‹œ í‚¤ ìƒì„±ì„ í—ˆìš©í•˜ëŠ” Beanì˜ ì´ë¦„ì…ë‹ˆë‹¤.</li>\n<li>condition : ê²°ê³¼ë¥¼ ìºì‹œí•  ì‹œê¸°ë¥¼ ì§€ì •í•˜ëŠ” SpEL(Spring Expression Language)ë¡œì„œì˜ ì¡°ê±´ì…ë‹ˆë‹¤.</li>\n<li>unless : ê²°ê³¼ë¥¼ ìºì‹œí•˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ê²½ìš°ë¥¼ ì§€ì •í•˜ëŠ” SpEL(Spring Expression Language)ë¡œì„œì˜ ì¡°ê±´ì…ë‹ˆë‹¤.</li>\n</ul>\n<p>ìŠ¤í”„ë§ì—ì„œëŠ” @Cacheable ë§ê³ ë„ @CacheEvict, @CachePut, @CacheConfig ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•œë‹¤.\nê¸°ë³¸ì ì¸ ë‚´ìš©ì€ @Cacheable ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šìœ¼ë¯€ë¡œ ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/cache.html\">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì.</p>\n<h2 id=\"JSR-107-ì–´ë…¸í…Œì´ì…˜-Spring-Cache-ì–´ë…¸í…Œì´ì…˜-ë¹„êµ\" style=\"position:relative;\">JSR 107 ì–´ë…¸í…Œì´ì…˜, Spring Cache ì–´ë…¸í…Œì´ì…˜ ë¹„êµ<a href=\"#JSR-107-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-Spring-Cache-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-%EB%B9%84%EA%B5%90\" aria-label=\"JSR 107 ì–´ë…¸í…Œì´ì…˜ Spring Cache ì–´ë…¸í…Œì´ì…˜ ë¹„êµ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<table>\n<thead>\n<tr>\n<th>JSR 107 / JCache Annotations</th>\n<th>Spring Cache Annotations</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@CacheResult</td>\n<td>@Cacheable</td>\n</tr>\n<tr>\n<td>@CacheRemove</td>\n<td>@CacheEvict</td>\n</tr>\n<tr>\n<td>@CacheRemoveAll</td>\n<td>@CacheEvict(allEntries=true)</td>\n</tr>\n<tr>\n<td>@CachePut</td>\n<td>@CachePut</td>\n</tr>\n<tr>\n<td>@CacheDefaults</td>\n<td>@CacheConfig</td>\n</tr>\n</tbody>\n</table>","fields":{"slug":"/ehcache3/"},"frontmatter":{"title":"Ehcache3 ìºì‹œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì†Œê°œ (with Spring Boot)","date":"July 24, 2023"}},{"id":"363e058f-b457-5794-afb5-05cb05480255","html":"<h2 id=\"N1-ì¿¼ë¦¬ëŠ”-ë¬´ì—‡ì„-ì˜ë§ˆí•˜ë‚˜\" style=\"position:relative;\">N+1 ì¿¼ë¦¬ëŠ” ë¬´ì—‡ì„ ì˜ë§ˆí•˜ë‚˜?<a href=\"#N1-%EC%BF%BC%EB%A6%AC%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%84-%EC%9D%98%EB%A7%88%ED%95%98%EB%82%98\" aria-label=\"N1 ì¿¼ë¦¬ëŠ” ë¬´ì—‡ì„ ì˜ë§ˆí•˜ë‚˜ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>JPAì˜ í•œê³„ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ì„œëŠ” N+1 ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ì›ì´ˆì ì¸ ì›ì¸ì— ëŒ€í•´ ì´í•´í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.<br>\nJPAë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ N+1 ì¿¼ë¦¬ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆëŠ”ë°, ê¸°ìˆ ì ì¸ ë°©ë²•ìœ¼ë¡œ N+1 ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ëŠ” ê²Œì‹œë¬¼ì€ ë§ì§€ë§Œ, ì™œ ì´ëŸ¬í•œ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ”ì§€ì— ëŒ€í•´ ì •í™•íˆ ì„¤ëª…í•˜ëŠ” ë¸”ë¡œê·¸ëŠ” ì°¾ê¸° ì–´ë µë‹¤.<br>\në³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” N+1 ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ ì„¤ëª…í•˜ê³ , ì´ë¡œ ì¸í•´ JPAê°€ ì„±ëŠ¥ìƒ í•œê³„ì— ë¶€ë”ªí ìˆ˜ë°–ì— ì—†ëŠ” ì´ìœ ì— ëŒ€í•´ ì„¤ëª…í•˜ë ¤ê³  í•œë‹¤.</p>\n<!-- more -->\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AUTO</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"team_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Team</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AUTO</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> teamName<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaTest</span><span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token class-name\">Nplus1</span>í…ŒìŠ¤íŠ¸<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> teams <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select team from Team team\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Team</span> team <span class=\"token operator\">:</span> teams<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tteam<span class=\"token punctuation\">.</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>member <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ team ì„ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬(1)ì™€ ê° team ë³„ë¡œ ìì‹ì¸ member ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬(N)ì´ ë‚˜ê°€, ê²°ê³¼ì ìœ¼ë¡œ N+1 ì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤.</p>\n<p>ì•„ë˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëŒë ¸ì„ ë•Œ, ë°ì´í„°ë² ì´ìŠ¤ë¡œ í˜¸ì¶œë˜ëŠ” SQLì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> team<span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (1ë²ˆ ì¿¼ë¦¬) --/</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> member <span class=\"token keyword\">where</span> member<span class=\"token punctuation\">.</span>team_id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (N ì¿¼ë¦¬) --/</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> member <span class=\"token keyword\">where</span> member<span class=\"token punctuation\">.</span>team_id <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (N ì¿¼ë¦¬) --/</span></code></pre></div>\n<p>ê°„ë‹¨í•œ ì´ìœ ë¡œ N+1 ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. memberì™€ join ì—†ì´ teamì— ëŒ€í•´ì„œë§Œ select ì¿¼ë¦¬ë¥¼ ë‚ ë ¸ê¸° ë•Œë¬¸ì´ë‹¤.\nì²˜ìŒì— (1ë²ˆ) ì¿¼ë¦¬ì—ì„œëŠ” Teamë§Œ ì¡°íšŒë˜ì—ˆê¸° ë•Œë¬¸ì—, ì—°ê´€ëœ í…Œì´ë¸”ì¸ memberë¥¼ ì°¾ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ ì¿¼ë¦¬ê°€ í•„ìš”í•˜ê²Œ ëœë‹¤. ì´ë¡œ ì¸í•´ ì¿¼ë¦¬ì˜ ìˆ˜ê°€ N+1ê°œê°€ ë˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>ì•„ë˜ëŠ” Native SQLë¡œ N+1 ì¿¼ë¦¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì½”ë“œë‹¤. (ì˜ˆì‹œ)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaTest</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">native_sql_Nplus1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> teams <span class=\"token operator\">=</span> jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM team\"</span><span class=\"token punctuation\">,</span> teamRowMapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Team</span> team <span class=\"token operator\">:</span> teams<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> member <span class=\"token operator\">=</span> jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM member WHERE member.team_id = \"</span> <span class=\"token operator\">+</span> team<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> memberRowMapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tmember<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>m <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N+1 ì¿¼ë¦¬ëŠ” JPA ì…ì¥ì—ì„œëŠ” ì—°ê´€ ê´€ê³„ ë§µí•‘ ì •ë³´ë¥¼ ë³´ê³  ê·¸ëŒ€ë¡œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. JPAëŠ” ê°ì²´ì§€í–¥ì ì¸ ê´€ì ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì—°ê´€ëœ ì—”í‹°í‹°ë“¤ì„ í•„ìš”ì— ë”°ë¼ ì¶”ê°€ë¡œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ë¯€ë¡œ, ì´ëŠ” JPAì˜ ê¸°ëŠ¥ì„ ì˜ ìˆ˜í–‰í•œ ê²ƒì´ë‹¤.\nê·¸ëŸ¬ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ì…ì¥ì—ì„œëŠ” Në²ˆì˜ í˜¸ì¶œë¡œ ì¸í•´ ë¹„íš¨ìœ¨ì ì¸ ì²˜ë¦¬ê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>\n<p>N+1 ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í¬ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.</p>\n<ul>\n<li>memberì™€ teamì„ joiní•˜ëŠ” ë°©ë²•.</li>\n<li>memberë¥¼ ì¡°íšŒí•  ë•Œ ì¤‘ë³µì„ ì œê±°í•œ teamì˜ id ê°’ë“¤ë¡œ batch INì ˆì„ ì‚¬ìš©í•´ í…Œì´ë¸” ê°ê°ì„ ì¡°íšŒ í›„, ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¡°ë¦½í•˜ëŠ” ë°©ë²•.</li>\n</ul>\n<p>JPAì—ì„œëŠ” N+1 ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ fetch join, EntityGraph, batch size ì¡°ì • ë“±ì˜ ë°©ë²•ì„ ì œê³µí•˜ì§€ë§Œ, ê²°êµ­ì€ ìœ„ì˜ ë‘ ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.\në˜í•œ, N+1 ì¿¼ë¦¬ëŠ” ì¡°íšŒë¿ë§Œ ì•„ë‹ˆë¼ UPDATE, DELETE ì¿¼ë¦¬ì—ì„œë„ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaTest</span><span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token class-name\">Nplus1</span>í…ŒìŠ¤íŠ¸<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> teams <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select team from Team team\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span> team <span class=\"token operator\">:</span> teams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t  team<span class=\"token punctuation\">.</span><span class=\"token function\">setTeamName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ABC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> team<span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (1ë²ˆ ì¿¼ë¦¬) --/</span>\n<span class=\"token keyword\">UPDATE</span> team <span class=\"token keyword\">SET</span> team<span class=\"token punctuation\">.</span>teamName <span class=\"token operator\">=</span> <span class=\"token string\">'ABC'</span> <span class=\"token keyword\">WHERE</span> team<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (N ì¿¼ë¦¬) --/</span>\n<span class=\"token keyword\">UPDATE</span> team <span class=\"token keyword\">SET</span> team<span class=\"token punctuation\">.</span>teamName <span class=\"token operator\">=</span> <span class=\"token string\">'ABC'</span> <span class=\"token keyword\">WHERE</span> team<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (N ì¿¼ë¦¬) --/</span>\n<span class=\"token keyword\">UPDATE</span> team <span class=\"token keyword\">SET</span> team<span class=\"token punctuation\">.</span>teamName <span class=\"token operator\">=</span> <span class=\"token string\">'ABC'</span> <span class=\"token keyword\">WHERE</span> team<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">/</span><span class=\"token comment\">-- (N ì¿¼ë¦¬) --/</span></code></pre></div>\n<p>ì´ëŸ° ê²½ìš°ì—ë„ ì¿¼ë¦¬ ìµœì í™”ê°€ í•„ìš”í•˜ë©°, ëª¨ë“  team ì„ ì¡°íšŒí•´ì„œ teamNameì„ 'ABC' ë¡œ ë°”ê¾¸ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> team <span class=\"token keyword\">SET</span> team<span class=\"token punctuation\">.</span>teamName <span class=\"token operator\">=</span> <span class=\"token string\">'ABC'</span></code></pre></div>\n<p>íŠ¹ì • team ë§Œ ì—…ë°ì´íŠ¸ í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ì„ ì“¸ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> team <span class=\"token keyword\">SET</span> team<span class=\"token punctuation\">.</span>teamName <span class=\"token operator\">=</span> <span class=\"token string\">'ABC'</span> <span class=\"token keyword\">WHERE</span> team<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ê´€ê³„í˜•-ë°ì´í„°ë² ì´ìŠ¤ëŠ”-ì§‘í•©ì´ë‹¤\" style=\"position:relative;\">ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì§‘í•©ì´ë‹¤<a href=\"#%EA%B4%80%EA%B3%84%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EB%8A%94-%EC%A7%91%ED%95%A9%EC%9D%B4%EB%8B%A4\" aria-label=\"ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì§‘í•©ì´ë‹¤ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ì•ì—ì„œ ë³¸ N+1 ì¿¼ë¦¬ì™€ ê·¸ê²ƒì„ íŠœë‹í•œ ì¿¼ë¦¬ì˜ ë°©ì‹ì— ì°¨ì´ì ì´ ë³´ì´ëŠ”ê°€?\nê´€ê³„í˜• ë°ì´í„° ëª¨ë¸ì€ ìˆ˜í•™ì˜ ì§‘í•©ë¡ ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ë¡œ, ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„° ì—°ì‚°ì€ ì§‘í•©ì  ì—°ì‚°ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³  ì´ì— ìµœì í™”ë˜ì–´ ìˆë‹¤.\n(êµì§‘í•© ì—°ì‚° join, í•©ì§‘í•© ì—°ì‚° union, ë¶€ë¶„ì§‘í•© ì—°ì‚° select ë“±)<br>\nN+1 ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ê²°êµ­ ë‹¨ì¼ Elementì— ëŒ€í•œ ì—°ì‚°ì„ ì—¬ëŸ¬ ê°œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ í”¼í•˜ê³ , ëŒ€ì‹  ì§‘í•© ì—°ì‚°ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.\nê²°ê³¼ì ìœ¼ë¡œ, JPAê°€ ì„±ëŠ¥ìƒ í•œê³„ì— ë¶€ë”ªí ìˆ˜ ë°–ì— ì—†ëŠ” ì´ìœ ëŠ” JPAê°€ ì—”í‹°í‹° ì§‘í•©ì„ ë‹¤ë£¨ëŠ” ì—°ì‚°ì— í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>ë¬¼ë¡ , JPQLì„ ì‚¬ìš©í•˜ë©´ Native SQLì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì§‘í•©ì—°ì‚°ì„ í•  ìˆ˜ ìˆë‹¤.<br>\nUPDATE ë¬¸ì˜ N+1 ì¿¼ë¦¬ ì˜ˆì œì—ì„œ JPQLë¡œ updateë¬¸ì„ í†µí•´ teamNameì„ ì§‘í•©ì ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë¡œì§ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ì¼ ê²ƒ ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/*\nfinal var teams = em.createQuery(\"select team from Team team\", Team.class).getResultList();\n\nfor(Team team : teams){\n  team.setTeamName(\"ABC\");\n} */</span>\nteamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">renameAllTeams</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ABC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//renameAllTeams() ëŠ” JPQLë¡œ ì‘ì„±í•œ ì§‘í•©ì—°ì‚°ì´ë‹¤.</span></code></pre></div>\n<p>ì„±ëŠ¥ìƒì˜ ë¬¸ì œëŠ” í•´ê²°ë˜ì—ˆì§€ë§Œ, JPAë¡œ ê°ì²´ì§€í–¥ì ìœ¼ë¡œ ì‘ì„±í•œ ì›ë˜ì˜ ì½”ë“œê°€ ì‚¬ë¼ì§€ê³ ,\në°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì— ëŒ€í•œ íˆ¬ëª…ì„±ë„ ì‚¬ë¦¬ì§€ê²Œ ë˜ì—ˆë‹¤. ì´ëŠ” JPQLì„ í™œìš©í•œ ìµœì í™”ëœ ì¿¼ë¦¬ê°€ Native SQLê³¼ ê±°ì˜ ë™ì¼í•œ í˜•íƒœë¡œ ë³€í™˜ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.\në˜í•œ, ë¦¬íŒ©í† ë§ëœ ì½”ë“œëŠ” JPQLì„ ë„¤ì´í‹°ë¸Œ SQLë¡œ íŒŒì‹±í•˜ëŠ” ê³¼ì •ë§Œ ì¶”ê°€ëœ ê²ƒìœ¼ë¡œ, Native SQLì— ë¹„í•´ JPQLì´ ê°€ì§€ëŠ” ì¥ì ë„ ê±°ì˜ ì—†ë‹¤.</p>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê²°êµ­ JPAê°€ ì„±ëŠ¥ì  í•œê³„ëŠ” ì§‘í•© ì—°ì‚°ì— ëŒ€í•œ ì§€ì›ì´ ë¶€ì¡±í•˜ë‹¤ëŠ” ê²ƒìœ¼ë¡œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.\nìš°ë¦¬ê°€ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ JPA ì—°ê´€ê´€ê³„ì— ëŒ€í•œ ì •ë³´ë¥¼ ì •ì˜í•˜ì§€ë§Œ ì´ê²ƒì€ ë‹¨ì¼ ì—”í‹°í‹°ì— ëŒ€í•œ ë§µí•‘ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ê²ƒ ì´ë‹¤.\në”°ë¼ì„œ, JPAëŠ” ì—”í‹°í‹° ì§‘í•©ì„ ê°œë³„ ì—”í‹°í‹° ê°ê°ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ë°–ì— ì—†ê³ , ì´ëŸ¬í•œ ì‘ì—…ì€ ì§‘í•©ë¡ ì„ ë² ì´ìŠ¤ë¡œ í•œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ\nì²˜ë¦¬í•˜ê¸°ì—ëŠ” ëŠë¦´ ìˆ˜ ë°–ì— ì—†ëŠ” êµ¬ì¡°ê°€ ë‚˜ì˜¤ëŠ” ê²ƒ ì´ë‹¤.\nì˜¤íˆë ¤ JPAì˜ ë°©ì‹ì€ Key-value ê¸°ë°˜ ìŠ¤í† ë¦¬ì§€ì— ë” ì í•©í•œ ë°©ì‹ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.<br>\nì´ëŸ¬í•œ ë¬¸ì œì ì€ ê°ì²´ íŒ¨ëŸ¬ë‹¤ì„ê³¼ ê´€ê³„í˜• íŒ¨ëŸ¬ë‹¤ì„ ê°„ì— ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¼ê³  ë³¸ë‹¤.<br>\nì§€ê¸ˆ ê°œë°œí•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ëŠ” ì—”í‹°í‹°ì˜ ì§‘í•©ì  ì—°ì‚°ì„ ìš”í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ë§ì•„, JPA ê¸°ìˆ ì— ëŒ€í•œ ì˜ì‹¬ì´ ìˆì—ˆëŠ”ë°<br>\nì´ëŸ¬í•œ ORMì˜ í•œê³„ë¥¼ ì¸ì •í•˜ë©´ì„œ JPAì˜ ê°ì²´ì§€í–¥ì ì¸ ì¥ì ê³¼ Native SQL ì ‘ê·¼ ë°©ì‹ì„ ê· í˜•ìˆê²Œ ì“°ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>","fields":{"slug":"/jpa-slow-cause/"},"frontmatter":{"title":"JPAê°€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ëŠ” ì›ì´ˆì ì¸ ì´ìœ ","date":"July 21, 2023"}},{"id":"5ae46656-7d71-5b46-a454-516a563e6324","html":"<h2 id=\"Redis-Keyspace-Notifications\" style=\"position:relative;\">Redis Keyspace Notifications<a href=\"#Redis-Keyspace-Notifications\" aria-label=\"Redis Keyspace Notifications permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Redisì—ëŠ” í‚¤ ë° ê°’ì˜ ë³€ê²½ ì‚¬í•­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì‹ í•  ìˆ˜ ìˆëŠ” Pub/Sub ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.</p>\n<h2 id=\"Notifications-ìœ í˜•\" style=\"position:relative;\">Notifications ìœ í˜•<a href=\"#Notifications-%EC%9C%A0%ED%98%95\" aria-label=\"Notifications ìœ í˜• permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Redis ë°ì´í„° ê³µê°„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ëª¨ë“  ì‘ì—…ì— ëŒ€í•´ ë‹¤ìŒ ë‘ ê°€ì§€ ìœ í˜•ì˜ ì´ë²¤íŠ¸ê°€ ë°œìƒëœë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ í‚¤ë¥¼ ì‚­ì œí•˜ëŠ” ëª…ë ¹ì¸ <code class=\"language-text\">del myKey1</code> ì´ ì‹¤í–‰ë˜ë©´ RedisëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ëª…ë ¹ì´ íŠ¸ë¦¬ê±°ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"redis\"><pre class=\"language-redis\"><code class=\"language-redis\">PUBLISH __keyspace@0__:mykey1 del\nPUBLISH __keyevent@0__:del mykey1</code></pre></div>\n<p>ì²«ë²ˆì§¸ PUBLISH ëª…ë ¹ì€ Key ì¤‘ì‹¬ ì´ë²¤íŠ¸ë¡œ, <code class=\"language-text\">del</code>ì´ ì´ë²¤íŠ¸ì˜ ë©”ì‹œì§€ê³ \në‘ë²ˆì¨° PUBLISH ëª…ë ¹ì€ ëª…ë ¹ ì¤‘ì‹¬ ì´ë²¤íŠ¸ë¡œ, <code class=\"language-text\">myKey1</code>ì´ ì´ë²¤íŠ¸ì˜ ë©”ì‹œì§€ì´ë‹¤.\nSub í•˜ëŠ” ìª½ì—ì„œëŠ” Subscribe íŒ¨í„´ ë§¤ì¹­ì„ í†µí•´ì„œ ë‘ ê°€ì§€ ìœ í˜• ì¤‘ ê´€ì‹¬ìˆëŠ” ì´ë²¤íŠ¸ë§Œ ì„ íƒí•´ì„œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>\n<!-- more -->\n<h2 id=\"Redis-Keyspace-Notifications-ì„¤ì •\" style=\"position:relative;\">Redis Keyspace Notifications ì„¤ì •<a href=\"#Redis-Keyspace-Notifications-%EC%84%A4%EC%A0%95\" aria-label=\"Redis Keyspace Notifications ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ Keyspace Notificationsì€ ë¹„í™œì„±í™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, <code class=\"language-text\">redis.conf</code> ë˜ëŠ” <code class=\"language-text\">CONFIG SET</code> ëª…ë ¹ì–´ë¡œ <code class=\"language-text\">notify-keyspace-events</code> ì˜µì…˜ì„ í™œì„±í™” í•  ìˆ˜ ìˆë‹¤.\nì˜µì…˜ì—ëŠ” ë‹¤ìŒ ê°’ë“¤ì´ ìˆë‹¤.\nì´ë²¤íŠ¸ ì¢…ë¥˜</p>\n<ul>\n<li>K   Keyspace events, publish prefix \"<strong>keyspace@<db></strong>:\".</li>\n<li>E   Keyevent events, publish prefix \"<strong>keyevent@<db></strong>:\".</li>\n<li>g   ê³µí†µ ëª…ë ¹: del, expire, rename, ...</li>\n<li>$   ìŠ¤íŠ¸ë§(String) ëª…ë ¹</li>\n<li>l   ë¦¬ìŠ¤íŠ¸(List) ëª…ë ¹</li>\n<li>s   ì…‹(Set) ëª…ë ¹</li>\n<li>h   í•´ì‹œ(Hash) ëª…ë ¹</li>\n<li>z   ì†ŒíŠ¸ ì…‹(Sorted set) ëª…ë ¹</li>\n<li>x   ë§Œë£Œ(Expired) ì´ë²¤íŠ¸ (í‚¤ê°€ ë§Œë£Œë  ë•Œë§ˆë‹¤ ìƒì„±ë˜ëŠ” ì´ë²¤íŠ¸)</li>\n<li>e   í‡´ì¶œ(Evicted) ì´ë²¤íŠ¸ (ìµœëŒ€ë©”ëª¨ë¦¬ ì •ì±…ìœ¼ë¡œ í‚¤ê°€ ì‚­ì œë  ë•Œ ìƒì„±ë˜ëŠ” ì´ë²¤íŠ¸)</li>\n<li>A   ëª¨ë“  ì´ë²¤íŠ¸(g$lshzxe), \"AKE\"ë¡œ ì§€ì •í•˜ë©´ ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ë°›ëŠ”ë‹¤.</li>\n</ul>\n<p>ì—¬ê¸°ì„œ K ë˜ëŠ” EëŠ” í•„ìˆ˜ì ìœ¼ë¡œ ìˆì–´ì•¼ í•˜ë©°, ë‚˜ë¨¸ì§€ ê°’ë“¤ì€ ì„ íƒì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, ì–´ë–¤ Keyê°€ Expireë˜ëŠ”ì§€ë§Œ ìˆ˜ì‹ í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">notify-keyspace-events \"Kx\": í‚¤ ì´ë²¤íŠ¸ + ë§Œë£Œ ì´ë²¤íŠ¸ ë°œìƒ</code></pre></div>\n<p>Redis ëª…ë ¹ì— ë”°ë¥¸ ì´ë²¤íŠ¸ ì¢…ë¥˜ë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ <a href=\"https://redis.io/docs/manual/keyspace-notifications/\">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì.</p>\n<h2 id=\"ì„±ëŠ¥-ì¸¡ì •\" style=\"position:relative;\">ì„±ëŠ¥ ì¸¡ì •<a href=\"#%EC%84%B1%EB%8A%A5-%EC%B8%A1%EC%A0%95\" aria-label=\"ì„±ëŠ¥ ì¸¡ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>notify-keyspace-events ì˜µì…˜ì„ ëª¨ë‘ í™œì„±í™” í–ˆì„ë–„, ë¹„í™œì„±í™” í–ˆì„ ë•Œ ê°ê°€ redis-benchmark ë¥¼ í†µí•´ í¼ëª¨ë¨¼ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì.</p>\n<h3 id=\"notify-keyspace-events--ëª¨ë“ -ì´ë²¤íŠ¸-ë¹„í™œì„±í™”\" style=\"position:relative;\">notify-keyspace-events \"\" ëª¨ë“  ì´ë²¤íŠ¸ ë¹„í™œì„±í™”<a href=\"#notify-keyspace-events--%EB%AA%A8%EB%93%A0-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B9%84%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"notify keyspace events  ëª¨ë“  ì´ë²¤íŠ¸ ë¹„í™œì„±í™” permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># redis-cli config set notify-keyspace-events \"\"\n# redis-benchmark -q </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PING_INLINE: 3670.67 requests per second, p50=12.391 msec\nPING_MBULK: 3668.78 requests per second, p50=12.551 msec\nSET: 4601.72 requests per second, p50=9.087 msec\nGET: 4604.90 requests per second, p50=8.999 msec\nINCR: 4708.98 requests per second, p50=8.847 msec\nLPUSH: 4750.14 requests per second, p50=8.847 msec\nRPUSH: 4620.86 requests per second, p50=8.967 msec\nLPOP: 3531.82 requests per second, p50=13.231 msec\nRPOP: 3863.84 requests per second, p50=12.007 msec\nSADD: 4677.05 requests per second, p50=8.775 msec\nHSET: 4795.01 requests per second, p50=8.743 msec\nSPOP: 3689.49 requests per second, p50=12.087 msec\nZADD: 3968.57 requests per second, p50=10.575 msec\nZPOPMIN: 3116.62 requests per second, p50=15.095 msec\nLPUSH (needed to benchmark LRANGE): 3900.31 requests per second, p50=10.743 msec\nLRANGE_100 (first 100 elements): 4876.86 requests per second, p50=8.343 msec\nLRANGE_300 (first 300 elements): 3725.23 requests per second, p50=12.071 msec\nLRANGE_500 (first 500 elements): 2396.59 requests per second, p50=20.159 msec\nLRANGE_600 (first 600 elements): 2067.31 requests per second, p50=23.663 msec\nMSET (10 keys): 4288.53 requests per second, p50=9.711 msec</code></pre></div>\n<h3 id=\"notify-keyspace-events-AKE-ëª¨ë“ -ì´ë²¤íŠ¸-í™œì„±í™”\" style=\"position:relative;\">notify-keyspace-events AKE ëª¨ë“  ì´ë²¤íŠ¸ í™œì„±í™”<a href=\"#notify-keyspace-events-AKE-%EB%AA%A8%EB%93%A0-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"notify keyspace events AKE ëª¨ë“  ì´ë²¤íŠ¸ í™œì„±í™” permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># redis-cli config set notify-keyspace-events AKE\n# redis-benchmark -q </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PING_INLINE: 3299.57 requests per second, p50=14.319 msec\nPING_MBULK: 3115.85 requests per second, p50=15.039 msec\nSET: 3974.25 requests per second, p50=10.399 msec\nGET: 3828.19 requests per second, p50=10.959 msec\nINCR: 3869.07 requests per second, p50=10.791 msec\nLPUSH: 3835.24 requests per second, p50=11.095 msec\nRPUSH: 4118.96 requests per second, p50=10.247 msec\nLPOP: 3102.89 requests per second, p50=14.991 msec\nRPOP: 3178.03 requests per second, p50=14.895 msec\nSADD: 3834.94 requests per second, p50=10.983 msec\nHSET: 3825.41 requests per second, p50=11.111 msec\nSPOP: 3389.03 requests per second, p50=13.735 msec\nZADD: 3750.94 requests per second, p50=11.207 msec\nZPOPMIN: 3117.69 requests per second, p50=14.855 msec\nLPUSH (needed to benchmark LRANGE): 3835.68 requests per second, p50=11.103 msec\nLRANGE_100 (first 100 elements): 4953.68 requests per second, p50=8.247 msec\nLRANGE_300 (first 300 elements): 3687.04 requests per second, p50=12.079 msec\nLRANGE_500 (first 500 elements): 2410.28 requests per second, p50=20.191 msec\nLRANGE_600 (first 600 elements): 2059.44 requests per second, p50=23.647 msec\nMSET (10 keys): 4043.02 requests per second, p50=10.143 msec</code></pre></div>\n<p>p50 ì‘ë‹µì‹œê°„ì€ í° ì°¨ì´ê°€ ì—†ì§€ë§Œ ì´ˆë‹¹ request ì²˜ë¦¬ê°€ 100~500 ì •ë„ ì¤„ì–´ë“  ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.<br>\në”°ë¼ì„œ, ì´ë²¤íŠ¸ ìˆ˜ì‹ ì´ í•„ìš”ì—†ë‹¤ë©´ redisì˜ í•´ë‹¹ ì„¤ì •ì€ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì“°ëŠ”ë° ë„ì›€ì´ ë  ê²ƒ ì´ë‹¤.\nì˜µì…˜ì„ í™œì„±í™”í•˜ë”ë¼ë„ ê¼­ í•„ìš”í•œ ì´ë²¤íŠ¸ ìœ í˜• ì˜µì…˜ë§Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n<h2 id=\"ìŠ¤í”„ë§-ë¶€íŠ¸-ì„¤ì •\" style=\"position:relative;\">ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì •<a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%84%A4%EC%A0%95\" aria-label=\"ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">{</span>\n\n\n\t<span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"redisMessageTaskExecutor\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Executor</span> <span class=\"token function\">redisMessageTaskExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">ThreadPoolTaskExecutor</span> threadPoolTaskExecutor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolTaskExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tthreadPoolTaskExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">setCorePoolSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\t\tthreadPoolTaskExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> threadPoolTaskExecutor<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisMessageListenerContainer</span> <span class=\"token class-name\">RedisMessageListener</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> connectionFactory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RedisMessageListener</span> redisMessageListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">RedisMessageListenerContainer</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisMessageListenerContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontainer<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>connectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontainer<span class=\"token punctuation\">.</span><span class=\"token function\">addMessageListener</span><span class=\"token punctuation\">(</span>redisMessageListener<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PatternTopic</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontainer<span class=\"token punctuation\">.</span><span class=\"token function\">setTaskExecutor</span><span class=\"token punctuation\">(</span><span class=\"token function\">asyncThreadTaskExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> container<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> connectionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>connectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisMessageListener</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MessageListener</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CacheManager</span><span class=\"token punctuation\">></span></span> cacheManagerList<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onMessage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Message</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> pattern<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>RedisMessageListenerContainer ë¹ˆ ë“±ë¡ ì‹œ, ì£¼ì˜í•  ì ì€ setTaskExecutor() ë¡œ ìŠ¤ë ˆë“œí’€ì„ ì‚¬ìš©í•˜ëŠ” Executorë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤.<br>\nsetTaskExecutor()ë¡œ Executorë¥¼ ë“±ë¡í•˜ì§€ ì•Šìœ¼ë©´ RedisMessageListenerContainerëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ SimpleAsyncTaskExecutorê°€ ì‚¬ìš©ë˜ëŠ”ë°,\nSimpleAsyncTaskExecutor ëŠ” ì‚¬ìš©ë  ë•Œ ë§ˆë‹¤, ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ì„œ run() í•˜ê¸° ë•Œë¬¸ì— Redisì—ì„œ ì´ë²¤íŠ¸ê°€ ìˆ˜ì‹ ë  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œê°€ ë§Œë“¤ì–´ì§€ë¯€ë¡œ ì£¼ì˜í•˜ì.</p>","fields":{"slug":"/redis-event-notifications/"},"frontmatter":{"title":"Redis Keyspace Notificationsì— ëŒ€í•´ ì•Œì•„ë³´ì","date":"July 19, 2023"}},{"id":"c4729eb0-0698-5aa4-bbf6-361c15caac7d","html":"<h2 id=\"ë©”ëª¨ë¦¬-ê³„ì¸µ-êµ¬ì¡°\" style=\"position:relative;\">ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°<a href=\"#%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0\" aria-label=\"ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>ë©”ëª¨ë¦¬ë¥¼ í•„ìš”ì— ë”°ë¼ ì—¬ëŸ¬ ê°€ì§€ ì¢…ë¥˜ë¡œ ë‚˜ëˆ„ì–´ ë‘ ì„ ì˜ë¯¸í•œë‹¤.</li>\n<li>ì´ë–„ í•„ìš”í•œ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ëŠ” CPUê°€ ë©”ëª¨ë¦¬ì— ë” ë¹¨ë¦¬ ì ‘ê·¼í•˜ê¸° ìœ„í•¨ì´ë‹¤.</li>\n</ul>\n<h2 id=\"ìì£¼-ì“°ëŠ”-ë°ì´í„°ëŠ”-ê³„ì†-ìì£¼-ì“°ì¸ë‹¤\" style=\"position:relative;\">ìì£¼ ì“°ëŠ” ë°ì´í„°ëŠ” ê³„ì† ìì£¼ ì“°ì¸ë‹¤.<a href=\"#%EC%9E%90%EC%A3%BC-%EC%93%B0%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%8A%94-%EA%B3%84%EC%86%8D-%EC%9E%90%EC%A3%BC-%EC%93%B0%EC%9D%B8%EB%8B%A4\" aria-label=\"ìì£¼ ì“°ëŠ” ë°ì´í„°ëŠ” ê³„ì† ìì£¼ ì“°ì¸ë‹¤ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li>ìì£¼ ì“°ì´ëŠ” ë°ì´í„°ëŠ” ê³„ì† ìì£¼ ì“°ì´ê³ , ìì£¼ ì“°ì´ì§€ ì•ŠëŠ” ë°ì´í„°ëŠ” ê³„ì† ìì£¼ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>ìì£¼ ì“°ì´ìœ¼ëŠ” ë°ì´í„°ëŠ” ì „ì²´ ë°ì´í„° ì–‘ì— ë¹„í•´ ì‘ì€ ì–‘ì´ê¸° ë•Œë¬¸ì—, ìºì‹œëŠ” ë©”ëª¨ë¦¬ë³´ë‹¤ ë” ì‘ì•„ë„ ëœë‹¤.</li>\n<li>\n<p>ì»´í“¨í„° ê³¼í•™ì—ì„œ ì¦ëª…ëœ ë²•ì¹™ì´ë©°, ì§€ì—­ì„±ì˜ ì›ë¦¬ë¼ê³ ë„ í•œë‹¤.</p>\n<!-- more -->\n</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 544px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7a2aa3a1ba1c6459c34facd813e9e18/cfd82/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/0lEQVR42n2TW2sTYRCG+8tE8UCxiv4A8UbwEBUVDXqtKOitKP4CQZBSShtibSpKJNWQ1lYlBxJi0iZNk2zWTfeQPT5+36bZxEMdGGZndnjnnXdnp1qtFpVKhW63y8iCYBibqsNststcts3il5/Yrh/1KIqCZVn0+/0wuq4b1qfki3Q6Ta/X2wcL8PcBP1dtZp4UOfkwx7kX2+iDIALUdR3HcTBNM3weDAZDQFn0PA/btsM4tgDNMKj3dL5WGzRUHcu2+NMkmCH6IsDNzU2SySQbGxvhxJHtqFs8Ssd5kLrJvdeXuP/+Bs9XHxP4frSJNAn2G6BM6vV6yHCyUbM0kj8WWKjM82r9JYvVeT5svZPE/w8oBZXMpLijottT8ToKiHUD4Wp1G1SDQOnjtjt4e3q0yV+A+XyeRCJBoVDA0IeNOxevsHtsms6pM3w/eoLMoSNsTc/QPn2W1uHjdJ8+i87hnwzl6Yz0k4uYmQzm22WslRX6S8tsz85hpFKYIjfeLGGJ4QcynPxivpjoCc2l7JGLmqpp4aBxDXERB2hYLpdZX8vRbPVw1VWcwgXc0jXcYgyvFMP4dpnGx/NhPnKvdFWwjOE7igCzxensjQGbzSbZ7CfaHQ1Py2EXr+OU7wqP41biGPk77K7dwha5M+Fm8TaerYg/JMASx12r1dA0jV+sECg1E8gYagAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"\"\n        src=\"/static/b7a2aa3a1ba1c6459c34facd813e9e18/cfd82/img.png\"\n        srcset=\"/static/b7a2aa3a1ba1c6459c34facd813e9e18/e7570/img.png 170w,\n/static/b7a2aa3a1ba1c6459c34facd813e9e18/f46e7/img.png 340w,\n/static/b7a2aa3a1ba1c6459c34facd813e9e18/cfd82/img.png 544w\"\n        sizes=\"(max-width: 544px) 100vw, 544px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">img.png</figcaption>\n  </figure></p>\n<h2 id=\"Spring-Cacheë¡œ-ìºì‹œ-ê³„ì¸µ-êµ¬ì¡°-ì‚¬ìš©í•˜ê¸°\" style=\"position:relative;\">Spring Cacheë¡œ ìºì‹œ ê³„ì¸µ êµ¬ì¡° ì‚¬ìš©í•˜ê¸°<a href=\"#Spring-Cache%EB%A1%9C-%EC%BA%90%EC%8B%9C-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"Spring Cacheë¡œ ìºì‹œ ê³„ì¸µ êµ¬ì¡° ì‚¬ìš©í•˜ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Springì—ì„œëŠ” Cache ì¶”ìƒí™”ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ìºì‹œ ì†”ë£¨ì…˜ì„ ì¼ê´€ì„±ìˆê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.<br>\níŠ¸ëœì­ì…˜ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, AOPë¥¼ ì´ìš©í•´ íŠ¹ì • ìºì‹œ ê¸°ìˆ ì— ì¢…ì†¡ë˜ì§€ ì•Šê³  ìºì‹œ ê¸°ëŠ¥ì„ íˆ¬ëª…í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"CacheManager-êµ¬í˜„ì²´\" style=\"position:relative;\">CacheManager êµ¬í˜„ì²´<a href=\"#CacheManager-%EA%B5%AC%ED%98%84%EC%B2%B4\" aria-label=\"CacheManager êµ¬í˜„ì²´ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” CacheManager êµ¬í˜„ì²´ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.   </p>\n<ul>\n<li>CaffeineCacheManager</li>\n<li>CompositeCacheManager</li>\n<li>ConcurrentMapCacheManager</li>\n<li>JCacheCacheManager</li>\n<li>NoOpCacheManager</li>\n<li>SimpleCacheManager</li>\n</ul>\n<h3 id=\"ì˜ì¡´ì„±-ì¶”ê°€\" style=\"position:relative;\">ì˜ì¡´ì„± ì¶”ê°€<a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80\" aria-label=\"ì˜ì¡´ì„± ì¶”ê°€ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">implementation <span class=\"token string\">'org.springframework.boot:spring-boot-starter-cache'</span></code></pre></div>\n<h3 id=\"EnableCaching-ì¶”ê°€\" style=\"position:relative;\">@EnableCaching ì¶”ê°€<a href=\"#EnableCaching-%EC%B6%94%EA%B0%80\" aria-label=\"EnableCaching ì¶”ê°€ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>SpringBoot ì—ì„œ Cache ì¶”ìƒí™”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableCaching</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SpringCacheHierarchyApplication</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SpringCacheHierarchyApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"L1-L2-Cache-ì¶”ê°€\" style=\"position:relative;\">L1, L2 Cache ì¶”ê°€<a href=\"#L1-L2-Cache-%EC%B6%94%EA%B0%80\" aria-label=\"L1 L2 Cache ì¶”ê°€ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì—¬ê¸°ì„œëŠ” ìºì‹œ ê³„ì¸µ êµ¬ì¡°ê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ <code class=\"language-text\">SimpleCacheManager</code> ë¥¼ í™•ì¥í•˜ì—¬ ì‚¬ìš©í•œë‹¤.\në©”ëª¨ë¦¬ ìºì‹œì—ì„œ ë°ì´í„°ê°€ getì´ë‚˜ put ë  ë•Œ, ë¡œê·¸ë¥¼ ë‚¨ê¸°ë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.<br>\n<code class=\"language-text\">ConcurrentMapCache</code> ìºì‰¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ <code class=\"language-text\">ConcurrentMap</code> ì„ ì‚¬ìš©í•˜ì—¬ ìºì‹œë¥¼ ê´€ë¦¬í•˜ëŠ”ë° <code class=\"language-text\">ConcurrentMap</code> ì˜ capacityë¥¼ ê³ ì •í•˜ê¸° ì–´ë ¤ì›Œ\nput í•  ë•Œ ë§ˆë‹¤, <code class=\"language-text\">clear()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì˜€ë‹¤. capacityê°€ 1ì´ê³  FIFO ë°©ì‹ìœ¼ë¡œ êµì²´í•˜ëŠ” ìºì‹œë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">L1Cache</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ConcurrentMapCache</span> <span class=\"token punctuation\">{</span>\n\n\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L1 cache lookup key = {}\"</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L1 cache put = key:{}, value:{}\"</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>springcachehierarchy<span class=\"token punctuation\">.</span>cache</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Callable</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConcurrentMap</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span>extern<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Slf4j</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConcurrentMapCache</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SerializationDelegate</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">L2Cache</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ConcurrentMapCache</span> <span class=\"token punctuation\">{</span>\n\n\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L2 cache lookup key = {}\"</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L2 cache put = key:{}, value:{}\"</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"L1-L2-Cache-Bean-ë“±ë¡\" style=\"position:relative;\">L1, L2 Cache Bean ë“±ë¡<a href=\"#L1-L2-Cache-Bean-%EB%93%B1%EB%A1%9D\" aria-label=\"L1 L2 Cache Bean ë“±ë¡ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ìœ„ì—ì„œ ë§Œë“  L1, L2 Cache ë¥¼ <code class=\"language-text\">SimpleCacheManager</code>ì˜ êµ¬í˜„ì²´ë¡œ @Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheConfig</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token annotation punctuation\">@Primary</span>\n\t<span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"l1CacheManager\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">CacheManager</span> <span class=\"token function\">l1CacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> simpleCacheManager <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleCacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsimpleCacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">setCaches</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">L1Cache</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> simpleCacheManager<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"l2CacheManager\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">CacheManager</span> <span class=\"token function\">l2CacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> simpleCacheManager <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleCacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsimpleCacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">setCaches</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">L2Cache</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> simpleCacheManager<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"CacheService\" style=\"position:relative;\">CacheService<a href=\"#CacheService\" aria-label=\"CacheService permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheService</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Caching</span><span class=\"token punctuation\">(</span>cacheable <span class=\"token operator\">=</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token annotation punctuation\">@Cacheable</span><span class=\"token punctuation\">(</span>cacheManager <span class=\"token operator\">=</span> <span class=\"token string\">\"l1CacheManager\"</span><span class=\"token punctuation\">,</span> cacheNames <span class=\"token operator\">=</span> <span class=\"token string\">\"L1Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Cacheable</span><span class=\"token punctuation\">(</span>cacheManager <span class=\"token operator\">=</span> <span class=\"token string\">\"l2CacheManager\"</span><span class=\"token punctuation\">,</span> cacheNames <span class=\"token operator\">=</span> <span class=\"token string\">\"L2Cache\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"findById = {}\"</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@Caching</code> ì–´ë…¸í…Œì´ì…˜ì˜ <code class=\"language-text\">cacheable</code> í•„ë“œëŠ” <code class=\"language-text\">@Cacheable</code> ì–´ë…¸í…Œì´ì…˜ì˜ ë°°ì—´ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤.<br>\nì²«ë²ˆì§¸ <code class=\"language-text\">@Cacheable</code> ì–´ë…¸í…Œì´ì…˜ì˜ <code class=\"language-text\">cacheManager</code> ëŠ” <code class=\"language-text\">l1CacheManager</code> ë¡œ ì„¤ì •í•˜ê³ <br>\në‘ë²ˆì¨° <code class=\"language-text\">@Cacheable</code> ì–´ë…¸í…Œì´ì…˜ìœ <code class=\"language-text\">cacheManager</code> ëŠ” <code class=\"language-text\">l2CacheManager</code> ë¡œ ì„¤ì •í•œë‹¤.<br>\në‚´ê°€ ê¸°ëŒ€í•˜ëŠ” ê²ƒì€ <code class=\"language-text\">l1CacheManager</code> ì— key ê°’ì— ìºì‹œê°€ ì—†ë‹¤ë©´ <code class=\"language-text\">l2CacheManager</code> ë¡œ ê°’ì„ íƒìƒ‰í•˜ê³ ,<br>\n<code class=\"language-text\">l2CacheManager</code> ë„ ì—†ë‹¤ë©´ <code class=\"language-text\">findById</code> ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì´ë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ê²€ì¦ì„ í•´ë³´ì.</p>\n<h3 id=\"CacheService-ìºì‹œ-ê³„ì¸µ-êµ¬ì¡°-í…ŒìŠ¤íŠ¸\" style=\"position:relative;\">CacheService ìºì‹œ ê³„ì¸µ êµ¬ì¡° í…ŒìŠ¤íŠ¸<a href=\"#CacheService-%EC%BA%90%EC%8B%9C-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"CacheService ìºì‹œ ê³„ì¸µ êµ¬ì¡° í…ŒìŠ¤íŠ¸ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§œê³ , ë¡œê·¸ë¥¼ í†µí•´ ë™ì‘ì„ í™•ì¸í•´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheServiceTest</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Autowired</span> <span class=\"token class-name\">CacheService</span> cacheService<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token class-name\">CacheService_</span>ìºì‹œ_ë™ì‘_í…ŒìŠ¤íŠ¸<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> value1 <span class=\"token operator\">=</span> cacheService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value1 return\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> value2 <span class=\"token operator\">=</span> cacheService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value2 return\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> value3 <span class=\"token operator\">=</span> cacheService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value3 return\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> value4 <span class=\"token operator\">=</span> cacheService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value4 return\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> value5 <span class=\"token operator\">=</span> cacheService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value5 return\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-bottom: 16px;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a41b65a68adfc818763b423f16a01fb/02f69/log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42h2SS3PTQBCE9Ru4QCDEsS3LtlYr7UsPO7Ycx/EjdkKloAqSHIELBTlD8Wf4qR8TH1QrzXRrprs3ao3hsjBcOUeba5bWs/ZD7ur3rF2fWaZptWblvfSsYHIWRUEzGjEdp/JujrVqMMB0zohUOUWHBjuZo3xFVrbsblJ+fH3L7V3MsChJbYmpZxTyKFeRaEcnUdLzwqnpjXO6Y013qIh2znJjDYfg2RrNzgUe2pifH17ztDxnLdN3Jue2DEfMITg2hWY+iFllir3wVyplnsQs+l2irRQ2ImVfllwLceNKvswTnm9PeFycs8xyVmLF1jtesNemYKkzpiLxUinWssxSflz1eyzO3hGZckIhkp3IyUVyHloON2Oev59wfx+TmupYD9MW38zQriYTC2KRmBov3AkjbYmVwQ5HRDMx9SIvmBvLRMyfGce+Sfh8dcq66tGonIkEMxcVL5gXfJ0qbBwfzwsJKEhAZpDQxj3xULzZSoL7umbjRb5M/P3Y49/fV/z61GGRWUlbPJb+vq7YhSCyDdNhItLFc+GvipxaBlx0TomCbFTJ1EauSymbBkn16TDgz7c3fNx0Mak51ic+0DhPLTgnvqZxglX6+G3TjHF/wLDT5T9yGAKOhuGnIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"\"\n        src=\"/static/6a41b65a68adfc818763b423f16a01fb/ca1dc/log.png\"\n        srcset=\"/static/6a41b65a68adfc818763b423f16a01fb/e7570/log.png 170w,\n/static/6a41b65a68adfc818763b423f16a01fb/f46e7/log.png 340w,\n/static/6a41b65a68adfc818763b423f16a01fb/ca1dc/log.png 680w,\n/static/6a41b65a68adfc818763b423f16a01fb/02d09/log.png 1020w,\n/static/6a41b65a68adfc818763b423f16a01fb/9d567/log.png 1360w,\n/static/6a41b65a68adfc818763b423f16a01fb/02f69/log.png 1394w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">img.png</figcaption>\n  </figure></p>\n<ol>\n<li><code class=\"language-text\">findById (id:a)</code> í˜¸ì¶œ ì‹œ, L1, L2 ìºì‹œ ëª¨ë‘ Cache Miss ë¡œ ì„œë¹„ìŠ¤ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆë‹¤. ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³  L1, L2 ìºì‹œ ëª¨ë‘ í˜¸ì¶œ ê²°ê³¼ê°€ ìºì‹±ë˜ì—ˆë‹¤.</li>\n<li><code class=\"language-text\">findById (id:a)</code> í˜¸ì¶œ ì‹œ, L1 ìºì‹œì— id:a ì´ ìˆìœ¼ë¯€ë¡œ, Cache Hit ë˜ì—ˆë‹¤.</li>\n<li><code class=\"language-text\">findById (id:b)</code> í˜¸ì¶œ ì‹œ, id:2ê°€ L1, L2 ìºì‹œì— ì—†ìœ¼ë¯€ë¡œ ì„œë¹„ìŠ¤ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆë‹¤. ê²°ê³¼ê°€ ìºì‹±ë˜ê³ , L1 ìºì‹œëŠ” capacityê°€ 1ì´ë¯€ë¡œ id:b ê°€ ìºì‹±ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.</li>\n<li><code class=\"language-text\">findById (id:b)</code> í˜¸ì¶œ ì‹œ, L1 ìºì‹œì— id:b ì´ ìˆìœ¼ë¯€ë¡œ, Cache Hit ë˜ì—ˆë‹¤.</li>\n<li><code class=\"language-text\">findById (id:a)</code> í˜¸ì¶œ ì‹œ, L1 ìºì‹œì—ì„œ Cache Missë¡œ L2 ìºì‹œì—ì„œ Cache Hit ë˜ì—ˆë‹¤.</li>\n</ol>\n<p>ë¡œê·¸ë¥¼ í†µí•´ ë‚´ê°€ ì˜ë„í•œëŒ€ë¡œ ë™ì‘ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p>\n<h2 id=\"Local-Cache-ì™€-Redisë¡œ-L1-L2-ìºì‹œ-ê³„ì¸µ-êµ¬ì„±í•˜ê¸°\" style=\"position:relative;\">Local Cache ì™€ Redisë¡œ L1, L2 ìºì‹œ ê³„ì¸µ êµ¬ì„±í•˜ê¸°<a href=\"#Local-Cache-%EC%99%80-Redis%EB%A1%9C-L1-L2-%EC%BA%90%EC%8B%9C-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"Local Cache ì™€ Redisë¡œ L1 L2 ìºì‹œ ê³„ì¸µ êµ¬ì„±í•˜ê¸° permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>L1 ê³„ì¸µì˜ ìºì‹œëŠ” SimpleCacheManager ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê³ , L2 ê³„ì¸µì˜ ìºì‹œë¥¼ Redisë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•œë‹¤.\nì„œë²„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì—¬ëŸ¬ëŒ€ ì¸ ê²½ìš°, L1 ê³„ì¸µì¸ ë¡œì»¬ ìºì‹œì™€ L2 ê³„ì¸µì˜ Redis ìºì‹œê°€ ì¼ê´€ì„±ì´ êº ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ\nRedis pub/subì„ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ ìºì‹œì™€ Redis ìºì‹œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë„ë¡ í•œë‹¤.</p>\n<h3 id=\"Redis-ì„¤ì •\" style=\"position:relative;\">Redis ì„¤ì •<a href=\"#Redis-%EC%84%A4%EC%A0%95\" aria-label=\"Redis ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisMessageListenerContainer</span> <span class=\"token class-name\">RedisMessageListener</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> connectionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">RedisMessageListenerContainer</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisMessageListenerContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontainer<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>connectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontainer<span class=\"token punctuation\">.</span><span class=\"token function\">addMessageListener</span><span class=\"token punctuation\">(</span>redisMessageListener<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChannelTopic</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> container<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token annotation punctuation\">@Bean</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> connectionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>connectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"Redis-MessageListener-ì„¤ì •\" style=\"position:relative;\">Redis MessageListener ì„¤ì •<a href=\"#Redis-MessageListener-%EC%84%A4%EC%A0%95\" aria-label=\"Redis MessageListener ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisMessageListener</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MessageListener</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CacheManager</span><span class=\"token punctuation\">></span></span> cacheManagerList<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onMessage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Message</span> message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> pattern<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">final</span> <span class=\"token keyword\">var</span> evictKey <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">StandardCharsets</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UTF_8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">CacheManager</span> cacheManager <span class=\"token operator\">:</span> cacheManagerList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tcacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">getCache</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">evict</span><span class=\"token punctuation\">(</span>evictKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"Redis-CacheManager-ì„¤ì •\" style=\"position:relative;\">Redis CacheManager ì„¤ì •<a href=\"#Redis-CacheManager-%EC%84%A4%EC%A0%95\" aria-label=\"Redis CacheManager ì„¤ì • permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">RedisConnectionFactory</span> connectionFactory<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// l2RedisCacheManager bean ì¶”ê°€</span>\n\t<span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"l2RedisCacheManager\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">CacheManager</span> <span class=\"token function\">redisCacheManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">RedisCacheConfiguration</span> redisCacheConfiguration <span class=\"token operator\">=</span> <span class=\"token class-name\">RedisCacheConfiguration</span><span class=\"token punctuation\">.</span><span class=\"token function\">defaultCacheConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">serializeKeysWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializationContext<span class=\"token punctuation\">.</span>SerializationPair</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">serializeValuesWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializationContext<span class=\"token punctuation\">.</span>SerializationPair</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">RedisCacheManager<span class=\"token punctuation\">.</span>RedisCacheManagerBuilder</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">fromConnectionFactory</span><span class=\"token punctuation\">(</span>connectionFactory<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">cacheDefaults</span><span class=\"token punctuation\">(</span>redisCacheConfiguration<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"CacheService-Cacheable-ì„¤ì •ë³€ê²½\" style=\"position:relative;\">CacheService @Cacheable ì„¤ì •ë³€ê²½<a href=\"#CacheService-Cacheable-%EC%84%A4%EC%A0%95%EB%B3%80%EA%B2%BD\" aria-label=\"CacheService Cacheable ì„¤ì •ë³€ê²½ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheService</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Caching</span><span class=\"token punctuation\">(</span>cacheable <span class=\"token operator\">=</span>\n      <span class=\"token punctuation\">{</span>\n            <span class=\"token annotation punctuation\">@Cacheable</span><span class=\"token punctuation\">(</span>cacheManager <span class=\"token operator\">=</span> <span class=\"token string\">\"l1CacheManager\"</span><span class=\"token punctuation\">,</span> cacheNames <span class=\"token operator\">=</span> <span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Cacheable</span><span class=\"token punctuation\">(</span>cacheManager <span class=\"token operator\">=</span> <span class=\"token string\">\"l2RedisCacheManager\"</span><span class=\"token punctuation\">,</span> cacheNames <span class=\"token operator\">=</span> <span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"findById = {}\"</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•œ í›„, ì²«ë²ˆì¨° í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë‹¤ì‹œ ëŒë ¤ë³´ì.\nredisì— ì ‘ì†í•´ì„œ <code class=\"language-text\">keys *</code> ëª…ë ¹ì–´ë¡œ í™•ì¸í•´ë³´ë©´ <code class=\"language-text\">Cache::a</code>, <code class=\"language-text\">Cache::b</code> í‚¤ê°’ì´ ì˜ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p>Redis Pub/Sub ìœ¼ë¡œ ìºì‹œê°’ì´ evictë˜ë©´ ë¡œì»¬ìºì‹œì™€ redisìºì‹œì— ì˜ ë°˜ì˜ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ê²€ì¦í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheServiceTest</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token annotation punctuation\">@Autowired</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CacheManager</span><span class=\"token punctuation\">></span></span> cacheManagerList<span class=\"token punctuation\">;</span>\n\t<span class=\"token annotation punctuation\">@Autowired</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token annotation punctuation\">@Test</span>\n\t<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Reids Topicì— subscribeì´ ë°œìƒí•˜ë©´ í•´ë‹¹ í‚¤ê°€ l1, l2 ìºì‹œì—ì„œ evict ëœë‹¤\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> redis_pub_sub_cache_evict_í…ŒìŠ¤íŠ¸<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token comment\">// given</span>\n\t\t<span class=\"token keyword\">var</span> topic <span class=\"token operator\">=</span> <span class=\"token string\">\"Cache\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">var</span> key <span class=\"token operator\">=</span> <span class=\"token string\">\"key1\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">var</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"value1\"</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">CacheManager</span> cacheManager <span class=\"token operator\">:</span> cacheManagerList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tcacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">getCache</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertEquals</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> cacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">getCache</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">// when</span>\n\t\tredisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">convertAndSend</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ìºì‹œ ë¬´íš¨í™” ë©”ì‹œì§€ê°€ subscribe ë ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤</span>\n\n\t\t<span class=\"token comment\">// then</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">CacheManager</span> cacheManager <span class=\"token operator\">:</span> cacheManagerList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertNull</span><span class=\"token punctuation\">(</span>cacheManager<span class=\"token punctuation\">.</span><span class=\"token function\">getCache</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ì •ë¦¬\" style=\"position:relative;\">ì •ë¦¬<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ì—¬ê¸°ì„œëŠ” 2ì°¨ ìºì‹œì¸ redisì— ë°ì´í„°ê°€ ë³€ê²½ëœë‹¤ë©´ redis pub/subì„ key ê°’ì„ ì´ìš©í•´ì„œ ë³€ê²½ëœ ë°ì´í„°ë¥¼ ë¬´íš¨í™”í•˜ì˜€ë‹¤.\ní•„ìš”ì— ë”°ë¼ pub/sub ì‹œ key,valueë¥¼ í•œ ë©”ì‹œì§€ì— ë‹´ì•„ì„œ ë³´ë‚´ì„œ ìºì‹œê°€ ìƒˆ ê°’ìœ¼ë¡œ êµì²´ë˜ëŠ” ì •ì±…ì„ ì ìš©í•  ìˆ˜ ë„ ìˆë‹¤.<br>\nRedisì— ëŒ€ëŸ‰ì˜ ë°ì´í„°ê°€ ì ì¬ë˜ì–´ ë¡œì»¬ ìºì‹œì— ëª¨ë‘ ë‹´ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° ë˜ëŠ” ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ë©”ëª¨ë¦¬ë¥¼ ì„¸ì‹¬í•˜ê²Œ ê´€ë¦¬í•´ì•¼ ë˜ëŠ” ê²½ìš°\nEhcache ê°™ì€ ìºì‹œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ Redisë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ì„œ ë‚®ì€ ë ˆì´í„´ì‹œë¥¼ ìœ ì§€í•˜ë©´ì„œë„ ë©”ëª¨ë¦¬ ê´€ë¦¬ë„ íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆì„ ê²ƒ ì´ë‹¤.\në‹¤ë§Œ, ìºì‹œ ê°’ì´ ë³€ê²½ë˜ë©´ ìºì‹œ ì¼ê´€ì„±ì„ ìœ„í•´ ê° ê³„ì¸µì— ë™ê¸°í™”í•˜ëŠ” ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ë¯€ë¡œ, ìì£¼ ë³€í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¡œ ìºì‹œ ê³„ì¸µì„ êµ¬ì„±í•´ì•¼ í•œë‹¤.</p>","fields":{"slug":"/spring-cache-hierarchy/"},"frontmatter":{"title":"Spring Cache ë¡œ ìºì‹œ ê³„ì¸µ êµ¬ì¡° ì‚¬ìš©í•˜ê¸°","date":"July 16, 2023"}}]}},"pageContext":{"id":"4afa5d86-ed15-50b5-93d9-a68aad9c6661","series":null,"tags":[],"previousPostId":"5915669d-aefc-5d66-bb50-8fece02e6f6b","nextPostId":"562d0f59-66f1-562f-af93-d4b36fd53d1b"}},"staticQueryHashes":[],"slicesMap":{}}